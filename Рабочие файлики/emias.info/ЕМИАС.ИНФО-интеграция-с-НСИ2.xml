<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="fbe1d352-0fab-4dd6-a6c7-9a19f3833ed8" activeEnvironment="Default" name="ЕМИАС.ИНФО интеграция с НСИ2" resourceRoot="" soapui-version="5.7.2" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" id="8ce47c00-2817-42b7-822e-da479c3f4122" wsaVersion="NONE" name="publicationServiceBinding" type="wsdl" bindingName="{http://emias.mos.ru/nsiProductPublication/publicationService/v1/}publicationServiceBinding" soapVersion="1_2" anonymous="optional" definition="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?wsdl"><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="publicationService" targetNamespace="http://emias.mos.ru/nsiProductPublication/publicationService/v1/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:ns1="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/" xmlns:nsf="http://emias.mos.ru/system/v1/faults/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702" xmlns:tns="http://emias.mos.ru/nsiProductPublication/publicationService/v1/" xmlns:uctx="http://emias.mos.ru/system/v1/userContext/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
    <xs:schema>
      <xs:import namespace="http://emias.mos.ru/system/v1/userContext/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepdWiJ5KblM90N_eqy0_wi_09hg9xP4ibUCW_cc0Myu"/>
      <xs:import namespace="http://emias.mos.ru/system/v1/faults/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepOSDJnHqUM.1VjUrLsAUv4VYLPcSaOP9nDgQ--"/>
      <xs:import namespace="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELu.TBeuk85Yvi3WmjZyj1adJXS5kBPhS9kRrZ.Gt.AX_CmQohEVarqkQXhkcHKUGmB_z3.v8fAHTiHnPIt6rT_qAyP0cpg--"/>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="fault">
    <wsdl:part element="nsf:fault" name="body"/>
  </wsdl:message>
  <wsdl:message name="userContext">
    <wsdl:part element="uctx:userContext" name="userContext"/>
  </wsdl:message>
  <wsdl:message name="getCatalogItemsInput">
    <wsdl:part element="ns1:getCatalogItemsRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getCatalogItemsOutput">
    <wsdl:part element="ns1:getCatalogItemsResponse" name="body"/>
  </wsdl:message>
  <!--<wsdl:message name="getCatalogItemsFeaturesInput">          <wsdl:part name="body" element="ns1:getCatalogItemsFeaturesRequest"/>      </wsdl:message>      <wsdl:message name="getCatalogItemsFeaturesOutput">          <wsdl:part name="body" element="ns1:getCatalogItemsFeaturesResponse"/>      </wsdl:message>-->
  <wsdl:message name="getCatalogChangesInput">
    <wsdl:part element="ns1:getCatalogChangesRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getCatalogChangesOutput">
    <wsdl:part element="ns1:getCatalogChangesResponse" name="body"/>
  </wsdl:message>
  <wsdl:message name="getObjectChangesInput">
    <wsdl:part element="ns1:getObjectChangesRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getObjectChangesOutput">
    <wsdl:part element="ns1:getObjectChangesResponse" name="body"/>
  </wsdl:message>
  <wsdl:message name="getCatalogListInput">
    <wsdl:part element="ns1:getCatalogListRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getCatalogListOutput">
    <wsdl:part element="ns1:getCatalogListResponse" name="body"/>
  </wsdl:message>
  <wsdl:message name="getCatalogCountInput">
    <wsdl:part element="ns1:getCatalogCountRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getCatalogCountOutput">
    <wsdl:part element="ns1:getCatalogCountResponse" name="body"/>
  </wsdl:message>
  <!--<wsdl:message name="catalogExportInput">          <wsdl:part name="body" element="ns1:catalogExportRequest"/>      </wsdl:message>      <wsdl:message name="catalogExportOutput">          <wsdl:part name="body" element="ns1:catalogExportResponse"/>      </wsdl:message>-->
  <wsdl:message name="getDictionaryItemInput">
    <wsdl:part element="ns1:getDictionaryItemRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getDictionaryItemOutput">
    <wsdl:part element="ns1:getDictionaryItemResponse" name="body"/>
  </wsdl:message>
  <wsdl:portType name="publicationServicePortType">
    <wsdl:operation name="getCatalogItems">
      <wsdl:input message="tns:getCatalogItemsInput"/>
      <wsdl:output message="tns:getCatalogItemsOutput"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <!--<wsdl:operation name="getCatalogItemsFeatures">              <wsdl:input message="tns:getCatalogItemsFeaturesInput"/>              <wsdl:output message="tns:getCatalogItemsFeaturesOutput"/>              <wsdl:fault name="fault" message="tns:fault"/>          </wsdl:operation>-->
    <wsdl:operation name="getCatalogChanges">
      <wsdl:input message="tns:getCatalogChangesInput"/>
      <wsdl:output message="tns:getCatalogChangesOutput"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="getObjectChanges">
      <wsdl:input message="tns:getObjectChangesInput"/>
      <wsdl:output message="tns:getObjectChangesOutput"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="getCatalogList">
      <wsdl:input message="tns:getCatalogListInput"/>
      <wsdl:output message="tns:getCatalogListOutput"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="getCatalogCount">
      <wsdl:input message="tns:getCatalogCountInput"/>
      <wsdl:output message="tns:getCatalogCountOutput"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <!--<wsdl:operation name="catalogExport">              <wsdl:input message="tns:catalogExportInput"/>              <wsdl:output message="tns:catalogExportOutput"/>              <wsdl:fault name="fault" message="tns:fault"/>          </wsdl:operation>-->
    <wsdl:operation name="getDictionaryItem">
      <wsdl:input message="tns:getDictionaryItemInput"/>
      <wsdl:output message="tns:getDictionaryItemOutput"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="publicationServiceBinding" type="tns:publicationServicePortType">
    <wsp:PolicyReference URI="#authPolicy"/>
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getCatalogItems">
      <soap:operation soapAction="getCatalogItems"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"/>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <!--<wsdl:operation name="getCatalogItemsFeatures">              <soap:operation soapAction="getCatalogItemsFeatures"/>              <wsdl:input>                  <soap:header message="tns:userContext" part="userContext" use="literal"/>                  <soap:body use="literal"/>              </wsdl:input>              <wsdl:output>                  <soap:body use="literal"/>              </wsdl:output>              <wsdl:fault name="fault">                  <soap:fault name="fault" use="literal"/>              </wsdl:fault>          </wsdl:operation>-->
    <wsdl:operation name="getCatalogChanges">
      <soap:operation soapAction="getCatalogChanges"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"/>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getObjectChanges">
      <soap:operation soapAction="getObjectChanges"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"/>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getCatalogList">
      <soap:operation soapAction="getCatalogList"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"/>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getCatalogCount">
      <soap:operation soapAction="getCatalogCount"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"/>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <!--<wsdl:operation name="catalogExport">              <soap:operation soapAction="catalogExport"/>              <wsdl:input>                  <soap:header message="tns:userContext" part="userContext" use="literal"/>                  <soap:body use="literal"/>              </wsdl:input>              <wsdl:output>                  <soap:body use="literal"/>              </wsdl:output>              <wsdl:fault name="fault">                  <soap:fault name="fault" use="literal"/>              </wsdl:fault>          </wsdl:operation>-->
    <wsdl:operation name="getDictionaryItem">
      <soap:operation soapAction="getDictionaryItem"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"/>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="publicationService">
    <wsdl:port binding="tns:publicationServiceBinding" name="publicationServicePort">
      <soap:address location="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService"/>
    </wsdl:port>
  </wsdl:service>
  <wsp:Policy wsu:Id="authPolicy">
    <sp:SupportingTokens>
      <wsp:Policy>
        <sp:UsernameToken sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
          <wsp:Policy>
            <sp:NoPassword/>
          </wsp:Policy>
        </sp:UsernameToken>
      </wsp:Policy>
    </sp:SupportingTokens>
  </wsp:Policy>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepdWiJ5KblM90N_eqy0_wi_09hg9xP4ibUCW_cc0Myu</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/system/v1/userContext/" xmlns="http://emias.mos.ru/system/v1/userContext/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepQWiOkC4oY7_nDmW6CAnGsJnTy"/>
  <xs:element name="userContext" type="UserContext">
    <xs:annotation>
      <xs:documentation>Контекст пользователя</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="UserContext">
    <xs:annotation>
      <xs:documentation>Контекст пользователя</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="systemName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Шифр системы-потребителя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Имя пользователя (логин)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userRoleId" type="ID">
        <xs:annotation>
          <xs:documentation>Идентификатор Роли пользователя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="isUserRoleSystemWide" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак "Общесистемная Роль пользователя"</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userRights">
        <xs:annotation>
          <xs:documentation>Коллекция Полномочий пользователя</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="userRightId" type="ID">
              <xs:annotation>
                <xs:documentation>ИД Полномочия пользователя</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="jobExecutionId" type="ID"/>
      <xs:element minOccurs="0" name="hostIp" type="xs:string">
        <xs:annotation>
          <xs:documentation>IP адрес хоста</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="hostName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Имя хоста</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepQWiOkC4oY7_nDmW6CAnGsJnTy</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <!--error message description-->
  <xs:complexType name="ErrorMessageCollection">
    <xs:annotation>
      <xs:documentation>Коллекция сообщений об ошибках</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="message" type="ErrorMessage">
        <xs:annotation>
          <xs:documentation>Сообщение об ошибке</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ErrorMessage">
    <xs:annotation>
      <xs:documentation>Сообщение об ошибке</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Message">
        <xs:sequence>
          <xs:element minOccurs="0" name="parameters">
            <xs:annotation>
              <xs:documentation>Коллекция параметров сообщения</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="unbounded" name="parameter" type="KeyValuePair">
                  <xs:annotation>
                    <xs:documentation>Параметр сообщения</xs:documentation>
                  </xs:annotation>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
          <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Сопутствующие сообщения об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="type" type="ErrorMessageTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип сообщения</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:simpleType name="ErrorMessageTypes">
    <xs:annotation>
      <xs:documentation>Тип сообщения об ошибке</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="ERROR">
        <xs:annotation>
          <xs:documentation>Ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="WARNING">
        <xs:annotation>
          <xs:documentation>Предупреждение (не блокирующая ошибка)</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="INFO">
        <xs:annotation>
          <xs:documentation>Информационное сообщение</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:long"/>
  </xs:simpleType>
  <xs:complexType name="KeyValuePair">
    <xs:annotation>
      <xs:documentation>Представляет тип "ключ/значение"</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="key" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Ключ</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="Message">
    <xs:annotation>
      <xs:documentation>Сообщение</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="code" type="xs:string">
        <xs:annotation>
          <xs:documentation>Код сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="message" type="xs:string">
        <xs:annotation>
          <xs:documentation>Текст сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepOSDJnHqUM.1VjUrLsAUv4VYLPcSaOP9nDgQ--</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/system/v1/faults/" xmlns="http://emias.mos.ru/system/v1/faults/" xmlns:uctx="http://emias.mos.ru/system/v1/userContext/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepQWiOkC4oY7_nDmW6CAnGsJnTy"/>
  <xs:import namespace="http://emias.mos.ru/system/v1/userContext/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepdWiJ5KblM90N_eqy0_wi_09hg9xP4ibUCW_cc0Myu"/>
  <!--faults-->
  <xs:element name="fault" type="BaseFault">
    <xs:annotation>
      <xs:documentation>Базовый тип ошибки</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="SecurityFault">
    <xs:annotation>
      <xs:documentation>Ошибка безопасности</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element ref="uctx:userContext"/>
          <xs:choice>
            <xs:element name="unauthorizedRequestSecurityException" type="UnauthorizedRequestSecurityException">
              <xs:annotation>
                <xs:documentation>Исключение безопасности типа UNAUTHORIZED_REQUEST_EXCEPTION</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="otherSecurityException" type="OtherSecurityException">
              <xs:annotation>
                <xs:documentation>Исключение безопасности типа OTHER_SECURITY_EXCEPTION</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:sequence>
        <xs:attribute fixed="SECURITY" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="BusinessFault">
    <xs:annotation>
      <xs:documentation>Бизнес ошибка</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Коллекция Сообщений об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="hasErrors" type="xs:boolean">
            <xs:annotation>
              <xs:documentation>Признак наличия ошибок в списке сообщений</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute fixed="BUSINESS" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="UnexpectedFault">
    <xs:annotation>
      <xs:documentation>Непредвиденная ошибка</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element name="version" type="xs:string">
            <xs:annotation>
              <xs:documentation>Версия продукта-сервиса</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="stackTrace">
            <xs:annotation>
              <xs:documentation>Стек вызова (последние 10  записей)</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="10" name="stackTraceRecord">
                  <xs:annotation>
                    <xs:documentation>Запись StackTrace</xs:documentation>
                  </xs:annotation>
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element name="declaringClass" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование класса, содержащего метод</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="methodName" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование метода</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="fileName" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование файла</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="lineNumber" type="xs:int">
                        <xs:annotation>
                          <xs:documentation>Номер строки кода</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
        <xs:attribute fixed="UNEXPECTED" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="BaseFault">
    <xs:annotation>
      <xs:documentation>Описание базового типа описания ошибки</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
  </xs:complexType>
  <!--security exceptions-->
  <xs:complexType name="UnauthorizedRequestSecurityException">
    <xs:annotation>
      <xs:documentation>Исключение безопасности типа UNAUTHORIZED_REQUEST_EXCEPTION</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="requiredRights">
        <xs:annotation>
          <xs:documentation>Перечень идентификаторов недостающих Полномочий пользователя</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" name="userRightId" type="ID">
              <xs:annotation>
                <xs:documentation>Идентификатор Полномочия пользователя</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute fixed="UNAUTHORIZED_REQUEST_EXCEPTION" name="type" type="SecurityExceptionTypes" use="required">
      <xs:annotation>
        <xs:documentation>Тип исключения безопасности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="OtherSecurityException">
    <xs:annotation>
      <xs:documentation>Исключение безопасности типа OTHER_SECURITY_EXCEPTION</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="message" type="Message">
        <xs:annotation>
          <xs:documentation>Сообщение</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute fixed="OTHER_SECURITY_EXCEPTION" name="type" type="SecurityExceptionTypes" use="required">
      <xs:annotation>
        <xs:documentation>Тип исключения безопасности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:simpleType name="SecurityExceptionTypes">
    <xs:annotation>
      <xs:documentation>Типы исключений безопасности</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="UNAUTHORIZED_REQUEST_EXCEPTION"/>
      <xs:enumeration value="OTHER_SECURITY_EXCEPTION"/>
    </xs:restriction>
  </xs:simpleType>
  <!--components-->
  <xs:simpleType name="FaultTypes">
    <xs:annotation>
      <xs:documentation>Тип ошибки</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="SECURITY">
        <xs:annotation>
          <xs:documentation>Непредвиденная ошибка приложения</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="BUSINESS">
        <xs:annotation>
          <xs:documentation>Бизнес ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="UNEXPECTED">
        <xs:annotation>
          <xs:documentation>Ошибка безопасности</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELu.TBeuk85Yvi3WmjZyj1adJXS5kBPhS9kRrZ.Gt.AX_CmQohEVarqkQXhkcHKUGmB_z3.v8fAHTiHnPIt6rT_qAyP0cpg--</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/" xmlns:core="http://emias.mos.ru/nsiProductPublication/core/v1/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import namespace="http://emias.mos.ru/nsiProductPublication/core/v1/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELu.TBeuk85Yvi3WmjZyj1adJXS5kBPhB7FRiIPT9ohTjAHwvUeGTg46m1fiXxYEBrnA-"/>
  <xs:element name="getCatalogItemsRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getCatalogItems</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1" name="limit" nillable="true" type="xs:int"/>
        <xs:element name="id" nillable="false" type="xs:int"/>
        <xs:element name="criteria" type="xs:string"/>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="projection" type="xs:string"/>
        <xs:element name="sorting" type="core:map"/>
        <xs:element name="useAntiProjection" type="xs:boolean"/>
        <xs:element name="includeDeleted" type="xs:boolean"/>
        <xs:element name="fetchGeodata" type="xs:boolean"/>
        <xs:element name="fetchGeodataCenter" type="xs:boolean"/>
        <xs:element name="paging" type="xs:boolean"/>
        <xs:element name="epoch" nillable="true" type="xs:string"/>
        <xs:element name="timestamp" nillable="true" type="xs:int"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogItemsResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getCatalogItems</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ehdCatalogItems" type="core:ehdCatalogItems"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogItemsFeaturesRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getCatalogItemsFeatures</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1" name="limit" nillable="true" type="xs:int"/>
        <xs:element name="id" nillable="false" type="xs:int"/>
        <xs:element name="criteria" type="xs:string"/>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="projection" type="xs:string"/>
        <xs:element name="sorting" type="core:map"/>
        <xs:element name="useAntiProjection" type="xs:boolean"/>
        <xs:element name="includeDeleted" type="xs:boolean"/>
        <xs:element name="paging" type="xs:boolean"/>
        <xs:element name="epoch" nillable="true" type="xs:string"/>
        <xs:element name="timestamp" nillable="true" type="xs:int"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogItemsFeaturesResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getCatalogItemsFeatures</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ehdCatalogItemsFeatures" type="core:ehdCatalogItemsFeatures"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogChangesRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getCatalogChanges</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1" name="limit" nillable="true" type="xs:int"/>
        <xs:element name="id" nillable="false" type="xs:int"/>
        <xs:element name="criteria" type="xs:string"/>
        <xs:element name="sorting" type="core:map"/>
        <xs:element name="from" nillable="false" type="xs:string"/>
        <xs:element name="until" nillable="false" type="xs:string"/>
        <xs:element name="state" nillable="false" type="xs:string"/>
        <xs:element name="fetchGeodata" type="xs:boolean"/>
        <xs:element name="paging" type="xs:boolean"/>
        <xs:element name="fetchGeodataCenter" type="xs:boolean"/>
        <xs:element name="includeDeleted" type="xs:boolean"/>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="projection" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogChangesResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getCatalogChanges</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ehdCatalogItems" type="core:ehdCatalogItems"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getObjectChangesRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getObjectChanges</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1" name="limit" nillable="true" type="xs:int"/>
        <xs:element name="id" nillable="false" type="xs:int"/>
        <xs:element name="catalog" nillable="false" type="xs:int"/>
        <xs:element name="criteria" type="xs:string"/>
        <xs:element name="from" nillable="false" type="xs:string"/>
        <xs:element name="until" nillable="false" type="xs:string"/>
        <xs:element name="state" nillable="false" type="xs:string"/>
        <xs:element name="fetchGeodata" type="xs:boolean"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getObjectChangesResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getObjectChanges</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ehdCatalogItems" type="core:ehdCatalogItems"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogListRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getCatalogList</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1" name="limit" nillable="true" type="xs:int"/>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="id" type="xs:int"/>
        <xs:element name="epoch" nillable="true" type="xs:string"/>
        <xs:element name="timestamp" nillable="true" type="xs:int"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogListResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getCatalogList</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ehdCatalogs" type="core:ehdCatalogs"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogCountRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getCatalogCount</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="id" type="xs:int"/>
        <xs:element name="criteria" type="xs:string"/>
        <xs:element name="includeDeleted" type="xs:boolean"/>
        <xs:element name="epoch" type="xs:string"/>
        <xs:element name="timestamp" type="xs:int"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogCountResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getCatalogCount</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ehdCatalogStats" type="core:ehdCatalogStats"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="catalogExportRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода catalogExport</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1000" name="limit" nillable="true" type="xs:int"/>
        <xs:element name="id" nillable="false" type="xs:int"/>
        <xs:element name="criteria" type="xs:string"/>
        <xs:element name="epoch" type="xs:string"/>
        <xs:element name="format" type="xs:string"/>
        <xs:element name="translate" type="xs:boolean"/>
        <xs:element name="file_id" nillable="true" type="core:intList"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="catalogExportResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода catalogExport</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="catalogExports" type="core:catalogExport"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getDictionaryItemRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getDictionaryItem</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1000" name="limit" nillable="true" type="xs:int"/>
        <xs:element name="id" nillable="false" type="xs:int"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getDictionaryItemResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getDictionaryItem</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="dictionaryItems" type="core:ehdDictionaryItems"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELu.TBeuk85Yvi3WmjZyj1adJXS5kBPhB7FRiIPT9ohTjAHwvUeGTg46m1fiXxYEBrnA-</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/nsiProductPublication/core/v1/" xmlns="http://emias.mos.ru/nsiProductPublication/core/v1/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlspE1mmTYjs_hxLdMW4ACdenh4SWCUHxsODNXDg--"/>
  <xs:complexType name="ehdCatalogs">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="list" type="ehdCatalog"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdCatalog">
    <xs:sequence>
      <xs:element name="id" nillable="true" type="xs:long"/>
      <xs:element name="name" type="xs:string"/>
      <xs:element name="fullName" type="xs:string"/>
      <xs:element name="technicalName" type="xs:string"/>
      <xs:element name="shortName" type="xs:string"/>
      <xs:element name="accountingObject" type="xs:string"/>
      <xs:element name="hasEnVersion" type="xs:boolean"/>
      <xs:element name="keywords" type="xs:string"/>
      <xs:element name="vid" type="xs:string"/>
      <xs:element name="type" type="xs:string"/>
      <xs:element name="kind" type="xs:string"/>
      <xs:element name="period" type="xs:string"/>
      <xs:element name="hasGeo" nillable="true" type="xs:boolean"/>
      <xs:element name="layerId" type="xs:string"/>
      <xs:element name="categories" type="xs:string"/>
      <xs:element name="OIV" type="xs:string"/>
      <xs:element name="oivList" type="xs:string"/>
      <xs:element name="description" type="xs:string"/>
      <xs:element name="CNT" type="xs:long"/>
      <xs:element name="permittedSystems" type="intList"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="fields" type="ehdCommonAttribute"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="systemFields" type="systemField"/>
      <xs:element name="fieldsEa" type="fieldEa"/>
      <xs:element name="responsiblePerson" type="responsiblPerson"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="nameVariants" type="nameVariant"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdCatalogStats">
    <xs:sequence>
      <xs:element name="response" nillable="true" type="xs:int"/>
      <xs:element name="lastUpdated" nillable="true" type="xs:string"/>
      <xs:element name="validDate" nillable="true" type="xs:string"/>
      <xs:element name="message" type="xs:string"/>
      <xs:element name="status" nillable="true" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdCommonAttribute">
    <xs:sequence>
      <xs:element name="id" type="xs:string"/>
      <xs:element name="columnId" type="xs:string"/>
      <xs:element name="name" type="xs:string"/>
      <xs:element name="enName" type="xs:string"/>
      <xs:element name="techName" type="xs:string"/>
      <xs:element name="groupName" type="xs:string"/>
      <xs:element name="typeName" type="xs:string"/>
      <xs:element name="type" type="xs:string"/>
      <xs:element name="isPk" nillable="true" type="xs:boolean"/>
      <xs:element name="isArray" nillable="true" type="xs:boolean"/>
      <xs:element name="system" nillable="true" type="xs:boolean"/>
      <xs:element name="hasTranslation" nillable="true" type="xs:boolean"/>
      <xs:element name="dictionaryId" nillable="true" type="xs:int"/>
      <xs:element name="catalogId" nillable="true" type="xs:int"/>
      <xs:element name="maxLength" type="xs:int"/>
      <xs:element name="systemField" type="xs:string"/>
      <xs:element name="permittedSystems" type="intList"/>
      <xs:element name="specification" type="ehdCatalog"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdException">
    <xs:sequence>
      <xs:element name="errorCode" type="xs:string"/>
      <xs:element name="errorText" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdCatalogItemsFeatures">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="featureList" type="ehdCatalogItemsFeature"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdCatalogItemsFeature">
    <xs:sequence>
      <xs:element name="geometry" type="xs:string"/>
      <xs:element maxOccurs="unbounded" ref="items"/>
      <xs:element name="type" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdCatalogItems">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" ref="items"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="items">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="itemAttribute"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="itemAttribute">
    <xs:complexType mixed="true">
      <xs:sequence>
        <xs:element maxOccurs="unbounded" minOccurs="0" ref="items"/>
        <xs:element maxOccurs="unbounded" minOccurs="0" ref="dicts"/>
      </xs:sequence>
      <xs:attribute name="name" type="xs:NCName" use="required"/>
    </xs:complexType>
  </xs:element>
  <xs:element name="dicts">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="dict"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="dict">
    <xs:complexType mixed="true">
      <xs:sequence></xs:sequence>
      <xs:attribute name="key" type="xs:NCName" use="required"/>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="systemField">
    <xs:sequence>
      <xs:element name="id" nillable="true" type="xs:int"/>
      <xs:element name="system" type="xs:string"/>
      <xs:element name="systemField" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="fieldEa">
    <xs:sequence>
      <xs:element name="id" nillable="true" type="xs:int"/>
      <xs:element name="RUBRICID" type="xs:string"/>
      <xs:element name="isLayerOpen" type="xs:int"/>
      <xs:element name="linkData" type="xs:string"/>
      <xs:element name="icoName" type="xs:string"/>
      <xs:element name="signDate" type="xs:string"/>
      <xs:element name="isUpdateWfs" type="xs:int"/>
      <xs:element name="isUpdateDb" type="xs:int"/>
      <xs:element name="guLink" type="xs:string"/>
      <xs:element name="typeObject" type="xs:string"/>
      <xs:element name="signFio" type="xs:string"/>
      <xs:element name="isUpdate" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="nameVariant">
    <xs:sequence>
      <xs:element name="technicalName" type="xs:string"/>
      <xs:element name="fullName" type="xs:string"/>
      <xs:element name="shortName" type="xs:string"/>
      <xs:element name="systemLogin" type="xs:string"/>
      <xs:element name="systemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="responsiblPerson">
    <xs:sequence>
      <xs:element name="phone" type="xs:string"/>
      <xs:element name="email" type="xs:string"/>
      <xs:element name="fio" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:simpleType name="intList">
    <xs:list itemType="xs:string"/>
  </xs:simpleType>
  <xs:element name="exportInfo">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="id" type="xs:string"/>
        <xs:element name="status" type="xs:string"/>
        <xs:element name="lastFileGeneration" type="xs:string"/>
        <xs:element name="size" type="xs:string"/>
      </xs:sequence>
      <xs:attribute name="format" type="xs:NCName" use="required"/>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="catalogExport">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" ref="exportInfo"/>
      <xs:element name="errors" nillable="true" type="xs:string"/>
      <xs:element name="structureVersion" nillable="true" type="xs:string"/>
      <xs:element name="createDate" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdDictionaryItems">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="list" type="ehdDictionaryItem"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdDictionaryItem">
    <xs:sequence>
      <xs:element name="key" type="xs:string"/>
      <xs:element name="prnt_key" type="xs:string"/>
      <xs:element name="value" type="xs:string"/>
      <xs:element name="value_en" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="map">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="item" type="mapType"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="mapType">
    <xs:sequence>
      <xs:element name="key" type="xs:string"/>
      <xs:element name="value" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlspE1mmTYjs_hxLdMW4ACdenh4SWCUHxsODNXDg--</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepQWiOkC4oY7_nDmW6CAnGsJnTy"/>
  <!--references-->
  <xs:element name="medicalOrganizationId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор Медицинской организации</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="medicalFacilityId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор Медицинского учреждения</xs:documentation>
    </xs:annotation>
  </xs:element>
  <!--async operation status-->
  <xs:element name="operationId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор операции</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="OperationExecutionStatus">
    <xs:annotation>
      <xs:documentation>Статус выполнения операции</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="isCompleted" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак окончания выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="completenessProgress" type="OperationCompletenessBase">
        <xs:annotation>
          <xs:documentation>Сведения о текущем статусе выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="hasSucceded" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак успешности выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
        <xs:annotation>
          <xs:documentation>Коллекция сообщений, порожденных в ходе выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="id" type="ID" use="required">
      <xs:annotation>
        <xs:documentation>Идентификатор операции</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType abstract="true" name="OperationCompletenessPercentage">
    <xs:annotation>
      <xs:documentation>Описание текущего статуса выполнения операции в процентах (0%-100%)</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="OperationCompletenessBase">
        <xs:sequence>
          <xs:element name="completenessStatus">
            <xs:annotation>
              <xs:documentation>Статус (0%-100%)</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:unsignedByte">
                <xs:minInclusive value="0"/>
                <xs:maxInclusive value="100"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="OperationCompletenessBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип для описания текущего статуса выполнения операции</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
  </xs:complexType>
  <!--calling methods' options-->
  <xs:element name="options" type="Options">
    <xs:annotation>
      <xs:documentation>Параметры вызова метода</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="Options">
    <xs:annotation>
      <xs:documentation>Набор именованных значений</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="entry" type="KeyValuePair">
        <xs:annotation>
          <xs:documentation>Именованное значение</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--pagination-->
  <xs:element name="pagingOptions" type="PagingOptions">
    <xs:annotation>
      <xs:documentation>Параметры пагинации</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType abstract="true" name="PagingResults">
    <xs:annotation>
      <xs:documentation>Список с пагинацией</xs:documentation>
    </xs:annotation>
    <xs:attribute name="pageNumber" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Номер страницы (zero-based)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageTotal" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Общее количество страниц</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageSize" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Размер страницы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="morePagesAvailable" type="xs:boolean" use="required">
      <xs:annotation>
        <xs:documentation>Флаг доступности других страниц с результатами для "постраничного листания" (true - если доступны еще страницы; false - иначе)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PagingOptions">
    <xs:annotation>
      <xs:documentation>Параметры пагинации</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
    <xs:attribute name="pageNumber" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Номер страницы (zero-based)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageSize" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Размер страницы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <!--base types-->
  <xs:complexType name="TimeInterval">
    <xs:annotation>
      <xs:documentation>Временной период (время)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="start" type="xs:time">
        <xs:annotation>
          <xs:documentation>Время начала интервала</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="end" type="xs:time">
        <xs:annotation>
          <xs:documentation>Время окончания интервала</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DatePeriod">
    <xs:annotation>
      <xs:documentation>Временной период (дата)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="start" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата начала периода</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="end" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата окончания периода</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint></con:endpoints><con:operation id="4856d1c5-c861-46f3-94b9-620c09e82877" isOneWay="false" action="getCatalogChanges" name="getCatalogChanges" bindingOperationName="getCatalogChanges" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="f834f76b-6b85-4937-b519-e228b25df738" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/" xmlns:v1="http://emias.mos.ru/nsiProductPublication/core/v1/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getCatalogChangesRequest>\r
         <typ:offset>0</typ:offset>\r
         <typ:limit>1</typ:limit>\r
         <typ:id>?</typ:id>\r
         <typ:criteria>?</typ:criteria>\r
         <typ:sorting>\r
            <!--Zero or more repetitions:-->\r
            <v1:item>\r
               <v1:key>?</v1:key>\r
               <v1:value>?</v1:value>\r
            </v1:item>\r
         </typ:sorting>\r
         <typ:from>?</typ:from>\r
         <typ:until>?</typ:until>\r
         <typ:state>?</typ:state>\r
         <typ:fetchGeodata>?</typ:fetchGeodata>\r
         <typ:paging>?</typ:paging>\r
         <typ:fetchGeodataCenter>?</typ:fetchGeodataCenter>\r
         <typ:includeDeleted>?</typ:includeDeleted>\r
         <!--Zero or more repetitions:-->\r
         <typ:projection>?</typ:projection>\r
      </typ:getCatalogChangesRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getCatalogChangesRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="07e9bf95-e6f2-451f-800c-99cb2705795d" isOneWay="false" action="getCatalogCount" name="getCatalogCount" bindingOperationName="getCatalogCount" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="897b2677-ad1b-40fc-98f2-342eee5c682e" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getCatalogCountRequest>\r
         <typ:id>?</typ:id>\r
         <typ:criteria>?</typ:criteria>\r
         <typ:includeDeleted>?</typ:includeDeleted>\r
         <typ:epoch>?</typ:epoch>\r
         <typ:timestamp>?</typ:timestamp>\r
      </typ:getCatalogCountRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getCatalogCountRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="280e5f2c-44ea-464b-82e9-587f3cc3d941" isOneWay="false" action="getCatalogItems" name="getCatalogItems" bindingOperationName="getCatalogItems" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="4160e1ba-756e-4b88-909b-dda4c273e0c9" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/" xmlns:v1="http://emias.mos.ru/nsiProductPublication/core/v1/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getCatalogItemsRequest>\r
         <typ:offset>0</typ:offset>\r
         <typ:limit>1</typ:limit>\r
         <typ:id>?</typ:id>\r
         <typ:criteria>?</typ:criteria>\r
         <!--Zero or more repetitions:-->\r
         <typ:projection>?</typ:projection>\r
         <typ:sorting>\r
            <!--Zero or more repetitions:-->\r
            <v1:item>\r
               <v1:key>?</v1:key>\r
               <v1:value>?</v1:value>\r
            </v1:item>\r
         </typ:sorting>\r
         <typ:useAntiProjection>?</typ:useAntiProjection>\r
         <typ:includeDeleted>?</typ:includeDeleted>\r
         <typ:fetchGeodata>?</typ:fetchGeodata>\r
         <typ:fetchGeodataCenter>?</typ:fetchGeodataCenter>\r
         <typ:paging>?</typ:paging>\r
         <typ:epoch>?</typ:epoch>\r
         <typ:timestamp>?</typ:timestamp>\r
      </typ:getCatalogItemsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getCatalogItemsRequest"/><con:wsrmConfig version="1.2"/></con:call><con:call id="15484862-cae3-47ef-ac46-6a484c0a14c1" name="Copy of Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-D7E3394BF3C67AE719146949158035083">
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getCatalogItemsRequest>
         <typ:id>2675</typ:id>
      </typ:getCatalogItemsRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getCatalogItemsRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="cca4d717-ea69-4ba1-b405-47d99774ba94" isOneWay="false" action="getCatalogList" name="getCatalogList" bindingOperationName="getCatalogList" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="de2f0337-1b2d-4fd8-b2e8-33a080482076" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-D7E3394BF3C67AE719146949158035083">
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getCatalogListRequest>
         <typ:offset>0</typ:offset>
         <typ:limit>1</typ:limit>
         <typ:id>2675</typ:id>
      </typ:getCatalogListRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getCatalogListRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="398b47df-00b8-466f-92fb-08498e0f7a7e" isOneWay="false" action="getDictionaryItem" name="getDictionaryItem" bindingOperationName="getDictionaryItem" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="5a324af9-4c2e-4193-8b31-acf18093cc8f" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getDictionaryItemRequest>\r
         <typ:offset>0</typ:offset>\r
         <typ:limit>1000</typ:limit>\r
         <typ:id>?</typ:id>\r
      </typ:getDictionaryItemRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getDictionaryItemRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="c9c5bc44-4fb0-484c-8cc5-1d4c08b5b27d" isOneWay="false" action="getObjectChanges" name="getObjectChanges" bindingOperationName="getObjectChanges" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="3330e59e-7d17-48c4-bc33-ba2686d26381" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getObjectChangesRequest>\r
         <typ:offset>0</typ:offset>\r
         <typ:limit>1</typ:limit>\r
         <typ:id>?</typ:id>\r
         <typ:catalog>?</typ:catalog>\r
         <typ:criteria>?</typ:criteria>\r
         <typ:from>?</typ:from>\r
         <typ:until>?</typ:until>\r
         <typ:state>?</typ:state>\r
         <typ:fetchGeodata>?</typ:fetchGeodata>\r
      </typ:getObjectChangesRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getObjectChangesRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:interface xsi:type="con:RestService" id="332a9ae8-910d-4395-ad62-6b4343622354" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://emiasinfo-application.test.emias.mos.ru" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://emiasinfo-application.test.emias.mos.ru</con:endpoint></con:endpoints><con:resource name="Push" path="/soap/push" id="a72fdf76-789c-4f0b-9d89-f9c9120d2cc7"><con:settings/><con:parameters/><con:method name="Push 1" id="8188c2eb-313a-4bbc-bab7-d026c2a008cb" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/><con:element xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">soapenv:Envelope</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">soapenv:Envelope</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">soapenv:Envelope</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">soapenv:Envelope</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/soap+xml;charset=UTF-8</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:soap="http://www.w3.org/2003/05/soap-envelope">soap:Envelope</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="Request 1" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://emiasinfo-application.test.emias.mos.ru</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">   <soapenv:Header>
         <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
           <wsse:UsernameToken>
               <wsse:Username>NSI2</wsse:Username>
           </wsse:UsernameToken>
        </wsse:Security>   </soapenv:Header>   <soapenv:Body>
<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
    <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_2675">
          <categories>
             <category idHier="" nameHier="">2675</category>
          </categories>
          <data action="ADDED"><attribute name="global_id" field_id="-1" type="NUMBER">
                <values><value>772</value>
                  </values></attribute><attribute name="system_object_id" field_id="-2" type="STRING">
                <values><value></value>
                  </values></attribute><attribute name="TITLE_MKB10" field_id="10877" type="STRING">
                <values><value>Острый инфаркт миокарда111</value>
                  </values></attribute><attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
                <values><value>Y117</value>
                  </values></attribute><attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
                <values><value>false</value>
                  </values></attribute><attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
                <values><value>1</value>
                  </values></attribute><attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
                <values><value>Инфаркт миокарда</value>
                  </values></attribute><attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
                <values><value>158396648</value>
                  </values></attribute><attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
                <values><value>false</value>
                  </values></attribute><attribute name="signature" field_id="-4" type="STRING">
                <values><value>1</value>
                  </values></attribute><attribute name="is_deleted" field_id="-7" type="NUMBER">
                <values><value>0</value>
                  </values></attribute>
                  </data>
       </catalog>
    </package>]]]]>><![CDATA[</in>
</ChangeElement>   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request><con:request name="2" id="a0abd69b-4a29-4618-af91-5093d5ca8801" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://emiasinfo-application.test.emias.mos.ru</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
		   <catalog name="catalog_2675">
				<categories>
					<category idHier="" nameHier="">2675</category>
				</categories>
				<data action="ADDED">
					<attribute name="global_id" field_id="-1" type="NUMBER">
						<values>
							<value>772</value>
						</values>
					</attribute>
					<attribute name="system_object_id" field_id="-2" type="STRING">
						<values>
							<value/>
						</values>
					</attribute>
					<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
					<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
						<values>
							<value>Y117</value>
						</values>
					</attribute>
					<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
						<values>
							<value>false</value>
						</values>
					</attribute>
					<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
						<values>
							<value>1</value>
						</values>
					</attribute>
					<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
						<values>
							<value>Инфаркт миокарда</value>
						</values>
					</attribute>
					<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
						<values>
							<value>158396648</value>
						</values>
					</attribute>
					<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
						<values>
							<value>false</value>
						</values>
					</attribute>
					<attribute name="signature" field_id="-4" type="STRING">
						<values>
							<value>1</value>
						</values>
					</attribute>
					<attribute name="IS_DELETED" field_id="-7" type="NUMBER">
						<values>
							<value>0</value>
						</values>
					</attribute>
				</data>
			</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="682c737e-8f8c-42aa-b6c1-67859d28be97" name="DISPANSERY_OBSERVATION_DIAGNOSIS(2675)"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="43180bb0-b59e-4d8b-ab7f-d62115656fab" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED и без атрибута архивности_ID292748" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="fa9dc466-8b44-414e-aff6-240bfeeb80b6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select min(id)-5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="a82581a6-58e2-463c-98c2-32fc37d6699d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="2e0dc61b-d1bc-466b-89e6-98ff9798f581"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB10}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="ef3d917c-ee00-43a1-9321-cfe5dc09f3ca"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="f09c6d37-b0b9-485f-9c1e-1a96da7d3a50"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426840</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="ca444347-fd90-4dbc-95cf-37dcee0f3b5d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED и с is_deleted=false_ID292880" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="5fcf2c4a-1e90-4363-876e-682146c9739c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select min(id)-5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="19ef4a30-e348-4689-b18a-e712de82cc85"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="d2440546-7d8d-4472-b815-245c11c351f0"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB10}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
							<values>
								<value>0</value>
							</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="efa2c4a8-5f21-4f5f-a899-78fa38a20fb5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="c705476d-1e44-4893-b814-8ae15020762d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426860</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="c642f789-be30-4334-9bc3-79afb6ef77a1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED и с is_deleted=true_ID292881" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="7f196734-f0c4-4980-9f0a-1ea998ec6ed2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select min(id)-5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="40258334-bbf7-4c6f-a5ae-7926c68ed403"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="1b0f481c-5c2d-40ac-84a7-21e5fc25608f"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB10}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="d162c97c-dad9-4581-9d45-ee4d5a23bb58"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="288e2957-0862-4a3f-b922-bf5196998fa1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426860</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="293d7afe-2c37-453c-90b6-6d38a92587c6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED и без атрибута архивности_ID292882" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="a73ff2e3-5f66-43f8-ab62-348d64052b2e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select min(id)-5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="629642e3-3930-4dff-b696-1a516d03bb4a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="2434ab53-91da-4867-a3c9-5ee105a1d26d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB10}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="698fee43-4231-495f-a93b-56b418fdeef4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="2c731774-4858-4658-9d2a-4037e66172b1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426860</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="44da45da-73a8-4424-a6ee-803a9d7eece7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED и с is_deleted=false_ID292883" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="4bfd2f80-da31-4bae-8239-f361c88a1e96"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select min(id)-5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="7f63538e-b97a-4fee-a504-e6d72cf83b51"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="8236435e-a551-4842-9503-ceeffbd28958"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB10}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
							<values>
								<value>0</value>
							</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="26d8a5fe-dc33-4737-80f5-c5f5bb9d7e3a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="50e02bb1-f016-4de4-8d01-19269abb8b7d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426860</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="f09d1ee1-1afd-4592-b579-dd835c962f19" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED и с is_deleted=true_ID292884" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="1fe28f67-115c-4252-8084-2235fd6db269"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select min(id)-5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="0ac930b4-4d17-4290-a98a-1e3ac4cdc88d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="fa7bab86-a758-445d-a6c6-99988b1ba454"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB10}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не создалась" id="07f64791-0492-4100-b92b-e4b43a94a10f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =0. Запись не создана."><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426860</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="7755a1fd-b780-400f-b678-9abe473db4cd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED и без атрибута архивности, в бд is_deleted=false_ID292885" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с is_deleted=false" id="4d00954a-a044-4985-a43f-3619abf307e5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', false, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="9ffe3384-898a-47a3-901f-240b55afcfd2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с is_deleted=false</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="191ac6f9-5b11-4f22-a74f-0f413cb677f1"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="8a05f5d3-12aa-4017-8767-a1eb35f200f4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB102}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="21add834-2451-4472-b8d3-70f2692b8321"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426860</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="f0293bad-2cff-4e21-8092-44f3e31196c9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED и без атрибута архивности, в бд is_deleted=true_ID292886" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с is_deleted=true" id="2c9bf38d-bb32-4b48-aab0-c5f8574470e9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
true, '${#TestCase#titleMKB10}', 
true, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="5e48255f-f88a-43ba-8132-45af4ef18351"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с is_deleted=true</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="9f304b88-6f3f-4498-9f56-ec2df940a56a"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="8cb34230-31dc-499c-a148-8bf638c8bb30"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB102}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="eb960c72-29ad-4be7-9f53-de60532c7979"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426840</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="6cd4f456-cc7f-49b1-9cbc-8ae0d6ef310d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED и is_deleted=false, в бд is_deleted=false_ID292887" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с is_deleted=false" id="756f3f5b-aa28-48ec-a212-64af001f9810"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
true, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', false, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="fdfcfad7-ce53-42bb-bc6d-0b8196be92ba"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с is_deleted=false</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="17e77951-ef0a-48a5-a7ee-d19068cf45f1"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="e2b24ad2-66d0-4986-b9f6-ae752ba52847"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10 соответствует переданному в пуше значению "><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB102}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="f4b55891-0392-4142-b6e7-f56d4f3ab0e8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426860</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="de5ebbad-896d-47f6-8a67-b427596f8a66" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED и is_deleted=false, в бд is_deleted=true_ID292888" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись" id="c23119ba-1cc5-49b8-987a-62f174873749"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
true, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="fc0ba542-5e5e-45ca-9759-7390465bd9fb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="ef9b98ce-0be6-44f0-98ab-73639854f6b7"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="b97aa70c-16ad-4821-a3d2-7cdbc74befcf"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10 соответствует переданному в пуше значению "><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB102}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="fc4bda09-ccc5-4e51-a921-202b96109b1d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426860</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="daeb0f4e-db72-4e39-baa3-2117975a6bcc" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED и is_deleted=true, в бд is_deleted=false_ID292889" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись" id="ac2f3c88-ac99-483c-859c-67aa7611a076"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="ea851392-ed5b-490e-91dd-a69445e47196"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="eb29d81a-5117-4509-a22b-f6cfc7f2c9bb"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="ab6ca03e-ecf9-40e5-8062-405468e8991e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10 соответствует переданному в пуше значению "><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB102}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="8a187392-53b9-409b-9ee3-4f9eadc064fc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426860</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="b5065327-ba9e-4a79-91a2-88ed4f505323" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED и is_deleted=true, в бд is_deleted=true_ID292890" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись" id="ca61b88b-4d04-41cf-803a-01966131db58"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="6e911273-1cc1-402e-8d4f-e548ac8826c4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="7377b58f-2303-44d7-89aa-d31404d5bc2a"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="4acd4b23-1975-41d5-9884-1b4b0e6f2f1a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10 соответствует переданному в пуше значению "><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB102}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="fa461827-f0d2-41f9-9ca4-fd646a59b18c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426860</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="11b7d25c-e65b-4807-9b0f-6869c34d9de1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED и без атрибута архивности, в бд is_deleted=false_ID292891" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с is_deleted=false" id="d911ef00-64d3-46e5-8b9b-9bc47634d550"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', false, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="cc4a0335-c1c7-42a3-82fe-75cda3d5579b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с is_deleted=false</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="49457656-7bd3-45ed-aeaf-60dd1be7cdd8"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="6c96c900-d179-46a9-a94f-93283bde7026"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB102}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="a106234f-64d4-4ac1-9939-1633d1a865db"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426860</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="46ef929c-4bf2-4ad2-8e11-500bbae14754" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED и без атрибута архивности, в бд is_deleted=true_ID292892" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с is_deleted=true" id="846eb0c0-f87d-481a-a90a-25b064e30839"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
true, '${#TestCase#titleMKB10}', 
true, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="a3ef0d1b-b315-4ca2-aee1-e5421909c971"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с is_deleted=true</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="f1916601-4144-49fd-b06f-e4a827d3eeab"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:2675 already deleted"><con:configuration><path>//*:out</path><content>ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:2675 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не изменилась" id="599200bc-d655-47e8-8df1-3e85e72ba178"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует значению записанному в БД на шаге 1 ТК"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=соответствует значению записанному в БД на шаге 1 ТК"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10соответствует значению записанному в БД на шаге 1 ТК"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует значению записанному в БД на шаге 1 ТК"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует значению записанному в БД на шаге 1 ТК"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAMсоответствует значению записанному в БД на шаге 1 ТК"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAMсоответствует значению записанному в БД на шаге 1 ТК"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=соответствует значению записанному в БД на шаге 1 ТК"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="6ac30e98-7572-4713-9be0-49e5ce91a9ae"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426810</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="13c5f551-58ea-4067-9abe-d0a9edc38e24" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED и is_deleted=false, в бд is_deleted=false_ID292893" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с is_deleted=false" id="65083a83-951e-4e48-950e-048401f09d06"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
true, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', false, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="91d206cf-3a87-472c-b725-420a02d0af31"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с is_deleted=false</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="5718a889-9cac-4343-8217-879a4afdf94a"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="c4c7cb18-f700-471c-ae49-40b8d2b3595f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10 соответствует переданному в пуше значению "><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB102}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="2eed1092-3f74-41a4-93a9-b0ec05d2ef41"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426855</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="7ad46e5e-cde9-4b83-8e09-8a6bf6599582" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED и is_deleted=false, в бд is_deleted=true_ID292894" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись" id="8b7af01e-4631-47c3-ac25-c51c34d8c7e1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
true, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="d5ad6a33-2bc6-497b-b4e6-e6e97e684f3f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="bf04d6ba-5eb5-464e-bae3-b09f559a4f21"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:2675 already deleted"><con:configuration><path>//*:out</path><content>ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:2675 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не изменилась" id="ba516b24-70a2-49c9-9135-57909f6ba209"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10 соответствует переданному в пуше значению "><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="f405ad58-ffdd-4355-a281-efe18f3c1e5c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426835</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="d3e05b5a-63cf-4dc4-b5aa-bbd44649ac2e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED и is_deleted=true, в бд is_deleted=false_ID292895" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись" id="625a85ce-ec8b-4193-b413-9fb0dda4d16f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="4cc1cf46-4f68-4cee-994d-e10af740b4e0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="2d87b1e3-08da-41f6-842a-ae559b24ef40"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись изменилась" id="a97a2e8c-b9b3-4578-8de1-d19c3d74bbf7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10 соответствует переданному в пуше значению "><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB102}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="4394abe4-1393-4571-87fa-596d983d36a3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426850</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="bdb8a361-0c66-4b53-8e6d-ab3899655731" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED и is_deleted=true, в бд is_deleted=true_ID292896" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись" id="90d8c08d-37b7-4305-adaf-033223528f0e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="1b997471-3e7e-4797-8a14-4063c18b132a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="e1e910fc-f9dc-4bb4-8b20-77069ef0ae20"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:2675 already deleted"><con:configuration><path>//*:out</path><content>ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:2675 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не изменилась" id="f1d58cd8-2b62-49b2-be51-30e6456c4af7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10 соответствует переданному в пуше значению "><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="62656079-2b14-4bf2-9d01-594ad37e796c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426830</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="3469e210-d658-4345-86ee-7b070341bf15" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и без атрибута архивности, в бд is_deleted=false_ID292897" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с is_deleted=false" id="f9e03acc-b9df-42c7-9428-a512db4d54e3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', false, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="b98199c6-25ba-486a-957f-9e078427d73e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с is_deleted=false</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="ef226944-042d-46ac-aa74-d6c08ad70188"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить что изменился только признак is_deleted" id="f9aad4ad-b006-4abc-bcb8-c7ef65ff384b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="fa3a2c9c-ed85-45b9-a920-5b7197f12bed"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426845</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="f10fed58-e8cb-421f-80fa-02d5838bfef8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и без атрибута архивности, в бд is_deleted=true_ID292898" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись" id="d8dca8a4-b622-4684-ab50-a6970eb9f840"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="40a6730c-57dc-4011-bd10-34cc38c591a1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="c9a40bf0-de69-4065-a9ac-64b0c92d2305"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить что изменился только признак is_deleted" id="682b46e5-6874-45cd-a7c6-d611a3ddea81"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="c0ab05c2-e773-4fc2-8553-680e9ef3d346"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426845</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="e3350617-5329-4350-8362-be3f82a045f2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=false, в бд is_deleted=false_ID292899" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись" id="1ebe5c7a-5a36-4e24-a67e-9ec06bc8713c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', false, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="9dc9b213-320f-4b34-ba20-a07e8fd202fe"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="f852f3e3-5809-4d6b-82bc-44ac0e8eaf5f"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить что изменился только признак is_deleted" id="112aa535-ab41-4a4b-929f-b27efb393e6a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="2c77efc4-c965-4d1c-a816-d30c143e46a6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426845</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="c08e6141-ca22-4244-a719-e8819668800f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=false, в бд is_deleted=true_ID292900" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись" id="6a5f60a3-8443-483a-8bc0-beba0e80697d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="c91a007f-8fc9-43e9-bb98-aa32193f06aa"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="91bc6db6-0389-40cd-8969-33329da10b81"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить что изменился только признак is_deleted" id="a3a2c858-627c-47bd-b8f5-cf8585e55dd8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="4e1d0944-9065-49bd-b489-80463730f422"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426845</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="185b34d2-dc33-4ee7-aac0-f92bb0c48a16" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=true, в бд is_deleted=false_ID292901" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись" id="fdf85394-6722-4878-b348-a6b9e743734e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', false, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="6f5b0868-42c6-4308-a473-8d18d5ede461"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="1eaa27cd-23a4-4343-a900-12978f7f952b"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить что изменился только признак is_deleted" id="1e1a1d32-8377-48c7-a770-900d25a60c35"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="4f7f7ac0-f70f-4074-8c5c-6d2f9101612f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426845</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="709850f1-b4c5-4fe9-907e-bdd861f7849f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=true, в бд is_deleted=true_ID292902" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись" id="eeae98bf-a923-42f3-81c0-1cfc09ac389a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_diagnosis_mkb10_pdn 
(id, code_mkb10, 
actual_mkb10, title_mkb10,
archived_dispensary_observation_diagnosis, id_dispensary_observation_program,
title_dispensary_observation_program, archived_dispensary_observation_program, is_deleted)
VALUES((select min(id)-5 from d_diagnosis_mkb10_pdn), '${#TestCase#code}',
false, '${#TestCase#titleMKB10}', 
false, '${#TestCase#idDOP}', 
'${#TestCase#titleDOP}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="d7c7d0a9-96db-487f-8456-c3f673c66c27"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись</con:sourceStep><con:sourcePath>//*:D_DIAGNOSIS_MKB10_PDN.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="46bbea35-a585-473f-9954-19f36c92c6f6"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB102}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP2}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP2}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>true</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить что изменился только признак is_deleted" id="943cc408-e48b-4e86-9e8b-dfbd05da9677"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="82dccacb-1b5f-47f1-ba8b-b150db0fd6ec"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426845</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда2</con:value></con:property><con:property><con:name>titleMKB102</con:name><con:value>Острый инфаркт миокарда1112</con:value></con:property><con:property><con:name>code2</con:name><con:value>Y1172</con:value></con:property><con:property><con:name>idDOP2</con:name><con:value>1583966482</con:value></con:property><con:property><con:name>titleDOP2</con:name><con:value>Инфаркт миокарда2</con:value></con:property></con:properties></con:testCase><con:testCase id="cf9d3d6f-62b1-4b42-86fd-c0428a6e5d75" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED для несуществующей в бд записи_ID292903" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="30ce9c3d-9599-43f4-816d-bdf41505ee8c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select min(id)-5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="eed1fb32-0629-47a0-b77f-5fc20eb08c50"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="8aba43db-111d-4adf-84d1-49895415dff5"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB10}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не создалась" id="b612a997-fe12-47dc-bff3-7589516fd857"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="4ff3a79d-cd75-464c-bb9d-1d4e78f9d249" name="В результате запроса нет записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="330a6352-fc15-4ae8-bf9a-f1ef86382e31" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158426845</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="6edcffd3-809f-4aed-9089-b8c5b5ee026d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута global_id_ID292906" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="790ab71a-829f-4a01-bc27-fdab692676e1" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select min(id)-5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="2aa4ac6e-be20-48b3-a992-b5b6bead0773" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="66c69e31-6ef7-4148-b75a-8c238b6145b7"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB10}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="e655af22-0d90-4f44-91bf-30536f8a77f2" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="dcae6019-3268-4e84-bf2f-8fb23f5cd240" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158427040</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="747f1ce3-8d69-4446-b58f-cb317d5fa29b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым global_id_ID292907" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="86a3c525-705a-4c30-932d-872ebc8d4feb" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select min(id)-5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="e77c9622-5539-4a59-8bc8-4ffba06b3715" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="7eced4d4-b7c0-4683-92df-47267aab23ec"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB10}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id:  у обязательного атрибута: id передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш 2" id="bc388133-b8f7-44eb-9c03-27be76d0ee9c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш 2" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value></value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB10}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id:  у обязательного атрибута: id передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="1dd054fe-17f7-4846-845d-ac2abaa261f3" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="22a4cc51-0c7f-4b07-87e1-d1244a567464" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158427040</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="d867f7db-77e9-4138-9a4c-a7ccea85fd02" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и global_id некорректного типа_ID292908" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="c18feee8-3699-4bd6-ba74-c5f4befcae9a" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select min(id)-5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="22f4c87f-ed82-43d3-a8cd-f84f35536b65" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="eecd72b9-08d7-45f0-9b6b-edcc97921ddb"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>в</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#titleMKB10}</value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: в переданы значения, не соответствующие типам атрибутов: id</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="2270f68c-3560-4c89-8c38-6903387c0517" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_MKB10 соответствует переданному в пуше значению CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.CODE_MKB10</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ACTUAL_MKB10=true"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ACTUAL_MKB10</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_MKB10 соответствует переданному в пуше значению TITLE_MKB10"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_MKB10</path><content>${#TestCase#titleMKB10}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_DIAGNOSIS</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name=".ID_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению .ID_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ID_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#idDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TITLE_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению TITLE_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.TITLE_DISPENSARY_OBSERVATION_PROGRAM</path><content>${#TestCase#titleDOP}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM соответствует переданному в пуше значению ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.ARCHIVED_DISPENSARY_OBSERVATION_PROGRAM</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED=false"><con:configuration><path>//*:D_DIAGNOSIS_MKB10_PDN.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="af5f5d0f-0a4a-4ac9-baea-8be2593669ff" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158427040</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="c8b5fe0b-e159-4cee-82dd-745dc8e9573a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута TITLE_MKB10_ID292909" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="97e8ffac-f5db-4854-91e5-9dd0116786a0"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: TITLE_MKB10</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="619211b0-05b4-4aea-b6c6-59e9d110add3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1230</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="9593e6ad-a0d6-4f24-b258-c2687cdd1e2b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и пустым TITLE_MKB10_ID292910" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="5bf9ec2b-93ba-4916-9bdb-c4ffd6fe7beb"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value></value>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: titleMkb10 передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="6dec8906-7426-4351-93c9-193fd94cd0c1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш2" id="16a71792-27db-4b4b-9207-1f159c5aff4d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш2" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: titleMkb10 передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи2" id="5128773a-e3a3-48cf-a990-e1e3e3443c45"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1231</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="3560e9e1-123f-4ccb-9d44-ab47d394b98d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS_ID292911" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="cf29b89c-5ff5-419a-a048-56d4e40f242f"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS2" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="f33686ea-20d1-4e79-9035-546f64b66338"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1232</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="c39e7420-c641-42bc-8cf3-0e225d77a920" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и пустым CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS_ID292912" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="050b81bf-894a-4eed-9ec4-ff9d9c73eab3"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value></value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: codeMkb10 передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="338d51a9-dd3d-4966-9626-cc981232a853"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш2" id="c2641ea8-0098-40a5-b9fd-16b00d547edd"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш2" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: codeMkb10 передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи2" id="a6fb2424-f720-455e-b85c-a621cd2231de"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1233</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="5b5d8e36-1a3c-4ff3-8d28-2552c3300c7a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS_ID292913" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="4a289674-b31d-4ed2-a8e8-e8fe9b4ffb41"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS2" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="538ca6ee-6fb9-45ec-ae91-575f02f83b1e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1234</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="c67935ca-ee92-483e-9d1e-ef52b4759d84" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и пустым ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS_ID292914" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="9410189d-9340-47e7-98d2-c332ca6b3b3a"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value></value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: archivedDispensaryObservationDiagnosis передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="bd339052-d89f-4547-9176-8155d8bc900c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш2" id="f70da2cd-1218-42cd-aaa6-d0c63d4c31bf"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш2" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: archivedDispensaryObservationDiagnosis передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи2" id="f92f14c2-6b9b-40ca-8a2b-f5f658930571"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1235</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="44e2b805-bea7-419e-b5e8-926238875110" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута ACTUAL_MKB10_ID292915" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="2b602ff6-b8b8-4feb-8dd3-2cd896396aaf"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB102" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: ACTUAL_MKB10</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="2212206e-444b-4e6a-bde8-001946cf42fe"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1236</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="cea492cd-3784-47b5-9581-a00106b15c21" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=MODIFIED и пустым ACTUAL_MKB10_ID292916" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="a513b64b-3a32-45d7-9289-325aeb08ce6b"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value></value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: actualMkb10 передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="4831af92-626d-40da-a078-46ab6aa3a629"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш2" id="fd6d0eee-d753-45d4-aae1-8076446a5091"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш2" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: actualMkb10 передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи2" id="a113ea46-dfd2-4a12-b99e-7f4a73f601ec"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1237</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="3c023f0d-1e83-4032-bc7e-6b44b64746be" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с некорректным ACTUAL_MKB10_ID292917" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="d865b135-f233-4ca7-9b32-6b26b0edb32d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>7</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} переданы значения, не соответствующие типам атрибутов: actualMkb10</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="663e7e94-aa84-404c-9c7c-4adcc28d0877"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1238</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="8d8c4cd1-8b10-4069-8d39-63774ae75302" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута TITLE_DISPANSERY_OBSERVATION_PROGRAM_ID292918" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="3b086fee-8813-440a-9d66-9fc3ac2d1716"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM2" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: TITLE_DISPANSERY_OBSERVATION_PROGRAM</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="bfaeb189-a9fd-40e1-831d-389efbbfecd8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1240</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="a0a67fe2-a557-4be6-bef2-fd8373f636cb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и пустым TITLE_DISPANSERY_OBSERVATION_PROGRAM_ID292919" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="f5801b15-057f-44d5-afc6-e998512fe9dd"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value></value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: titleDispensaryObservationProgram передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="26ffe811-c9b0-4f0e-ac32-083cd2b4b2bf"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш2" id="8ad1af62-5143-42df-be35-52a195434ff2"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш2" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: titleDispensaryObservationProgram передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи2" id="4e029163-6d15-4c79-9de7-e0aa000b26c0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1241</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="9dbc07fa-07b9-4f19-87ad-2f8d541eba00" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута ID_DISPANSERY_OBSERVATION_PROGRAM_ID292920" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="9bc4208f-4b5c-429f-8303-3037879fb2ab"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM2" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: ID_DISPANSERY_OBSERVATION_PROGRAM</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="f3b12ea9-64ef-4983-acfb-7e2fa416fb1d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1242</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="17f9bb44-37fa-41f8-b55e-c463c8ad83ac" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=MODIFIED и пустым ID_DISPANSERY_OBSERVATION_PROGRAM_ID292921" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="926beecc-6f86-438e-8fda-18a55171f263"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value></value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: idDispensaryObservationProgram передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="d93645ef-79ad-42c8-a7ee-39b1a118e19f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш2" id="700019a7-2c5e-49fd-9983-91056219b785"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш2" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: idDispensaryObservationProgram передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи2" id="67895b29-d181-47eb-8ee8-c83c6fd37b1f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1243</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="9bd65837-5e71-4de2-9e36-ca265732952f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM_ID292922" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="316004ca-b7fc-42e0-ad02-bbc208192756"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM1" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="f4e96078-c086-4cae-ae71-048e88900da1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1244</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="4df184ba-c039-460b-937e-c3a786d304fd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и пустым ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM_ID292923" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="52b93de7-ba87-47ea-946b-e404f9273157"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value></value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: archivedDispensaryObservationProgram передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="4b257fdc-0b32-4471-ad95-da4826d9518a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш2" id="3349f99d-2e9b-4b4a-bcc4-ef4f18f211f9"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш2" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: archivedDispensaryObservationProgram передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи2" id="38c7f930-9ffc-40f3-aa57-eb9e3e536a5f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1245</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:testCase id="d35e8f75-b780-4448-bbb9-edf7a15f73c5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и некорректным ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM_ID292924" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="05c7f375-c469-48c9-803a-388f16580847"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
	<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="TITLE_MKB10" field_id="10877" type="STRING">
						<values>
							<value>Острый инфаркт миокарда111</value>
						</values>
					</attribute>
		<attribute name="CODE_MKB10_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_DIAGNOSIS" field_id="10879" type="BOOLEAN">
			<values>
				<value>false</value>
			</values>
		</attribute>
		<attribute name="ACTUAL_MKB10" field_id="10880" type="INT">
			<values>
				<value>${#TestCase#actualMKB10}</value>
			</values>
		</attribute>
		<attribute name="TITLE_DISPANSERY_OBSERVATION_PROGRAM" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#titleDOP}</value>
			</values>
		</attribute>
		<attribute name="ID_DISPANSERY_OBSERVATION_PROGRAM" field_id="10882">
			<values>
				<value>${#TestCase#idDOP}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED_DISPANSERY_OBSERVATION_PROGRAM" field_id="10879" type="BOOLEAN">
			<values>
				<value>2</value>
			</values>
		</attribute>
		<attribute name="signature" field_id="-4" type="STRING">
			<values>
				<value>1</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} переданы значения, не соответствующие типам атрибутов: archivedDispensaryObservationProgram</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи" id="b817cf28-da90-4b7f-a5d3-59c147e9a56f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="Simple NotContains" id="c5923dbc-2d72-40c7-bd3b-fd4e83409c1a" name="В ответе не возвращено записей"><con:configuration><token>Row</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246</con:value></con:property><con:property><con:name>titleMKB10</con:name><con:value>Острый инфаркт миокарда111</con:value></con:property><con:property><con:name>code</con:name><con:value>Y117</con:value></con:property><con:property><con:name>actualMKB10</con:name><con:value>1</con:value></con:property><con:property><con:name>idDOP</con:name><con:value>158396648</con:value></con:property><con:property><con:name>titleDOP</con:name><con:value>Инфаркт миокарда</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>catalogId</con:name><con:value>2675</con:value></con:property><con:property><con:name>table</con:name><con:value>d_diagnosis_mkb10_pdn</con:value></con:property></con:properties></con:testSuite><con:testSuite id="02811542-b6b6-407b-9c3e-0627faffb849" name="RECEPTION_TYPE_TMK_CODE(5102)"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="c4e26096-847b-473a-8d9d-e54c0a6e315f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. без признака is_deleted." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="cb453c4c-7137-4904-b955-a30d39ebbcac"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="cbaaa869-88e2-47ea-b61f-f244bfad57ff"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="eb2346ea-51f5-45e7-9cfc-e7b344cf64e4"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="5c44f9e2-8379-4174-bf32-0517c4c713ae"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="40e8b7b0-5203-4b5b-bfba-4272a537a08a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279033</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="f6f378e2-d432-403f-9475-9d781a599080" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="7cc68b59-544a-4bd2-bc97-d940b1231976"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="81e0cb7b-6c46-4528-b862-dd465dc3a335"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="4b42705c-590b-473c-9c4b-4f9ea580809f"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="e442fefd-814e-4444-9925-99ccd87885bb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="671b686a-6c09-4f85-bf43-ace549315fa8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279033</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="482c6781-38ef-4503-8bf4-608695bf2703" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="decefc66-f4de-4e76-b437-36c475104551"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="81474549-0a2d-44c3-8f7d-18bcca75c116"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="e39e2fe5-5578-4189-91be-a4cb1b7ef0f7"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="446ac3c3-6f09-4f20-ad39-edfd8d081c05"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="266f77af-4b2e-4f40-b4ca-b365e54ac56d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279033</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="27186dfd-4559-4036-a81e-4e546768bb0f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. без признака is_deleted." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="d25f9b65-7e54-48cf-91f0-1e24217d9d88"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="1b60120d-0a76-4147-b7c3-5833e2f2a87e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="7979e8cc-7e15-467d-8b25-19e1bc1c30a3"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="5846cc7c-ed64-477f-8b18-70b86e53f3ce"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="e4268312-4ac5-4942-bbc9-68b48f7d4afc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279033</con:value></con:property><con:property><con:name>code</con:name><con:value>1953</con:value></con:property></con:properties></con:testCase><con:testCase id="079fedc3-2836-4b48-b07a-e94a52ee2adf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="57a308dc-de0d-4fbf-af5f-f042b0481fe2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="0dfdb9f1-cb7b-4c90-9e11-578fd18d6568"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="3ca20673-57f3-4221-b495-454772dca4a6"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
        	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не создалась" id="05760e86-c04e-486a-885b-ebe20cbe5d94"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279033</con:value></con:property><con:property><con:name>code</con:name><con:value>1953</con:value></con:property></con:properties></con:testCase><con:testCase id="b7e954fe-2c35-4065-9b3a-1bf59e515ab7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="3f483a00-32dc-45bc-9012-d74d34fc9ab4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="c7aafd5d-eb13-47ca-b3ad-91704204ee66"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="6a90f227-e22d-47f3-91ad-e8180137fc9c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
        	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="52611319-88c2-4257-aade-1eee5e170f43"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="a3183551-8c83-4117-9cc7-b698b51f80db"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279033</con:value></con:property><con:property><con:name>code</con:name><con:value>1953</con:value></con:property></con:properties></con:testCase><con:testCase id="51bebf6a-3ff7-411c-a56b-423c85a01482" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. без признака is_deleted. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="0431c929-c253-4215-ac96-86fdfba1fcb9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="4e05ae46-e613-4e3d-9de8-20ef0d5d8129"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="1a692008-ee43-41c4-b496-38e60d72a39d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="5b404501-680c-4a64-82cd-60303db4419a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="e51d52f6-1dea-4a1e-9710-5af6cf3d51fa"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279033</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="45590f26-55bc-415f-b20a-7a34bf1c6f29" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. без признака is_deleted. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="2abd5c8e-8131-4378-81a8-2052cc478201"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="06c9ee65-0240-40e4-9a39-e429ff5d16b2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="bb70abf2-611b-4160-8a10-231d550abaec"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="b658e4aa-3c37-464d-9405-242ffdfec476"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="94dea609-3dd7-4927-ae0d-0343547a75f4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279033</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="f9a72823-0951-4b70-9c1c-bf92025a84d2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = false. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="26973c82-9a3a-4605-b5d5-8a9bce1ad776"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="472f5263-65ba-4721-bfa8-3d37d4545ec1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="9e1f9afe-4254-4ea7-b3cd-0526a6e91325"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="39d4501c-0302-4e98-a734-7f1267383f6e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="c32f2961-feb3-4536-a6ec-b190735ab03e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279033</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="719ccc98-d1dd-43fe-9d57-0c8ca2ece106" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = false. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="bf5a9153-6eec-443c-892a-b030e1c76aa1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="b078b1f0-df55-4fc6-a587-20765f523d83"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="13bd69be-a1b9-4f7d-892b-34b9497d1102"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="ec518700-8104-4ddf-8069-a1cbaebf62bf"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="29572a17-f808-4d0e-bf72-463d04d06a27"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279033</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="7c325df8-c5dd-44c6-bba1-fb1a7a26283e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = true. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false." id="f0355ebb-732e-4f70-964a-f43291b8c4a1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', false, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="52bbb9f2-c231-4d54-8a6c-25ef8ae3a421"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false.</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="fd458715-c53d-4ee5-a5da-830378036b61"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="51827580-0af2-4ee3-bda0-7508126e88df"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="a0d6a117-773a-4363-a7a3-b8449bd38113"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279037</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="3485d26f-230a-41cd-b6bb-50c6b5737da6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = true. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true." id="ba8fa7c0-eac9-4240-80a1-e2026e4acf6d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="55519ae0-e69a-4937-a826-43c091dcb403"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true.</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="a316b0e9-9784-4055-97f8-0d1aa3e31a73"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="354a9e51-f5cc-417e-8623-b81a162681a0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="88d43a49-0a99-4ecd-be90-c7c975178c6b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279033</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="62cadf23-2a4f-414b-8473-70525e0af845" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. без признака is_deleted. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="22909931-2dd6-4a1f-a59d-7e664f042728"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="62dbf779-ae67-482b-a25d-64f49b66826b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="b277efec-7a2a-460c-a534-5ebf0d2a47e8"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="c2841c1e-ea63-4cd8-bd32-b37a3cc7b76e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="5e59f94b-5a7c-4d35-9dd1-3ce96e412396"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279033</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="de32e79c-6afd-40b2-85f6-8d049752d9df" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. без признака is_deleted. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="c6e5e7e3-34f0-4485-8822-a72f6757df6b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="6488aa71-9fca-4351-8a00-1717f46b0599"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="11f2cbc1-0df0-4bb4-99c8-4b52dafe763c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted"><con:configuration><path>//*:out</path><content>ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не изменилась" id="2cfed78e-b71f-4012-b80c-422174fae4dd"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="2c12ee20-6b9a-459e-8165-f6a487439117"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279037</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="f136b217-8611-4084-84c0-6d679c19bc7c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = false. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="aaf2d20d-7613-41a0-a3c5-78c85b581501"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="caaacc81-ecd8-4763-b04e-9cd8323cd992"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="b5bd601f-370e-4dbb-9645-bca1d9afa3ba"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="a9cb8b7f-f174-452e-bd50-da37d2f9287d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="84c188b5-488d-4220-9f2e-6c080446dfd1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279034</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="e8d9794a-fa76-4031-ae10-44f18ea35853" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = false. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="195d8144-d7be-46b6-ae22-7108b0527ffa"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="b4e7495f-0301-44f5-85d0-7bcd56b16530"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="b068a7d7-26a6-4fc0-aa6e-52db437fe9f8"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted"><con:configuration><path>//*:out</path><content>ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, чтто запись не изменилась" id="640f5144-d0c0-4c70-b9ca-43f17f757209"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="979febe4-b488-49ec-8c76-03ba06384a76"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279038</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="c0e05b05-6260-44bb-afef-edd47aa590c8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = true. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false." id="3adbeb45-b33d-4ebc-84f1-b1d707816610"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', false, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="fbb0bdf5-168b-4422-bf5b-2ef1a486d605"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false.</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="d1dee4d8-baf0-470a-949c-9e5ea5989522"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что изменился только атрибут is_deleted" id="17573921-6d86-42c5-bf9c-1fecda2cc5ea"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="e32c2e55-f310-45cd-b0de-3a48624f0cac"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279035</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="34757a72-f19d-4519-9ad2-0d438f0f246b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = true. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true." id="6ca9edbf-eb4b-4fa7-b88e-c6b15e8decaa"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="e2ae0839-069f-4fab-a657-8536b92b902f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true.</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="3cbc5255-db7d-48c6-bde5-2727902fa84d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted"><con:configuration><path>//*:out</path><content>ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не изменилась" id="9fb18e4c-718e-4467-bec7-448f4d3a9f23"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="d8df6c95-f932-4639-8ad1-33a6f5cb7dcb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279039</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="66ad5da3-f028-4d4a-98f1-cc876ec7bfcb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и без атрибута архивности, в бд is_deleted=false" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="e7cee25a-9a08-4589-830c-08b759cf1bbd"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="40339f59-e214-4d50-86d0-b76e4d6e4a5f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="c6909a62-9dfc-4422-9360-1dc21abe7a40"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="a0b6afaa-5c64-43ed-952e-14626bceb041"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует значению из шага 1 тест-кейса"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="8cc74390-50d2-40c4-ba7b-eeca7c8c0757"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279037</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="1a227ceb-8c52-49a7-800c-7968462b002c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и без атрибута архивности, в бд is_deleted=true" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="023f3b20-c515-4a4b-83a3-6ca3d4072dc7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="d4e49b16-3cc4-4982-a452-551e0166c2c0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="4f74b111-92a0-4f43-989c-d779823fdc02"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение признака is_deleted" id="e4c4c00c-24b5-4eb9-bd63-57cf4d6be292"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует значению из шага 1 тест-кейса"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="2d9d272c-384f-4168-aa83-99a84b960763"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279037</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="c0ac6edd-f6f7-44b0-b480-b9f7a84f50fa" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=false, в бд is_deleted=false" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="5269b4b5-bf91-4e0c-ac1e-2ce38ca02a72"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="5e25dcae-362c-4771-83b6-e063ac2b7d3d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="270d9f3e-7ebb-426a-8baf-84bcd6e8e96d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение признака is_deleted" id="854a5373-311f-401c-a32a-755a5b3c9ec0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="27e445e2-ccb8-4407-bcf2-2d931dd739b9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279037</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="17e1330e-b880-45e2-ab38-68144a5b7227" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=false, в бд is_deleted=true" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="b5dbd32d-1944-473c-8698-2de2e6160037"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="94c914d6-c01d-4db9-aee8-d42e190c6cdb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="c0f9b188-d01d-4a11-a1c6-abcfd5f41e5d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение признака is_deleted" id="3762ec29-4a98-44c6-82c9-a0eba94f2bb6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="0e309493-6a68-43c4-8165-3be352108d4f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279037</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="a47ba050-4bbd-4176-a27a-6fa56ee23de4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=true, в бд is_deleted=false" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="66e1c8cc-4a37-48d2-8a12-2e6658e771fc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="8e85b61b-029c-4af2-878c-bd3f9889faf6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="c62f9d7f-562c-4083-b747-45f1794f636c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение признака is_deleted" id="b84265a1-53c2-4d86-bd43-80a4b843e7ea"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="d56e1610-f4c9-4468-8878-78e2d50fa370"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279037</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="9a0546d3-4bfe-430f-b014-6c105836be9e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=true, в бд is_deleted=true" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="9905aa86-5243-4dce-8e17-9dfe620942cd"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="85a7fe0a-15db-40f9-8fb0-7f81b291b4db"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="f7c2901b-019a-4829-b8b1-1a3d9a7e0c6c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение признака is_deleted" id="faa8386d-15f7-4a86-8a70-bc6ea1b72eed"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="b99de8eb-e4c2-44a3-af17-70957ad0bb80"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279037</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="e4c6732d-fa4b-4dfc-95dc-9d6dcb180a65" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED для несуществующей в бд записи" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id записи" id="bf657b88-e7ae-4f10-af97-ce0d55570ed2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="0aa363b8-ba41-4236-86f8-845e5d67cdbe"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id записи</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="474f22c7-8c43-430d-acfc-64e4e08544d4"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не создалась" id="c198c4a9-b13b-4b58-b947-f9bd4fa766e9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>12356279041</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="64ab2086-9acb-426a-ad79-952297c7c82e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута global_id" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="9b25283b-344b-4099-b57e-af8e93b90a9d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="e84a934d-7d14-4db6-93fc-9a02b1265b90" name="Описание ошибки = ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="395b570b-f6e0-42c3-ad11-0f731b75e936" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым global_id" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="94ba4ebc-97e7-4908-9ed2-b6e9688e7c20"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id:  у обязательного атрибута: id передано пустое значение"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id:  у обязательного атрибута: id передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="d4d78ce2-8a9d-4539-8c9b-5a3e2fa5f3d2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и global_id некорректного типа" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="11a9748e-eec6-4efb-8812-de98d250e7c1"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>test</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: test переданы значения, не соответствующие типам атрибутов: id"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: test переданы значения, не соответствующие типам атрибутов: id</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="58a62a76-4f16-4fbd-b1e0-b0ea3aee3e08" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута CODE" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="3d68acb2-266a-4e68-bc58-ba8a5948e9e5"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>1242354353</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 1242354353 не переданы атрибуты: CODE"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: 1242354353 не переданы атрибуты: CODE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="f5008b84-c775-4dd7-810f-7652ab3aa918" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым CODE" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="60ba8296-c48d-4983-a3c9-23a75b9931db"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>124343242</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 124343242 у обязательного атрибута: codeReceptionType передано пустое значение"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: 124343242 у обязательного атрибута: codeReceptionType передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="de0dab2d-c1c7-4812-a29a-9d80a0409204" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с некорректым CODE" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="40649db5-9b22-4cfd-8084-e182716d8916"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>124343242</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>test</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 124343242 переданы значения, не соответствующие типам атрибутов: codeReceptionType"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: 124343242 переданы значения, не соответствующие типам атрибутов: codeReceptionType</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="fb37d197-6e35-4216-a191-e33b5be1b856" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без параметра ARCHIVED" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="5110c736-3d89-4e0d-a03d-a4bf54b563f8"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>124343242</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>1987</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 124343242 не переданы атрибуты: ARCHIVED"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: 124343242 не переданы атрибуты: ARCHIVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="5b09f058-b615-4f50-980f-5a9b40690fc5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым ARCHIVED" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="a5bbc5ce-e029-48de-8d23-839a3128db7c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>324355</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 324355 у обязательного атрибута: archivedReceptionType передано пустое значение"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: 324355 у обязательного атрибута: archivedReceptionType передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="430e491f-01b5-4aa3-bf6f-5db186672457" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с некорректым ARCHIVED" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="ccc07705-81be-4ed6-8bee-f3ea555ccbd8"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>324355</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>test</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 324355 переданы значения, не соответствующие типам атрибутов: archivedReceptionType"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: 324355 переданы значения, не соответствующие типам атрибутов: archivedReceptionType</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>catalogId</con:name><con:value>5102</con:value></con:property><con:property><con:name>table</con:name><con:value>d_reception_type_tmk_code</con:value></con:property></con:properties></con:testSuite><con:testSuite id="b3c63064-6dfe-4cee-9224-2dc70b5335e7" name="GROUP_FOR_PHYSICAL_EDUCATION (2543)"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="96b39dd3-40fb-4c4a-b2be-ed7f3db7bca6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. без признака is_deleted." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="f4a5c6f9-8cc4-4974-a99e-28caafd9e558"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="203912b9-a07e-4009-bb82-2f78c90bf00b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="2ea9b3ca-883f-42d2-b5f1-492e0926195c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="3bdb0ea2-10cb-4bf7-828e-c9a6b08ff842"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="1801f8be-3161-4ab2-bdbe-a70ec48e9dd7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property></con:properties></con:testCase><con:testCase id="4f2263c4-8711-43db-a640-e3a8e2777856" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="9f69ffd4-010c-4f8b-af8a-c86e713eead1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="0b27aa0f-20c0-445e-bd39-386e00c1e435"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="6a24098e-9c0e-4b12-b53a-d429a83514b8"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="c0a46082-7656-4fa4-8d17-c207bec37056"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="17ce8642-f471-47cf-81d4-514ecb0d9e2c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property></con:properties></con:testCase><con:testCase id="a09b62a2-bb29-477e-8c1b-3bc13737fb07" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="132ce418-7338-498e-9099-657a7e655a6f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="8f9fe07b-6841-4e25-9e29-24b77c16855b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="4565cd0e-cfce-4ba6-871c-ee46533d884e"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="f35309c5-1a09-4775-a6bb-ade758786b02"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="87e185fb-9bd1-4303-9517-b1ab2f29b9d6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property></con:properties></con:testCase><con:testCase id="f69deae2-1325-49a1-8df2-8877384df773" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. без признака is_deleted." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="f6504650-31f0-48b0-bafc-8da57cbaa26e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="26cf2f6e-a4b5-471e-a1d0-db9bb5327f62"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="4c24d8f7-b4ba-43ea-acd6-9350879f8e4b"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="5b73924f-71b8-4377-84b9-2e9b098207cd"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="c88eebc4-c1a3-4726-b3fd-524c8994f0ca"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property></con:properties></con:testCase><con:testCase id="af9b9d3c-cd2a-41ef-bd46-38805ba71299" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="2b31a774-5c4e-46d3-8bb8-248a5d059445"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="2b00bbd1-9ada-4d16-84cc-339f199925b0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="f7090612-1a97-408a-8e54-c1881d49e5e8"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не создалась" id="69825ded-66dc-48ba-858c-807f2f85fecd"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property></con:properties></con:testCase><con:testCase id="9ec5f30a-c67b-47ab-a852-dea254a05d5e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="d0dff39a-3119-42ad-a08e-4d2bab1e97ff"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="d4b34e2e-6a06-4ac2-a00a-b0e26c0daabb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="a0d35579-940d-4d9a-b88b-2abf4353095c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="537c6349-4d61-4967-9a7e-855df6f05f89"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="00a54df0-55af-43d1-87af-e7c91ece8586"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property></con:properties></con:testCase><con:testCase id="afc78351-4f32-47f2-beb9-88d592be3bc4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. без признака is_deleted. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="b6cde095-9dee-4c5c-a5e9-c6ddaa7e2f80"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="76839063-8ef1-45f4-9490-038c9b6eb63c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="9d57d8d9-b741-4b4a-b6c3-39ba5d86180c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="e7e747c6-f1da-4956-b7f0-4379ce3a9b62"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="a7329e7b-1b6f-4b93-ac67-5d646485bba8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="1c7b82d7-2e3e-4853-9266-09fa9f620fbd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. без признака is_deleted. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="a6b22824-dd47-4981-827e-91f1e95bafe8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="5bd83bc1-d28d-49b0-8fa5-66812361f9a6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="4911762c-ba86-4964-aeeb-6b80e88cf6c1"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="2ace625c-32ac-4fa9-b6fe-04aae14eb863"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="d33146a7-041c-4445-a7ec-2746e5532b08"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="71944a4e-5055-40ff-9060-956ac6f788f3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = false. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="23d02b21-857b-449e-86f9-d8c60395fd71"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="17c83956-a020-4e1a-a9ef-492b289c8059"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="5abd91fe-bb1c-4f95-bfdc-6e16315f7bb9"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="b904b877-0d62-4d5a-ac38-969d77c45b44"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="7bb20aab-b448-4fd2-8f4d-1d13f26f4ef6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="99d882f2-ad94-4073-bc9e-13452019393b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = false. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="6c99f4b8-f4bb-4104-b242-71ff5d53573e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', false, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="47e2cea7-9c96-4dc1-8acb-c2a0b3357299"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="8bd1bf1b-a2a5-44f5-ba9e-5a66e5df0658"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="ea7f552c-ef3d-487c-958c-1afd7cda29d2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="0e2f4369-c89d-4a51-a47b-7c3f6857a342"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="cd5acaa6-d7e9-41be-8d84-83448c5862a3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = true. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false." id="424ad5a9-1708-449e-8791-6c333eea1950"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', false, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="8443ffd1-852a-4a39-a61b-f106c471fbfc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false.</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="b5d81936-d546-4821-b2ac-9312c7a65965"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="4978482b-2aa5-48a4-af41-4cb0c29e0b7e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="2c6d9980-078d-41c9-9785-24c4491516a7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="33451a99-5c0c-4f80-b817-065a816d710a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = true. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true." id="99954574-d9a0-4a9a-8417-649a864d2c41"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', true, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="c5e711c5-f7ef-4de0-891a-65538806c664"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true.</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="c30bece4-8f81-4217-945d-d8be541b5fbb"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="4d0eb9cc-dc4d-4dc7-9ce2-a281429cd6b1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="731ff9ce-b260-4dfa-b04f-fae5a51d33f6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="5b38635b-717c-49ac-bb04-6d2c2d541982" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. без признака is_deleted. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="9b83e374-57ed-4845-a302-281bb4631b2e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="4944a284-7d66-4ba5-ac25-c23edaffee73"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="d8c28ce6-42cb-4a59-802b-dd67814dfe40"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="a7027f5f-d211-4ad7-aaf1-38bf48ce8489"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="215dfacc-aa2a-4cd0-a44a-bd4eb57934bc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="bd5ba7e4-8b62-4a9f-96b6-e40dd8cf025a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. без признака is_deleted. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="8fe86e80-27a5-479d-b081-601e6aadf2e5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', false, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="c2300de8-00fa-44ab-9153-6133d1da052d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="1b0888c0-bb9b-4b7e-b4be-b2874e879529"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted"><con:configuration><path>//*:out</path><content>FAIL: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:2543 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не изменилась" id="6f0dcd00-dc08-4541-a790-11a80bbd7e77"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="9569f76b-6663-4b50-bb52-a27c1041aa3c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="42a2c370-8c48-463f-996d-2c19a443989e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = false. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="5eeac343-d38f-4b3d-8404-4aa00edbf4e2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="fd6ba02f-afe5-47dc-9a72-877537bd2a9a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="52f62394-c2c7-4735-9868-0b72f9d124bb"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="75f6b3b7-7978-41f3-844e-a65e420490b1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="1dc5abe3-1e77-434d-8138-a471df6cdea1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="66c10e5e-42a5-490a-83d9-864cdbeab92f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = false. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="69a50910-ef34-45da-915a-3c51cd258fc8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', false, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="d0e6c46b-5a34-4e7d-a21c-b957d8557296"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="e9aa4705-9c7d-471b-ad21-b7a0f49dd661"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted"><con:configuration><path>//*:out</path><content>FAIL: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:2543 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не изменилась" id="ded7b4f5-edae-4985-865b-70fda059f431"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="05fed70d-b7cb-4992-a61d-ba48bfb33c75"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="95c53dc3-8216-47c5-a388-71c329181f16" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = true. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false." id="d9d075cd-f093-466f-b48b-4b8a453f0faf"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', false, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="49379cf5-80df-4e63-9557-1083740be054"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false.</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="ee669579-331b-4978-ac52-513d125c4b12"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="8fccc4eb-e1be-47b8-bdcf-27a02d4a286c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="6039aecb-c2c6-434d-8e02-9dc608316c42"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="10f080fd-1ee4-45cd-ac51-4e9906d4be77" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = true. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true." id="877956d3-fd15-4e5b-9828-e7bb4ace1a27"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="40b7de19-9020-4b4a-9b22-822179e79568"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true.</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="ade7f19d-1684-49e8-84d1-c11afa409054"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted"><con:configuration><path>//*:out</path><content>FAIL: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:2543 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не изменилась" id="b3ee59d7-6bb2-49db-9907-1227dc75e6b1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="efdc5329-9da7-47a7-90c7-7aa3bcd2a8b5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="28c90da7-d407-4ee3-a86f-ef52dc727629" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и без атрибута архивности, в бд is_deleted=false" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="bedabf37-5644-434d-961e-b200e16d6360"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="51d7b920-27f8-4eee-be12-15b355a23d74"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="46628f69-daaa-4733-8393-fc4da610ef0c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="169b31f9-f597-40c5-bd73-b6905d3867d5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="0ad8614d-de22-4265-badc-84a084c40eef"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="cc0b6029-5088-450b-a85f-a33a5f1a9781" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и без атрибута архивности, в бд is_deleted=true" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="cf6c83ad-2839-4148-af10-9be3f7f0cad0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', true, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="6e173794-279b-462c-80ad-ff9d05223d8c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="bd389b86-fc0b-4813-aff2-d97e81531e0b"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="860d50f0-a149-4a21-b41d-bf0e6b87a5d9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="d1f78817-5c3e-4fcd-b5c0-f22502de11d4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="661e1747-721f-4468-b61f-a51ece0b4a69" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=false, в бд is_deleted=false" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="0a8956d9-159b-49ec-98fe-32eb706f282d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="99a5ef02-49a1-41c2-a865-2f033d97116e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="9680f9e1-7fbb-4052-81ac-8616486f14a9"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="3a572fa8-d8a1-4309-b161-95e9f47c8824"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="13412aed-e734-4539-b5a9-8df03430c639"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="1cc3e2bf-b955-4edb-b54b-75c57396139f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=false, в бд is_deleted=true" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="14e1a6cc-b4ea-4d4e-be52-e1fb22a0e97d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', true, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="51999b88-c41a-4597-9380-0d9864f04a56"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="a4cf6410-18d2-4233-b335-a69c89b77554"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="5b3f07e9-e930-4112-85cb-49bfca142f45"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="a34ada0b-7cfc-45a6-af0b-fe6374e341b6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="c9201b7e-3625-4a17-acb1-cbd580289672" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=true, в бд is_deleted=false" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="350fc577-64a7-4a4f-b1a0-f97f027e9a86"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="fee1fed6-db05-4223-9e18-cee156a95b5e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="7b288637-aa32-4cf8-8132-e738efa8f4ae"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="126e1ee2-9196-4e17-9e81-12692d5fcabe"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="31f74590-97bb-43a4-b2e7-757d4c8bbd48"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="321fd81b-1133-4112-ae63-c4278105a6bc" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=true, в бд is_deleted=true" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="8a11e936-7492-4db1-be2c-0d869921103b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, title,description, recommendation, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}',  '${#TestCase#recommendation}', true, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_GROUP_FOR_PHYSICAL_EDUCATION.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="f679649f-7ffd-4873-9cd2-a8ef1453b553"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="bca65a65-a380-4cc0-9541-7b645a279642"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="9fa9e8ab-2243-4f53-90db-128524d603fb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content>${#TestCase#recommendation}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="49e9249f-8ab2-41b6-a684-57681f6fa038"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="3a3278e6-43be-44f1-8af1-0f0118bab4b1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED для несуществующей в бд записи" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id записи" id="9303615f-7075-4649-8473-61c6393b3a1f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="613198c3-6637-4bf1-90b7-a1b18ed98012"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id записи</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="bab75685-11fc-455d-b3b1-b0734201fdc2"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title2}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name2}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title2}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не создалась" id="1916e7c4-eec7-41c1-a14f-cca3c49898ed"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="f71f78b7-24ae-45e2-ba88-3e11903c9b3a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута global_id" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="53cb66e0-f22c-421e-b0a1-cdbef2521358"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>FAIL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="e84a934d-7d14-4db6-93fc-9a02b1265b90" name="Описание ошибки = ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id:  не переданы атрибуты: global_id</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="c3ecb126-27d0-4c0d-be1b-cc217ac78dcd" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="9d97ea79-f0e0-44eb-bcd6-7e8833c0e3c5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым global_id" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="26e86b89-fa66-46ed-97b0-05764c6c69ff"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>FAIL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id:  у обязательного атрибута: id передано пустое значение"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id:  у обязательного атрибута: id передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="e5815822-766a-497f-b33c-95d5b7d0b7a2" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="c65103ff-ddd8-490e-a123-8302ff9eb61f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и global_id некорректного типа" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="42b375d0-4c43-41d0-8eb8-c4afd36096f3"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>test</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>FAIL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: test переданы значения, не соответствующие типам атрибутов: id"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: test переданы значения, не соответствующие типам атрибутов: id</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="ee96719f-ffdc-4899-89b4-3a6951381d45" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="86be8ebb-19ef-44b3-a7a9-53d427337ae4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута CODE" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="6474d67e-8e90-4e69-87c2-452ad0d8232d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>FAIL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 1242354353 не переданы атрибуты: CODE"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: CODE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="526107ac-7e06-44af-ba41-73394ef48642" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым CODE" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="5622ca58-220a-4ef9-84b4-9daa310c3b43"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>FAIL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: code передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="da7fabd7-fb7a-498c-9e81-bc49e2f402ca" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="2d57cdeb-b278-4632-b62f-1f669168d19b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без параметра ARCHIVED" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="62537d1c-e58f-4b0b-8943-ed7030302625"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>FAIL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: ARCHIVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="7c0b3d5a-300f-42d0-b5bd-502932a6a3b4" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="fdb88fa4-0609-4338-857d-f191b81cba64" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым ARCHIVED" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="b269f51a-02e2-4cbd-9d2d-de0cbc140666"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>FAIL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: archived передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="ef295487-7176-415f-bd69-ddca316f62f6" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="2d2373d1-ef64-4824-b5e8-67130021b10b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с некорректым ARCHIVED" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="dbe6f1fe-c41f-4144-bb27-32f41b7b572b"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>test</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>FAIL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} переданы значения, не соответствующие типам атрибутов: archived</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d948ccf9-a570-4720-a19e-c0b10ab2d904" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="8789cd1a-ba90-4c7e-8991-fd5d18e26912" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без параметра TITLE" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="4878e2f6-0b12-49f6-884d-cd59128c8356"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>FAIL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: TITLE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="7c0b3d5a-300f-42d0-b5bd-502932a6a3b4" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="a4eb6773-8f18-4e65-a429-2f2596f0f42f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым TITLE" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="dc1de95a-6573-4ffb-a28b-3fa561e56f28"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
     <attribute name="SHORT_NAME" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name}</value>
      </values>
    </attribute>
    <attribute name="SHORT_NAME_NOT_TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#short_name_not_title}</value>
      </values>
    </attribute>
    <attribute name="VALUE_FROM_EHR" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#value_from_ehr}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
     <attribute name="RECOMMENDATION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#recommendation}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>FAIL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: title передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="7c0b3d5a-300f-42d0-b5bd-502932a6a3b4" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property><con:property><con:name>title2</con:name><con:value>Заголовок создан автотестом 2</con:value></con:property><con:property><con:name>short_name2</con:name><con:value>Сокращенное имя 2</con:value></con:property><con:property><con:name>short_name_not_title2</con:name><con:value>Сокращенное имя без заголовка 2</con:value></con:property><con:property><con:name>value_from_ehr2</con:name><con:value>Значение а EHR 2</con:value></con:property><con:property><con:name>description2</con:name><con:value>Описание создано автотестом 2</con:value></con:property><con:property><con:name>recommendation2</con:name><con:value>Рекомендация создана автотестом 2</con:value></con:property></con:properties></con:testCase><con:testCase id="39e09e81-b5c4-4b15-8720-5cb36063bd00" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи только с обязательными параметрами" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="72c67975-382f-4f78-92fc-d3b4be68525c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="af77827a-6958-43b7-8a29-3322c75bbc2a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="0b5a2b5c-7fa7-4150-85cd-cb025e42e855"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="${#TestSuite#packageId}">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="TITLE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#title}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: ${#TestSuite#packageId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="fe055a3c-f98d-4819-9806-a4a3ace5f792"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE соответствует переданному в пуше значению TITLE"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.DESCRIPTION</path><content/><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION соответствует переданному в пуше значению RECOMMENDATION"><con:configuration><path>//*:D_GROUP_FOR_PHYSICAL_EDUCATION.RECOMMENDATION</path><content/><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="c41e6b5b-9dce-49dd-946b-c39217f307d8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302037</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property><con:property><con:name>title</con:name><con:value>Заголовок создан автотестом</con:value></con:property><con:property><con:name>short_name</con:name><con:value>Сокращенное имя</con:value></con:property><con:property><con:name>short_name_not_title</con:name><con:value>Сокращенное имя без заголовка</con:value></con:property><con:property><con:name>value_from_ehr</con:name><con:value>Значение а EHR</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>recommendation</con:name><con:value>Рекомендация создана автотестом</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>catalogId</con:name><con:value>2543</con:value></con:property><con:property><con:name>table</con:name><con:value>d_group_for_physical_education</con:value></con:property><con:property><con:name>packageId</con:name><con:value>12098882</con:value></con:property></con:properties></con:testSuite><con:testSuite id="6f9a57d6-a4a9-484c-8739-366cd73c9362" name="TMK_STATUS(5575).Уведомления"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="f7bd9996-3c7a-4686-b155-08125b08096d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. без признака is_deleted." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="ef8a665a-ee44-4647-a659-d8d2e3f919e7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="16cb5734-6d83-4d41-9933-4c8e941cfd7d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="4f29cb8c-4bb3-450f-9923-6ea169f652b8"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type}</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="4d270570-db69-4db6-9b79-b51e1f1bee54"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ID соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответсвует переданному в пуше DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.TYPE соответсвует переданному в пуше TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ARCHIVED = false - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.IS_DELETED = false - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="2eca0e06-0269-4e87-8b3d-e07370eb7884"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>codeFromAutotest</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property></con:properties></con:testCase><con:testCase id="73ad8e85-dbd3-4561-ad20-28c0c032d434" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="2f93d054-e26a-4d85-a4a2-36cabb076b7f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="d64d4729-7b1b-423d-b57f-25e4fdce6fa4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="55de439e-7731-4d7b-8295-54e658627873"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type}</value>
      </values>
    </attribute>
     <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="f23a0844-93b4-4e5b-8839-04991c1f52ed"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ID соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответсвует переданному в пуше DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.TYPE соответсвует переданному в пуше TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ARCHIVED = false - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.IS_DELETED = true - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="d1106de0-3b5a-4c10-a253-76b01ab48c60"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>codeFromAutotest</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property></con:properties></con:testCase><con:testCase id="668741ab-19a6-4c7e-99e7-488502a3f181" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="4ae2eba7-8ba8-4f36-98b9-c9025a4a3d2b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="49b1a123-3d8a-461b-acde-af1c3d098f34"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="1b80cee4-c40c-4275-9383-c7600d21b5e7"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type}</value>
      </values>
    </attribute>
     <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="43dbabb9-56e8-4341-a02b-b9bac3436069"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ID соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответсвует переданному в пуше DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.TYPE соответсвует переданному в пуше TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ARCHIVED = false - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.IS_DELETED = false - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="ebe33b7e-e1aa-488f-8959-a93df4286c87"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>codeFromAutotest</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property></con:properties></con:testCase><con:testCase id="d1c02bae-973a-4f63-aa5d-fe5cab618454" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. без признака is_deleted." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="78b3b82d-22ea-405c-b6b2-bcd671f17bf1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="15cc09b2-603f-4f1f-9936-eb1e3f4dfa30"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="915a4fb1-9b5b-4b25-9bbd-b805347f56fa"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="57a9359c-f7ad-4a0b-8646-64d53cde8039"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ID соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответсвует переданному в пуше DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.TYPE соответсвует переданному в пуше TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ARCHIVED = false - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.IS_DELETED = false - по умолчанию"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="f767178d-742f-4564-9e20-bba11584eedb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1953</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property></con:properties></con:testCase><con:testCase id="903b712e-1578-44c6-a200-b924572523ea" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="9ff29666-33d6-4284-907a-7c02c7da137e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="f943bcf7-8933-49a7-907d-4e6170d1f8e4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="d9de4682-8cbc-4f65-8a45-d015190e0b1a"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type}</value>
      </values>
    </attribute>
        	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не создалась" id="a024f054-5f26-4512-b331-5288d9912e33"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1953</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property></con:properties></con:testCase><con:testCase id="cd7c15a7-6b19-41dd-ad31-7f6a4da1403d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="892cc22a-5caf-4fcc-b296-a31287868243"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="bbc06f73-44ed-4542-9b78-22e505b9bdc2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="6c2f31c7-15b9-4112-919d-a67b908b2f00"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type}</value>
      </values>
    </attribute>
        	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="ca6318ec-da3f-4cbc-ae7c-dbe77db83d04"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ID соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответсвует переданному в пуше DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.TYPE соответсвует переданному в пуше TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ARCHIVED = true - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.IS_DELETED = false - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="a1bb8a34-e361-4003-9536-0aff1155d981"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1953</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property></con:properties></con:testCase><con:testCase id="dfd858f0-949b-4d07-bab6-ad3e69998ccd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. без признака is_deleted. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="ecc81e17-1449-467b-8402-3db0a8eabb0e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="4423dc2b-ca3b-4f97-9f8e-2c7b5602e1ed"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="f83b6dd3-6acd-4f1d-8043-f8496036928e"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="303bb0f5-3b4b-44da-9519-5a1e73e3c495"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует переданному в пуше значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="b1ad995b-708e-470e-88e5-7a60dc8ee6b7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="d37b5acb-69ae-40eb-a1af-d75e7e8ddd68" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. без признака is_deleted. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="4d0627a1-8bf1-4744-ae12-4f27a67175d2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="ec42a97a-4b25-410a-a9e4-f77b82da11f1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="d35b7516-77ca-44ac-85e4-998f21f9907e"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="d29d0b3d-82a2-4d90-a995-29d43cca3102"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует переданному в пуше значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="a4a2ced3-4957-4ea8-862c-57e593489f75"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="5447dd54-2bff-458d-8867-4fbdf352b444" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = false. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="f8317d18-2aea-469b-b5eb-bacc34f2fd8f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}',  true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="5fd3ba10-08da-484c-8c9b-ed78f4733e63"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="93547e1f-68bb-4860-838c-182a3835822d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="d1f08b0d-b373-4d34-bf17-1fe7373a6968"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует переданному в пуше значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="592e2b07-215d-49cc-bd68-5afe83139b90"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="993e86ee-5706-44c6-beed-e355c25b05e7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = false. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="8d182b46-9c98-4028-8a58-6d14bbe42cb4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}',  false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_TMK_STATUS.ID"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="f49c6071-d98c-4c5f-b93e-66e663d14320"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="4cdd1663-fcda-4b1d-8be4-877f0964bbb7"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="fa2d073d-de46-439f-9747-5b4863c2c5e4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует переданному в пуше значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="8756a525-82df-4223-83fe-2a5b3cde6db2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="82c90801-8ecf-4476-b2e2-5f02443299ac" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = true. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false." id="2f7c857e-b3b4-4db6-ad99-2194ec0ff620"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}',  true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_TMK_STATUS.ID"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="bc76f9a9-558e-4f65-b9fa-e90263be029c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false.</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="c0ed5b2b-ca4c-42e4-922a-adf723ff5650"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="4b99b4dc-9f90-4bcf-be36-b98b32ba2c04"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует переданному в пуше значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="fceb7a4a-752d-4c41-8e2f-146afbcc22cd"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найдена запись вида:

ACTION:ADDED GLOBAL_ID:$id from CATALOG:5575 push is_deleted = 1, database is_deleted = 0

где $id =  id созданной в тейс-кейсе записи</con:expectedResult></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="aec1dcc2-b675-4f0e-b66e-ffaf2da52c8a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="518057c1-2d5c-4c94-977f-8e7b8e004cb0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = true. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true." id="8102ff2f-62a5-490a-b62e-ab9d3c2e509b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}',  true, true)
RETURNING id


</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="4bafd4a9-b2be-4192-8ea7-5b434b7ae4c3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true.</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="e858e374-f25a-4aeb-8237-318a7bf4d33e"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="b3cabdef-5a52-4191-a8dd-b7b55fdfc970"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует переданному в пуше значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="24eeafc6-c604-4366-a145-70beadada336"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="ee34ff16-28f4-4bb1-925e-4cc45890f24c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. без признака is_deleted. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="7f3e6433-631d-474c-afd6-750087b588b4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', true, false)
RETURNING id


</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="11315526-d5a2-47bc-8954-28adcd7fac87"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="00d841e1-96c9-498a-8254-3a40a302fdc6"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="151567bb-6f9c-439d-9cd8-67a3bd5ff089"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует переданному в пуше значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="7bfb7c09-cb23-4afd-923a-1d99f888a4c4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="c80fbdc3-6389-40cb-aeac-90ca3e59578f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. без признака is_deleted. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="d2fb66ad-79d9-4c11-8e44-94d65fcd2a09"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', false, true)
RETURNING id



</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="846f3b30-8618-4d05-9d0a-6374d4e54324"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="f1b59556-1c8d-4401-b1ff-54371c993c2a"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5575 already deleted"><con:configuration><path>//*:out</path><content>ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5575 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что данные не изменились" id="41779802-9181-410f-908c-fa686bf87de3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует записанному в БД значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует записанному в БД значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует записанному в БД значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="41f0d6b4-60e6-4a08-b83d-6af362cbe608"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="c7396343-0a79-4ea3-9eac-1455bc2aeff8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = false. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="a3653a48-5dad-44f4-857f-a58b55e9f859"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="828b818f-764e-4ccd-b712-c2912adb67ba"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="c55301cd-e45f-47e6-b41a-c98bef899d44"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="d6d826ea-0cd9-4700-ad68-a6545acf745e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует переданному в пуше значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="5e559d5c-c35a-461f-b810-dfffadfbf0a3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="723fbe1f-96d1-4304-842d-257f65a118b1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = false. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="19752fc5-cd6e-4e03-a557-af5fa7bfbc13"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="e7413464-3b91-47b7-bd6f-a4fbb82e23ba"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="ce087d55-d08f-4a26-ba16-c2980d1e8713"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5575 already deleted"><con:configuration><path>//*:out</path><content>ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5575 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что данные не изменились" id="2979a16f-62c8-44f1-b6df-3455271ae3cb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует записанному в БД значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует записанному в БД значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует записанному в БД значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="e9a7c3e1-89b5-44ef-a862-8ffdd58b3b14"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="16f6e014-26f6-4f26-87a1-bb042cda091a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = true. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false." id="bc5bc851-4090-46cf-bffe-5817d166fe33"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', false, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="44f2a917-783e-4e39-babe-46e9bc8e25c6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false.</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="28d531d2-d192-453c-80b1-f2e5620d1e7a"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="8acbe5dc-25d1-42d6-9f56-032239712e08"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует переданному в пуше значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="e4b502fd-0e4e-44b3-b426-54dea38702ed"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="91af907f-c57e-4c65-9047-62423b346767" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = true. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true." id="b243e243-7a49-44b9-94a6-1a246fa50c38"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="5092bf3f-aa89-449c-a752-087892c5c58d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true.</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="7c87d4b1-ad00-42b4-960b-9be8a706d0e0"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5575 already deleted"><con:configuration><path>//*:out</path><content>ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5575 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что данные не изменились" id="cbecc3ad-ea28-4060-a3ba-9c6bf058edfc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует записанному в БД значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует записанному в БД значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует записанному в БД значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="db90f47f-bb88-4726-95b4-a505f0da1d08"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="808ca430-3988-42a2-9080-c87507c896eb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и без атрибута архивности, в бд is_deleted=false" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="4a3f18fa-bdf9-4f33-b412-8ed01f2e9ea6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="53735030-a639-4828-bbfe-3ce8187f96da"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="bf6defcd-e679-4b4e-910f-63cb1cee8e40"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="8e907956-31df-4688-b1c0-6fb1d5de26d2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует записанному в БД значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует пзаписанному в БД значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует записанному в БД значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="6c66d9ed-c052-4a0b-93ff-a713560f8367"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"Набор TMK_STATUS удалена запись global_id $id"

где $id = id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:expectedResult></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="245447cc-90a8-40d4-8252-ed6fb31c0479"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="a46c4444-0343-4d4d-914e-8643cd6726ed" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и без атрибута архивности, в бд is_deleted=true" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="8d5c1388-2991-4d06-be45-0f09be40f39a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', true, true)
RETURNING id

</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="ba1ee298-45fd-4547-a804-22380f709b80"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="9962adf2-4647-4e3b-b9a8-4d60a9a17393"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="96b0a16c-7cfe-46ec-b076-630993123c49"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует записанному в БД значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует пзаписанному в БД значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует записанному в БД значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="9a6def18-ead8-46e9-b907-015084a3a7b3"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"Набор TMK_STATUS удалена запись global_id $id"

где $id = id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:expectedResult></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="54402df1-9768-4b99-8771-bc2d7aad5b3e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="4ccac78d-76d9-4229-b9b1-dfe82f80a02a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=false, в бд is_deleted=false" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="7f2c1557-9fcd-411b-91c3-31868db1e154"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}',  true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="7caa9fd6-e265-49cd-8ed0-5cc0cbae55dd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="2627a77d-7073-4d22-856b-45797dd7de7f"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="021b0ee9-abf3-4b1f-a94c-d2b281f0def3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует записанному в БД значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует пзаписанному в БД значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует записанному в БД значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="3a701ab4-2184-4756-a6cf-cb238e357a3b"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"Набор TMK_STATUS удалена запись global_id $id"

где $id = id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:expectedResult></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="8503c178-30f7-4007-810e-9f15d542fea0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="19c0fbc7-c6ed-4f7f-97a5-24f43333b1be" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=false, в бд is_deleted=true" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="72507711-75c2-4362-b6a6-30edaf910da7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}',  true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="48de117b-c6ba-419e-a562-6d72ff0bc2e3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="5da41f81-027b-4764-a525-b63c684a7b18"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="8e3c0410-f650-41b4-b9d9-3cea672ae0c8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует записанному в БД значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует пзаписанному в БД значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует записанному в БД значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="592766f9-85f5-4cf2-931c-efa74c316139"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"Набор TMK_STATUS удалена запись global_id $id"

где $id = id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:expectedResult></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="45c864bf-cec6-49d8-9fc9-f4e88c5c7704"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="e0965643-f06f-4386-94aa-0d66babe8ea8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=true, в бд is_deleted=false" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="e304d3c5-0e55-4c75-a300-f419e5668f0f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="0eab2b3e-aafe-4b22-a2e4-4cfa464ea31c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="c3234b57-9b7f-4722-ba7f-8deca67d4870"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="5fbbb891-026a-4111-ad2c-754e53cec12f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует записанному в БД значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует пзаписанному в БД значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует записанному в БД значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="1db96696-fe0a-4e50-8b10-daa3538c305b"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"Набор TMK_STATUS удалена запись global_id $id"

где $id = id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:expectedResult></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="5e4863e8-8055-46e4-bbaa-7828d50df61b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="990c7819-a5d0-401e-a9e3-6020f7d1db33" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=true, в бд is_deleted=true" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="a83ebed8-deed-456a-968a-7f0755e890ae"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="2f0cefe3-d522-4adf-aefb-3a8c6dd01238"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="bb2c8515-24f4-427d-85f4-551412fc8616"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="65b9a339-a12f-48f1-9990-358bd5d8c0f1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует записанному в БД значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует пзаписанному в БД значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует записанному в БД значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="89bd8145-70e4-4736-9341-f3ecf40d2dbe"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"Набор TMK_STATUS удалена запись global_id $id"

где $id = id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:expectedResult></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="e7e340d8-2040-4319-8cce-c08867a33181"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="117fdc28-629c-4b9b-9e8a-8d2ad04a4471" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED для несуществующей в бд записи" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id записи" id="29cc422d-9efd-4fb5-a708-75ee07ec1a50"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="3a44a7a4-4b6a-484e-9c2f-b636a763fb1e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id записи</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="60e3c450-d9c2-4551-a331-393ecb81e091"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не создалась" id="5ee54bdb-7172-47e2-917c-dbfd3af89b3d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519372</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="cf4b5cda-1e73-406c-a089-5ed45ef59728" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута global_id" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="c6f282e3-d478-4760-8c62-2f368bec719d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="e84a934d-7d14-4db6-93fc-9a02b1265b90" name="Описание ошибки = ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="519aff7e-6750-43a3-9d0f-62718e244a59"><con:description>1. Зайти в грейлог
2. Найти лог по строчке 'не переданы атрибуты: global_id'</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"В наборе данных с global_id:  не переданы атрибуты: global_id"
</con:expectedResult></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="279b1322-e366-45c5-8603-8e3f8f849ac8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым global_id" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="3b0e0b4b-41a5-452c-b8d2-7b4b2ec87e42"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id:  у обязательного атрибута: id передано пустое значение"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id:  у обязательного атрибута: id передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="1a5d2e76-6b4e-430b-9158-79dcef908414"><con:description>1. Зайти в грейлог
2. Найти лог по строчке 'id передано пустое значение'</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"В наборе данных с global_id:  у обязательного атрибута: id передано пустое значение"
</con:expectedResult></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property></con:properties></con:testCase><con:testCase id="69141d4e-8f4c-479a-8857-85608b6a7edf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и global_id некорректного типа" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="9647047c-d467-4755-812c-cfc2c234aec3"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>test</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: test переданы значения, не соответствующие типам атрибутов: id"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: test переданы значения, не соответствующие типам атрибутов: id</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="a3aeb22d-311c-4af0-8950-819aed93b242"><con:description>1. Зайти в грейлог
2. Найти лог по строчке 'не соответствующие типам атрибутов'</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"В наборе данных с global_id: test переданы значения, не соответствующие типам атрибутов: id"
</con:expectedResult></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="a1f89479-692b-4dd5-a1fb-7a0b7202e6d3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута CODE" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="fb08a48a-eef6-49aa-b991-7dddce89b0b2"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: CODE"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: CODE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="9294169a-4f9f-4fd7-9442-0c29d0e7d713"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"В наборе данных с global_id: $id не переданы атрибуты: CODE"

где $id = id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:expectedResult></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="20b1a358-4255-49ca-a68a-8cb8c4e156da" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым CODE" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="93597374-c190-4d5f-bd85-82688208c3f2"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
    <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 124343242 у обязательного атрибута: codeReceptionType передано пустое значение"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: code передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="fa74ff84-8760-4029-9c54-fdc4687bde40"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"В наборе данных с global_id: $id у обязательного атрибута: code передано пустое значение"

где $id = id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:expectedResult></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="f4dc7b3c-bcd0-4dd9-8296-33a047a8069a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без параметра ARCHIVED" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="87fc723e-586c-4485-96b8-f529ca8df531"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>1987</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 124343242 не переданы атрибуты: ARCHIVED"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: ARCHIVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="60dc399a-a3f0-4fd8-8bc6-d83fe404f305"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"В наборе данных с global_id: $id не переданы атрибуты: ARCHIVED"

где $id = id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:expectedResult></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="67844016-97f5-4d20-831d-75bb4eff8903" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым ARCHIVED" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="bb2796fd-0253-4a25-93a0-a31044fa072d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 324355 у обязательного атрибута: archivedReceptionType передано пустое значение"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: archived передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="58c0b9d8-688f-4e49-a097-27fcdacc4433"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"В наборе данных с global_id: $id у обязательного атрибута: archived передано пустое значение"

где $id = id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:expectedResult></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="593b5907-bb5a-4e14-8a2d-66612f3fc06d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с некорректым ARCHIVED" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="d75f91fe-d48e-45c1-ba63-86ac9944701a"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
     <attribute name="DESCRIPTION" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#description2}</value>
      </values>
    </attribute>
    <attribute name="TYPE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#type2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>test</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: ${#TestCase#id} переданы значения, не соответствующие типам атрибутов: archived"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id} переданы значения, не соответствующие типам атрибутов: archived</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="d0e6cbac-8107-4990-8127-b56cd3be7276"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"В наборе данных с global_id: $id переданы значения, не соответствующие типам атрибутов: archived"

где $id = id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:expectedResult></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:testCase id="00a26b08-02c2-4950-8964-a986c08b0d2e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED. отправка пуша только с обязательными параметрами" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="d2ca1208-f605-4f35-a4c5-57ff602c66d4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="48ebe3a9-05bf-4d88-be50-c86d153c036b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="3abec9a7-548d-46e5-8ef8-1dc05516fc0d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="0827fa33-1fa9-42b3-a6fe-ffe2a1008370"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ID соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION = null"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>&lt;D_TMK_STATUS.DESCRIPTION/></content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.TYPE = null"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>&lt;D_TMK_STATUS.TYPE/></content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ARCHIVED = false - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.IS_DELETED = false - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="64372ee5-0edd-43d2-a7fe-bdd4081827d0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>codeFromAutotest</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property></con:properties></con:testCase><con:testCase id="2e588542-226d-4fef-95e3-42484d2eec3e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=MODIFIED. отправка пуша только с обязательными параметрами" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="937731a1-0bcb-4381-85cb-570ee12c459a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="e4c1d510-f648-411b-be99-eb3f24ba00ec"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="0949469e-1e8c-4d77-b0bf-f256702c6f0d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="5ad61697-2e20-4af1-9388-82d3f99e6945"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ID соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.CODE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION = null"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>&lt;D_TMK_STATUS.DESCRIPTION/></content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.TYPE = null"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>&lt;D_TMK_STATUS.TYPE/></content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.ARCHIVED = false - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_TMK_STATUS.IS_DELETED = false - соответсвует переданному в пуше"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="0725d6b5-c3fb-4475-b8f7-25ff6856ed36"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>codeFromAutotest</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description</con:name><con:value>Описание создано автотестом</con:value></con:property></con:properties></con:testCase><con:testCase id="c3fbf955-b6ca-48d2-9f62-7a0d1a21c5db" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=DELETED. отправка пуша только с обязательными параметрами" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="e22e2c10-88a3-4da3-b316-ad3a80441814"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO ${#TestSuite#table}
(id, code, "type" , description, archived, is_deleted)
VALUES((select max(id)+1 from ${#TestSuite#table}), '${#TestCase#code}', '${#TestCase#type}', '${#TestCase#description}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_TMK_STATUS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="7036212e-513e-4b39-aef9-9ac98c724407"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_TMK_STATUS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="8a5ef7c5-5961-48d0-a203-810e3136fec7"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="ac231292-e302-43a1-8ef7-0e8a5d082540"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_TMK_STATUS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует записанному в БД значению CODE"><con:configuration><path>//*:D_TMK_STATUS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_TMK_STATUS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_TMK_STATUS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="TYPE соответствует пзаписанному в БД значению TYPE"><con:configuration><path>//*:D_TMK_STATUS.TYPE</path><content>${#TestCase#type}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="DESCRIPTION соответствует записанному в БД значению DESCRIPTION"><con:configuration><path>//*:D_TMK_STATUS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить лог в грейлоге" id="75db2c11-5e9a-4eda-a8f9-6fea063821bb"><con:description>1. Зайти в грейлог
2. Найти лог по id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Найден лог вида:

"Набор TMK_STATUS удалена запись global_id $id"

где $id = id созданной в тейс-кейсе записи (переменная id в проперятх тест-кейса)</con:expectedResult></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="eef4cd4d-66a8-41b5-b5ba-a17ac3da2d6d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519368</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property><con:property><con:name>description</con:name><con:value>описание создано автотестом</con:value></con:property><con:property><con:name>type</con:name><con:value>info</con:value></con:property><con:property><con:name>description2</con:name><con:value>описание изменено автотестом</con:value></con:property><con:property><con:name>type2</con:name><con:value>warning</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>catalogId</con:name><con:value>5575</con:value></con:property><con:property><con:name>table</con:name><con:value>d_tmk_status</con:value></con:property></con:properties></con:testSuite><con:testSuite id="030ed481-8be6-418e-a47e-ce04a0070768" name="RECEPTION_TYPE_TMK_CODE(5102).Уведомления"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="ad3c70e0-c230-49e5-b4ab-39e699514be0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. без признака is_deleted." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="dff37420-3ae8-4d03-bb43-add376caa29b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="50ad2989-e4b1-4f57-aaed-e24e33a2d929"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="0f387d37-7842-4bc3-a406-92fb4acbf260"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="0b952e99-66cb-44bc-93da-d7892474cae9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="6d80df25-b413-426a-8a5c-617ea0a368be"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="36456053-7901-462e-88de-e6db5c7ab3c1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="65202ef0-bad3-40b9-8afd-ab4ad03f5b27"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="26bd6fae-5083-441d-8b8d-9872c361bb25"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="f73e4451-9193-49f2-a44e-7af3866a7f0c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="25a79cef-1f50-4457-9559-a2471021ca22"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="5f84a9f3-8aad-42fa-bc6a-0bc769a0d735"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="563dd922-7170-4679-96e1-bcad36124ddb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="b77ef510-464e-472d-b4b4-89411018a2f2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="b8ba2334-9229-43f3-bf9f-3f5bb103f903"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="d2489f31-d3ee-4c60-b475-42438012b92c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="8d38579a-a7be-4501-9dd8-cbdbdcda298a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="a207c063-22b4-4df6-b5eb-2b4b3aadd3e8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="c2a962b5-642e-4635-a35c-8e5b984ecc58" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. без признака is_deleted." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="f969b29c-61e8-4b92-8e94-de03ee84b577"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="2242e3d0-d6eb-4e92-8eaa-7b9725e15037"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="b5e0a155-dc2d-4a78-bbee-562d88426eb6"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="a54ff72c-5026-4c43-8fc6-93c7c6069b65"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="50d9ffb8-177d-4086-b6a7-73ea68ce9735"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1953</con:value></con:property></con:properties></con:testCase><con:testCase id="0f3b0809-6a07-4972-9489-e9e5cf7f9758" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="d874e5d6-8a57-4cfe-9a68-5757946d0265"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="74090562-76ab-451e-b1b1-3c2ca34ab13c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="40cf719e-f193-4fec-955b-986c1b4a9a47"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
        	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не создалась" id="7c8be4fa-27bd-496c-a8fd-dab8a739299a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1953</con:value></con:property></con:properties></con:testCase><con:testCase id="8992bbb4-1e5c-4d08-85fc-0581218bb178" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="00528a96-ba30-4ce1-8017-8db97673da8a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="8275c7e1-d367-4e67-8639-abe3b49eca35"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="c5e29096-816d-449c-9f9d-f35947d1abd3"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
        	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="efb86759-6899-42c6-ae8b-9de79d74bfb9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="5ca08057-8dea-4de6-b8b5-78c66e8e4c09"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1953</con:value></con:property></con:properties></con:testCase><con:testCase id="7abe4d1d-71d4-4a22-a071-361ee9753b36" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. без признака is_deleted. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="719c7251-136f-4a6c-8598-9f9e08a6cf5b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="f9820017-2af5-4127-9092-0a48a2240422"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="7068bcb8-8e46-42fa-a8d6-1289cd842ba3"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="1364489d-fb85-4720-80dc-f57c02b11ca8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="1d30ae2a-25d1-4a54-acbc-bb5236b2c44c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="ca82cacb-40e0-49fb-b40f-102fe67ad092" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. без признака is_deleted. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="19cd1b58-6c95-46f0-83fe-6d755fac0020"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="8fca8be6-eafe-4c3e-9622-f2390eaab341"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="dc675c65-a2d2-4af5-92ad-3b57de9b6775"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="3c59e86e-a274-469b-af03-bf11885739fd"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="2bdb73d0-0eaf-4771-a795-2beb05e94c47"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="feb56041-fca5-41e1-9261-eb44b0fd48fa" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = false. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="28a866ac-b90b-4909-9091-93aa05532404"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="c6484cae-b2b8-4af8-9876-6f34f5872ea1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="2b32c782-f1d5-4e03-8ba5-beace4a0598f"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="89dfc724-f4c5-41df-b289-cfefe2e02db5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="9861094f-8fec-4b4d-95c1-847f9b497756"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="1e9716d3-94fc-4f87-acf8-5987d03cefd4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = false. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="28f45211-b7fd-4bb6-87bc-fc72a4447aca"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="473b3b5c-f3a8-44db-8e39-bdef7bc8c684"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="7744fc81-ba75-4d85-b64c-2c9570d1f51a"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="f740ef6d-bae0-4d47-bff8-05fa7bdbed25"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="43a1ce37-972e-4f84-972f-d19f11c39c7a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="e2c6c557-cc0f-4042-a7f4-8c6a5cd31c55" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = true. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false." id="4a6ee3f8-814f-426b-b7d4-e7e9ce2363af"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', false, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="dbe163d5-0ee0-4faf-bb64-caa3b398da09"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false.</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="05ba993d-3350-4bfe-8dfa-812cbfb2c58b"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="95e35388-ca53-482c-a6b4-ba6279b79853"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="0a336a43-8953-45f1-9f7e-f7a1ff1b2c9a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="ed4cb6be-7d28-44c9-9fef-867fc4babda0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. в пуше is_deleted = true. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true." id="eac0d74a-93a7-4b07-b0ec-a1aa4892bd43"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="ef1641b3-6dda-4cb6-a4b3-365b7a8208ba"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true.</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="22c0f6a1-b9a8-4b73-bd8d-b8f5c655ac82"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="6438c1f7-9e3c-4521-b054-93352edd95ed"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="eae3a2d9-8e0e-4272-902e-69d7e02c6106"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="e2d5997f-48ce-48ec-b8cc-ba03682471f1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. без признака is_deleted. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="36486e9a-0c61-43bf-bd77-56fee3621686"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="67c372fc-5da6-4cdf-a699-a78472994677"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="fdb64c1d-df57-4889-b4f0-bb87ece34950"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="0fde8182-e8d9-43e5-a6d9-e5a2c0a4c776"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="dc100594-8a7c-41bb-bad8-7df8dd9d615c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="d73e6b59-a4cd-4e06-b338-7d66bee59fa5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. без признака is_deleted. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="d9630c10-3142-408c-808c-60910e5b6c78"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="290b0512-979a-48c8-918d-1e954fc37846"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="a8b493fc-732f-48cd-a452-561b317f048a"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted"><con:configuration><path>//*:out</path><content>ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не изменилась" id="5175ff7d-bc03-4ec7-a459-30acbd1447d0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="b814896c-81c5-4bc1-9515-9b9c6f699775"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="2cc93139-f983-444c-bff9-505d2a8ee640" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = false. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="e19ae7b3-e51f-47ab-b709-0a8ef2f63459"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="cecb15f0-1e43-4adc-991e-4d48a274fa69"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="1bf397d4-9dad-44ff-a9b6-903d1361014e"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="3f746cb8-b4bf-4770-99ed-2dd06a01ef52"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="1269fb61-430c-4045-8d20-1e9c7c0b141b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="f2f07d8c-35da-491d-bac0-e4f8cd78363e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = false. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="5ffb85fb-d366-4001-9336-2cffb42ab55b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', false, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="73c507e6-7f40-411c-b57a-05461e771824"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="28e183c1-057c-4766-acac-b37049f144ac"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted"><con:configuration><path>//*:out</path><content>ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, чтто запись не изменилась" id="b7fcda53-1aac-42e0-bd59-57a5d7d935e1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="d6dcc7d3-22fa-4fdd-b6fe-95ace0e96720"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="4465eb9a-b5c4-4a87-922c-76efe13095ee" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = true. в бд признак is_deleted = false." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false." id="1a7a8159-8b86-4c8b-9f45-6d5a9f892373"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', false, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="123237d0-caaa-4f96-802e-9cf93a2639cf"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false.</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="90c02db4-2be7-4fe8-8b95-e0d353516b8a"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что изменился только атрибут is_deleted" id="7f3bc509-a54a-4caa-aa55-943241a147e9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="a358f0eb-434d-4f38-a68a-adeb0dff2938"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="7a5744cb-6f13-4a80-bfa1-e43aac71297c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. в пуше is_deleted = true. в бд признак is_deleted = true." searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true." id="35910377-1368-49f7-b90b-ed3d1aef68ff"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="bc4430a0-4f2e-4171-a24c-b728b56dadbf"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true.</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="9eaee016-3058-442b-9353-c4ba4f57203b"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="MODIFIED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="out = ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted"><con:configuration><path>//*:out</path><content>ERROR: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:5102 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не изменилась" id="6d870dbb-3e94-4fa6-af27-4e65bf167ab7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = false"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="209a5d50-c462-4492-9ff9-f3920f863421"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="a209ad18-04be-43c9-bfdc-f5f638937a9c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и без атрибута архивности, в бд is_deleted=false" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="564d7509-61ff-40c0-8f82-04482386a214"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="3085da06-8df2-4fae-abfc-20044a142d99"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="9231be9b-6931-4c8b-a2b9-3d7256ceee39"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="0d86d2f1-3509-490b-b7a0-29e05f193f36"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует значению из шага 1 тест-кейса"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="9fede94b-8558-4ecc-98e3-0ca97f354da9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="64b9d047-f5c0-454b-9fba-5c144371b1ea" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и без атрибута архивности, в бд is_deleted=true" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="b34b53f8-9613-44b3-a0e5-5f02d08a87e1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="a2a155ad-53f3-46aa-8a3f-5f15eb2bf3f3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="cd39687c-e57e-4b9d-a663-bdf52ab739cc"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение признака is_deleted" id="7c29996a-8686-4920-bd9e-e2663490e463"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует значению из шага 1 тест-кейса"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="decded31-aa65-4c6b-8883-370f6d507cb8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="313bb357-ad03-4ebc-bbc5-19808b7999f5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=false, в бд is_deleted=false" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="28116b81-ccd4-4f0d-bc2d-f582b6d26525"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="3d2ea825-7058-433d-b95e-7c6747b66471"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="433b609e-fe21-4f64-9c67-e358ab101e91"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение признака is_deleted" id="4a01801b-3ee1-4b25-aea5-16a38e9a793a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="a924cea5-81c0-49c7-a73e-a1f285b3b6e4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="f1515c31-0283-4f2c-acf5-437b22a89ed7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=false, в бд is_deleted=true" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="7b847b80-17ad-47b0-82b6-2e2658bab3b3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="7f567e09-1518-4eec-945f-3315cf541699"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="59629344-c0ab-4968-a95d-7d9fd706edae"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение признака is_deleted" id="c850c21e-72c4-4819-8ad3-45fb23680c17"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="51befcfb-013c-4acc-ab5f-5061310bba33"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="ed038933-c1ca-4709-90d6-1d8fcde49c87" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=true, в бд is_deleted=false" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="b7c2b659-eb89-4833-9b67-12088bc07a77"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, false)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="ab2e12d1-dd2e-4efd-8fe7-156a1261b489"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="21ed1c97-7823-427d-b23c-e0a6b4e50e75"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение признака is_deleted" id="96842073-3d84-49f7-ad07-50b189bd9c79"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="bbb96a1e-5282-4f79-8bae-dd7bb075b592"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="c1d05c59-dc87-4006-89f7-498e2b688080" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED и is_deleted=true, в бд is_deleted=true" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="9c20529d-d4e0-4f19-99c9-71f3db609410"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>INSERT INTO d_reception_type_tmk_code
(id, code_reception_type, archived_reception_type, is_deleted)
VALUES((select max(id)+1 from d_reception_type_tmk_code), '${#TestCase#code}', true, true)
RETURNING id
</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="a29695eb-5cba-4a40-b574-d697ca09c217"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_RECEPTION_TYPE_TMK_CODE.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="46741e0c-ecf8-4602-9f93-bb4b61001b10"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение признака is_deleted" id="9749964b-d5eb-468e-9d83-bf08b9aee26a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="CODE_RECEPTION_TYPE соответствует переданному в пуше значению CODE"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="ARCHIVED_RECEPTION_TYPE = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.ARCHIVED_RECEPTION_TYPE</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="IS_DELETED = true"><con:configuration><path>//*:D_RECEPTION_TYPE_TMK_CODE.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="7ee1f50d-db07-4059-8c88-2c7a949c0ffe"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519374</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="f8232080-c02f-42f3-a0a8-6ce417ee556e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED для несуществующей в бд записи" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id записи" id="a9af0917-8cfe-4064-bdaa-6c6550ea6f0c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select max(id)+5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="12f1d0ab-9f65-4a17-b6de-5b6a68bae5e7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id записи</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="a3281fa1-5c8e-482e-80a9-748e4d5158b3"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="DELETED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>${#TestCase#id}</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code2}</value>
      </values>
    </attribute>
    <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>0</value>
      </values>
    </attribute>
    <attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="Не содержит soapfault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не создалась" id="d4e1bbf3-3ce7-41f0-a326-4c19973403cf"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoNotificationsDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoNotificationsFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519378</con:value></con:property><con:property><con:name>code</con:name><con:value>1213</con:value></con:property><con:property><con:name>code2</con:name><con:value>1214</con:value></con:property></con:properties></con:testCase><con:testCase id="e2ec2ead-b883-4394-bd3b-dbf286a91e8c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута global_id" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="3025067a-351b-410b-b8a9-9cfe78815d91"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="e84a934d-7d14-4db6-93fc-9a02b1265b90" name="Описание ошибки = ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="b374a528-08f2-4751-bd80-9efdef18bb9c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым global_id" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="fae4db99-c8a2-4f7f-9aec-bf868e58e525"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id:  у обязательного атрибута: id передано пустое значение"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id:  у обязательного атрибута: id передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="1d5237b3-330d-4b9f-92ae-5d6fe373a06b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и global_id некорректного типа" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="e5e2ce19-ad78-4c45-8574-9904cb1af764"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>test</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: test переданы значения, не соответствующие типам атрибутов: id"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: test переданы значения, не соответствующие типам атрибутов: id</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="4236621c-6542-46a9-b547-2150dcc092d1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без атрибута CODE" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="b0086cbf-a28e-4d23-9477-8ef0e2de1058"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>1242354353</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 1242354353 не переданы атрибуты: CODE"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: 1242354353 не переданы атрибуты: CODE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="a556c8f6-2999-41db-8efb-e0aa29bd6983" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым CODE" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="33132f56-0f2f-4280-9769-a872953f7432"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>124343242</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 124343242 у обязательного атрибута: codeReceptionType передано пустое значение"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: 124343242 у обязательного атрибута: codeReceptionType передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="edbcb11b-3bfe-4be2-a88e-cf02ca672f34" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с некорректым CODE" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="ed8f5d96-7d27-4b25-b4a4-c8f7c7c29f28"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>124343242</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>test</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>1</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 124343242 переданы значения, не соответствующие типам атрибутов: codeReceptionType"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: 124343242 переданы значения, не соответствующие типам атрибутов: codeReceptionType</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="5ff479c6-91ca-4156-b11d-a8310df9c1bb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и без параметра ARCHIVED" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="b7c0478f-702a-469b-b592-3cfee305368f"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>124343242</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>1987</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 124343242 не переданы атрибуты: ARCHIVED"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: 124343242 не переданы атрибуты: ARCHIVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="c5cf32d9-c7dd-413c-ab41-674baab7fa6f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с пустым ARCHIVED" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="bccb39bf-cb41-4c9b-a432-9f0dbe679525"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>324355</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 324355 у обязательного атрибута: archivedReceptionType передано пустое значение"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: 324355 у обязательного атрибута: archivedReceptionType передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:testCase id="b0f3b668-706c-46eb-9ed9-da86cd1c5ead" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="action=ADDED и с некорректым ARCHIVED" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Отправить пуш" id="d9c7b476-62c4-4716-abcc-d56c7ed7c4ff"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoNotificationsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>NSI2</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body>
    <ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
      <in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
  <categories>
    <category idHier="" nameHier="">${#TestSuite#catalogId}</category>
  </categories>
  <data action="ADDED">
    <attribute name="global_id" field_id="-1" type="NUMBER">
      <values>
        <value>324355</value>
      </values>
    </attribute>
    <attribute name="system_object_id" field_id="-2" type="STRING">
      <values>
        <value/>
      </values>
    </attribute>
    <attribute name="CODE" field_id="10877" type="NUMBER">
      <values>
        <value>${#TestCase#code}</value>
      </values>
    </attribute>
        <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>test</value>
      </values>
    </attribute>
    	<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
  </data>
</catalog>
    </package>]]]]>><![CDATA[</in>
    </ChangeElement>
  </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple Contains" id="e52092cc-d7c4-480c-a742-722f45c813ce" name="Содержит ERROR"><con:configuration><token>ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="79e0263b-fa54-4b73-b29f-0aa443fc9358" name="Описание ошибки = ERROR: В наборе данных с global_id: 324355 переданы значения, не соответствующие типам атрибутов: archivedReceptionType"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: 324355 переданы значения, не соответствующие типам атрибутов: archivedReceptionType</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>1246519365</con:value></con:property><con:property><con:name>code</con:name><con:value>1923</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>catalogId</con:name><con:value>5102</con:value></con:property><con:property><con:name>table</con:name><con:value>d_reception_type_tmk_code</con:value></con:property></con:properties></con:testSuite><con:testSuite id="4f1da7c4-222d-4122-861e-d2841e937ca4" name="HEALTH_GROUPS(2545)"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="e07fafb6-ae40-4289-8c4f-f183586088ac" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. без признака is_deleted_ID409396" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="1208e968-881c-4d4d-9bcc-74f644b04cfb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="a660aa43-3262-4606-bdd3-cffb04c80c7a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="a4491654-ff10-4fc6-bdc1-121a0bb3720e"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="5acd3225-3af2-44d3-b936-46b7ed73527e"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="6010ded6-f26d-4e97-a2fd-4fb65149292b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = false"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="19113cc2-5307-41d4-abd5-677c5e46713a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409396</con:value></con:property><con:property><con:name>code</con:name><con:value>968</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409396</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409396</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409396</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409396</con:value></con:property></con:properties></con:testCase><con:testCase id="d31e4077-9eee-483f-9aec-e5421b8274b1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. Признак is_deleted = true_ID409411" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="dcbc430d-9ca5-41b6-8e39-4b0371ea73c2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="e66a7c5f-890d-4858-ba18-3fcde17c5dd1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="a25ba68e-2c51-4771-8433-87745773cc6a"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="96b4ab22-c78c-4987-9a2c-6005af2e18eb"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="988d6a4f-0490-45e3-9ea7-4a6d78d1f1be"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="571a6b38-66eb-4242-ae63-d6521decd463"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409411</con:value></con:property><con:property><con:name>code</con:name><con:value>190</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409411</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409411</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409411</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409411</con:value></con:property></con:properties></con:testCase><con:testCase id="aa243329-0a6b-4a36-a80d-e76d7946d07f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED. Признак is_deleted = false_ID409413" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="7182249c-bbda-41c3-9314-4843eefa3d82"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="20a92bbf-6939-4089-9459-c0f087b19a43"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="86ae8483-4c73-4e4e-b2f1-e2f5d28cb584"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="a166762b-b8a1-4049-bd48-6ded5d67159d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>0</value>
		</values>
	</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="2d959780-2670-4f2f-93dd-cb7ceac70735"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = false"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="04742f2a-9823-4db6-9752-c31f97c26c37"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409413</con:value></con:property><con:property><con:name>code</con:name><con:value>379</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409413</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409413</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409413</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409413</con:value></con:property></con:properties></con:testCase><con:testCase id="af2de356-5ff3-475b-8c61-dab9ea7e3ae7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. Без признака is_deleted_ID409414" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="cf0bd687-722d-47d5-b305-1c9698cd3868"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="b7a4345d-197d-484d-bf4b-3538cdac3bfd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="4e1be890-fe60-4423-95b9-5d885a711ec6"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="56373d58-2171-44e7-88d1-c99df7f03ceb"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="1b2a4d94-6be3-4879-8298-a49e31484b49"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = false"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="aa5dc836-0efc-4af7-b799-55eb0aecbbe2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409411</con:value></con:property><con:property><con:name>code</con:name><con:value>280</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409411</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409411</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409411</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409411</con:value></con:property></con:properties></con:testCase><con:testCase id="91c54fb0-48b2-4c52-826f-92ee689b5a7d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. Признак is_deleted = true_ID409416" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="0c1e5dcf-8a6b-4398-a175-17ee0d01d325"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="de87bede-ff53-46dd-8311-7999a59dfd24"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="ea498cd7-3a63-4113-a049-8c25bceea452"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="55d05f74-449a-44f9-a82d-0235f3e590cd"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
		<attribute name="is_deleted" field_id="-7" type="NUMBER">
		<values>
			<value>1</value>
		</values>
	</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не создалась" id="bcac4001-f179-4867-87f2-37c0c2ecf74f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей = 0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409416</con:value></con:property><con:property><con:name>code</con:name><con:value>410</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409416</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409416</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409416</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409416</con:value></con:property></con:properties></con:testCase><con:testCase id="ffd55202-3a2e-49bf-9ea0-7bd049b7e9c3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED. Признак is_deleted = false_ID409418" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="1061cde7-6768-4c0d-bb78-d776907dff15"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="21966821-9448-4c22-b2ea-317df8a8e7c4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="8ba959b5-bfc5-4451-a631-16b337b9cdd5"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="3f528c75-e012-418d-b579-5aace1363ee1"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
		    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>0</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="0aed5b7a-cc52-470d-adc3-c095e56cbea2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = false"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="b1c02bed-b1d9-4ba9-875b-79bb91493606"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409418</con:value></con:property><con:property><con:name>code</con:name><con:value>325</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409418</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409418</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409418</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409418</con:value></con:property></con:properties></con:testCase><con:testCase id="40c5f47d-b08f-43c8-9f9d-95917c2f5fd6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. Без признака is_deleted. В бд признак is_deleted = false_ID409419" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="1002bf00-2571-47f8-a5d4-5711c4a85df4"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="d2fb4660-f7c4-4e63-8e12-b2d5a8e7a809"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="b1a39095-68da-432f-9c1d-b8819aa2d5d9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="ae2dd5f6-e3bb-45c6-ac9e-c88cd36366f1"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="878fd80a-47fc-4ddd-97b8-54c1012f40ff"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = false"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="e30b62a0-d49c-4964-b79d-20d5b6c8d577"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409419</con:value></con:property><con:property><con:name>code</con:name><con:value>736</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409419</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409419</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409419</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409419</con:value></con:property></con:properties></con:testCase><con:testCase id="bb60d138-e6a0-4537-9cc4-696da5e89330" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. Без признака is_deleted. В бд признак is_deleted = true_ID409423" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="862de67b-0e52-4439-986b-c8618ad93c7e"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="c74f286d-3896-423f-9e52-f0e91f28a8e3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', false, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="fa1fa7f3-9895-443f-9d96-7a46109d962a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="ab306ca4-7fcd-42f9-8cfc-814cfd6f27ba"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="282dbb5a-dec8-4546-8a97-48ff63e58135"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = false"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="8d9752fa-ba73-4cd7-8ad8-20c2eace58c9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409423</con:value></con:property><con:property><con:name>code</con:name><con:value>185</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409423</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409423</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409423</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409423</con:value></con:property></con:properties></con:testCase><con:testCase id="ec7dcff7-7333-4135-8e9e-dad68b5d91a3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. В бд признак is_deleted = false. В пуше is_deleted = false_ID409424" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="52c435be-fd66-4e78-bd26-9fe79bfc7e01"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="7e4ea8a4-33df-4490-9b2e-5c92f3d561ca"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', false, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="db265d21-9a56-4193-b3b4-78572dbb08bf"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="cdda9ff5-bb3e-442e-a262-4ce84ac1d865"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>0</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="fd81882e-c7a6-4c88-973a-3387a481634c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = false"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="1c20d568-c402-43d3-aa35-ce00dcd342b8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409424</con:value></con:property><con:property><con:name>code</con:name><con:value>820</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409424</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409424</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409424</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409424</con:value></con:property></con:properties></con:testCase><con:testCase id="9e01467d-afdb-4445-bd01-61a37908dd1c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. В бд признак is_deleted = false. В пуше is_deleted = true_ID409425" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="45af6299-5982-4a66-b30c-8683c673ea12"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="b55abdae-0ac1-4852-a740-e9d4e684dc5f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', false, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="0af49788-f2d3-4b23-a030-d7dc4c9dd130"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="3636297d-8e88-4a2e-aff0-256fbe81accf"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>1</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="83fe049d-5cd1-4ffd-a65f-3e7250ffbb6e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="ac0bb4bb-d3de-4673-b90b-979942d7cda5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409425</con:value></con:property><con:property><con:name>code</con:name><con:value>509</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409425</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409425</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409425</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409425</con:value></con:property></con:properties></con:testCase><con:testCase id="ddf03e96-185f-488b-a4f8-64ec81519d06" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. В бд признак is_deleted = true. В пуше is_deleted = false_ID409429" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="64b3cbc8-cfc3-4493-b5fc-f31e2592f6ea"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="4b125dcd-05da-42d2-8338-abc9fef8eaf6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', false, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="a77e01d6-3cfd-43ba-884d-4507282e566b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="2bd8ede2-95ba-4cf1-a4a0-9767129ffe8b"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>0</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="24f95c6c-cb75-48ac-ba91-718c3b998295"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = false"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="db277cfa-6070-4fe5-9efa-8b2de7bc81c7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409425</con:value></con:property><con:property><con:name>code</con:name><con:value>894</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409425</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409425</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409425</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409425</con:value></con:property></con:properties></con:testCase><con:testCase id="574105c6-ccee-4be4-b57d-9339f8630837" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED. В бд признак is_deleted = true. В пуше is_deleted = true_ID409431" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="33c8e7ab-4a8e-4181-abb2-cc82cee7e9fd"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="7956a0d4-dd60-4d20-a09d-f46c8b7c2efb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', true, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="0c69e7f6-f368-404b-a145-c0c1d551afd3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="7bfd81cd-69bf-4476-b336-fa17240521a3"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>1</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="bc9184ff-34c1-43ca-9439-d7d6b883ef2e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="58c44856-4ffa-459c-b6ee-10799e5e92d3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409425</con:value></con:property><con:property><con:name>code</con:name><con:value>869</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409425</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409425</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409425</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409425</con:value></con:property></con:properties></con:testCase><con:testCase id="20c8fc67-bc89-48c3-9a44-6e656cfbbece" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. Без признака is_deleted. В бд признак is_deleted = false_ID409432" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="eddfa63b-5231-4db2-833c-0cb9e5ca2f59"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="3e788062-4e52-4653-a603-8e915c35f9c3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="0653ae9c-416b-46ba-a27f-6397fb8a5ac1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="06823aa8-ba8a-4af0-b032-faf6892a807b"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>

	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение записи" id="a8540c83-3638-41c4-8c3d-2c83a4dd8ea2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = false"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="b4cdea8c-0874-455a-88a8-5e449d0a56c7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409425</con:value></con:property><con:property><con:name>code</con:name><con:value>950</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409425</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409425</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409425</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409425</con:value></con:property></con:properties></con:testCase><con:testCase id="72b027cf-371a-474a-9959-e317f64f49b6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. Без признака is_deleted. В бд признак is_deleted = true_ID409460" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="db024c1c-55ea-45b3-8876-b42e8df1b972"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="0b9647eb-ff8b-4958-a051-3ad1b4b4ed04"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', false, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="bca09247-3a1e-42b7-88bc-88bbb1d950b2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="8113f81d-4660-41ae-9ec6-f0dd78c18e50"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>

	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:2545 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие изменений в записи" id="195fba95-91cd-4b81-8c98-5c951fff8387"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="5ebef249-d55f-4dcf-b06f-da1a5362a4f6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409460</con:value></con:property><con:property><con:name>code</con:name><con:value>158</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409460</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409460</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409460</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409460</con:value></con:property></con:properties></con:testCase><con:testCase id="77fdfb18-cbed-45ac-b35f-b5a04e9ef7a6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. В бд признак is_deleted = false. В пуше is_deleted = false_ID409617" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="858a745d-7b86-4b0d-88e6-4a2b25e2866d"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="5294e899-ccd1-4fa7-bde5-f8a33014ef6d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="5c498c39-4edc-48c4-bb78-d3f165847886"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="69067565-5f05-4d8f-9067-b848c0639bcc"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>0</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменения в записи" id="c5ef07b8-2296-4b54-9e6a-fa4a82fb036d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = false"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="fe0ddf17-084a-4065-a32e-c51b61d1d839"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409617</con:value></con:property><con:property><con:name>code</con:name><con:value>831</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409617</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409617</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409617</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409617</con:value></con:property></con:properties></con:testCase><con:testCase id="c25ab0f4-b590-4bf3-b10b-fc310b5b9947" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. В бд признак is_deleted = false. В пуше is_deleted = true_ID409629" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="080325ea-ca0d-4c00-85c1-a2425b0f5a48"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="af85cd42-2164-4b24-9442-9534e9f03a5e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="b9cb4201-9379-4cd3-bf1f-c046df92a308"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="f9abd5bc-8cc6-4abe-99ba-139472f8b631"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>1</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменения в записи" id="7ac65d97-cd32-491a-bab6-d75bc9614730"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION соответствует переданному в пуше значению DESCRIPTION"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}_changed</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="77216fa9-fd04-4712-b64f-6c640013711b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409629</con:value></con:property><con:property><con:name>code</con:name><con:value>348</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409629</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409629</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409629</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409629</con:value></con:property></con:properties></con:testCase><con:testCase id="70c4ac6f-fb8a-496c-aab5-b73ee0cde94b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. В бд признак is_deleted = true. В пуше is_deleted = false_ID409647" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="de0150f4-aac3-4304-ae8b-a8896c5618b0"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="e6ceeb8a-d774-4b9d-a0e4-037d671338b8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', false, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="d6438755-9dca-478b-b8c3-3792b7a6e143"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="9824bd61-51a6-4d07-9ad4-021f1a26b116"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>0</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:2545 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие изменений в записи" id="5f4f74a0-eac4-473b-81ea-972d4ac0621b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE осталось без изменений"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE осталось без изменений"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION осталось без изменений"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED осталось без изменений"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="cbb38004-38a7-4f93-980b-85c5883f3441"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409647</con:value></con:property><con:property><con:name>code</con:name><con:value>143</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409647</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409647</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409647</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409647</con:value></con:property></con:properties></con:testCase><con:testCase id="38855390-4f55-4cb4-96ee-af2fa25ece1b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED. В бд признак is_deleted = true. В пуше is_deleted = true_ID409667" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="cdf3149f-5973-4e95-8f52-d6e165b6776c"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="26e4e84e-52d2-4de3-87d6-5d695e65083f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', true, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="20daae40-b259-43ae-8cda-20b9fb249c98"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="591df29d-473b-4573-8546-8e89a5349ac9"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="MODIFIED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>1</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: [NSI] ACTION:MODIFIED GLOBAL_ID:${#TestCase#id} from CATALOG:2545 already deleted</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие изменений в записи" id="0991c980-3709-4cba-ac35-e77670a998c2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE осталось без изменений"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE осталось без изменений"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION осталось без изменений"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED осталось без изменений"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="f1c9109c-f5f0-4728-9076-efed412e5663"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409667</con:value></con:property><con:property><con:name>code</con:name><con:value>873</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409667</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409667</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409667</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409667</con:value></con:property></con:properties></con:testCase><con:testCase id="396094a2-2839-48bc-90cd-1202372349d9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted. Action=DELETED. Без признака is_deleted. В бд признак is_deleted = false_ID409498" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="c22fd7c2-ac29-46e0-a68e-2b30c04170a2"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="14af0d14-ceed-4af8-87a2-4268a600b3d2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="e3f23fb7-c594-4f1d-a9d1-55199bd384ab"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="73d57599-4462-4c14-9cc9-9bc5b1fab9e6"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="9f672dbe-8e3b-4247-a814-7a62a6419370"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="e63a2387-de43-447b-9490-7913c381398d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409498</con:value></con:property><con:property><con:name>code</con:name><con:value>530</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409498</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409498</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409498</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409498</con:value></con:property></con:properties></con:testCase><con:testCase id="cd76c934-dc1e-491b-9d02-8f67c1c97eec" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted. Action=DELETED. Без признака is_deleted. В бд признак is_deleted = true_ID409526" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="8002a5a2-9979-4e73-9139-c4c4b8fb32c6"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="8bebfa34-7ae9-4f7b-9b05-fd06da0c9490"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', false, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="b2edb624-cfd5-498c-b1c0-5f538621ec14"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="a9190e44-6348-4f1b-8e30-320902fd5692"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="216ca4ce-39af-4ff2-95ea-3895e39b9d7c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="dd497fc3-bf47-4a61-9997-944ee277481f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409526</con:value></con:property><con:property><con:name>code</con:name><con:value>508</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409526</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409526</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409526</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409526</con:value></con:property></con:properties></con:testCase><con:testCase id="fb623af2-b928-42b8-bd58-3e11b984eca7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted. Action=DELETED. Признак is_deleted в пуше =false, в бд is_deleted=false_ID409531" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="3d69bd35-3a2a-4a73-b374-e65285a0d10e"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="dff3e301-2c4a-4410-a8d1-4a8489c3715b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="f74d51b9-4fe7-4896-a15d-9ce2ed9b5462"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="a80459c6-54f8-439f-a505-37ded9273584"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>0</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="455a4f71-418b-4775-8c9c-2ab1fb779aba"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="657c0ac2-96ed-48af-85e8-37ef84462b39"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409531</con:value></con:property><con:property><con:name>code</con:name><con:value>710</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409531</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409531</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409531</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409531</con:value></con:property></con:properties></con:testCase><con:testCase id="92cbf763-5ac9-4523-a954-8ee99164eafe" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted. Action=DELETED. В бд признак is_deleted = false. В пуше is_deleted = true_ID409542" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="6f18a702-4c87-46e1-a3f1-9d5ca687ec46"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = false" id="400c2e1a-aae0-4e09-8483-7f0dd3ac5f21"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', true, false)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="6b2aad23-b4c1-4ea4-96f1-9abfd6ef55ff"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = false</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="e65fa4ab-ec8f-4b22-aaf6-d2948daefb9c"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}_changed</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>1</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить изменение только признака is_deleted" id="3626a0c2-044c-4a60-8cee-c77f5f9f245b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="59bdcb03-3e7e-464c-8fbd-d39d05aee49e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409542</con:value></con:property><con:property><con:name>code</con:name><con:value>514</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409542</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409542</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409542</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409542</con:value></con:property></con:properties></con:testCase><con:testCase id="7b28888a-787d-43d3-b5ca-b63aeb361bc9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted. Action=DELETED. В бд признак is_deleted = true. В пуше is_deleted = false_ID409580" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="d0183d94-1bcd-467e-aa03-837b9a8a668d"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="4dc8b6db-fc16-482d-806f-8e24d6978584"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', false, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="a95425cc-1b96-4fc8-8909-212083bd8528"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="7461d24f-5571-4b4c-8aff-28d1b27faa36"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>1</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>0</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие изменений в записи" id="fc7d84e5-0e2d-4a00-be25-c5c975f0c438"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="02c7d783-8207-4c6a-adaf-e9f148c2d71d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409580</con:value></con:property><con:property><con:name>code</con:name><con:value>783</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409580</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409580</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409580</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409580</con:value></con:property></con:properties></con:testCase><con:testCase id="860bf70b-b4a8-4595-9128-28885ad1e6a5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted. Action=DELETED. В бд признак is_deleted = true. В пуше is_deleted = true_ID409596" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="007f0e71-2657-40ce-903c-6d4d7ac7abcc"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись с признаком is_deleted = true" id="cb592b03-48df-4203-bf6a-e5b7c0115f64"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO d_health_groups
(id, code, title, description, archived, is_deleted)
VALUES((select max(id)+1 from d_health_groups), '${#TestCase#code}', '${#TestCase#title}', '${#TestCase#description}', true, true)
RETURNING id</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains D_HEALTH_GROUPS.ID"><con:configuration><token>D_HEALTH_GROUPS.ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="ebb602f2-20c2-4cb8-b030-434e9f1a91e3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Создать запись с признаком is_deleted = true</con:sourceStep><con:sourcePath>//*:D_HEALTH_GROUPS.ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="5f053423-d845-40ae-885b-3b1691f7a43d"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}1</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}_changed</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}_changed</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}_changed</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}_changed</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}_changed</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>1</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие изменений в записи" id="34ddb17d-5726-4e4d-850a-6e458b1de4fc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>${#TestCase#description}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED остался неизменным"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = true"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>t</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="307548ef-f6ec-4780-972a-41975c0638d4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409596</con:value></con:property><con:property><con:name>code</con:name><con:value>185</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409596</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409596</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409596</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409596</con:value></con:property></con:properties></con:testCase><con:testCase id="af4cc8ad-a00a-4d5b-96cf-699fb85c6a1e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Обновление признака is_deleted action=DELETED для несуществующей в бд записи_ID409677" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="397bc1f1-00ad-4646-9fe9-b86565e521fb"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Подобрать id записи" id="8bd40047-3597-4181-a25e-5d7111ec65b0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+5 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="c291ff6a-a9b3-4110-88b1-52c453cf18b8" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="b1d4fde2-a0ed-4ccc-a31a-cdde95f9ce10"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id записи</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="835b84b1-2b16-45da-a467-6f17c2abf59b"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="DELETED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
				    <attribute name="is_deleted" field_id="-7" type="NUMBER">
	<values>
	  <value>1</value>
	</values>
   </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить, что запись не создалась" id="7fd4b4dc-7000-4612-bca7-541dd3152beb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302199</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409677</con:value></con:property><con:property><con:name>code</con:name><con:value>157</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409677</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409677</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409677</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409677</con:value></con:property></con:properties></con:testCase><con:testCase id="9555ded6-90cc-4c17-bf0f-d65164fb0571" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED и без атрибута global_id_ID409689" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="d5f6488b-31ac-4268-80d4-eec0eb205189"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="914588f5-9e64-47db-a358-cdacc4479e51"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="9e431fe7-3d04-4554-8d64-0c147924c9b7"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="7e4e8502-6d50-4186-8f93-05d94e974567"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id:  не переданы атрибуты: global_id</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи в d_health_groups" id="4d06406f-f044-4d21-8100-d1059eb81d8d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей = 0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409689</con:value></con:property><con:property><con:name>code</con:name><con:value>825</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409689</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409689</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409689</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409689</con:value></con:property></con:properties></con:testCase><con:testCase id="60739dd4-406b-4546-8a67-25c3a62a51be" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED и с пустым global_id_ID409728" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="9e50a227-b1a5-4cd1-a41b-d9cdb1bed9c8"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="05f726e0-8edf-4eb4-8489-2e7052a6e14e"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value></value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id:  у обязательного атрибута: id передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи в d_health_groups" id="50c3217d-5af1-4eca-8ea7-4bd8118d0a3d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей = 0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409728</con:value></con:property><con:property><con:name>code</con:name><con:value>079</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409728</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409728</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409728</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409728</con:value></con:property></con:properties></con:testCase><con:testCase id="0a9ce0ef-1b31-4bb8-bba0-0e5d77ed041d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED и с некорректным global_id_ID409984" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать уникальный code" id="edca6180-2604-4415-b624-a2c4180bb7e4"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="65666cf7-367e-41e6-af4a-fd36f169aa04"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>test</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: test переданы значения, не соответствующие типам атрибутов: id</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи в d_health_groups" id="ddf5f2bb-eed9-413d-ab92-3a199299f081"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей = 0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409728</con:value></con:property><con:property><con:name>code</con:name><con:value>153</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409728</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409728</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409728</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409728</con:value></con:property></con:properties></con:testCase><con:testCase id="47ae988e-6740-4e64-ae2c-91c3be84fdea" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED и без атрибута CODE_ID409744" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="ecc1b23b-9d6d-4075-b477-2dc791af32a7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="096ac715-540d-44e3-8444-021c1ca390ba"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="672bf90e-c9f7-4e5c-b796-388289719643"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="bbcac0ed-f132-4861-ba38-bfde1c8ea88e"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>


		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: CODE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи в d_health_groups" id="17ac8add-a007-4e7f-b027-5920efd0b750"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей = 0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409744</con:value></con:property><con:property><con:name>code</con:name><con:value>187</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409744</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409744</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409744</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409744</con:value></con:property></con:properties></con:testCase><con:testCase id="d0fcb9f8-9eab-4036-a891-ad89b7914c37" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED и пустым атрибутом CODE_ID409981" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="30014e30-ba99-40de-821d-609992539753"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="8bfa88da-3bf3-4778-aac5-f135144815aa"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="ce4d8543-6f35-4b83-898c-450900a862c7"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="99b4f02a-7140-4d8f-9d83-f1a0215eaa42"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
    <attribute name="CODE" field_id="10877" type="STRING">
      <values>
        <value></value>
      </values>
    </attribute>

		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: code передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи в d_health_groups" id="e74324ff-2b01-48dd-83bd-5f00ab1fd4bc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей = 0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409744</con:value></con:property><con:property><con:name>code</con:name><con:value>841</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409744</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409744</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409744</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409744</con:value></con:property></con:properties></con:testCase><con:testCase id="1203dd61-dc60-4232-a2b8-f2e679afa180" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED и без атрибута TITLE_ID409771" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="1fbd7b0d-405a-4222-83c6-98cb6516421a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="32eff74a-9c3e-4492-bd96-8c2f4a475d35"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="34258eec-cc96-4bfa-8b6e-3d32b36e80c5"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="e9bfbabc-6613-4959-8b96-67574d11be74"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: TITLE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи в d_health_groups" id="d35e3f08-7011-498b-811b-2ecc002b5f71"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей = 0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409689</con:value></con:property><con:property><con:name>code</con:name><con:value>278</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409689</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409689</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409689</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409689</con:value></con:property></con:properties></con:testCase><con:testCase id="1515036c-d488-4d37-aee3-8caca5b21350" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED и пустым атрибутом TITLE_ID409982" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="6846335c-027a-49dc-8799-61e662426c5e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="13a91ef6-ecbd-41d5-91fb-6b928213e7f4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="350e82ee-bae3-455b-b9e8-7817aabd9182"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="ce41acd5-31fd-4b95-aa78-3d8e15a32246"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		  <attribute name="TITLE" field_id="10878" type="STRING">
      <values>
	<value></value>
      </values>
    </attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: title передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи в d_health_groups" id="cc28f76e-5e6a-4fbc-ab21-abf4fbb1c69f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей = 0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409689</con:value></con:property><con:property><con:name>code</con:name><con:value>802</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409689</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409689</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409689</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409689</con:value></con:property></con:properties></con:testCase><con:testCase id="96843f8b-5356-40c8-a358-2d4c80fda3d4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED и без атрибута ARCHIVED_ID409783" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="d70bdf5d-c2c9-4f24-9309-23a364377e5f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="79d67953-8a9d-4d99-81c4-0443f36cd049"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="524eeb14-0d86-45c8-8ede-a709e0c920ac"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="731aeaeb-68b7-4db1-8511-355eb562ec1e"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} не переданы атрибуты: ARCHIVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи в d_health_groups" id="c0274115-873a-414e-a42c-ab33e83c7385"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей = 0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409783</con:value></con:property><con:property><con:name>code</con:name><con:value>704</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409783</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409783</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409783</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409783</con:value></con:property></con:properties></con:testCase><con:testCase id="71b710fe-c4ff-4a41-96ca-581f849f51fd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED с пустым атрибутом ARCHIVED_ID409983" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="b64cc0e0-bc0d-465e-805e-130198626848"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="a7aa9da1-1775-4d84-ae31-91db31443548"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="618ea2e6-6d5b-4bff-8de4-443bb9eaf73f"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="72075d40-fb02-48fe-a6c6-0c968e397ee4"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
		 <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value></value>
      </values>
    </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} у обязательного атрибута: archived передано пустое значение</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи в d_health_groups" id="dc6e82e5-b750-4b14-9f98-2c4d834eceab"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей = 0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409783</con:value></con:property><con:property><con:name>code</con:name><con:value>261</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409783</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409783</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409783</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409783</con:value></con:property></con:properties></con:testCase><con:testCase id="b3b9ebf6-4997-4720-8590-7ea27f2e98e4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED с некорректным атрибутом ARCHIVED_ID409986" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="2fa8c0b0-2613-4718-aa45-11bf3b369849"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="a5279c63-6541-4841-9f0a-10765a562506"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="093dd20f-a8d4-4422-819a-8ba8d2eea2d5"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="21ba6cbf-c226-4084-b5f0-03eaba02ec20"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME" field_id="10880" type="STRING">
			<values>
				<value>${#TestCase#shortName}</value>
			</values>
		</attribute>
		<attribute name="SHORT_NAME_NOT_TITLE" field_id="10881" type="STRING">
			<values>
				<value>${#TestCase#shortNameNoTitle}</value>
			</values>
		</attribute>
		<attribute name="VALUE_FROM_EHR" field_id="10882" type="STRING">
			<values>
				<value>${#TestCase#valueFromEhr}</value>
			</values>
		</attribute>
		<attribute name="DESCRIPTION" field_id="10879" type="STRING">
			<values>
				<value>${#TestCase#description}</value>
			</values>
		</attribute>
		 <attribute name="ARCHIVED" field_id="10877" type="NUMBER">
      <values>
        <value>test</value>
      </values>
    </attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=ERROR"><con:configuration><path>//*:out</path><content>FAIL: В наборе данных с global_id: ${#TestCase#id} переданы значения, не соответствующие типам атрибутов: archived</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить отсутствие записи в d_health_groups" id="8c5ab986-ba5b-44be-9a66-59fcd51d9841"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей = 0"><con:configuration><path>count(//*:Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409783</con:value></con:property><con:property><con:name>code</con:name><con:value>023</con:value></con:property><con:property><con:name>shortName</con:name><con:value>shortName Test 409783</con:value></con:property><con:property><con:name>shortNameNoTitle</con:name><con:value>shortNameNoTitle Test 409783</con:value></con:property><con:property><con:name>valueFromEhr</con:name><con:value>valueFromEhr Test 409783</con:value></con:property><con:property><con:name>description</con:name><con:value>description Test 409783</con:value></con:property></con:properties></con:testCase><con:testCase id="d6f4b62c-6b3a-49c2-bc3a-d03a962b3a96" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED и без DESCRIPTION, SHORT_NAME, SHORT_NAME_NOT_TITLE, VALUE_FROM_EHR_ID409786" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать id" id="2e3a1fcc-b8a6-4bfa-821f-11f48fb90cf5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select max(id)+1 as id from ${#TestSuite#table}</con:query><con:assertion type="Simple Contains" id="bb285a78-cbcc-4093-928d-f1521816806d" name="Contains ID"><con:configuration><token>ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать id в свойства ТК" id="1728ecc9-4f23-46f9-bdbb-e2c6abbd94f4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать id</con:sourceStep><con:sourcePath>//*:ID</con:sourcePath><con:targetType>id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Подобрать уникальный code" id="d80de7a5-3da4-4a3b-87c7-7ff2c950de6c"><con:settings/><con:config><script>code=(('0'..'9')).shuffled().take(3).join()
testRunner.testCase.setPropertyValue("code", code.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Отправить пуш" id="fcd6408c-d262-4f29-86c1-854c21587fde"><con:settings/><con:config service="http://emiasinfo-application.test.emias.mos.ru" resourcePath="/soap/push" methodName="Push 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Отправить пуш" id="4b936e38-bfd5-4a12-a5e3-aa1eb02fdfc8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
	<soapenv:Header>
		<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
			<wsse:UsernameToken>
				<wsse:Username>NSI2</wsse:Username>
			</wsse:UsernameToken>
		</wsse:Security>
	</soapenv:Header>
	<soapenv:Body>
		<ChangeElement xmlns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
			<in><![CDATA[    <package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="12098882">
       <catalog name="catalog_${#TestSuite#catalogId}">
	<categories>
		<category idHier="" nameHier="">${#TestSuite#catalogId}</category>
	</categories>
	<data action="ADDED">
		<attribute name="global_id" field_id="-1" type="NUMBER">
			<values>
				<value>${#TestCase#id}</value>
			</values>
		</attribute>
		<attribute name="system_object_id" field_id="-2" type="STRING">
			<values>
				<value/>
			</values>
		</attribute>
		<attribute name="CODE" field_id="10877" type="STRING">
			<values>
				<value>${#TestCase#code}</value>
			</values>
		</attribute>
		<attribute name="TITLE" field_id="10878" type="STRING">
			<values>
				<value>${#TestCase#title}</value>
			</values>
		</attribute>
		<attribute name="ARCHIVED" field_id="10879" type="NUMBER">
			<values>
				<value>0</value>
			</values>
		</attribute>
	</data>
</catalog>
    </package>]]]]>><![CDATA[</in>
		</ChangeElement>
	</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:originalUri>http://emiasinfo-application.test.emias.mos.ru/soap/push</con:originalUri><con:assertion type="Simple NotContains" id="a8ecc542-174c-40a7-bfea-135105b49ddb" name="Not Contains"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="760837a6-f517-4cc7-83db-1bedf000f4a4" name="fault"><con:configuration><token>soapfault</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="2da5f28b-1b56-45d0-9596-50a595655456" name="Response=OK"><con:configuration><path>//*:out</path><content>OK: 12098882</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Проверить создание записи" id="f4c73502-6dbb-466a-8371-366c83d9eb14"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>select * from public.${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="300556f3-10d1-448b-ae7a-915a500c4307" name="Количество записей =1"><con:configuration><path>count(//*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="id соответствует переданному в пуше значению global_id"><con:configuration><path>//*:D_HEALTH_GROUPS.ID</path><content>${#TestCase#id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.CODE соответствует переданному в пуше CODE"><con:configuration><path>//*:D_HEALTH_GROUPS.CODE</path><content>${#TestCase#code}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.TITLE соответствует переданному в пуше TITLE"><con:configuration><path>//*:D_HEALTH_GROUPS.TITLE</path><content>${#TestCase#title}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.DESCRIPTION не заполнено"><con:configuration><path>//*:D_HEALTH_GROUPS.DESCRIPTION</path><content>&lt;D_HEALTH_GROUPS.DESCRIPTION/></content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.ARCHIVED соответствует переданному в пуше значению ARCHIVED"><con:configuration><path>//*:D_HEALTH_GROUPS.ARCHIVED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c5380768-2d27-4d8e-8bd4-36c32235b2e4" name="D_HEALTH_GROUPS.IS_DELETED = false"><con:configuration><path>//*:D_HEALTH_GROUPS.IS_DELETED</path><content>f</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Удалить созданную запись" id="a191a271-5f70-4bd2-956d-6d8906cbcae6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>delete from ${#TestSuite#table} where id=${#TestCase#id}</con:query><con:assertion type="XPath Match" id="14295188-419c-4571-b9f2-c9e3fe4a2e66" name="UpdateCount=1"><con:configuration><path>//*:UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>158302195</con:value></con:property><con:property><con:name>title</con:name><con:value>Группа тест 409786</con:value></con:property><con:property><con:name>code</con:name><con:value>604</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>catalogId</con:name><con:value>2545</con:value></con:property><con:property><con:name>table</con:name><con:value>d_health_groups</con:value></con:property></con:properties></con:testSuite><con:properties><con:property><con:name>emiasInfoNotificationsFullDbConnection</con:name><con:value>jdbc:postgresql://172.17.5.11:29104/notification?user=notification&amp;password=notification</con:value></con:property><con:property><con:name>emiasInfoNotificationsEndpoint</con:name><con:value>http://notification-emiasinfo1.emias.solit-clouds.ru</con:value></con:property><con:property><con:name>emiasInfoNotificationsDbPassword</con:name><con:value>notification</con:value></con:property><con:property><con:name>emiasInfoNotificationsDbLogin</con:name><con:value>notification</con:value></con:property><con:property><con:name>emiasInfoNotificationsDBDriver</con:name><con:value>org.postgresql.Driver</con:value></con:property><con:property><con:name>emiasInfoNotificationsDbConnection</con:name><con:value>172.17.5.11:29104/notification</con:value></con:property><con:property><con:name>emiasInfoFullDbConnection</con:name><con:value>jdbc:postgresql://172.17.5.11:29301/emiasinfoapp?user=emiasinfoapp&amp;password=emiasinfoapp</con:value></con:property><con:property><con:name>emiasInfoEndpoint</con:name><con:value>http://application-emiasinfo4.emias.solit-clouds.ru</con:value></con:property><con:property><con:name>emiasInfoDbPassword</con:name><con:value>emiasinfoapp</con:value></con:property><con:property><con:name>emiasInfoDbLogin</con:name><con:value>emiasinfoapp</con:value></con:property><con:property><con:name>emiasInfoDBDriver</con:name><con:value>org.postgresql.Driver</con:value></con:property><con:property><con:name>emiasInfoDbConnection</con:name><con:value>172.17.5.11:29301/emiasinfoapp</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>