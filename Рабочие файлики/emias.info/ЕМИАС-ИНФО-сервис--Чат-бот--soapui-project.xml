<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="2c562ff4-0046-425e-b283-e1d63635e74e" activeEnvironment="Default" name="ЕМИАС.ИНФО сервис &quot;Чат-бот&quot;" resourceRoot="" soapui-version="5.7.2" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" id="d9453145-cc25-48a7-989d-a7ae18d54704" wsaVersion="NONE" name="InterviewServiceBinding" type="wsdl" bindingName="{https://simptom.emias.ru/api/v1/soap/wsdl/types}InterviewServiceBinding" soapVersion="1_2" anonymous="optional" definition="http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?wsdl"><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="InterviewWsdl" targetNamespace="https://simptom.emias.ru/api/v1/soap/wsdl/types" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:nsf="http://emias.mos.ru/system/v1/faults/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:tns="https://simptom.emias.ru/api/v1/soap/wsdl/types" xmlns:uctx="http://emias.mos.ru/system/v1/userContext/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:types xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:schema>
      <xsd:import namespace="https://simptom.emias.ru/api/v1/soap/wsdl/types" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkVgle.K.grUZc6G5ZwMa4J.6UR2sce7Qp.7oYoqk81D_mgLkpUzu9a5z2Cq"/>
      <xsd:import namespace="http://emias.mos.ru/system/v1/userContext/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkljiOuLohDIYemG.sQTOckl.U52l4ajB9S7psD2jNoPlElCV.BBsNBdpKVRyzje"/>
      <xsd:import namespace="http://emias.mos.ru/system/v1/faults/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkljiOuLohDIYemG.sQTOck2615ooJrjC8Knr1lkcocbqC5izqTCxhHheQ--"/>
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="userContext">
    <wsdl:documentation>Контекст пользователя</wsdl:documentation>
    <wsdl:part element="uctx:userContext" name="userContext"/>
  </wsdl:message>
  <wsdl:message name="fault">
    <wsdl:documentation>Ошибка</wsdl:documentation>
    <wsdl:part element="nsf:fault" name="body"/>
  </wsdl:message>
  <!--getDialog-->
  <wsdl:message name="getDialogRequestMessage">
    <wsdl:part element="tns:getDialogRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getDialogResponseMessage">
    <wsdl:part element="tns:getDialogResponse" name="body"/>
  </wsdl:message>
  <!--sendAnswer-->
  <wsdl:message name="sendAnswerRequestMessage">
    <wsdl:part element="tns:sendAnswerRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="sendAnswerResponseMessage">
    <wsdl:part element="tns:sendAnswerResponse" name="body"/>
  </wsdl:message>
  <!--checkCode-->
  <wsdl:message name="checkCodeRequestMessage">
    <wsdl:part element="tns:checkCodeRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="checkCodeResponseMessage">
    <wsdl:part element="tns:checkCodeResponse" name="body"/>
  </wsdl:message>
  <!--addEvent-->
  <wsdl:message name="addEventRequestMessage">
    <wsdl:part element="tns:addEventRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="addEventResponseMessage">
    <wsdl:part element="tns:addEventResponse" name="body"/>
  </wsdl:message>
  <!--sendResult-->
  <wsdl:message name="sendResultRequestMessage">
    <wsdl:part element="tns:sendResultRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="sendResultResponseMessage">
    <wsdl:part element="tns:sendResultResponse" name="body"/>
  </wsdl:message>
  <!--sendAnamnesisResult-->
  <wsdl:message name="sendAnamnesisResultRequestMessage">
    <wsdl:part element="tns:sendAnamnesisResultRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="sendAnamnesisResultResponseMessage">
    <wsdl:part element="tns:sendAnamnesisResultResponse" name="body"/>
  </wsdl:message>
  <!--getReferral-->
  <wsdl:message name="getReferralRequestMessage">
    <wsdl:part element="tns:getReferralRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getReferralResponseMessage">
    <wsdl:part element="tns:getReferralResponse" name="body"/>
  </wsdl:message>
  <!--tempCheckSymptoms-->
  <wsdl:message name="tempCheckSymptomsRequestMessage">
    <wsdl:part element="tns:tempCheckSymptomsRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="tempCheckSymptomsResponseMessage">
    <wsdl:part element="tns:tempCheckSymptomsResponse" name="body"/>
  </wsdl:message>
  <!--tempGetDialog-->
  <wsdl:message name="tempGetDialogRequestMessage">
    <wsdl:part element="tns:tempGetDialogRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="tempGetDialogResponseMessage">
    <wsdl:part element="tns:tempGetDialogResponse" name="body"/>
  </wsdl:message>
  <!--tempSendResult-->
  <wsdl:message name="tempSendResultRequestMessage">
    <wsdl:part element="tns:tempSendResultRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="tempSendResultResponseMessage">
    <wsdl:part element="tns:tempSendResultResponse" name="body"/>
  </wsdl:message>
  <wsdl:portType name="InterviewServicePortType">
    <wsdl:operation name="getDialog">
      <wsdl:input message="tns:getDialogRequestMessage"/>
      <wsdl:output message="tns:getDialogResponseMessage"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="sendAnswer">
      <wsdl:input message="tns:sendAnswerRequestMessage"/>
      <wsdl:output message="tns:sendAnswerResponseMessage"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="checkCode">
      <wsdl:input message="tns:checkCodeRequestMessage"/>
      <wsdl:output message="tns:checkCodeResponseMessage"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="addEvent">
      <wsdl:input message="tns:addEventRequestMessage"/>
      <wsdl:output message="tns:addEventResponseMessage"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="sendResult">
      <wsdl:input message="tns:sendResultRequestMessage"/>
      <wsdl:output message="tns:sendResultResponseMessage"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="sendAnamnesisResult">
      <wsdl:input message="tns:sendAnamnesisResultRequestMessage"/>
      <wsdl:output message="tns:sendAnamnesisResultResponseMessage"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="getReferral">
      <wsdl:input message="tns:getReferralRequestMessage"/>
      <wsdl:output message="tns:getReferralResponseMessage"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="tempGetDialog">
      <wsdl:input message="tns:tempGetDialogRequestMessage"/>
      <wsdl:output message="tns:tempGetDialogResponseMessage"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="tempCheckSymptoms">
      <wsdl:input message="tns:tempCheckSymptomsRequestMessage"/>
      <wsdl:output message="tns:tempCheckSymptomsResponseMessage"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="tempSendResult">
      <wsdl:input message="tns:tempSendResultRequestMessage"/>
      <wsdl:output message="tns:tempSendResultResponseMessage"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="InterviewServiceBinding" type="tns:InterviewServicePortType">
    <soap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getDialog">
      <soap12:operation soapAction="getDialog" style="document"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"/>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="sendAnswer">
      <soap12:operation soapAction="sendAnswer" style="document"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"/>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="checkCode">
      <soap12:operation soapAction="checkCode" style="document"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"/>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="addEvent">
      <soap12:operation soapAction="addEvent" style="document"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"/>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="sendResult">
      <soap12:operation soapAction="sendResult" style="document"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"/>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="sendAnamnesisResult">
      <soap12:operation soapAction="sendAnamnesisResult" style="document"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"/>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getReferral">
      <soap12:operation soapAction="getReferral" style="document"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"/>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="tempCheckSymptoms">
      <soap12:operation soapAction="tempCheckSymptoms" style="document"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"/>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="tempGetDialog">
      <soap12:operation soapAction="tempGetDialog" style="document"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"/>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="tempSendResult">
      <soap12:operation soapAction="tempSendResult" style="document"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"/>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="InterviewService">
    <wsp:PolicyReference URI="#authPolicy" xmlns:wsp="http://www.w3.org/ns/ws-policy"/>
    <wsdl:port binding="tns:InterviewServiceBinding" name="InterviewServicePort">
      <soap12:address location="http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService"/>
    </wsdl:port>
  </wsdl:service>
  <wsp:Policy wsu:Id="authPolicy" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <sp:SupportingTokens xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
      <wsp:Policy>
        <sp:UsernameToken sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
          <wsp:Policy>
            <sp:NoPassword/>
          </wsp:Policy>
        </sp:UsernameToken>
      </wsp:Policy>
    </sp:SupportingTokens>
  </wsp:Policy>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkVgle.K.grUZc6G5ZwMa4J.6UR2sce7Qp.7oYoqk81D_mgLkpUzu9a5z2Cq</con:url><con:content><![CDATA[<xs:schema elementFormDefault="qualified" targetNamespace="https://simptom.emias.ru/api/v1/soap/wsdl/types" xmlns:tns="https://simptom.emias.ru/api/v1/soap/wsdl/types" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkljiOuLogDeYPjN4dtLcJQ0glQaUebWHqBQrvlkPvFWuQ--"/>
  <xs:element name="getDialogRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="dialogUuid" type="xs:string"/>
        <xs:element minOccurs="0" name="complaints" type="xs:string"/>
        <xs:element minOccurs="0" name="source" type="xs:string"/>
        <xs:element minOccurs="0" name="code" type="xs:string"/>
        <xs:element minOccurs="0" name="options" type="tns:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getDialogResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="success" type="xs:boolean"/>
        <xs:element maxOccurs="1" name="data">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="dialogUuid" type="xs:string"/>
              <xs:element name="age" type="xs:integer"/>
              <xs:element name="currentStage" type="xs:string"/>
              <xs:element name="emergency">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="status" type="xs:boolean"/>
                    <xs:element name="comment" type="xs:string"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element minOccurs="0" name="finished" type="xs:boolean"/>
              <xs:element minOccurs="0" name="complaintsFinished" type="xs:boolean"/>
              <xs:element minOccurs="0" name="complaintsSent" type="xs:boolean"/>
              <xs:element minOccurs="0" name="anamnesisIsExist" type="xs:boolean"/>
              <xs:element name="gender" type="xs:string"/>
              <xs:element minOccurs="0" name="genderQuestion" type="xs:boolean"/>
              <xs:element name="positionNomCode" type="xs:string"/>
              <xs:element name="question">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element minOccurs="0" name="answerConditions">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element maxOccurs="unbounded" minOccurs="0" name="answerCondition">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="answers">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element maxOccurs="unbounded" minOccurs="0" name="answer" type="xs:string"/>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="block">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element maxOccurs="unbounded" minOccurs="0" name="answer" type="xs:string"/>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="answerPlaceholder" type="xs:string"/>
                    <xs:element name="answerVariants">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element maxOccurs="unbounded" minOccurs="0" name="answer" type="xs:string"/>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="attribute" type="xs:string"/>
                    <xs:element name="entity" type="xs:string"/>
                    <xs:element name="format">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element minOccurs="0" name="delimiter" type="xs:string"/>
                          <xs:element minOccurs="0" name="delimiter2" type="xs:string"/>
                          <xs:element minOccurs="0" name="valuePrefix" type="xs:string"/>
                          <xs:element minOccurs="0" name="valuePostfix" type="xs:string"/>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="questionId" type="xs:string"/>
                    <xs:element name="text" type="xs:string"/>
                    <xs:element name="type" type="xs:string"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="referrals">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element maxOccurs="unbounded" minOccurs="0" name="referral">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="name" type="xs:string"/>
                          <xs:element name="score" type="xs:integer"/>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="source" type="xs:string"/>
              <xs:element name="summaryText" type="xs:string"/>
              <xs:element minOccurs="0" name="timestamp" type="xs:string"/>
              <xs:element name="userUuid" type="xs:string"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element minOccurs="0" name="options" type="tns:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="sendAnswerRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="dialogUuid" type="xs:string"/>
        <xs:element maxOccurs="unbounded" name="answer" type="xs:string"/>
        <xs:element minOccurs="0" name="options" type="tns:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="sendAnswerResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="success" type="xs:boolean"/>
        <xs:element name="data">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="dialogUuid" type="xs:string"/>
              <xs:element name="age" type="xs:integer"/>
              <xs:element name="currentStage" type="xs:string"/>
              <xs:element name="emergency">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="status" type="xs:boolean"/>
                    <xs:element name="comment" type="xs:string"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element minOccurs="0" name="finished" type="xs:boolean"/>
              <xs:element minOccurs="0" name="complaintsFinished" type="xs:boolean"/>
              <xs:element minOccurs="0" name="complaintsSent" type="xs:boolean"/>
              <xs:element minOccurs="0" name="anamnesisIsExist" type="xs:boolean"/>
              <xs:element name="gender" type="xs:string"/>
              <xs:element minOccurs="0" name="genderQuestion" type="xs:boolean"/>
              <xs:element name="positionNomCode" type="xs:string"/>
              <xs:element name="question">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element minOccurs="0" name="answerConditions">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element maxOccurs="unbounded" minOccurs="0" name="answerCondition">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="answers">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element maxOccurs="unbounded" minOccurs="0" name="answer" type="xs:string"/>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="block">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element maxOccurs="unbounded" minOccurs="0" name="answer" type="xs:string"/>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="answerPlaceholder" type="xs:string"/>
                    <xs:element name="answerVariants">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element maxOccurs="unbounded" minOccurs="0" name="answer" type="xs:string"/>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="attribute" type="xs:string"/>
                    <xs:element name="entity" type="xs:string"/>
                    <xs:element name="format">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element minOccurs="0" name="delimiter" type="xs:string"/>
                          <xs:element minOccurs="0" name="delimiter2" type="xs:string"/>
                          <xs:element minOccurs="0" name="valuePrefix" type="xs:string"/>
                          <xs:element minOccurs="0" name="valuePostfix" type="xs:string"/>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="questionId" type="xs:string"/>
                    <xs:element name="text" type="xs:string"/>
                    <xs:element name="type" type="xs:string"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="referrals">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element maxOccurs="unbounded" minOccurs="0" name="referral">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="name" type="xs:string"/>
                          <xs:element name="score" type="xs:integer"/>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="source" type="xs:string"/>
              <xs:element name="summaryText" type="xs:string"/>
              <xs:element minOccurs="0" name="timestamp" type="xs:string"/>
              <xs:element name="userUuid" type="xs:string"/>
              <xs:element minOccurs="0" name="suggestedSpecialties">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element maxOccurs="unbounded" name="suggestedSpeciality">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="code" type="xs:string"/>
                          <xs:element name="name" type="xs:string"/>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element minOccurs="0" name="options" type="tns:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="checkCodeRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="code" type="xs:string"/>
        <xs:element minOccurs="0" name="options" type="tns:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="checkCodeResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="success" type="xs:boolean"/>
        <xs:element name="data">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="codeIsCorrect" type="xs:boolean"/>
              <xs:element name="positionNomCode" type="xs:string"/>
              <xs:element name="tags">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element maxOccurs="unbounded" minOccurs="0" name="tag" type="xs:string"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element minOccurs="0" name="options" type="tns:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="addEventRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="code" type="xs:string"/>
        <xs:element name="event" type="xs:string"/>
        <xs:element minOccurs="0" name="options" type="tns:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="addEventResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="success" type="xs:boolean"/>
        <xs:element minOccurs="0" name="options" type="tns:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="sendResultRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="dialogUuid" type="xs:string"/>
        <xs:element minOccurs="0" name="options" type="tns:Options"/>
        <xs:element minOccurs="0" name="suggestedSpeciality" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="sendResultResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="success" type="xs:boolean"/>
        <xs:element name="data">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="dialogUuid" type="xs:string"/>
              <xs:element minOccurs="0" name="anamnesisViewType" type="xs:string"/>
              <xs:element minOccurs="0" name="anamnesisStart" type="xs:boolean"/>
              <xs:element name="result" type="xs:string"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="sendAnamnesisResultRequest">
    <xs:annotation>
      <xs:documentation>Отправка ААЖ в ЕСУ</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="dialogUuid" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="sendAnamnesisResultResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="success" type="xs:boolean"/>
        <xs:element name="data">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="dialogUuid" type="xs:string"/>
              <xs:element name="documentId" type="xs:integer"/>
              <xs:element name="result" type="xs:string"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getReferralRequest">
    <xs:annotation>
      <xs:documentation>Возвращает список рекомендуемых специальностей</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="1" name="dialogUuid" type="xs:string"/>
        <xs:element minOccurs="0" name="version" type="xs:string"/>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="possiblePositionNomCode" type="xs:string"/>
        <xs:element minOccurs="0" name="topN" type="xs:integer"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getReferralResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="success" type="xs:boolean"/>
        <xs:element name="data">
          <xs:complexType>
            <xs:sequence>
              <xs:element maxOccurs="unbounded" minOccurs="0" name="speciality">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="referralSpeciality" type="xs:string"/>
                    <xs:element name="positionNomCode" type="xs:string"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="appointmentType" type="xs:string"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <!--tempCheckSymptoms-->
  <xs:element name="tempCheckSymptomsRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="patientId" type="xs:integer"/>
        <xs:element minOccurs="0" name="positionNomCode" type="xs:string"/>
        <xs:element minOccurs="0" name="complaintsFinished" type="xs:boolean"/>
        <xs:element minOccurs="0" name="complaintsSent" type="xs:boolean"/>
        <xs:element minOccurs="0" name="createdAtAfter" type="xs:dateTime"/>
        <xs:element minOccurs="0" name="createdAtBefore" type="xs:dateTime"/>
        <xs:element minOccurs="0" name="options" type="tns:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="tempCheckSymptomsResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="success" type="xs:boolean"/>
        <xs:element name="dialogs">
          <xs:complexType>
            <xs:sequence>
              <xs:element maxOccurs="unbounded" minOccurs="0" name="dialog">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="dialogUuid" type="xs:string"/>
                    <xs:element name="codeTemp" type="xs:string"/>
                    <xs:element name="code" type="xs:string"/>
                    <xs:element name="positionNomCode" type="xs:string"/>
                    <xs:element name="complaintsFinished" type="xs:boolean"/>
                    <xs:element name="complaintsSent" type="xs:boolean"/>
                    <xs:element name="createdAt" type="xs:dateTime"/>
                    <xs:element name="updatedAt" type="xs:dateTime"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <!--tempGetDialog-->
  <xs:element name="tempGetDialogRequest">
    <xs:annotation>
      <xs:documentation>Метод создания диалога в рамках эксперимента</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="dialogUuid" type="xs:string"/>
        <xs:element name="complaints" type="xs:string"/>
        <xs:element name="codeTemp" type="xs:string"/>
        <xs:element name="flowNumber" type="xs:string"/>
        <xs:element name="source" type="xs:string"/>
        <xs:element name="patientId" type="xs:integer"/>
        <xs:element name="age" type="xs:integer"/>
        <xs:element name="gender" type="xs:string"/>
        <xs:element name="positionNomCode" type="xs:string"/>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="possiblePositionNomCode" type="xs:string"/>
        <xs:element minOccurs="0" name="options" type="tns:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="tempGetDialogResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="success" type="xs:boolean"/>
        <xs:element maxOccurs="1" name="data">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="dialogUuid" type="xs:string"/>
              <xs:element name="age" type="xs:integer"/>
              <xs:element name="currentStage" type="xs:string"/>
              <xs:element name="emergency">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="status" type="xs:boolean"/>
                    <xs:element name="comment" type="xs:string"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element minOccurs="0" name="finished" type="xs:boolean"/>
              <xs:element minOccurs="0" name="complaintsFinished" type="xs:boolean"/>
              <xs:element minOccurs="0" name="complaintsSent" type="xs:boolean"/>
              <xs:element minOccurs="0" name="anamnesisIsExist" type="xs:boolean"/>
              <xs:element name="gender" type="xs:string"/>
              <xs:element minOccurs="0" name="genderQuestion" type="xs:boolean"/>
              <xs:element name="positionNomCode" type="xs:string"/>
              <xs:element name="question">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element minOccurs="0" name="answerConditions">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element maxOccurs="unbounded" minOccurs="0" name="answerCondition">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="answers">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element maxOccurs="unbounded" minOccurs="0" name="answer" type="xs:string"/>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="block">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element maxOccurs="unbounded" minOccurs="0" name="answer" type="xs:string"/>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="answerPlaceholder" type="xs:string"/>
                    <xs:element name="answerVariants">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element maxOccurs="unbounded" minOccurs="0" name="answer" type="xs:string"/>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="attribute" type="xs:string"/>
                    <xs:element name="entity" type="xs:string"/>
                    <xs:element name="format">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element minOccurs="0" name="delimiter" type="xs:string"/>
                          <xs:element minOccurs="0" name="delimiter2" type="xs:string"/>
                          <xs:element minOccurs="0" name="valuePrefix" type="xs:string"/>
                          <xs:element minOccurs="0" name="valuePostfix" type="xs:string"/>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="questionId" type="xs:string"/>
                    <xs:element name="text" type="xs:string"/>
                    <xs:element name="type" type="xs:string"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="referrals">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element maxOccurs="unbounded" minOccurs="0" name="referral">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="name" type="xs:string"/>
                          <xs:element name="score" type="xs:integer"/>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="source" type="xs:string"/>
              <xs:element name="summaryText" type="xs:string"/>
              <xs:element minOccurs="0" name="timestamp" type="xs:string"/>
              <xs:element name="userUuid" type="xs:string"/>
              <xs:element name="userUuidTemp" type="xs:string"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <!--tempSendResult-->
  <xs:element name="tempSendResultRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="dialogUuid" type="xs:string"/>
        <xs:element name="code" type="xs:string"/>
        <xs:element minOccurs="0" name="options" type="tns:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="tempSendResultResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="success" type="xs:boolean"/>
        <xs:element maxOccurs="1" name="data">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="result" type="xs:string"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkljiOuLogDeYPjN4dtLcJQ0glQaUebWHqBQrvlkPvFWuQ--</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.2" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkljiOuLohDIYemG.sQTOcko.U_.ZX2V3HXLpj9bE_zBivmR"/>
  <!--references-->
  <xs:element name="mail" type="Mail">
    <xs:annotation>
      <xs:documentation>Адрес электронной почты</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="medicalOrganizationId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор Медицинской организации</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="medicalFacilityId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор Медицинского учреждения</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="compositionId" type="GUID">
    <xs:annotation>
      <xs:documentation>Идентификатор
Композиции Think!EHR
ЕМИАС.СИМИ</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="simiDocumentId" type="GUID">
    <xs:annotation>
      <xs:documentation>Идентификатор
Документа СИМИ
ЕМИАС.СИМИ</xs:documentation>
    </xs:annotation>
  </xs:element>
  <!--abstract types-->
  <xs:complexType abstract="true" name="Base">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
используемый для описания
компонентов сущностей,
владельцеми которых является
текущий продукт ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:attribute name="id" type="ID" use="required">
      <xs:annotation>
        <xs:documentation>Идентификатор
сущности/записи
на уровне всего ЕМИАС</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType abstract="true" name="EntityBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
используемый для описания сущностей,
владельцем которых является
текущий продукт ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Base">
        <xs:attribute name="archived" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Признак "Архивная сущность"</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="ForeignBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
используемый для описания
компонентов сущностей,
владельцами которых являются
другие продукты ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Base"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="ForeignEntityBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
используемый для описания сущностей,
владельцами которых являются
другие продукты ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="EntityBase"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="NsiBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
используемый для описания типов,
реализующих справочники ЕМИАС.НСИ.2</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="ForeignEntityBase">
        <xs:sequence>
          <xs:element name="title" type="xs:string">
            <xs:annotation>
              <xs:documentation>Наименование элемента справочника</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="NsiWithCodeBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
используемый для описания типов,
реализующих справочники ЕМИАС.НСИ.2, в которых имеется бизнес-код</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="NsiBase">
        <xs:attribute name="code" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Бизнес-код</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="SIMIDocumentBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
используемый для описания cведений о документе СИМИ</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element ref="simiDocumentId"/>
      <xs:element minOccurs="0" ref="compositionId"/>
    </xs:sequence>
  </xs:complexType>
  <!--async operation status-->
  <xs:element name="operationId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор операции</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="OperationExecutionStatus">
    <xs:annotation>
      <xs:documentation>Статус выполнения операции</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="isCompleted" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак окончания выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="completenessProgress" type="OperationCompletenessBase">
        <xs:annotation>
          <xs:documentation>Сведения о текущем статусе выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="hasSucceded" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак успешности выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
        <xs:annotation>
          <xs:documentation>Коллекция сообщений, порожденных в ходе выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="id" type="ID" use="required">
      <xs:annotation>
        <xs:documentation>Идентификатор операции</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType abstract="false" name="OperationCompletenessPercentage">
    <xs:annotation>
      <xs:documentation>Описание текущего статуса выполнения операции в процентах (0%-100%)</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="OperationCompletenessBase">
        <xs:sequence>
          <xs:element name="completenessStatus">
            <xs:annotation>
              <xs:documentation>Статус (0%-100%)</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:unsignedByte">
                <xs:minInclusive value="0"/>
                <xs:maxInclusive value="100"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="OperationCompletenessBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип для описания текущего статуса выполнения операции</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
  </xs:complexType>
  <!--calling methods' options-->
  <xs:element name="options" type="Options">
    <xs:annotation>
      <xs:documentation>Параметры вызова метода</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="Options">
    <xs:annotation>
      <xs:documentation>Набор именованных значений</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="entry" type="KeyValuePair">
        <xs:annotation>
          <xs:documentation>Именованное значение</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--pagination-->
  <xs:element name="pagingOptions" type="PagingOptions">
    <xs:annotation>
      <xs:documentation>Параметры пагинации</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType abstract="true" name="PagingResults">
    <xs:annotation>
      <xs:documentation>Список с пагинацией</xs:documentation>
    </xs:annotation>
    <xs:attribute name="pageNumber" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Номер страницы (zero-based)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageTotal" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Общее количество страниц</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageSize" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Размер страницы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="morePagesAvailable" type="xs:boolean" use="required">
      <xs:annotation>
        <xs:documentation>Флаг доступности других страниц с результатами для "постраничного листания" (true - если доступны еще страницы; false - иначе)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="totalItemsCount" type="xs:long" use="required">
      <xs:annotation>
        <xs:documentation>Общее количество элементов (на всех страницах)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PagingOptions">
    <xs:annotation>
      <xs:documentation>Параметры пагинации</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" ref="sortingOptions"/>
    </xs:sequence>
    <xs:attribute name="pageNumber" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Номер страницы (zero-based)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageSize" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Размер страницы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <!--sorting-->
  <xs:element name="sortingOptions" type="SortingOptions">
    <xs:annotation>
      <xs:documentation>Параметры сортировки</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="SortingOptions">
    <xs:annotation>
      <xs:documentation>Условия сортировки</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="3" name="sortOrder" type="SortOrder">
        <xs:annotation>
          <xs:documentation>Условия сортировки
(используются в соответствии с
переданной последовательностью)</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="SortOrder">
    <xs:annotation>
      <xs:documentation>Сортировка</xs:documentation>
    </xs:annotation>
    <xs:attribute name="attributeName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Наименование поля, по которому должна быть произведена сортировка</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute default="false" name="desceding" type="xs:boolean">
      <xs:annotation>
        <xs:documentation>Направление сортировки</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <!--void response-->
  <xs:element fixed="true" name="result">
    <xs:annotation>
      <xs:documentation>Элемент для использования в методах, не предполагающих возврат какого-либо значения</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:simpleContent>
        <xs:extension base="xs:boolean"/>
      </xs:simpleContent>
    </xs:complexType>
  </xs:element>
  <!--base types-->
  <xs:complexType name="TimeInterval">
    <xs:annotation>
      <xs:documentation>Временной период (время)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="start" type="xs:time">
        <xs:annotation>
          <xs:documentation>Время начала интервала</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="end" type="xs:time">
        <xs:annotation>
          <xs:documentation>Время окончания интервала</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DatePeriod">
    <xs:annotation>
      <xs:documentation>Временной период (дата)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="start" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата начала периода</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="end" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата окончания периода</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--keys-->
  <xs:complexType name="EntityId">
    <xs:annotation>
      <xs:documentation>Идентфикатор сущности,
непосредственно принадлежащей
текущему продукту ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Base"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ForeignEntityId">
    <xs:annotation>
      <xs:documentation>Идентфикатор
сущности ЕМИАС,
внешней по отношнению
к текущему продукту ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="ForeignBase"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="NsiGlobalId">
    <xs:annotation>
      <xs:documentation>Глобальный идентфикатор
ЕМИАС.НСИ</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="ForeignBase"/>
    </xs:complexContent>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkljiOuLohDIYemG.sQTOcko.U_.ZX2V3HXLpj9bE_zBivmR</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.1" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <!--error message description-->
  <xs:complexType name="ErrorMessageCollection">
    <xs:annotation>
      <xs:documentation>Коллекция сообщений об ошибках</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="message" type="ErrorMessage">
        <xs:annotation>
          <xs:documentation>Сообщение об ошибке</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ErrorMessage">
    <xs:annotation>
      <xs:documentation>Сообщение об ошибке</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Message">
        <xs:sequence>
          <xs:element minOccurs="0" name="parameters">
            <xs:annotation>
              <xs:documentation>Коллекция параметров сообщения</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="unbounded" name="parameter" type="KeyValuePair">
                  <xs:annotation>
                    <xs:documentation>Параметр сообщения</xs:documentation>
                  </xs:annotation>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
          <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Сопутствующие сообщения об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="type" type="ErrorMessageTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип сообщения</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:simpleType name="ErrorMessageTypes">
    <xs:annotation>
      <xs:documentation>Тип сообщения об ошибке</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="ERROR">
        <xs:annotation>
          <xs:documentation>Ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="WARNING">
        <xs:annotation>
          <xs:documentation>Предупреждение (не блокирующая ошибка)</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="INFO">
        <xs:annotation>
          <xs:documentation>Информационное сообщение</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:long"/>
  </xs:simpleType>
  <xs:simpleType name="GUID">
    <xs:annotation>
      <xs:documentation>Глобальный 128-битный идентификатор (Globally Unique Identifier)</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="KeyValuePair">
    <xs:annotation>
      <xs:documentation>Представляет тип "ключ/значение"</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="key" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Ключ</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:simpleType name="Mail">
    <xs:annotation>
      <xs:documentation>Адрес электронной почты</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:maxLength value="320"/>
      <xs:pattern value=".+@.+\..+"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="Message">
    <xs:annotation>
      <xs:documentation>Сообщение</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="code" type="xs:string">
        <xs:annotation>
          <xs:documentation>Код сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="message" type="xs:string">
        <xs:annotation>
          <xs:documentation>Текст сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkljiOuLohDIYemG.sQTOckl.U52l4ajB9S7psD2jNoPlElCV.BBsNBdpKVRyzje</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/system/v1/userContext/" version="1.0" xmlns="http://emias.mos.ru/system/v1/userContext/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkljiOuLogDeYPjN4dtLcJQ0glQaUebWHqBQrvlkPvFWuQ--"/>
  <xs:element name="userContext" type="UserContext">
    <xs:annotation>
      <xs:documentation>Контекст пользователя</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="UserContext">
    <xs:annotation>
      <xs:documentation>Контекст пользователя</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="systemName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Шифр системы-потребителя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Имя пользователя (логин)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userRoleId" type="ID">
        <xs:annotation>
          <xs:documentation>Код Роли</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="isUserRoleSystemWide" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак "Общесистемная Роль"</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userRights">
        <xs:annotation>
          <xs:documentation>Коллекция Полномочий пользователя</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="userRightId" type="ID">
              <xs:annotation>
                <xs:documentation>Код Полномочия</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="jobExecutionId" type="ID"/>
      <xs:element minOccurs="0" name="hostIp" type="xs:string">
        <xs:annotation>
          <xs:documentation>IP адрес хоста</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="hostName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Имя хоста</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="options" type="Options">
        <xs:annotation>
          <xs:documentation>Набор именованных значений</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkljiOuLohDIYemG.sQTOck2615ooJrjC8Knr1lkcocbqC5izqTCxhHheQ--</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/system/v1/faults/" version="1.0" xmlns="http://emias.mos.ru/system/v1/faults/" xmlns:uctx="http://emias.mos.ru/system/v1/userContext/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkljiOuLohDIYemG.sQTOcko.U_.ZX2V3HXLpj9bE_zBivmR"/>
  <xs:import namespace="http://emias.mos.ru/system/v1/userContext/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkljiOuLohDIYemG.sQTOckl.U52l4ajB9S7psD2jNoPlElCV.BBsNBdpKVRyzje"/>
  <!--faults-->
  <xs:element name="fault" type="BaseFault">
    <xs:annotation>
      <xs:documentation>Базовый тип ошибки</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="SecurityFault">
    <xs:annotation>
      <xs:documentation>Ошибка безопасности</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element ref="uctx:userContext"/>
          <xs:choice>
            <xs:element name="unauthorizedRequestSecurityException" type="UnauthorizedRequestSecurityException">
              <xs:annotation>
                <xs:documentation>Исключение безопасности типа UNAUTHORIZED_REQUEST_EXCEPTION</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="otherSecurityException" type="OtherSecurityException">
              <xs:annotation>
                <xs:documentation>Исключение безопасности типа OTHER_SECURITY_EXCEPTION</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:sequence>
        <xs:attribute fixed="SECURITY" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="BusinessFault">
    <xs:annotation>
      <xs:documentation>Бизнес ошибка</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Коллекция Сообщений об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="hasErrors" type="xs:boolean">
            <xs:annotation>
              <xs:documentation>Признак наличия ошибок в списке сообщений</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute fixed="BUSINESS" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="UnexpectedFault">
    <xs:annotation>
      <xs:documentation>Непредвиденная ошибка</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element name="version" type="xs:string">
            <xs:annotation>
              <xs:documentation>Версия продукта-сервиса</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="stackTrace">
            <xs:annotation>
              <xs:documentation>Стек вызова (последние 10  записей)</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="10" name="stackTraceRecord">
                  <xs:annotation>
                    <xs:documentation>Запись StackTrace</xs:documentation>
                  </xs:annotation>
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element name="declaringClass" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование класса, содержащего метод</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="methodName" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование метода</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="fileName" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование файла</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="lineNumber" type="xs:int">
                        <xs:annotation>
                          <xs:documentation>Номер строки кода</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
        <xs:attribute fixed="UNEXPECTED" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="BaseFault">
    <xs:annotation>
      <xs:documentation>Описание базового типа описания ошибки</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
  </xs:complexType>
  <!--security exceptions-->
  <xs:complexType name="UnauthorizedRequestSecurityException">
    <xs:annotation>
      <xs:documentation>Исключение безопасности типа UNAUTHORIZED_REQUEST_EXCEPTION</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="requiredRights">
        <xs:annotation>
          <xs:documentation>Перечень идентификаторов недостающих Полномочий пользователя</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" name="userRightId" type="ID">
              <xs:annotation>
                <xs:documentation>Идентификатор Полномочия пользователя</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute fixed="UNAUTHORIZED_REQUEST_EXCEPTION" name="type" type="SecurityExceptionTypes" use="required">
      <xs:annotation>
        <xs:documentation>Тип исключения безопасности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="OtherSecurityException">
    <xs:annotation>
      <xs:documentation>Исключение безопасности типа OTHER_SECURITY_EXCEPTION</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="message" type="Message">
        <xs:annotation>
          <xs:documentation>Сообщение</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute fixed="OTHER_SECURITY_EXCEPTION" name="type" type="SecurityExceptionTypes" use="required">
      <xs:annotation>
        <xs:documentation>Тип исключения безопасности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:simpleType name="SecurityExceptionTypes">
    <xs:annotation>
      <xs:documentation>Типы исключений безопасности</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="UNAUTHORIZED_REQUEST_EXCEPTION"/>
      <xs:enumeration value="OTHER_SECURITY_EXCEPTION"/>
    </xs:restriction>
  </xs:simpleType>
  <!--components-->
  <xs:simpleType name="FaultTypes">
    <xs:annotation>
      <xs:documentation>Тип ошибки</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="SECURITY">
        <xs:annotation>
          <xs:documentation>Непредвиденная ошибка приложения</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="BUSINESS">
        <xs:annotation>
          <xs:documentation>Бизнес ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="UNEXPECTED">
        <xs:annotation>
          <xs:documentation>Ошибка безопасности</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint></con:endpoints><con:operation id="466bef8f-464c-4e7a-9311-8be3e9477e7e" isOneWay="false" action="addEvent" name="addEvent" bindingOperationName="addEvent" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="200640dd-45e2-4bde-bf03-21039a7afc0a" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
         <!--Optional:-->\r
         <user:options>\r
            <!--Zero or more repetitions:-->\r
            <user:entry key="?">?</user:entry>\r
         </user:options>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:addEventRequest>\r
         <typ:code>?</typ:code>\r
         <typ:event>?</typ:event>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
      </typ:addEventRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types/InterviewServicePortType/addEventRequest"/></con:call></con:operation><con:operation id="3440649a-12f3-42d6-be78-7b8387d0d3ad" isOneWay="false" action="checkCode" name="checkCode" bindingOperationName="checkCode" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="370325f1-5c48-43ba-a71a-79d96d31781e" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
         <!--Optional:-->\r
         <user:options>\r
            <!--Zero or more repetitions:-->\r
            <user:entry key="?">?</user:entry>\r
         </user:options>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:checkCodeRequest>\r
         <typ:code>?</typ:code>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
      </typ:checkCodeRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types/InterviewServicePortType/checkCodeRequest"/></con:call></con:operation><con:operation id="8060cc35-afaf-4c1e-8c13-46fafad9e2d8" isOneWay="false" action="getDialog" name="getDialog" bindingOperationName="getDialog" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="23641945-f574-4375-9bd6-f70170c7d3c0" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
         <!--Optional:-->\r
         <user:options>\r
            <!--Zero or more repetitions:-->\r
            <user:entry key="?">?</user:entry>\r
         </user:options>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getDialogRequest>\r
         <typ:dialogUuid>?</typ:dialogUuid>\r
         <!--Optional:-->\r
         <typ:complaints>?</typ:complaints>\r
         <!--Optional:-->\r
         <typ:source>?</typ:source>\r
         <!--Optional:-->\r
         <typ:code>?</typ:code>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
      </typ:getDialogRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types/InterviewServicePortType/getDialogRequest"/><con:wsrmConfig version="1.2"/></con:call><con:call id="180cfdbb-abc3-40c4-9581-fa703296702b" name="Request 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
         <!--Optional:-->\r
         <user:options>\r
            <!--Zero or more repetitions:-->\r
            <user:entry key="?">?</user:entry>\r
         </user:options>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getDialogRequest>\r
         <typ:dialogUuid>?</typ:dialogUuid>\r
         <!--Optional:-->\r
         <typ:complaints>?</typ:complaints>\r
         <!--Optional:-->\r
         <typ:source>?</typ:source>\r
         <!--Optional:-->\r
         <typ:code>?</typ:code>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
      </typ:getDialogRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="https://simptom.emias.ru/api/v1/soap/wsdl/types/InterviewServicePortType/getDialogRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="63b7b393-bf35-4ef5-8473-1da070909abc" isOneWay="false" action="sendAnamnesisResult" name="sendAnamnesisResult" bindingOperationName="sendAnamnesisResult" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="b2f6604a-866c-490b-89be-4e104fe26636" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
         <!--Optional:-->\r
         <user:options>\r
            <!--Zero or more repetitions:-->\r
            <user:entry key="?">?</user:entry>\r
         </user:options>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnamnesisResultRequest>\r
         <typ:dialog_uuid>?</typ:dialog_uuid>\r
      </typ:sendAnamnesisResultRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types/InterviewServicePortType/sendAnamnesisResultRequest"/></con:call></con:operation><con:operation id="2e92738a-8792-4b29-8bd6-762b34893159" isOneWay="false" action="sendAnswer" name="sendAnswer" bindingOperationName="sendAnswer" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="7fe03073-9e00-40ab-944a-9e33b25e682b" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
         <!--Optional:-->\r
         <user:options>\r
            <!--Zero or more repetitions:-->\r
            <user:entry key="?">?</user:entry>\r
         </user:options>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>?</typ:dialogUuid>\r
         <!--1 or more repetitions:-->\r
         <typ:answer>?</typ:answer>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types/InterviewServicePortType/sendAnswerRequest"/><con:wsrmConfig version="1.2"/></con:call><con:call id="c86cfb41-6602-4054-bc24-763a6765fd8d" name="Request 2"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:sendAnswerRequest>
         <typ:dialogUuid>af7274e037fc48e3ba58961cbbcb5f25</typ:dialogUuid>
         <typ:answer>Да</typ:answer>
      </typ:sendAnswerRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="https://simptom.emias.ru/api/v1/soap/wsdl/types/InterviewServicePortType/sendAnswerRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="816f7cb9-be24-47fa-ac38-5fb2a53d6c07" isOneWay="false" action="sendResult" name="sendResult" bindingOperationName="sendResult" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="0dd9a19d-ab3d-47c8-91f7-7fc953aface4" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>37070004</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendResultRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
      </typ:sendResultRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types/InterviewServicePortType/sendResultRequest"/><con:wsrmConfig version="1.2"/></con:call><con:call id="9d6fcf18-dbec-425c-8f5f-93f069edfa56" name="Request 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
         <!--Optional:-->\r
         <user:options>\r
            <!--Zero or more repetitions:-->\r
            <user:entry key="?">?</user:entry>\r
         </user:options>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendResultRequest>\r
         <typ:dialogUuid>?</typ:dialogUuid>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
         <!--Optional:-->\r
         <typ:suggestedSpeciality>?</typ:suggestedSpeciality>\r
      </typ:sendResultRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="https://simptom.emias.ru/api/v1/soap/wsdl/types/InterviewServicePortType/sendResultRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="f0d3a781-d3c5-4a6f-bf38-2e90bf8bc8cf" isOneWay="false" action="tempCheckSymptoms" name="tempCheckSymptoms" bindingOperationName="tempCheckSymptoms" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="453d708f-6824-4725-b80a-2a34760aa4d9" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
         <!--Optional:-->\r
         <user:options>\r
            <!--Zero or more repetitions:-->\r
            <user:entry key="?">?</user:entry>\r
         </user:options>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:tempCheckSymptomsRequest>\r
         <typ:patientId>?</typ:patientId>\r
         <!--Optional:-->\r
         <typ:positionNomCode>?</typ:positionNomCode>\r
         <!--Optional:-->\r
         <typ:complaintsFinished>?</typ:complaintsFinished>\r
         <!--Optional:-->\r
         <typ:complaintsSent>?</typ:complaintsSent>\r
         <!--Optional:-->\r
         <typ:createdAtAfter>?</typ:createdAtAfter>\r
         <!--Optional:-->\r
         <typ:createdAtBefore>?</typ:createdAtBefore>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
      </typ:tempCheckSymptomsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types/InterviewServicePortType/tempCheckSymptomsRequest"/></con:call></con:operation><con:operation id="83594a0e-21ee-42a4-894e-4faa8bdbcdd2" isOneWay="false" action="tempGetDialog" name="tempGetDialog" bindingOperationName="tempGetDialog" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="fad4bf12-b47b-491b-a961-2339e8288dd5" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
         <!--Optional:-->\r
         <user:options>\r
            <!--Zero or more repetitions:-->\r
            <user:entry key="?">?</user:entry>\r
         </user:options>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:tempGetDialogRequest>\r
         <typ:dialogUuid>?</typ:dialogUuid>\r
         <typ:complaints>?</typ:complaints>\r
         <typ:codeTemp>?</typ:codeTemp>\r
         <typ:flowNumber>?</typ:flowNumber>\r
         <typ:source>?</typ:source>\r
         <typ:patientId>?</typ:patientId>\r
         <typ:age>?</typ:age>\r
         <typ:gender>?</typ:gender>\r
         <typ:positionNomCode>?</typ:positionNomCode>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
      </typ:tempGetDialogRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types/InterviewServicePortType/tempGetDialogRequest"/></con:call></con:operation><con:operation id="65367bcf-4cfe-4406-8676-95d4107add46" isOneWay="false" action="tempSendResult" name="tempSendResult" bindingOperationName="tempSendResult" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="716b0658-9c6e-485c-b966-c29d65a982fb" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
         <!--Optional:-->\r
         <user:options>\r
            <!--Zero or more repetitions:-->\r
            <user:entry key="?">?</user:entry>\r
         </user:options>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:tempSendResultRequest>\r
         <typ:dialogUuid>?</typ:dialogUuid>\r
         <typ:code>?</typ:code>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
      </typ:tempSendResultRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types/InterviewServicePortType/tempSendResultRequest"/></con:call></con:operation><con:operation id="3dafa739-ba0f-4a26-98ed-cdd91d26dd91" isOneWay="false" action="getReferral" name="getReferral" bindingOperationName="getReferral" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="c5dd5b7a-e898-4c30-988a-24662eb8f87a" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
         <!--Optional:-->\r
         <user:options>\r
            <!--Zero or more repetitions:-->\r
            <user:entry key="?">?</user:entry>\r
         </user:options>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getReferralRequest>\r
         <typ:dialogUuid>?</typ:dialogUuid>\r
         <!--Optional:-->\r
         <typ:version>?</typ:version>\r
         <!--Zero or more repetitions:-->\r
         <typ:possiblePositionNomCode>?</typ:possiblePositionNomCode>\r
         <!--Optional:-->\r
         <typ:topN>?</typ:topN>\r
      </typ:getReferralRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="https://simptom.emias.ru/api/v1/soap/wsdl/types/InterviewServicePortType/getReferralRequest"/></con:call></con:operation></con:interface><con:interface xsi:type="con:RestService" id="f7376c25-00f2-4f01-9fb0-1d9d969e82aa" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://emiasinfo1.emias.solit-clouds.ru" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint></con:endpoints><con:resource name="getDialog" path="/api/v2/chatBot/getDialog" id="6557dc4a-a4e6-4355-a931-4b279d52b0a8"><con:settings/><con:parameters/><con:method name="Method 1" id="b8590e8c-1cfc-4e91-9f48-3a5582756add" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500 400</con:status><con:params/><con:element xmlns:get="http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/getDialog">get:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/getDialog">get:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="ae69905f-04da-48e2-9e46-abab2f7466e4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="sendAnswer" path="/api/v2/chatBot/sendAnswer" id="53969776-86ac-4825-8777-cd7d8f3ee7f2"><con:settings/><con:parameters/><con:method name="Method 1" id="34aa0df6-9d39-4a84-9b4e-3984ad06e666" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:sen="http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer">sen:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sen="http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer">sen:Fault</con:element></con:representation><con:request name="Request 1" id="6e0d04d6-1afc-4df8-ae0b-a8a4c27268b3" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="sendResult" path="/api/v2/chatBot/sendResult" id="7bf9b814-9427-4bf2-b39d-db914bd52a0c"><con:settings/><con:parameters/><con:method name="Method 1" id="c743a4b5-8cc8-423d-8358-ab227cb5291f" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sen="http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendResult">sen:Fault</con:element></con:representation><con:request name="Request 1" id="5564a1f4-4c21-4baa-af03-170950bfee57" mediaType="application/json"><con:settings/><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="sendAnswer" path="/api/v3/chatBot/sendAnswer" id="f58047ed-6f8a-4df0-87af-7d0f854d75cb"><con:settings/><con:parameters/><con:method name="Method 1" id="e871fe72-2180-4785-a500-db0cc462406e" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:sen="http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer">sen:Response</con:element></con:representation><con:request name="Request 1" id="5707ad1d-8eda-48c6-9846-ec5c724e3a68" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="a4d497ce-d485-4bbe-959a-2f4d043767e7" name="getDialog"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="dfea3ff6-d2cf-4e83-b5c7-787603623b0d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создать сессию с чат-ботом. maskFormat=temperature" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Найти hash" id="da149a27-501a-4809-a10f-e40adaebb1fb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#inquiryPurposeOrchestrationDbDriver}</con:driver><con:connectionString>${#Project#inquiryPurposeOrchestrationFullDbConnection}</con:connectionString><con:query>SELECT hash FROM inquiry_purpose.complaints</con:query><con:assertion type="Simple Contains" id="70eb159b-978b-47a3-965c-630b08e13443" name="Contains"><con:configuration><token>COMPLAINTS.HASH</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать hash в проперти" id="e3f3cec5-7983-4dfb-a0b6-f7191c5f3a56"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>hash</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Найти hash</con:sourceStep><con:sourcePath>//Row[1]/COMPLAINTS.HASH</con:sourcePath><con:targetType>hash</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="getDialog" id="7d6f0324-b94f-433c-91c1-c58421500319"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="046278c4-4a5a-4040-bb4c-48cf793dfc67"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>${#TestCase#complaints}</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestCase#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="f371cddb-6906-42ca-aaa6-e64a55089a53"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getDialog REST" id="9f8940c4-ac39-4e44-91b1-1138d653d8bc"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/getDialog" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getDialog REST" id="ae69905f-04da-48e2-9e46-abab2f7466e4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "complaints": "${#TestCase#complaints}",
  "hash": "${#TestCase#hash}"
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/getDialog</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="164f8aca-f909-4c56-a92d-ba86df9da6f3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Сравнить статус" id="d3735159-ac39-4352-bafc-89239b0a13d0"><con:settings/><con:config><script>import com.eviware.soapui.support.XmlHolder
import groovy.json.JsonSlurper
def restResponse = context.expand('${getDialog REST#Response}').toString() // получаем из рест запроса ответ
def jsonResponse =  new JsonSlurper().parseText(restResponse) // создаем объект json //получаем jobId врача из рест ответа
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
 def soapResponse = context.expand('${getDialog#Response}') // получаем из соап запроса ответ
 def onlyTextSoap =  new XmlSlurper().parseText(soapResponse)  // парсим текст из xml

 if (onlyTextSoap.Body.getDialogResponse.data.question.answerConditions.answerCondition.answers.answer.text()){
	def answerREST = jsonResponse.payload.data.question.answerConditions.answers.answer.toString()
	def answer = onlyTextSoap.Body.getDialogResponse.data.question.answerConditions.answerCondition.answers.answer.toString()
	def blockAnswerREST = onlyTextSoap.Body.getDialogResponse.data.question.answerConditions.answerCondition.block.answer.toString()
	def blockAnser = onlyTextSoap.Body.getDialogResponse.data.question.answerConditions.answerCondition.block.answer.toString()
	assert answerREST==answer
	assert blockAnswerREST==blockAnser
}

if (onlyTextSoap.Body.getDialogResponse.data.complaintsFinished.text()){
	def finishedRest = jsonResponse.payload.data.complaintsFinished.toString()
	def finished = onlyTextSoap.Body.getDialogResponse.data.complaintsFinished.toString()
	assert finishedRest==finished
}

if (onlyTextSoap.Body.getDialogResponse.data.question.answerPlaceholder.text()){
	def answerPlaceholderREST = jsonResponse.payload.data.question.answerPlaceholder.toString()
	def answerPlaceholder = onlyTextSoap.Body.getDialogResponse.data.question.answerPlaceholder.toString()
	assert answerPlaceholderREST==answerPlaceholder
}

def answerVariants = onlyTextSoap.Body.getDialogResponse.data.question.answerVariants.answer.join()
def answerVariantsREST = jsonResponse.payload.data.question.answerVariants.answer.join()
assert answerVariants == answerVariantsREST

def maskFormat = jsonResponse.payload.data.question.maskFormat.toString()
assert maskFormat == "temperature"

def text = onlyTextSoap.Body.getDialogResponse.data.question.text.toString()
def textREST = jsonResponse.payload.data.question.text.toString()
assert text == textREST

def type = onlyTextSoap.Body.getDialogResponse.data.question.type.toString()
def typeREST = jsonResponse.payload.data.question.type.toString()
assert type == typeREST</script></con:config></con:testStep><con:properties><con:property><con:name>hash</con:name><con:value>2glj6</con:value></con:property><con:property><con:name>complaints</con:name><con:value>Температура</con:value></con:property></con:properties></con:testCase><con:testCase id="d7a9359f-9157-495b-a2f0-a9be405440f8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создать сессию с чат-ботом. maskFormat=pressure" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Найти hash" id="6cb3eee9-f946-4271-9fff-b9fda2ec429e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#inquiryPurposeOrchestrationDbDriver}</con:driver><con:connectionString>${#Project#inquiryPurposeOrchestrationFullDbConnection}</con:connectionString><con:query>SELECT hash FROM inquiry_purpose.complaints</con:query><con:assertion type="Simple Contains" id="70eb159b-978b-47a3-965c-630b08e13443" name="Contains"><con:configuration><token>COMPLAINTS.HASH</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать hash в проперти" id="a39cb606-3206-4b25-a2a0-e19ce9c9130a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>hash</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Найти hash</con:sourceStep><con:sourcePath>//Row[1]/COMPLAINTS.HASH</con:sourcePath><con:targetType>hash</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="getDialog" id="a859bc27-4490-4713-9f6a-f19256ffa73d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="046278c4-4a5a-4040-bb4c-48cf793dfc67"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>${#TestCase#complaints}</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestCase#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="f371cddb-6906-42ca-aaa6-e64a55089a53"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getDialog REST" id="a43de29d-c089-4df1-8647-4e9f8d9c5aa0"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/getDialog" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getDialog REST" id="ae69905f-04da-48e2-9e46-abab2f7466e4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "complaints": "${#TestCase#complaints}",
  "hash": "${#TestCase#hash}"
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/getDialog</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="164f8aca-f909-4c56-a92d-ba86df9da6f3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Сравнить статус" id="3d5a1c15-1757-4578-aab5-99c04c6f2d0c"><con:settings/><con:config><script>import com.eviware.soapui.support.XmlHolder
import groovy.json.JsonSlurper
def restResponse = context.expand('${getDialog REST#Response}').toString() // получаем из рест запроса ответ
def jsonResponse =  new JsonSlurper().parseText(restResponse) // создаем объект json //получаем jobId врача из рест ответа
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
 def soapResponse = context.expand('${getDialog#Response}') // получаем из соап запроса ответ
 def onlyTextSoap =  new XmlSlurper().parseText(soapResponse)  // парсим текст из xml

 if (onlyTextSoap.Body.getDialogResponse.data.question.answerConditions.answerCondition.answers.answer.text()){
	def answerREST = jsonResponse.payload.data.question.answerConditions.answers.answer.toString()
	def answer = onlyTextSoap.Body.getDialogResponse.data.question.answerConditions.answerCondition.answers.answer.toString()
	def blockAnswerREST = onlyTextSoap.Body.getDialogResponse.data.question.answerConditions.answerCondition.block.answer.toString()
	def blockAnser = onlyTextSoap.Body.getDialogResponse.data.question.answerConditions.answerCondition.block.answer.toString()
	assert answerREST==answer
	assert blockAnswerREST==blockAnser
}

if (onlyTextSoap.Body.getDialogResponse.data.complaintsFinished.text()){
	def finishedRest = jsonResponse.payload.data.complaintsFinished.toString()
	def finished = onlyTextSoap.Body.getDialogResponse.data.complaintsFinished.toString()
	assert finishedRest==finished
}

if (onlyTextSoap.Body.getDialogResponse.data.question.answerPlaceholder.text()){
	def answerPlaceholderREST = jsonResponse.payload.data.question.answerPlaceholder.toString()
	def answerPlaceholder = onlyTextSoap.Body.getDialogResponse.data.question.answerPlaceholder.toString()
	assert answerPlaceholderREST==answerPlaceholder
}

def answerVariants = onlyTextSoap.Body.getDialogResponse.data.question.answerVariants.answer.join()
def answerVariantsREST = jsonResponse.payload.data.question.answerVariants.answer.join()
assert answerVariants == answerVariantsREST

def maskFormat = jsonResponse.payload.data.question.maskFormat.toString()
assert maskFormat == "pressure"

def text = onlyTextSoap.Body.getDialogResponse.data.question.text.toString()
def textREST = jsonResponse.payload.data.question.text.toString()
assert text == textREST

def type = onlyTextSoap.Body.getDialogResponse.data.question.type.toString()
def typeREST = jsonResponse.payload.data.question.type.toString()
assert type == typeREST</script></con:config></con:testStep><con:properties><con:property><con:name>hash</con:name><con:value>2glj6</con:value></con:property><con:property><con:name>complaints</con:name><con:value>Давление</con:value></con:property></con:properties></con:testCase><con:testCase id="ff97543a-3eef-40fc-9492-799aa7010ea5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС0 - ошибка SERVER_ERROR" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getDialog" id="584f5564-cd09-490f-8e84-73f24d61be66"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/getDialog" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getDialog" id="ae69905f-04da-48e2-9e46-abab2f7466e4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "complaints": "Аппетит пониженный",
  "hash": BsmBE
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/getDialog</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="941adffa-9e13-499a-9deb-2ac3f1294ee1" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="edc79838-52c6-4faa-b9f8-cc8af206f841" name="Код ошибки = SERVER_ERROR"><con:configuration><path>$..code</path><content>[SERVER_ERROR]</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="edc79838-52c6-4faa-b9f8-cc8af206f841" name="description = Ошибка выполнения метода"><con:configuration><path>$.error.description</path><content>Ошибка выполнения метода</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="edc79838-52c6-4faa-b9f8-cc8af206f841" name="Тип ошибки=TECHNICAL"><con:configuration><path>$.error.type</path><content>TECHNICAL</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="b6ba240f-5abc-47bb-a3de-fe5ebfbff81d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС1 - ошибка CB_SERVER_ERROR" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getDialog" id="d281d77a-507f-4225-b84e-a8e446615d17"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/getDialog" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getDialog" id="ae69905f-04da-48e2-9e46-abab2f7466e4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "complaints": "Аппетит пониженный",
  "hash": ""
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/getDialog</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="941adffa-9e13-499a-9deb-2ac3f1294ee1" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="edc79838-52c6-4faa-b9f8-cc8af206f841" name="Ошибка соответстует требованиям"><con:configuration><path>$.error</path><content>{"code":"CB_SERVER_ERROR","description":"Сервис ЕМИАС.Чатбот не отвечает","type":"TECHNICAL"}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="2d757f84-23c6-43f3-9074-53432ef8cd6b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создать сессию с чат-ботом. Замена спецсимволов" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Найти hash" id="1b3c5189-7f3a-41bd-a3a3-63d676228424"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#inquiryPurposeOrchestrationDbDriver}</con:driver><con:connectionString>${#Project#inquiryPurposeOrchestrationFullDbConnection}</con:connectionString><con:query>SELECT hash FROM inquiry_purpose.complaints</con:query><con:assertion type="Simple Contains" id="70eb159b-978b-47a3-965c-630b08e13443" name="Contains"><con:configuration><token>COMPLAINTS.HASH</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать hash в проперти" id="556fabe4-bb3a-4ad2-9e33-fb07e9b1126b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>hash</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Найти hash</con:sourceStep><con:sourcePath>//Row[1]/COMPLAINTS.HASH</con:sourcePath><con:targetType>hash</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="getDialog" id="6456af31-3767-4f15-93af-b4b130fc79db"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="046278c4-4a5a-4040-bb4c-48cf793dfc67"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>${#TestCase#complaints}</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestCase#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="f371cddb-6906-42ca-aaa6-e64a55089a53"/><con:assertion type="SOAP Fault Assertion" id="05f18aa8-ffcd-4044-9a84-8be80378da01" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="aa32b76d-825d-44e5-aaf3-32007981defe" name="В ответе есть необходимые спецсимволы"><con:configuration><token>&amp;amp;@</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getDialog REST" id="06ec2280-3849-489f-b85d-b4930f5d20d2"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/getDialog" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getDialog REST" id="ae69905f-04da-48e2-9e46-abab2f7466e4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "complaints": "${#TestCase#complaints}",
  "hash": "${#TestCase#hash}"
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/getDialog</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="164f8aca-f909-4c56-a92d-ba86df9da6f3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="702f81e1-51b8-4f83-beca-e8fb774866bf" name="Не содержит &amp;amp;@"><con:configuration><token>&amp;amp;@</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="155f4e37-1eb3-4e04-943a-cab7fb6d0b18" name="Содержит \n"><con:configuration><token>\n</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Сравнить статус" id="082f837a-8916-4ce3-883c-0f293a50169c"><con:settings/><con:config><script>import com.eviware.soapui.support.XmlHolder
import groovy.json.JsonSlurper
def restResponse = context.expand('${getDialog REST#Response}').toString() // получаем из рест запроса ответ
def jsonResponse =  new JsonSlurper().parseText(restResponse) // создаем объект json //получаем jobId врача из рест ответа
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
 def soapResponse = context.expand('${getDialog#Response}') // получаем из соап запроса ответ
 def onlyTextSoap =  new XmlSlurper().parseText(soapResponse)  // парсим текст из xml

 if (onlyTextSoap.Body.getDialogResponse.data.question.answerConditions.answerCondition.answers.answer.text()){
	def answerREST = jsonResponse.payload.data.question.answerConditions.answers.answer.toString()
	def answer = onlyTextSoap.Body.getDialogResponse.data.question.answerConditions.answerCondition.answers.answer.toString()
	def blockAnswerREST = onlyTextSoap.Body.getDialogResponse.data.question.answerConditions.answerCondition.block.answer.toString()
	def blockAnser = onlyTextSoap.Body.getDialogResponse.data.question.answerConditions.answerCondition.block.answer.toString()
	assert answerREST==answer
	assert blockAnswerREST==blockAnser
}

if (onlyTextSoap.Body.getDialogResponse.data.complaintsFinished.text()){
	def finishedRest = jsonResponse.payload.data.complaintsFinished.toString()
	def finished = onlyTextSoap.Body.getDialogResponse.data.complaintsFinished.toString()
	assert finishedRest==finished
}

if (onlyTextSoap.Body.getDialogResponse.data.question.answerPlaceholder.text()){
	def answerPlaceholderREST = jsonResponse.payload.data.question.answerPlaceholder.toString()
	def answerPlaceholder = onlyTextSoap.Body.getDialogResponse.data.question.answerPlaceholder.toString()
	assert answerPlaceholderREST==answerPlaceholder
}

def answerVariants = onlyTextSoap.Body.getDialogResponse.data.question.answerVariants.answer.join()
def answerVariantsREST = jsonResponse.payload.data.question.answerVariants.answer.join()
assert answerVariants == answerVariantsREST


def text = onlyTextSoap.Body.getDialogResponse.data.question.text.toString().replace('&amp;@','\n')
def textREST = jsonResponse.payload.data.question.text.toString()
assert text == textREST

def type = onlyTextSoap.Body.getDialogResponse.data.question.type.toString()
def typeREST = jsonResponse.payload.data.question.type.toString()
assert type == typeREST</script></con:config></con:testStep><con:properties><con:property><con:name>hash</con:name><con:value>2glj6</con:value></con:property><con:property><con:name>complaints</con:name><con:value>Положительный тест на беременность</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="431fec1e-7410-4938-8b65-63cd7022f151" name="sendAnswer v2"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="d0434fb8-7a26-4af6-8045-7ab1b7ba9bc3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Найти hash" searchProperties="true" disabled="true"><con:settings/><con:testStep type="jdbc" name="Найти hash" id="d6908f39-a88f-46a7-bb1c-37c11e3f4d9d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#inquiryPurposeOrchestrationDbDriver}</con:driver><con:connectionString>${#Project#inquiryPurposeOrchestrationFullDbConnection}</con:connectionString><con:query>SELECT hash FROM inquiry_purpose.complaints</con:query><con:assertion type="Simple Contains" id="70eb159b-978b-47a3-965c-630b08e13443" name="Contains"><con:configuration><token>COMPLAINTS.HASH</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать hash в проперти" id="ef14febb-c4e9-48b9-a2d3-0b0188eba1bd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="true" entitize="false" transferChildNodes="false"><con:name>hash</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Найти hash</con:sourceStep><con:sourcePath>//Row[1]/COMPLAINTS.HASH</con:sourcePath><con:targetType>hash</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="faa3ab26-237e-4720-8014-9559534a480b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ОС. В ответе только обязательные параметры" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Найти hash" id="4879852e-027f-4c84-8e8d-6a922f3e08d4" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d0434fb8-7a26-4af6-8045-7ab1b7ba9bc3</con:targetTestCase><con:properties/><con:returnProperties><con:entry/></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="request" name="getDialog" id="068cf231-0fc4-44eb-8332-ff134e19f8c3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>Заложен нос</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64" disabled="true"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="dd6fd2d4-35ff-499e-8728-aba25280af6b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="sendAnswer" id="fc15d6fc-9667-43d6-be7e-b2800104a45e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendAnswer</con:operation><con:request name="sendAnswer" id="74224bc8-c894-45b0-8d26-ef64bd8458c3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
         <typ:answer>Пропустить</typ:answer>
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3bcb750d-2d97-4bad-8f57-22d26f464f35"/><con:assertion type="Schema Compliance" id="b76f4840-44e3-4c7b-ab06-c273d9d9675a" disabled="true"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="48dd2535-04c3-48b1-b2be-b1b7b444e71b"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getDialog-2" id="781584e7-eeb0-4f4a-858b-5245b9bb87c7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog-2" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>Заложен нос</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64" disabled="true"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer-2" id="38a97214-c960-4573-925e-118269653cdd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog-2</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer REST" id="3b9d93f5-1042-46b7-b894-02f4cc5ad78e"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["Пропустить"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="38a770e0-1815-41fc-871e-de254e10873d" name="Содержит dialogUuid"><con:configuration><token>dialogUuid</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="463e9f76-ff18-4ac3-b08d-71890f6fe093" name="Содержит question"><con:configuration><token>question</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4bb4d2ee-d2c5-4d7a-b6ec-1a873b6ca0a1" name="Содержит answerVariants"><con:configuration><token>answerVariants</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="895134d6-eb22-4639-a4f6-e8e0ae484abf" name="Содержит answer"><con:configuration><token>answer</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="33051dbd-6183-4516-b26b-fdbbcdbfe7bb" name="Содержит text"><con:configuration><token>text</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="72a60674-7bf6-4773-b97c-96c554bb433d" name="Содержит type"><con:configuration><token>type</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит complaintsFinished"><con:configuration><token>complaintsFinished</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит emergency"><con:configuration><token>emergency</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит answerConditions"><con:configuration><token>answerConditions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит maskFormat"><con:configuration><token>maskFormat</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка маппинга" id="588ef7c5-63e6-47be-9813-c155b3b2ed22"><con:settings/><con:config><script>import com.eviware.soapui.support.XmlHolder
import groovy.json.JsonSlurper
import java.util.ArrayList

def restResponse = context.expand('${sendAnswer REST#Response}').toString() // получаем из рест запроса ответ
def jsonResponse =  new JsonSlurper().parseText(restResponse) // создаем объект json
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def soapResponse = context.expand('${sendAnswer#Response}') // получаем из соап запроса ответ
def onlyTextSoap =  new XmlSlurper().parseText(soapResponse)  // парсим текст из xml
def soapResponse2 = context.expand('${getDialog-2#Response}') // получаем из соап запроса ответ
def onlyTextSoap2 =  new XmlSlurper().parseText(soapResponse2)  // парсим текст из xml


// Проверяем значение answerVariants.answer
def answersSoap = onlyTextSoap.Body.sendAnswerResponse.data.question.answerVariants.answer
answersCount = answersSoap.size()
def answersRest = jsonResponse.payload.data.question.answerVariants.answer

dataRest=jsonResponse.payload.data
dataSoap=onlyTextSoap.Body.sendAnswerResponse.data

answersSoapMap = []
for (int i=0; i&lt;answersCount; i++){
	answersSoapMap &lt;&lt; answersSoap[i]
}

assert answersSoapMap == answersRest

// Проверяем значение text
def text = dataSoap.question.text.toString()
def textREST =dataRest.question.text.toString()
assert text == textREST

// Проверяем значение type
def type = dataSoap.question.type.toString()
def typeREST = dataRest.question.type.toString()
assert type == typeREST

// Проверяем значение dialogUuid 
def dialogUuid = onlyTextSoap2.Body.getDialogResponse.data.dialogUuid.toString()
def dialogUuidREST = dataRest.dialogUuid.toString()
assert dialogUuid == dialogUuidREST
</script></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>9582f288429f4c62b8b65ce39cbb3edd</con:value></con:property></con:properties></con:testCase><con:testCase id="b017c6ff-3979-4a06-96a8-04a32c2395c9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ОС. Отправляем несколько ответов" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Найти hash" id="a70ceb63-df8f-40a1-b3b7-3846636ebf07" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d0434fb8-7a26-4af6-8045-7ab1b7ba9bc3</con:targetTestCase><con:properties/><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="request" name="getDialog" id="ad4b6b85-79f8-4df0-bea9-05a93f3afd44"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>Боль в суставах</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="2a6c18f9-a7db-44a2-a919-681863a3df35"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer REST" id="31e4ed27-7138-443c-93a2-4797238e598b"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["Пальцев рук", "Лучезапястные", "Локтевые", "Плечевые", "Пальцев ног", "Голеностопные", "Коленные", "Тазобедренные", "Височно-нижнечелюстные"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="47567f27-253b-440c-b245-a37525304ba6" name="JsonPath Match"><con:configuration/></con:assertion><con:assertion type="Simple NotContains" id="f822f0d2-16ac-4e81-a4f7-b1d72d46d481" name="Не содержит error"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>28491b00f6b34a4fbfb8b37c58b1511f</con:value></con:property></con:properties></con:testCase><con:testCase id="71f630cc-2b59-4d3f-ad93-fcfc2941ef89" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ОС. Отправка ответа пользователя чат-боту (maskFormat = temperature)" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Найти hash" id="87fb4520-a6ac-4294-b1f2-63dbade8c464" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d0434fb8-7a26-4af6-8045-7ab1b7ba9bc3</con:targetTestCase><con:properties/><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="request" name="getDialog" id="c6a49663-fdbc-49e8-abc6-841ef9152151"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>Жалоба</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="050e5aba-2d6c-4a8a-912c-d0675a878737"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="sendAnswer" id="8491ab62-a1a3-4f95-b53d-4229e4d1f13f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendAnswer</con:operation><con:request name="sendAnswer" id="74224bc8-c894-45b0-8d26-ef64bd8458c3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
         <typ:answer>Да</typ:answer>
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3bcb750d-2d97-4bad-8f57-22d26f464f35"/><con:assertion type="Schema Compliance" id="b76f4840-44e3-4c7b-ab06-c273d9d9675a"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="48dd2535-04c3-48b1-b2be-b1b7b444e71b"/><con:assertion type="XPath Match" id="432ee7c2-9f1a-43d7-afbf-0138705abbfc" name="delimiter2 = ,"><con:configuration><path>//*:delimiter2</path><content>,</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getDialog-2" id="65001b92-9291-4a45-9070-4b3b9775e270"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog-2" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>Жалоба</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>BsmBE</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer-2" id="f5e732a5-5cd4-4ecb-b598-cbe37467f831"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog-2</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer REST" id="faab3035-fe1a-49b3-9921-474e5b13d532"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid2}",
	"answer": ["Да"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e68f572f-4550-4740-a68a-bd7e8c7350c8" name="maskFormat = temperature"><con:configuration><path>$.payload.data.question.maskFormat</path><content>temperature</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a9cbc2fb-8bac-40f1-a192-7104aeb65f02" name="В ответе есть answerPlaceholder"><con:configuration><token>answerPlaceholder</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка маппинга" id="51796aea-a139-40d7-9e6b-e937bef14941"><con:settings/><con:config><script>import com.eviware.soapui.support.XmlHolder
import groovy.json.JsonSlurper
import java.util.ArrayList

def restResponse = context.expand('${sendAnswer REST#Response}').toString() // получаем из рест запроса ответ
def jsonResponse =  new JsonSlurper().parseText(restResponse) // создаем объект json
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def soapResponse = context.expand('${sendAnswer#Response}') // получаем из соап запроса ответ
def onlyTextSoap =  new XmlSlurper().parseText(soapResponse)  // парсим текст из xml
def soapResponse2 = context.expand('${getDialog-2#Response}') // получаем из соап запроса ответ
def onlyTextSoap2 =  new XmlSlurper().parseText(soapResponse2)  // парсим текст из xml


// Проверяем значение answerVariants.answer
def answersSoap = onlyTextSoap.Body.sendAnswerResponse.data.question.answerVariants.answer
answersCount = answersSoap.size()
def answersRest = jsonResponse.payload.data.question.answerVariants.answer

dataRest=jsonResponse.payload.data
dataSoap=onlyTextSoap.Body.sendAnswerResponse.data

answersSoapMap = []
for (int i=0; i&lt;answersCount; i++){
	answersSoapMap &lt;&lt; answersSoap[i]
}

assert answersSoapMap == answersRest

// Проверяем значение text
def text = dataSoap.question.text.toString()
def textREST =dataRest.question.text.toString()
assert text == textREST

// Проверяем значение type
def type = dataSoap.question.type.toString()
def typeREST = dataRest.question.type.toString()
assert type == typeREST

// Проверяем значение dialogUuid 
def dialogUuid = onlyTextSoap2.Body.getDialogResponse.data.dialogUuid.toString()
def dialogUuidREST = dataRest.dialogUuid.toString()
assert dialogUuid == dialogUuidREST

// Проверяем значение maskFormat
maskFormat=dataRest.question.maskFormat.toString()
assert maskFormat == "temperature"
</script></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>b496114c54594b059c70881e9a8e82a4</con:value></con:property><con:property><con:name>dialogUuid2</con:name><con:value>7b3d99f4d9564937a84545f69abc685f</con:value></con:property></con:properties></con:testCase><con:testCase id="fc38c9c9-63ac-40cc-8593-ee46897a2334" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ОС. Отправка ответа пользователя чат-боту (maskFormat = pressure)" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Найти hash" id="72169d6c-4823-4657-a0b2-d9cbac5b9173" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d3fe323f-6490-46e4-9b61-807c1b63f276</con:targetTestCase><con:properties/><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="request" name="getDialog" id="636566e7-ef24-40dd-b55a-6a6e30812bb6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>у меня высокий пульс</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>Bsqu6</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="9d5af3b7-2435-476c-844f-f92ad0931f8c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="sendAnswer-a" id="34e768b9-f21f-47fa-9483-4a6d7972f9e4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendAnswer</con:operation><con:request name="sendAnswer-a" id="74224bc8-c894-45b0-8d26-ef64bd8458c3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
         <typ:answer>160</typ:answer>
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3bcb750d-2d97-4bad-8f57-22d26f464f35"/><con:assertion type="Schema Compliance" id="b76f4840-44e3-4c7b-ab06-c273d9d9675a"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="48dd2535-04c3-48b1-b2be-b1b7b444e71b"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="sendAnswer-b" id="8d1a2a8f-65f2-414a-8d4b-8b1232a9f5b9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendAnswer</con:operation><con:request name="sendAnswer-b" id="74224bc8-c894-45b0-8d26-ef64bd8458c3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
         <typ:answer>Нет</typ:answer>
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3bcb750d-2d97-4bad-8f57-22d26f464f35"/><con:assertion type="Schema Compliance" id="b76f4840-44e3-4c7b-ab06-c273d9d9675a"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="48dd2535-04c3-48b1-b2be-b1b7b444e71b"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="goto" name="Повторяем ответ &quot;Нет&quot;, пока не спросит, какое давление" id="36ee6c23-9c8f-493c-b5c3-c8fab5f6bbee"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Ответ Нет</con:name><con:type>XPATH</con:type><con:expression>//*:text = 'Вас беспокоит давление?'</con:expression><con:targetStep>sendAnswer-c</con:targetStep></con:condition><con:condition><con:name>Ответ Да</con:name><con:type>XPATH</con:type><con:expression>//*:text != 'Вас беспокоит давление?'</con:expression><con:targetStep>sendAnswer-b</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="request" name="sendAnswer-c" id="9429cd63-2610-4c75-931b-4fcc3ce0bc45"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendAnswer</con:operation><con:request name="sendAnswer-c" id="74224bc8-c894-45b0-8d26-ef64bd8458c3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
         <typ:answer>Да</typ:answer>
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3bcb750d-2d97-4bad-8f57-22d26f464f35"/><con:assertion type="Schema Compliance" id="b76f4840-44e3-4c7b-ab06-c273d9d9675a"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="48dd2535-04c3-48b1-b2be-b1b7b444e71b"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getDialog-2" id="a4310fb4-6369-483f-9ca7-45f5a71225c3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog-2" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>у меня высокий пульс</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>Bsqu6</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer-2" id="db7cb899-e132-4139-9e41-6b66cd4c8a27"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog-2</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer REST-a" id="e2fbac09-d502-4c22-889e-89e0899983f1"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST-a" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["160"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="47567f27-253b-440c-b245-a37525304ba6" name="JsonPath Match"><con:configuration/></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer REST-b" id="1d354f2d-8ba9-44f2-861b-7aaf38e4d623"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST-b" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["Нет"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="47567f27-253b-440c-b245-a37525304ba6" name="JsonPath Match"><con:configuration/></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Повторяем ответ &quot;Нет&quot;, пока не спросит, какое давление (2)" id="6fcb7d47-63f3-4ace-a34c-0f326f15aea4"><con:settings/><con:config><script>import groovy.json.JsonSlurper

//JSON Slurper
def restResponse = context.expand('${sendAnswer REST-b#Response}').toString() // получаем из рест запроса ответ
def jsonResponse =  new JsonSlurper().parseText(restResponse) // создаем объект json

def questionText = jsonResponse.payload.data.question.text
log.info questionText
// Если в ответе пришел вопрос "Вас беспокоит давление?", то переходим к следующему шагу
if (questionText != "Вас беспокоит давление?"){
	testRunner.gotoStepByName("sendAnswer REST-b")
}
else{
	testRunner.gotoStepByName("sendAnswer REST-c")
}</script></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer REST-c" id="ad8b1323-df5d-4626-93a9-bc9ccf8c267e"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST-c" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["Да"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="47567f27-253b-440c-b245-a37525304ba6" name="JsonPath Match"><con:configuration/></con:assertion><con:assertion type="JsonPath Match" id="5b6d3696-465e-4d8b-9608-9e17dadf9479" name="maskFormat = pressure"><con:configuration><path>$.payload.data.question.maskFormat</path><content>pressure</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0e74bcd-df8c-4243-a3f6-88b9ca475917" name="В ответе есть answerPlaceholder"><con:configuration><token>answerPlaceholder</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка маппинга" id="249919b2-e305-4937-a92d-d5be352ef118"><con:settings/><con:config><script>import com.eviware.soapui.support.XmlHolder
import groovy.json.JsonSlurper

def restResponse = context.expand('${sendAnswer REST-c#Response}').toString() // получаем из рест запроса ответ
def jsonResponse =  new JsonSlurper().parseText(restResponse) // создаем объект json
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def soapResponse = context.expand('${sendAnswer-c#Response}') // получаем из соап запроса ответ
def onlyTextSoap =  new XmlSlurper().parseText(soapResponse)  // парсим текст из xml

// Проверяем значение answerPlaceholder
def answerPlaceholder = onlyTextSoap.Body.sendAnswerResponse.data.question.answerPlaceholder.toString()
def answerPlaceholderREST = jsonResponse.payload.data.question.answerPlaceholder.toString()
assert answerPlaceholder == answerPlaceholderREST

// Проверяем значение answerVariants.answer
def answers = onlyTextSoap.Body.sendAnswerResponse.data.question.answerVariants.answer.toString()
def answersREST = jsonResponse.payload.data.question.answerVariants.answer.get(0).toString()
assert answers == answersREST

// Проверяем значение text
def text = onlyTextSoap.Body.sendAnswerResponse.data.question.text.toString()
def textREST = jsonResponse.payload.data.question.text.toString()
assert text == textREST

// Проверяем значение type
def type = onlyTextSoap.Body.sendAnswerResponse.data.question.type.toString()
def typeREST = jsonResponse.payload.data.question.type.toString()
assert type == typeREST
</script></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>b9f1455568c544c78e083118c25b18f0</con:value></con:property></con:properties></con:testCase><con:testCase id="72a96a93-905f-4db3-ba68-de9c21afc219" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ОС. Отправка ответа пользователя чат-боту (answerConditions.block)" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Найти hash" id="585e186d-ed3c-4cc0-a28f-6c5468aceb9b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d0434fb8-7a26-4af6-8045-7ab1b7ba9bc3</con:targetTestCase><con:properties/><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="request" name="getDialog" id="3f3addb5-6194-4f2f-a7fc-1c380518086d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>Боль в ногах</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="62a439e3-5868-4d95-a6b7-1af35b30e510"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="sendAnswer" id="5211cdff-bc81-462d-b9ca-e7d4a76071a0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendAnswer</con:operation><con:request name="sendAnswer" id="74224bc8-c894-45b0-8d26-ef64bd8458c3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
         <typ:answer>Справа</typ:answer>
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3bcb750d-2d97-4bad-8f57-22d26f464f35"/><con:assertion type="Schema Compliance" id="b76f4840-44e3-4c7b-ab06-c273d9d9675a"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="48dd2535-04c3-48b1-b2be-b1b7b444e71b"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getDialog-2" id="6d02f80e-883c-4326-b161-75573a4c305c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog-2" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>Боль в ногах</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer-2" id="4c898ebe-a433-43e6-85be-d790615b3742"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog-2</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer REST" id="075b6af2-b063-47af-ac2f-c3a255cf61c2"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["Справа"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="47567f27-253b-440c-b245-a37525304ba6" name="JsonPath Match"><con:configuration/></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка маппинга" id="af02893c-4fbe-4a15-9c62-0c7a43eafa07"><con:settings/><con:config><script>import com.eviware.soapui.support.XmlHolder
import groovy.json.JsonSlurper

def restResponse = context.expand('${sendAnswer REST#Response}').toString() // получаем из рест запроса ответ
def jsonResponse =  new JsonSlurper().parseText(restResponse) // создаем объект json
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def soapResponse = context.expand('${sendAnswer#Response}') // получаем из соап запроса ответ
def onlyTextSoap =  new XmlSlurper().parseText(soapResponse)  // парсим текст из xml

/*
// Проверяем значение answerPlaceholder
def answerPlaceholder = onlyTextSoap.Body.sendAnswerResponse.data.question.answerPlaceholder.toString()
def answerPlaceholderREST = jsonResponse.payload.data.question.answerPlaceholder.toString()
assert answerPlaceholder == answerPlaceholderREST
*/

// Проверяем значение answerVariants.answer

def answerVariants = onlyTextSoap.Body.sendAnswerResponse.data.question.answerVariants.answer
log.info answerVariants
def answerVariantsREST = jsonResponse.payload.data.question.answerVariants.answer
log.info answerVariantsREST
List answersCB= [ ]
answerVariants.each{
	answersCB &lt;&lt; it
}
log.info answersCB
assert answersCB == answerVariantsREST

// Проверяем значение text
def text = onlyTextSoap.Body.sendAnswerResponse.data.question.text.toString()
def textREST = jsonResponse.payload.data.question.text.toString()
assert text == textREST

// Проверяем значение type
def type = onlyTextSoap.Body.sendAnswerResponse.data.question.type.toString()
def typeREST = jsonResponse.payload.data.question.type.toString()
assert type == typeREST
</script></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>dbf935bdcb3f472baae9e1618281ce38</con:value></con:property><con:property><con:name>dialogUuid2</con:name><con:value>c1c5f624944f40cb88d6db180bc3f5ad</con:value></con:property></con:properties></con:testCase><con:testCase id="795220cc-edf3-4ffb-990a-82f4b0cd064c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ОС. Отправка ответа пользователя чат-боту (есть complaintsFinished)" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Найти hash" id="5a60c6c8-a24c-46ca-be1f-07641040f189" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d0434fb8-7a26-4af6-8045-7ab1b7ba9bc3</con:targetTestCase><con:properties/><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="request" name="getDialog" id="5ff92f56-5d88-4eaf-8cdc-4242560a1691"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>Боль</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="9f124e3d-5dd9-4744-9371-42fd13c62bf4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="sendAnswer" id="897a4f2e-54e2-4c7b-b05a-be400c39ac3a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendAnswer</con:operation><con:request name="sendAnswer" id="74224bc8-c894-45b0-8d26-ef64bd8458c3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
         <typ:answer>нет</typ:answer>
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3bcb750d-2d97-4bad-8f57-22d26f464f35"/><con:assertion type="Schema Compliance" id="b76f4840-44e3-4c7b-ab06-c273d9d9675a"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="48dd2535-04c3-48b1-b2be-b1b7b444e71b"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="goto" name="Если вопросы закончились, переходим к след.шагу" id="5170ec41-313e-499a-8d47-d64372802c9e"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Ответ Нет</con:name><con:type>XPATH</con:type><con:expression>//*:text != "Вас беспокоит тяжесть в животе?"</con:expression><con:targetStep>sendAnswer</con:targetStep></con:condition><con:condition><con:name>Последний вопрос</con:name><con:type>XPATH</con:type><con:expression>//*:text = "Вас беспокоит тяжесть в животе?"</con:expression><con:targetStep>sendAnswer REST</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer REST" id="d6e604c8-62e9-4145-8ce4-104d24193f56"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["Нет"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="47567f27-253b-440c-b245-a37525304ba6" name="complaintsFinished = true"><con:configuration><path>$.payload.data.complaintsFinished</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1b5a027e-4468-4173-8757-523f713c1490" name="text = &quot;&quot;"><con:configuration><path>$.payload.data.question.text</path><content/><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="44f4f0ba-7903-4c9e-aa18-34bbfc149028" name="type = &quot;&quot;"><con:configuration><path>$.payload.data.question.type</path><content/><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="76873a98-9759-40ee-8cb7-3ccedac18f8c" name="answer = []"><con:configuration><path>$.payload.data.question.answerVariants.answer</path><content>[]</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>27e9178c80364a4a99acca0657c74ac8</con:value></con:property></con:properties></con:testCase><con:testCase id="eaad3d81-d451-48b9-9070-a70285867c1e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ОС. Отправка ответа пользователя чат-боту" searchProperties="true" disabled="true"><con:settings/><con:testStep type="request" name="SOAPgetDialog" id="132f7c26-ec27-4843-b7d4-de4afa3b10d4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="SOAPgetDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>Боль в суставах</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>BsmBE</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="a4e67a08-5d9d-4d87-9503-b8d7a05b5575"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SOAPgetDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="SOAPsendAnswer" id="8cbfaac4-cc20-49c8-a6ea-a8f682328cb8" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendAnswer</con:operation><con:request name="SOAPsendAnswer" id="74224bc8-c894-45b0-8d26-ef64bd8458c3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://srv-dtchatboatbackp1-app01.mosgorzdrav.local/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
         <!--1 or more repetitions:-->\r
         <typ:answer>Пальцев рук</typ:answer>\r
         <typ:answer>Лучезапястные</typ:answer>
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3bcb750d-2d97-4bad-8f57-22d26f464f35"/><con:assertion type="Schema Compliance" id="b76f4840-44e3-4c7b-ab06-c273d9d9675a"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="48dd2535-04c3-48b1-b2be-b1b7b444e71b"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="INFOsendAnswer" id="d8062259-eaab-4992-b04b-59b854a28205"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/getDialog" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="INFOsendAnswer" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["Пальцев рук", "Лучезапястные"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="47567f27-253b-440c-b245-a37525304ba6" name="JsonPath Match"><con:configuration/></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>498065816ecd4a0ea0988db980fb175f</con:value></con:property></con:properties></con:testCase><con:testCase id="609d3b01-871c-424c-bb5b-c2c3d5578d37" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС0. SERVER_ERROR" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="sendAnswer REST" id="b3568032-f83d-476e-94d1-f16313ab53ab"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/getDialog" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "111"
	"answer": "головокружение"
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="47567f27-253b-440c-b245-a37525304ba6" name="error.code = SERVER_ERROR"><con:configuration><path>$.error.code</path><content>SERVER_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="715e1f02-b166-4da8-87b0-e4594fd22098" name="error.description = Ошибка выполнения метода"><con:configuration><path>$.error.description</path><content>Ошибка выполнения метода</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="b1e714e7-89a4-4f50-b4e0-6f077892e526" name="error.type = TECHNICAL"><con:configuration><path>$.error.type</path><content>TECHNICAL</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="6bb25527-240c-450a-a5fd-8c712eabd674" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС1. CB_SEND_ANSWER_ERROR" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Найти hash" id="c3491af9-4c96-4e16-92b7-da65fc8314a1"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d0434fb8-7a26-4af6-8045-7ab1b7ba9bc3</con:targetTestCase><con:properties/><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="request" name="getDialog" id="e18cc327-c06a-4fab-a267-69fff6064551"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>Боль</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="7c95fa21-cb52-4dd6-a49e-3b31f8042807"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="sendAnswer" id="e75bb7c1-f895-4cca-a9b8-7f3eca2d2b3d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendAnswer</con:operation><con:request name="sendAnswer" id="74224bc8-c894-45b0-8d26-ef64bd8458c3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
         <typ:answer>нет</typ:answer>
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3bcb750d-2d97-4bad-8f57-22d26f464f35"/><con:assertion type="Schema Compliance" id="b76f4840-44e3-4c7b-ab06-c273d9d9675a"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="48dd2535-04c3-48b1-b2be-b1b7b444e71b"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="goto" name="Если вопросы закончились, переходим к след.шагу" id="470968f2-551f-420f-89df-40f905f959ac"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Ответ Нет</con:name><con:type>XPATH</con:type><con:expression>//*:text != ""</con:expression><con:targetStep>sendAnswer</con:targetStep></con:condition><con:condition><con:name>Вопросов нет</con:name><con:type>XPATH</con:type><con:expression>//*:text = ""</con:expression><con:targetStep>sendAnswer REST</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer REST" id="df550da1-55f9-433e-b4d2-970049d69aaa"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["Нет"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Status Code = 400"><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1b5a027e-4468-4173-8757-523f713c1490" name="error.code = CB_SEND_ANSWER_ERROR"><con:configuration><path>$.error.code</path><content>CB_SEND_ANSWER_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="44f4f0ba-7903-4c9e-aa18-34bbfc149028" name="error.description = Не удалось отправить ответ чат-боту"><con:configuration><path>$.error.description</path><content>Не удалось отправить ответ чат-боту</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="76873a98-9759-40ee-8cb7-3ccedac18f8c" name="error.type = BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>a8465c05804546a9880c03be3a9609f8</con:value></con:property></con:properties></con:testCase><con:testCase id="774340fc-e886-4b56-ab04-0c90b12c4c5e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Замена спецсимволов" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Найти hash" id="375ecadb-7fda-449f-8831-69160745d2de" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d0434fb8-7a26-4af6-8045-7ab1b7ba9bc3</con:targetTestCase><con:properties/><con:returnProperties><con:entry/></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="request" name="getDialog" id="8dacfa7c-c56a-489b-be73-eed3cf0fa5e9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>${#TestCase#complaints}</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64" disabled="true"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="a3a2cea0-a6f2-493c-b970-3e8cfaf728d8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="sendAnswer" id="712ea3f4-0bcd-488f-b791-5fadcc22e902"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendAnswer</con:operation><con:request name="sendAnswer" id="74224bc8-c894-45b0-8d26-ef64bd8458c3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
         <typ:answer>Пропустить</typ:answer>
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3bcb750d-2d97-4bad-8f57-22d26f464f35"/><con:assertion type="Schema Compliance" id="b76f4840-44e3-4c7b-ab06-c273d9d9675a" disabled="true"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="48dd2535-04c3-48b1-b2be-b1b7b444e71b"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверка наличия спецсимвола" id="a268ee14-0778-4b7d-9d1a-3b1f329e7e88"><con:settings/><con:config><script>import com.eviware.soapui.support.XmlHolder

for(int i=0; i&lt;30; i++){
	def soapResponse = context.expand('${sendAnswer#Response}')
	def onlyTextSoap =  new XmlSlurper().parseText(soapResponse)  
	text= onlyTextSoap.Body.sendAnswerResponse.data.question.text.toString()
	log.info text
	if(!text.contains("&amp;@")){
		def tCase = testRunner.testCase.testSuite.testCases["Замена спецсимволов"]
		def tStep = tCase.testSteps["sendAnswer"]
		tStep.run(testRunner, context)
		sleep(1000)
	}
	else{
		log.info "Получили вопрос со спецсимволами "+text
		textFirstPart=text.split('&amp;@')[0]
		testRunner.testCase.setPropertyValue("textFirstPart", textFirstPart)
		break
	}
}</script></con:config></con:testStep><con:testStep type="request" name="getDialog-2" id="c130181f-fdbd-4ced-94cc-b14c46bb318c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog-2" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>${#TestCase#complaints}</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64" disabled="true"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer-2" id="a9f4a1f2-9d44-4178-927d-a28ecff5a801"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog-2</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer REST" id="f0d3f597-ab42-4bc5-9b05-6897afcc3476"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["Пропустить"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="38a770e0-1815-41fc-871e-de254e10873d" name="Содержит dialogUuid"><con:configuration><token>dialogUuid</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="463e9f76-ff18-4ac3-b08d-71890f6fe093" name="Содержит question"><con:configuration><token>question</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4bb4d2ee-d2c5-4d7a-b6ec-1a873b6ca0a1" name="Содержит answerVariants"><con:configuration><token>answerVariants</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="895134d6-eb22-4639-a4f6-e8e0ae484abf" name="Содержит answer"><con:configuration><token>answer</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="33051dbd-6183-4516-b26b-fdbbcdbfe7bb" name="Содержит text"><con:configuration><token>text</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="72a60674-7bf6-4773-b97c-96c554bb433d" name="Содержит type"><con:configuration><token>type</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит complaintsFinished"><con:configuration><token>complaintsFinished</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит emergency"><con:configuration><token>emergency</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит answerConditions"><con:configuration><token>answerConditions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит maskFormat"><con:configuration><token>maskFormat</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка наличия спецсимвола 2" id="fd96c435-368a-4eda-8a02-01bdffb3b857"><con:settings/><con:config><script>import groovy.json.JsonSlurper
def textFirstPart=testRunner.testCase.getPropertyValue("textFirstPart")

for(int i=0; i&lt;30; i++){
	def restResponse = context.expand('${sendAnswer REST#Response}').toString() 
	def jsonResponse =  new JsonSlurper().parseText(restResponse)
	text= jsonResponse.payload.data.question.text.toString()
	log.info text
	if(!text.contains(textFirstPart)){
		def tCase = testRunner.testCase.testSuite.testCases["Замена спецсимволов"]
		def tStep = tCase.testSteps["sendAnswer REST"]
		tStep.run(testRunner, context)
		sleep(1000)
	}
	else{
		log.info "Получили вопрос со спецсимволами "+text
		if(text.contains("&amp;@")) testRunner.fail("Вопрос содержит ненужные спецсимволы. ")
		if(!text.contains("\n")) testRunner.fail("Вопрос не содержит нужные спецсимволы \n ")
		break
	}
}</script></con:config></con:testStep><con:testStep type="groovy" name="Проверка маппинга" id="e29ab39e-03ef-4e95-9db4-3b2b18bca7af"><con:settings/><con:config><script>import com.eviware.soapui.support.XmlHolder
import groovy.json.JsonSlurper
import java.util.ArrayList

def restResponse = context.expand('${sendAnswer REST#Response}').toString() // получаем из рест запроса ответ
def jsonResponse =  new JsonSlurper().parseText(restResponse) // создаем объект json
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def soapResponse = context.expand('${sendAnswer#Response}') // получаем из соап запроса ответ
def onlyTextSoap =  new XmlSlurper().parseText(soapResponse)  // парсим текст из xml
def soapResponse2 = context.expand('${getDialog-2#Response}') // получаем из соап запроса ответ
def onlyTextSoap2 =  new XmlSlurper().parseText(soapResponse2)  // парсим текст из xml


// Проверяем значение answerVariants.answer
def answersSoap = onlyTextSoap.Body.sendAnswerResponse.data.question.answerVariants.answer
answersCount = answersSoap.size()
def answersRest = jsonResponse.payload.data.question.answerVariants.answer

dataRest=jsonResponse.payload.data
dataSoap=onlyTextSoap.Body.sendAnswerResponse.data

answersSoapMap = []
for (int i=0; i&lt;answersCount; i++){
	answersSoapMap &lt;&lt; answersSoap[i]
}

assert answersSoapMap == answersRest

// Проверяем значение text
def text = dataSoap.question.text.toString().replace('&amp;@','\n')
def textREST =dataRest.question.text.toString()
assert text == textREST

// Проверяем значение type
def type = dataSoap.question.type.toString()
def typeREST = dataRest.question.type.toString()
assert type == typeREST

// Проверяем значение dialogUuid 
def dialogUuid = onlyTextSoap2.Body.getDialogResponse.data.dialogUuid.toString()
def dialogUuidREST = dataRest.dialogUuid.toString()
assert dialogUuid == dialogUuidREST
</script></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>01c5194d9efb42dcbae2304cfd1feada</con:value></con:property><con:property><con:name>complaints</con:name><con:value>боль в горле, беременность</con:value></con:property><con:property><con:name>textFirstPart</con:name><con:value>Какой срок беременности?</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>hash</con:name><con:value>2glj6</con:value></con:property></con:properties></con:testSuite><con:testSuite id="1595fb7e-a9cd-447d-823e-186423bdcdb6" name="sendResult"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="0bf679a6-6cf2-42c8-8d01-2822326d06d7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ОС. Сохранение жалоб пользователя" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Найти hash" id="9d2023e9-223d-472c-98f6-ba9fe77dbdb8" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d0434fb8-7a26-4af6-8045-7ab1b7ba9bc3</con:targetTestCase><con:properties/><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="request" name="getDialog" id="677e8c14-f6d6-47b0-bd8b-e526991a16a3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>тошнота</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>BsmBE</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="b8649f59-7b11-4c74-8622-4004e996bc7c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="sendResult REST" id="5c92131c-e02c-419a-a4e8-d704afd20dcd"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendResult" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendResult REST" id="838a1708-30ea-462a-93bd-7f16dd423fe7" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}"
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendResult</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="6399665b-d686-4a48-a147-5eee7c44fc8f" name="Status Code = 204"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>d1a3c23d034f4df0be1296911b0eb369</con:value></con:property></con:properties></con:testCase><con:testCase id="18111829-2787-4824-8aee-c1433243ea16" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС0. SERVER_ERROR" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="sendResult REST" id="5f5ad2be-545c-40e3-be8d-21923d95cc29"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/getDialog" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendResult REST" id="838a1708-30ea-462a-93bd-7f16dd423fe7" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendResult</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="6399665b-d686-4a48-a147-5eee7c44fc8f" name="Status Code = 500"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d6e1b779-7fe9-417b-ac4a-a6ec1a7272d0" name="error.code = SERVER_ERROR"><con:configuration><path>$.error.code</path><content>SERVER_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ac15c679-c5fd-4326-b16f-2095ff399f44" name="error.description = Ошибка выполнения метода"><con:configuration><path>$.error.description</path><content>Ошибка выполнения метода</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ff950434-c386-4b18-bd23-9f2e784f8fec" name="error.type = TECHNICAL"><con:configuration><path>$.error.type</path><content>TECHNICAL</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>71f384ee9b0d4b95b0c2b1ff3c8f36bc</con:value></con:property></con:properties></con:testCase><con:testCase id="cbb93673-46b1-4354-af77-c8f6b6bbe3d7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС1. CB_SEND_RESULT_ERROR" searchProperties="true"><con:settings/><con:testStep type="request" name="getDialog" id="4b204506-7b50-4cfd-bbf9-a467cdc93bcd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>тошнота</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>BsmBE</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="abd8b4b6-cc6e-4c1b-bada-c40776c5f087"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="sentResult" id="4713a2f0-b4b9-4f36-99cd-5bc832ce9307"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendResult</con:operation><con:request name="sentResult" id="263e02db-36f0-4073-bbc4-a4561baed094"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <!--Optional:-->
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <!--Zero or more repetitions:-->
            <user:userRightId>37070004</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:sendResultRequest>
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>
      </typ:sendResultRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6b850cfd-1725-48df-9324-4ec8476b4a32"/><con:assertion type="Schema Compliance" id="f88de746-28d4-4a8e-b0c6-cd65104fb80a"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="e2208141-48c9-469a-a34c-6c3e6140e245"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="INFOsendResult" id="86e49685-818f-4617-80fd-8e876b4e42a4"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendResult" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="INFOsendResult" id="838a1708-30ea-462a-93bd-7f16dd423fe7" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}"
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendResult</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="6399665b-d686-4a48-a147-5eee7c44fc8f" name="Status Code = 400"><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="25481443-2e7b-46cb-8672-700357445d5a" name="error.code = CB_SEND_RESULT_ERROR"><con:configuration><path>$.error.code</path><content>CB_SEND_RESULT_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="2b66fb5b-96c5-44f9-be7b-b5994ee2ae64" name="error.description = Не удалось сохранить жалобы пациента"><con:configuration><path>$.error.description</path><content>Не удалось сохранить жалобы пациента</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="5a194a6e-154b-42dd-a283-cf8b45999284" name="error.type = BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>37cc18c90ad34d6cbbfa80facc5ad378</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="4ee9cc02-047e-46b8-a0e2-f1ae6f4d4fd1" name="sendAnswer v3"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="c9122117-8086-4d2c-ad6f-ca2e57822dc1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Замена спецсимволов" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Найти hash" id="a7f25c92-069e-45a8-aa1f-d032dfd7a792" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d0434fb8-7a26-4af6-8045-7ab1b7ba9bc3</con:targetTestCase><con:properties/><con:returnProperties><con:entry/></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="request" name="getDialog" id="bb03ed31-f0d7-481f-9f22-dcb20be323ea"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>${#TestCase#complaints}</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64" disabled="true"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="3ae8289f-0e02-48e7-a58c-487daff14ddc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="sendAnswer" id="60aec5c0-1736-484b-8bd9-533c4982121e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendAnswer</con:operation><con:request name="sendAnswer" id="74224bc8-c894-45b0-8d26-ef64bd8458c3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
         <typ:answer>Пропустить</typ:answer>
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3bcb750d-2d97-4bad-8f57-22d26f464f35"/><con:assertion type="Schema Compliance" id="b76f4840-44e3-4c7b-ab06-c273d9d9675a" disabled="true"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="48dd2535-04c3-48b1-b2be-b1b7b444e71b"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверка наличия спецсимвола" id="ca94756b-ef6e-4986-b343-a8ea0d8baaca"><con:settings/><con:config><script>import com.eviware.soapui.support.XmlHolder

for(int i=0; i&lt;30; i++){
	def soapResponse = context.expand('${sendAnswer#Response}')
	def onlyTextSoap =  new XmlSlurper().parseText(soapResponse)  
	text= onlyTextSoap.Body.sendAnswerResponse.data.question.text.toString()
	log.info text
	if(!text.contains("&amp;@")){
		def tCase = testRunner.testCase.testSuite.testCases["Замена спецсимволов"]
		def tStep = tCase.testSteps["sendAnswer"]
		tStep.run(testRunner, context)
		sleep(1000)
	}
	else{
		log.info "Получили вопрос со спецсимволами "+text
		textFirstPart=text.split('&amp;@')[0]
		testRunner.testCase.setPropertyValue("textFirstPart", textFirstPart)
		break
	}
}</script></con:config></con:testStep><con:testStep type="request" name="getDialog-2" id="d0134e7a-cf7d-4110-8d89-15549ef7d0e2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog-2" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>${#TestCase#complaints}</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64" disabled="true"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer-2" id="abd52815-ccf9-407f-9931-fed4938609e5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog-2</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer REST" id="80a1d22b-8fbf-4ec9-a18e-ca29e9e259c2"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v3/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["Пропустить"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="38a770e0-1815-41fc-871e-de254e10873d" name="Содержит dialogUuid"><con:configuration><token>dialogUuid</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="463e9f76-ff18-4ac3-b08d-71890f6fe093" name="Содержит question"><con:configuration><token>question</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4bb4d2ee-d2c5-4d7a-b6ec-1a873b6ca0a1" name="Содержит answerVariants"><con:configuration><token>answerVariants</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="895134d6-eb22-4639-a4f6-e8e0ae484abf" name="Содержит answer"><con:configuration><token>answer</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="33051dbd-6183-4516-b26b-fdbbcdbfe7bb" name="Содержит text"><con:configuration><token>text</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="72a60674-7bf6-4773-b97c-96c554bb433d" name="Содержит type"><con:configuration><token>type</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит complaintsFinished"><con:configuration><token>complaintsFinished</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит emergency"><con:configuration><token>emergency</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит answerConditions"><con:configuration><token>answerConditions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит maskFormat"><con:configuration><token>maskFormat</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка наличия спецсимвола 2" id="b48fe05a-a79a-4bda-ad62-e8dac82073a0"><con:settings/><con:config><script>import groovy.json.JsonSlurper
def textFirstPart=testRunner.testCase.getPropertyValue("textFirstPart")

for(int i=0; i&lt;30; i++){
	def restResponse = context.expand('${sendAnswer REST#Response}').toString() 
	def jsonResponse =  new JsonSlurper().parseText(restResponse)
	text= jsonResponse.payload.data.question.text.toString()
	log.info text
	if(!text.contains(textFirstPart)){
		def tCase = testRunner.testCase.testSuite.testCases["Замена спецсимволов"]
		def tStep = tCase.testSteps["sendAnswer REST"]
		tStep.run(testRunner, context)
		sleep(1000)
	}
	else{
		log.info "Получили вопрос со спецсимволами "+text
		if(text.contains("&amp;@")) testRunner.fail("Вопрос содержит ненужные спецсимволы. ")
		if(!text.contains("\n")) testRunner.fail("Вопрос не содержит нужные спецсимволы \n ")
		break
	}
}</script></con:config></con:testStep><con:testStep type="groovy" name="Проверка маппинга" id="fefc88bb-5582-456d-afb1-04302ecd5f7d"><con:settings/><con:config><script>import com.eviware.soapui.support.XmlHolder
import groovy.json.JsonSlurper
import java.util.ArrayList

def restResponse = context.expand('${sendAnswer REST#Response}').toString() // получаем из рест запроса ответ
def jsonResponse =  new JsonSlurper().parseText(restResponse) // создаем объект json
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def soapResponse = context.expand('${sendAnswer#Response}') // получаем из соап запроса ответ
def onlyTextSoap =  new XmlSlurper().parseText(soapResponse)  // парсим текст из xml
def soapResponse2 = context.expand('${getDialog-2#Response}') // получаем из соап запроса ответ
def onlyTextSoap2 =  new XmlSlurper().parseText(soapResponse2)  // парсим текст из xml


// Проверяем значение answerVariants.answer
def answersSoap = onlyTextSoap.Body.sendAnswerResponse.data.question.answerVariants.answer
answersCount = answersSoap.size()
def answersRest = jsonResponse.payload.data.question.answerVariants.answer

dataRest=jsonResponse.payload.data
dataSoap=onlyTextSoap.Body.sendAnswerResponse.data

answersSoapMap = []
for (int i=0; i&lt;answersCount; i++){
	answersSoapMap &lt;&lt; answersSoap[i]
}

assert answersSoapMap == answersRest

// Проверяем значение text
def text = dataSoap.question.text.toString().replace('&amp;@','\n')
def textREST =dataRest.question.text.toString()
assert text == textREST

// Проверяем значение type
def type = dataSoap.question.type.toString()
def typeREST = dataRest.question.type.toString()
assert type == typeREST

// Проверяем значение dialogUuid 
def dialogUuid = onlyTextSoap2.Body.getDialogResponse.data.dialogUuid.toString()
def dialogUuidREST = dataRest.dialogUuid.toString()
assert dialogUuid == dialogUuidREST
</script></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>7d7a64e815984350965eb1162ce51ed5</con:value></con:property><con:property><con:name>complaints</con:name><con:value>боль в горле, беременность</con:value></con:property><con:property><con:name>textFirstPart</con:name><con:value>Какой срок беременности?</con:value></con:property></con:properties></con:testCase><con:testCase id="4e6d9fad-5707-42f0-a472-cd3d711b3cd4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ОС. В ответе только обязательные параметры" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Найти hash" id="143e463c-ac23-4f36-ab8b-1580f389be29" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d0434fb8-7a26-4af6-8045-7ab1b7ba9bc3</con:targetTestCase><con:properties/><con:returnProperties><con:entry/></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="request" name="getDialog" id="8d03778c-4e7b-49d6-8442-7b20fbc4bc7b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>Заложен нос</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64" disabled="true"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="9456d498-908e-456d-8baf-274a5b475948"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="sendAnswer" id="7cf76f08-1c52-4153-aa82-1c96f8b46c80"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>sendAnswer</con:operation><con:request name="sendAnswer" id="74224bc8-c894-45b0-8d26-ef64bd8458c3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>EIM</user:systemName>\r
         <user:userName>EIM</user:userName>\r
         <user:userRoleId>7187</user:userRoleId>\r
         <user:userRights>
            <user:userRightId>37070003</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:sendAnswerRequest>\r
         <typ:dialogUuid>${#TestCase#dialogUuid}</typ:dialogUuid>\r
         <typ:answer>Пропустить</typ:answer>
      </typ:sendAnswerRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3bcb750d-2d97-4bad-8f57-22d26f464f35"/><con:assertion type="Schema Compliance" id="b76f4840-44e3-4c7b-ab06-c273d9d9675a" disabled="true"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="48dd2535-04c3-48b1-b2be-b1b7b444e71b"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getDialog-2" id="7c19bb84-44b2-4987-85da-c8500c82b9a0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>InterviewServiceBinding</con:interface><con:operation>getDialog</con:operation><con:request name="getDialog-2" id="9c2f8871-81d3-427a-8105-8ec6ea3eb646"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#chatBotEndPoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="https://simptom.emias.ru/api/v1/soap/wsdl/types">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>EIM</user:userName>
         <user:userRoleId>7187</user:userRoleId>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>37070001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
   </soap:Header>
   <soap:Body>
      <typ:getDialogRequest>
         <typ:complaints>Заложен нос</typ:complaints>
         <typ:source>mp</typ:source>
         <typ:code>${#TestSuite#hash}</typ:code>
      </typ:getDialogRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a98ebc9b-d598-433d-89e7-2d17ba889b3e"/><con:assertion type="Schema Compliance" id="5850b8eb-9f45-4c0a-8a0d-aee43336af64" disabled="true"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="23cd9497-7462-4d27-ad81-74d8eea89633"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer-2" id="c269f23d-dad9-45a3-b02e-3c2af966c99c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>dialogUuid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getDialog-2</con:sourceStep><con:sourcePath>//*:dialogUuid</con:sourcePath><con:targetType>dialogUuid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer REST" id="47f0191b-e30f-4006-8a6c-192565f4639b"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v3/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer REST" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["Пропустить"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="38a770e0-1815-41fc-871e-de254e10873d" name="Содержит dialogUuid"><con:configuration><token>dialogUuid</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="463e9f76-ff18-4ac3-b08d-71890f6fe093" name="Содержит question"><con:configuration><token>question</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4bb4d2ee-d2c5-4d7a-b6ec-1a873b6ca0a1" name="Содержит answerVariants"><con:configuration><token>answerVariants</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="895134d6-eb22-4639-a4f6-e8e0ae484abf" name="Содержит answer"><con:configuration><token>answer</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="33051dbd-6183-4516-b26b-fdbbcdbfe7bb" name="Содержит text"><con:configuration><token>text</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="72a60674-7bf6-4773-b97c-96c554bb433d" name="Содержит type"><con:configuration><token>type</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит complaintsFinished"><con:configuration><token>complaintsFinished</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит emergency"><con:configuration><token>emergency</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит answerConditions"><con:configuration><token>answerConditions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит maskFormat"><con:configuration><token>maskFormat</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка маппинга" id="f839e047-b75f-48ba-a2d4-263a480d2c88"><con:settings/><con:config><script>import com.eviware.soapui.support.XmlHolder
import groovy.json.JsonSlurper
import java.util.ArrayList

def restResponse = context.expand('${sendAnswer REST#Response}').toString() // получаем из рест запроса ответ
def jsonResponse =  new JsonSlurper().parseText(restResponse) // создаем объект json
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def soapResponse = context.expand('${sendAnswer#Response}') // получаем из соап запроса ответ
def onlyTextSoap =  new XmlSlurper().parseText(soapResponse)  // парсим текст из xml
def soapResponse2 = context.expand('${getDialog-2#Response}') // получаем из соап запроса ответ
def onlyTextSoap2 =  new XmlSlurper().parseText(soapResponse2)  // парсим текст из xml


// Проверяем значение answerVariants.answer
def answersSoap = onlyTextSoap.Body.sendAnswerResponse.data.question.answerVariants.answer
answersCount = answersSoap.size()
def answersRest = jsonResponse.payload.data.question.answerVariants.answer

dataRest=jsonResponse.payload.data
dataSoap=onlyTextSoap.Body.sendAnswerResponse.data

answersSoapMap = []
for (int i=0; i&lt;answersCount; i++){
	answersSoapMap &lt;&lt; answersSoap[i]
}

assert answersSoapMap == answersRest

// Проверяем значение text
def text = dataSoap.question.text.toString()
def textREST =dataRest.question.text.toString()
assert text == textREST

// Проверяем значение type
def type = dataSoap.question.type.toString()
def typeREST = dataRest.question.type.toString()
assert type == typeREST

// Проверяем значение dialogUuid 
def dialogUuid = onlyTextSoap2.Body.getDialogResponse.data.dialogUuid.toString()
def dialogUuidREST = dataRest.dialogUuid.toString()
assert dialogUuid == dialogUuidREST
</script></con:config></con:testStep><con:properties><con:property><con:name>dialogUuid</con:name><con:value>dcf1cfc7f40a4554b6ee15133180c11f</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>hash</con:name><con:value>2glj6</con:value></con:property></con:properties></con:testSuite><con:testSuite id="f9ec0237-f1a5-4f71-9f9d-5b4345ee59a5" name="Поиск ошибок при прохождении опроса"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="b8dcb7bf-573f-4f86-98b3-6682916a017b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase 1" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Запуск нескольких прогонов" id="02414e8c-7b87-4e76-b071-6eee68c4742a"><con:settings/><con:config><script>import groovy.json.JsonSlurper
complains=[ 
				"боль в горле",
				"Беременность",
				"Сломана нога",
				"болит голова",
				"температура",
				"понос",
				"рвота",
				"ветрянка",
				"менингит",
				"золотуха",
				"обезвоживание",
				"потливость",
				"плохой запах",
				"болит зуб",
				"грустно",
				"депрессия",
				"боль в спине",
				"продуло",
				"газы"
				]
for(int i=0; i&lt;complains.size(); i++ ){
	testRunner.testCase.setPropertyValue("complaints", complains[i])
	def tCase = testRunner.testCase.testSuite.testCases["TestCase 1"]
	def tStep = tCase.testSteps["getDialog"]
	tStep.run(testRunner, context)
	getDialogResponse=context.expand('${getDialog#Response}')
	parsedResponse = new JsonSlurper().parseText(getDialogResponse)
	dialogUuid=parsedResponse.payload.data.dialogUuid.toString()
	answer=parsedResponse.payload.data.question.answerVariants.answer[0]
	testRunner.testCase.setPropertyValue("dialogUuid", dialogUuid)
	testRunner.testCase.setPropertyValue("answer", answer)
	def tStep2 = tCase.testSteps["sendAnswer"]
	finished=false
	hasError=false
	while(!finished &amp;&amp; !hasError){
		tStep2.run(testRunner, context)
		sendAnswerResponse=context.expand('${sendAnswer#Response}')
		if(sendAnswerResponse.contains("error")){
			hasError=true
			break
		}
		sendAnswerParsedResponse = new JsonSlurper().parseText(sendAnswerResponse)
		complaintsFinished=sendAnswerParsedResponse.payload.data.complaintsFinished
		finished = complaintsFinished == null ? false : complaintsFinished
		if( finished ){
			n=i+1
			log.info "Опрос номер "+(i+1)+" по жалобе \""+complains[i]+"\" завершен без ошибок"
			break
		}
		answer=sendAnswerParsedResponse.payload.data.question.answerVariants.answer[0]
		testRunner.testCase.setPropertyValue("answer", answer)
	}
	if(hasError){
		log.info "Найдена ошибка"
		break
	}
	
}
</script></con:config></con:testStep><con:testStep type="restrequest" name="getDialog" id="4c2cb45d-d5ce-4021-8d29-f706557b1428" disabled="true"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/getDialog" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getDialog" id="ae69905f-04da-48e2-9e46-abab2f7466e4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "complaints": "${#TestCase#complaints}",
  "hash": "${#TestCase#hash}"
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/getDialog</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="164f8aca-f909-4c56-a92d-ba86df9da6f3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="sendAnswer" id="39c118f3-61c3-44df-b460-d987a0b5f8a5" disabled="true"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/chatBot/sendAnswer" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="sendAnswer" id="9c96ad2a-1c72-4457-8530-09f64c2771ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
	"dialogUuid": "${#TestCase#dialogUuid}",
	"answer": ["${#TestCase#answer}"]
}
</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/chatBot/sendAnswer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c4dcdbf-6db9-4dec-a399-f5496b465267" name="Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="38a770e0-1815-41fc-871e-de254e10873d" name="Содержит dialogUuid"><con:configuration><token>dialogUuid</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="463e9f76-ff18-4ac3-b08d-71890f6fe093" name="Содержит question"><con:configuration><token>question</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4bb4d2ee-d2c5-4d7a-b6ec-1a873b6ca0a1" name="Содержит answerVariants"><con:configuration><token>answerVariants</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="895134d6-eb22-4639-a4f6-e8e0ae484abf" name="Содержит answer"><con:configuration><token>answer</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="33051dbd-6183-4516-b26b-fdbbcdbfe7bb" name="Содержит text"><con:configuration><token>text</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="72a60674-7bf6-4773-b97c-96c554bb433d" name="Содержит type"><con:configuration><token>type</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит complaintsFinished" disabled="true"><con:configuration><token>complaintsFinished</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит emergency"><con:configuration><token>emergency</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит answerConditions"><con:configuration><token>answerConditions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bad4f34a-9269-4f5c-b904-2164849ed68f" name="Не сродержит maskFormat"><con:configuration><token>maskFormat</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>complaints</con:name><con:value>газы</con:value></con:property><con:property><con:name>dialogUuid</con:name><con:value>f4c5f2ceec4145e698bce4fa7ac4d14a</con:value></con:property><con:property><con:name>hash</con:name><con:value>guyruri</con:value></con:property><con:property><con:name>answer</con:name><con:value>Пропустить</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>emiasInfoEndpoint</con:name><con:value>http://application.emiasinfo-services.test.emias.mos.ru</con:value></con:property><con:property><con:name>emiasInfoDbConnection</con:name><con:value>10.2.172.41:5432/emiasinfo_application</con:value></con:property><con:property><con:name>emiasInfoDbLogin</con:name><con:value>emiasinfo_application</con:value></con:property><con:property><con:name>emiasInfoDbPassword</con:name><con:value>emiasinfo_application</con:value></con:property><con:property><con:name>emiasInfoFullDbConnection</con:name><con:value>jdbc:postgresql://10.2.172.41:5432/emiasinfo_application?user=emiasinfo_application&amp;password=emiasinfo_application</con:value></con:property><con:property><con:name>emiasInfoDBDriver</con:name><con:value>org.postgresql.Driver</con:value></con:property><con:property><con:name>chatBotEndPoint</con:name><con:value>http://esbcamelvv.test.emias.mos.ru/proxy/chatbot/interviewService/v1S/ProxyService</con:value></con:property><con:property><con:name>inquiryPurposeOrchestrationEndpoint</con:name><con:value>http://esbcamel.test.emias.mos.ru/proxy/inquirypurpose/orchestration/v1S/ProxyService</con:value></con:property><con:property><con:name>inquiryPurposeOrchestrationDbConnection</con:name><con:value>176.214.77.53:5432/cop1</con:value></con:property><con:property><con:name>inquiryPurposeOrchestrationDbLogin</con:name><con:value>cop1</con:value></con:property><con:property><con:name>inquiryPurposeOrchestrationDbPassword</con:name><con:value>cop1</con:value></con:property><con:property><con:name>inquiryPurposeOrchestrationFullDbConnection</con:name><con:value>jdbc:postgresql://10.2.172.245:5432/cop1?user=cop1&amp;password=cop1</con:value></con:property><con:property><con:name>inquiryPurposeOrchestrationDbDriver</con:name><con:value>org.postgresql.Driver</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>