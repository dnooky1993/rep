{
	"info": {
		"_postman_id": "93bb8214-03f4-4422-a9c5-89f8cba0fc68",
		"name": "ЕМИАС.ИНФО Сервис загрузки данных кампании по отображению баннеров (banners)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "31063782"
	},
	"item": [
		{
			"name": "POST banners/upload",
			"item": [
				{
					"name": "408291_АС1. BANNER_NOT_FOUND",
					"item": [
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"error.code = BANNER_NOT_FOUND\", function () {\r",
											"    pm.expect(jsonData.error.code).to.eql(\"BANNER_NOT_FOUND\");\r",
											"});\r",
											"pm.test(\"error.description = Баннер не найден\", function () {\r",
											"    pm.expect(jsonData.error.description).to.eql(\"Баннер не найден\");\r",
											"});\r",
											"pm.test(\"error.type = BUSINESS\", function () {\r",
											"    pm.expect(jsonData.error.type).to.eql(\"BUSINESS\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": []
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{$randomInt}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{$randomInt}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408222_ОС. upload_status = NULL",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408222\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408222\",\r\n    \"body\": \"Body Test 408222\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408222.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.eql(408222);\r",
											"});\r",
											"pm.test(\"Провека birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.eql(\"1922-08-04\");\r",
											"});\r",
											"pm.test(\"Провека oms_number\", function () {\r",
											"    pm.expect(jsonData[0].oms_number).to.eql(\"408222\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408257_ОС. upload_status = START",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408257\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408257\",\r\n    \"body\": \"Body Test 408257\",\r\n    \"closable\": false,\r\n    \"authentication\": false,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUnderReferral\",\r\n    \"userUpload\": false\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "Изменить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Проверка UPDATE_COUNT\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"update f_banner_campaign set upload_status = 'START' where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408257.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.eql(408257);\r",
											"});\r",
											"pm.test(\"Провека birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.eql(\"1925-08-04\");\r",
											"});\r",
											"pm.test(\"Провека oms_number\", function () {\r",
											"    pm.expect(jsonData[0].oms_number).to.eql(\"408257\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408264_ОС. upload_status = END",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408264\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408264\",\r\n    \"body\": \"Body Test 408264\",\r\n    \"closable\": false,\r\n    \"authentication\": false,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUnderReferral\",\r\n    \"userUpload\": false\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "Изменить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Проверка UPDATE_COUNT\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"update f_banner_campaign set upload_status = 'END' where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408264.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.eql(408264);\r",
											"});\r",
											"pm.test(\"Провека birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.eql(\"1926-08-04\");\r",
											"});\r",
											"pm.test(\"Провека oms_number\", function () {\r",
											"    pm.expect(jsonData[0].oms_number).to.eql(\"408264\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408272_ОС. upload_status = UPLOAD",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408272\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408272\",\r\n    \"body\": \"Body Test 408272\",\r\n    \"closable\": false,\r\n    \"authentication\": false,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUnderReferral\",\r\n    \"userUpload\": false\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "Изменить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Проверка UPDATE_COUNT\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"update f_banner_campaign set upload_status = 'UPLOAD' where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408272.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.eql(408272);\r",
											"});\r",
											"pm.test(\"Провека birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.eql(\"1927-08-04\");\r",
											"});\r",
											"pm.test(\"Провека oms_number\", function () {\r",
											"    pm.expect(jsonData[0].oms_number).to.eql(\"408272\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408644_ОС. передана дата рождения в формате DD.MM.YYYY",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408644\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408644\",\r\n    \"body\": \"Body Test 408644\",\r\n    \"closable\": false,\r\n    \"authentication\": false,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUnderReferral\",\r\n    \"userUpload\": false\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408644.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.eql(408644);\r",
											"});\r",
											"pm.test(\"Провека birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.eql(\"1964-08-04\");\r",
											"});\r",
											"pm.test(\"Провека oms_number\", function () {\r",
											"    pm.expect(jsonData[0].oms_number).to.eql(\"408644\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408645_ОС. передана дата рождения в формате DD/MM/YYYY",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408645\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408645\",\r\n    \"body\": \"Body Test 408645\",\r\n    \"closable\": false,\r\n    \"authentication\": false,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeAboveForYou\",\r\n    \"userUpload\": false\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408645.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.eql(408645);\r",
											"});\r",
											"pm.test(\"Провека birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.eql(\"1965-08-04\");\r",
											"});\r",
											"pm.test(\"Провека oms_number\", function () {\r",
											"    pm.expect(jsonData[0].oms_number).to.eql(\"408645\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408646_ОС. передана дата рождения в формате DD-MM-YYYY",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408646\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408646\",\r\n    \"body\": \"Body Test 408646\",\r\n    \"closable\": false,\r\n    \"authentication\": false,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeAboveForYou\",\r\n    \"userUpload\": false\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408646.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.eql(408646);\r",
											"});\r",
											"pm.test(\"Провека birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.eql(\"1966-08-04\");\r",
											"});\r",
											"pm.test(\"Провека oms_number\", function () {\r",
											"    pm.expect(jsonData[0].oms_number).to.eql(\"408646\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "409375_ОС. передана дата рождения в невалидном формате, emiasId и Pol_number",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_409375\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 409375\",\r\n    \"body\": \"Body Test 409375\",\r\n    \"closable\": false,\r\n    \"authentication\": false,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeAboveForYou\",\r\n    \"userUpload\": false\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_409375.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.eql(409375);\r",
											"});\r",
											"pm.test(\"Провека birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.be.null;\r",
											"});\r",
											"pm.test(\"Провека oms_number\", function () {\r",
											"    pm.expect(jsonData[0].oms_number).to.eql(\"409375\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "409376_ОС. передана дата рождения в невалидном формате и Pol_number",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_409376\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 409376\",\r\n    \"body\": \"Body Test 409376\",\r\n    \"closable\": false,\r\n    \"authentication\": false,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeAboveForYou\",\r\n    \"userUpload\": false\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_409376.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека отсутствия записи в f_banner_raw\", function () {\r",
											"    pm.expect(jsonData).to.be.empty;\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408647_ОС. передан только emiasid",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408647\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408647\",\r\n    \"body\": \"Body Test 408647\",\r\n    \"closable\": false,\r\n    \"authentication\": false,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeAboveForYou\",\r\n    \"userUpload\": false\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408647.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.eql(408647);\r",
											"});\r",
											"pm.test(\"Провека birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.be.null;\r",
											"});\r",
											"pm.test(\"Провека oms_number\", function () {\r",
											"    pm.expect(jsonData[0].oms_number).to.be.null;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408648_ОС. передан Pol_number и дата рождения",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408648\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408648\",\r\n    \"body\": \"Body Test 408648\",\r\n    \"closable\": false,\r\n    \"authentication\": false,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeAboveForYou\",\r\n    \"userUpload\": false\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408648.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.be.null;\r",
											"});\r",
											"pm.test(\"Провека birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.eql('1968-08-04');\r",
											"});\r",
											"pm.test(\"Провека oms_number\", function () {\r",
											"    pm.expect(jsonData[0].oms_number).to.eql('408648');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408706_ОС. передан только Pol_number",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408706\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408706\",\r\n    \"body\": \"Body Test 408706\",\r\n    \"closable\": false,\r\n    \"authentication\": false,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeAboveForYou\",\r\n    \"userUpload\": false\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408706.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека отсутствия записи\", function () {\r",
											"    pm.expect(jsonData).to.be.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408710_ОС. передана только Дата рождения",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408710\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408710\",\r\n    \"body\": \"Body Test 408710\",\r\n    \"closable\": false,\r\n    \"authentication\": false,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeAboveForYou\",\r\n    \"userUpload\": false\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408710.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Провека отсутствия записи\", function () {\r",
											"    pm.expect(jsonData).to.be.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "POST banners/start",
			"item": [
				{
					"name": "408635_АС1. BANNER_NOT_FOUND",
					"item": [
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"error.code = BANNER_NOT_FOUND\", function () {\r",
											"    pm.expect(jsonData.error.code).to.eql(\"BANNER_NOT_FOUND\");\r",
											"});\r",
											"pm.test(\"error.description = Баннер не найден\", function () {\r",
											"    pm.expect(jsonData.error.description).to.eql(\"Баннер не найден\");\r",
											"});\r",
											"pm.test(\"error.type = BUSINESS\", function () {\r",
											"    pm.expect(jsonData.error.type).to.eql(\"BUSINESS\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{$randomInt}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{$randomInt}}"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408609_ОС. пользователь существует в f_user, отсутствует в f_banner_user",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408609\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408609\",\r\n    \"body\": \"Body Test 408609\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "Создать запись в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись создана успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"insert into f_user (id, patient_id, policy_number, birth_date) values (nextval('f_user_new_sequence'), 408609, '408609', '1969-08-04')\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Найти userId в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//Записать userId\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Пользователь создан в БД\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.eql(408609);\r",
											"});\r",
											"\r",
											"var userId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"userId\", userId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_user where patient_id = 408609\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "/C:/BACK-test/Баннеры/upload/banners_upload/Загрузка баннера_408609.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"var userId = pm.collectionVariables.get(\"userId\");\r",
											"\r",
											"pm.test(\"Проверка user_id\", function () {\r",
											"    pm.expect(jsonData[0].user_id).to.eql(userId);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_user where id = {{userId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408627_ОС. пользователь отсутствует в f_user и в f_banner_user",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408627\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408627\",\r\n    \"body\": \"Body Test 408627\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408627.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Записать userId\r",
											"var jsonData = pm.response.json();\r",
											"var userId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"userId\", userId);\r",
											"\r",
											"pm.test(\"Проверка patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.eql(408627);\r",
											"});\r",
											"pm.test(\"Проверка birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.eql('1967-08-04');\r",
											"});\r",
											"pm.test(\"Проверка policy_number\", function () {\r",
											"    pm.expect(jsonData[0].policy_number).to.eql('408627');\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_user where patient_id = 408627\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"var userId = pm.collectionVariables.get(\"userId\");\r",
											"\r",
											"pm.test(\"Проверка user_id\", function () {\r",
											"    pm.expect(jsonData[0].user_id).to.eql(userId);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_user where id = {{userId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408634_ОС. пользователь существует в f_user и в f_banner_user",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408634\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408634\",\r\n    \"body\": \"Body Test 408634\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "Найти campaign_banner_id в f_campaign_banner",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Вернулся непустой ответ\", function () {\r",
											"    pm.expect(jsonData[0]).to.be.not.empty;\r",
											"});\r",
											"\r",
											"// Записать campaignBannerId\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Создать запись в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись создана успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"insert into f_user (id, patient_id, policy_number, birth_date) values (nextval('f_user_new_sequence'), 408634, '408634', '1963-08-04')\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Найти user_id в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Вернулся непустой ответ\", function () {\r",
											"    pm.expect(jsonData[0]).to.be.not.empty;\r",
											"});\r",
											"\r",
											"// Записать userId\r",
											"var userId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"userId\", userId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_user where patient_id = 408634\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Создать запись в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись создана успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"insert into f_banner_user (id, campaign_banner_id, user_id) values (nextval('f_banner_user_sequence'), {{campaignBannerId}}, {{userId}})\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408634.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_user where id = {{userId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408652_ОС. в f_banner_raw у пользователя указан только patient_id",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408652\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408652\",\r\n    \"body\": \"Body Test 408652\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "Создать запись в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись создана успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"insert into f_banner_raw (id, banner_code, patient_id) values (nextval('f_banner_raw_sequence'), '{{bannerCode}}', 408652)\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка создания записи в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Вернулся непустой ответ\", function () {\r",
											"    pm.expect(jsonData[0]).to.be.not.empty;\r",
											"});\r",
											"\r",
											"pm.test(\"Проверка patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.eql(408652);\r",
											"});\r",
											"\r",
											"pm.test(\"Проверка policy_number\", function () {\r",
											"    pm.expect(jsonData[0].policy_number).to.be.null;\r",
											"});\r",
											"\r",
											"pm.test(\"Проверка birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.be.null;\r",
											"});\r",
											"\r",
											"// Записать userId\r",
											"var userId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"userId\", userId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_user where patient_id = 408652\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Вернулся непустой ответ\", function () {\r",
											"    pm.expect(jsonData[0]).to.be.not.empty;\r",
											"});\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"// Записать campaignBannerId\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка создания записи в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Вернулся непустой ответ\", function () {\r",
											"    pm.expect(jsonData[0]).to.be.not.empty;\r",
											"});\r",
											"\r",
											"pm.test(\"Проверка user_id\", function () {\r",
											"    pm.expect(jsonData[0].user_id).to.eql(pm.collectionVariables.get('userId'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_user where id = {{userId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408653_ОС. в f_banner_raw у пользователя указаны oms_number и birth_date",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408653\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408653\",\r\n    \"body\": \"Body Test 408653\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "Создать запись в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись создана успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"insert into f_banner_raw (id, banner_code, oms_number, birth_date) values (nextval('f_banner_raw_sequence'), '{{bannerCode}}', '408653', '1965-08-04')\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка создания записи в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Вернулся непустой ответ\", function () {\r",
											"    pm.expect(jsonData[0]).to.be.not.empty;\r",
											"});\r",
											"\r",
											"pm.test(\"Проверка policy_number\", function () {\r",
											"    pm.expect(jsonData[0].policy_number).to.eql('408653');\r",
											"});\r",
											"\r",
											"pm.test(\"Проверка patient_id\", function () {\r",
											"    pm.expect(jsonData[0].patient_id).to.be.null;\r",
											"});\r",
											"\r",
											"pm.test(\"Проверка birth_date\", function () {\r",
											"    pm.expect(jsonData[0].birth_date).to.eql('1965-08-04');\r",
											"});\r",
											"\r",
											"// Записать userId\r",
											"var userId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"userId\", userId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_user where policy_number = '408653'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Вернулся непустой ответ\", function () {\r",
											"    pm.expect(jsonData[0]).to.be.not.empty;\r",
											"});\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"// Записать campaignBannerId\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка создания записи в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Вернулся непустой ответ\", function () {\r",
											"    pm.expect(jsonData[0]).to.be.not.empty;\r",
											"});\r",
											"\r",
											"pm.test(\"Проверка user_id\", function () {\r",
											"    pm.expect(jsonData[0].user_id).to.eql(pm.collectionVariables.get('userId'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_user where id = {{userId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "409157_ОС. отсутствуют записи в f_banner_raw",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_409157\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 409157\",\r\n    \"body\": \"Body Test 409157\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"pm.test(\"Вернулся непустой ответ\", function () {\r",
											"    pm.expect(jsonData[0]).to.be.not.empty;\r",
											"});\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"// Записать campaignBannerId\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408689_ОС. Проверка промежуточного статуса f_banner_campaign.upload_status = \"START\"",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408689\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408689\",\r\n    \"body\": \"Body Test 408689\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408689.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записи в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);\r",
											"\r",
											"pm.test(\"upload_status = START\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"START\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Записать userId\r",
											"var jsonData = pm.response.json();\r",
											"var userId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"userId\", userId);\r",
											"\r",
											"var userCount = jsonData.length\r",
											"\r",
											"for(i=0; i<userCount; i++){\r",
											"    var patientId = jsonData[i].patient_id\r",
											"    pm.test(\"Для пользователя c patientId = \" + patientId + \" создана запись в f_banner_raw\", function () {\r",
											"        pm.expect(jsonData[i].patient_id).to.eql(408689+i);\r",
											"    });\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка записей в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"var userCount = jsonData.length\r",
											"pm.test(\"Все записи созданы\", function () {\r",
											"    pm.expect(userCount).to.eql(30);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Записи успешно удалены\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(30);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Записи успешно удалены\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(30);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_user where policy_number like '408689_%'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "DELETE banners",
			"item": [
				{
					"name": "408311_АС1. BANNER_NOT_FOUND",
					"item": [
						{
							"name": "banners",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"error.code = BANNER_NOT_FOUND\", function () {\r",
											"    pm.expect(jsonData.error.code).to.eql(\"BANNER_NOT_FOUND\");\r",
											"});\r",
											"pm.test(\"error.description = Баннер не найден\", function () {\r",
											"    pm.expect(jsonData.error.description).to.eql(\"Баннер не найден\");\r",
											"});\r",
											"pm.test(\"error.type = BUSINESS\", function () {\r",
											"    pm.expect(jsonData.error.type).to.eql(\"BUSINESS\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{$randomInt}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{$randomInt}}"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408309_АС1. BANNER_NOT_FOUND (кампания существует, но в f_banner_raw нет записей)",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408309\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408309\",\r\n    \"body\": \"Body Test 408309\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "Записать banner_campaign_id из f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408309.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "banners",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"error.code = BANNER_NOT_FOUND\", function () {\r",
											"    pm.expect(jsonData.error.code).to.eql(\"BANNER_NOT_FOUND\");\r",
											"});\r",
											"pm.test(\"error.description = Баннер не найден\", function () {\r",
											"    pm.expect(jsonData.error.description).to.eql(\"Баннер не найден\");\r",
											"});\r",
											"pm.test(\"error.type = BUSINESS\", function () {\r",
											"    pm.expect(jsonData.error.type).to.eql(\"BUSINESS\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка отсутствия записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Все записи удалены\", function () {\r",
											"    pm.expect(jsonData).to.be.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "408308_ОС. в f_banner_raw есть записи",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_408308\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test 408308\",\r\n    \"body\": \"Body Test 408308\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "Записать banner_campaign_id из f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "Загрузка баннера_408308.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "banners",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка удаления записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Все записи удалены\", function () {\r",
											"    pm.expect(jsonData).to.be.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Записи успешно удалены\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(10);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Записи успешно удалены\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(10);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_user where policy_number like '408308_%'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Массовая загрузка (create - upload - start - delete)",
			"item": [
				{
					"name": "1к пользователей",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_EINFOSRV-2437_1k\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test EINFOSRV-2437\",\r\n    \"body\": \"Body Test EINFOSRV-2437\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "1k.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function(){\r",
											"    pm.expect(jsonData.length).to.eql(1000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData.length).to.eql(1000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_user fu join f_banner_user fbu on fu.id = fbu.user_id where fbu.campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData.length).to.eql(1000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign после start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка удаления записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка отсутствия записей\", function(){\r",
											"    pm.expect(jsonData).to.be.empty\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_user и f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1000);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"WITH u_ids AS (DELETE FROM f_banner_user WHERE campaign_banner_id IN (SELECT id FROM f_banner_campaign WHERE banner_code = '{{bannerCode}}') RETURNING user_id) DELETE from f_user u WHERE id IN ((SELECT user_id FROM u_ids))\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "2к пользователей",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_EINFOSRV-2437_2k\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test EINFOSRV-2437\",\r\n    \"body\": \"Body Test EINFOSRV-2437\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "2k.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function(){\r",
											"    pm.expect(jsonData[0].count).to.eql(2000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select count(*) from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(2000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"SELECT COUNT(*) FROM f_user fu join f_banner_user fbu on fu.id = fbu.user_id where fbu.campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(2000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select count(*) from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign после start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка удаления записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка отсутствия записей\", function(){\r",
											"    pm.expect(jsonData).to.be.empty\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_user и f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(2000);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"WITH u_ids AS (DELETE FROM f_banner_user WHERE campaign_banner_id IN (SELECT id FROM f_banner_campaign WHERE banner_code = '{{bannerCode}}') RETURNING user_id) DELETE from f_user u WHERE id IN ((SELECT user_id FROM u_ids))\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "5к пользователей",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_EINFOSRV-2437_5k\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test EINFOSRV-2437\",\r\n    \"body\": \"Body Test EINFOSRV-2437\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "5k.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function(){\r",
											"    pm.expect(jsonData[0].count).to.eql(5000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select count(*) from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(5000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"SELECT COUNT(*) FROM f_user fu join f_banner_user fbu on fu.id = fbu.user_id where fbu.campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(5000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select count(*) from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign после start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка удаления записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка отсутствия записей\", function(){\r",
											"    pm.expect(jsonData).to.be.empty\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_user и f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(5000);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"WITH u_ids AS (DELETE FROM f_banner_user WHERE campaign_banner_id IN (SELECT id FROM f_banner_campaign WHERE banner_code = '{{bannerCode}}') RETURNING user_id) DELETE from f_user u WHERE id IN ((SELECT user_id FROM u_ids))\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "10к пользователей",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_EINFOSRV-2437_10k\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test EINFOSRV-2437\",\r\n    \"body\": \"Body Test EINFOSRV-2437\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "10k.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function(){\r",
											"    pm.expect(jsonData[0].count).to.eql(10000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select count(*) from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(10000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"SELECT COUNT(*) FROM f_user fu join f_banner_user fbu on fu.id = fbu.user_id where fbu.campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(10000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select count(*) from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign после start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка удаления записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка отсутствия записей\", function(){\r",
											"    pm.expect(jsonData).to.be.empty\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_user и f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(10000);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"WITH u_ids AS (DELETE FROM f_banner_user WHERE campaign_banner_id IN (SELECT id FROM f_banner_campaign WHERE banner_code = '{{bannerCode}}') RETURNING user_id) DELETE from f_user u WHERE id IN ((SELECT user_id FROM u_ids))\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "25к пользователей",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_EINFOSRV-2437_25k\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test EINFOSRV-2437\",\r\n    \"body\": \"Body Test EINFOSRV-2437\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "25k.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function(){\r",
											"    pm.expect(jsonData[0].count).to.eql(25000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select count(*) from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(25000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"SELECT COUNT(*) FROM f_user fu join f_banner_user fbu on fu.id = fbu.user_id where fbu.campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(25000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select count(*) from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign после start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка удаления записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка отсутствия записей\", function(){\r",
											"    pm.expect(jsonData).to.be.empty\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_user и f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(25000);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"WITH u_ids AS (DELETE FROM f_banner_user WHERE campaign_banner_id IN (SELECT id FROM f_banner_campaign WHERE banner_code = '{{bannerCode}}') RETURNING user_id) DELETE from f_user u WHERE id IN ((SELECT user_id FROM u_ids))\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "50к пользователей",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_EINFOSRV-2437_50k\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test EINFOSRV-2437\",\r\n    \"body\": \"Body Test EINFOSRV-2437\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "50k.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function(){\r",
											"    pm.expect(jsonData[0].count).to.eql(50000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select count(*) from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(50000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"SELECT COUNT(*) FROM f_user fu join f_banner_user fbu on fu.id = fbu.user_id where fbu.campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(50000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select count(*) from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign после start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка удаления записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка отсутствия записей\", function(){\r",
											"    pm.expect(jsonData).to.be.empty\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_user и f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(50000);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"WITH u_ids AS (DELETE FROM f_banner_user WHERE campaign_banner_id IN (SELECT id FROM f_banner_campaign WHERE banner_code = '{{bannerCode}}') RETURNING user_id) DELETE from f_user u WHERE id IN ((SELECT user_id FROM u_ids))\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "75к пользователей",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_EINFOSRV-2437_75k\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test EINFOSRV-2437\",\r\n    \"body\": \"Body Test EINFOSRV-2437\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "75k.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function(){\r",
											"    pm.expect(jsonData[0].count).to.eql(75000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select count(*) from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(75000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"SELECT COUNT(*) FROM f_user fu join f_banner_user fbu on fu.id = fbu.user_id where fbu.campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(75000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select count(*) from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign после start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка удаления записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка отсутствия записей\", function(){\r",
											"    pm.expect(jsonData).to.be.empty\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_user и f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(75000);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"WITH u_ids AS (DELETE FROM f_banner_user WHERE campaign_banner_id IN (SELECT id FROM f_banner_campaign WHERE banner_code = '{{bannerCode}}') RETURNING user_id) DELETE from f_user u WHERE id IN ((SELECT user_id FROM u_ids))\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "100к пользователей",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_EINFOSRV-2437_100k\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test EINFOSRV-2437\",\r\n    \"body\": \"Body Test EINFOSRV-2437\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "100k.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function(){\r",
											"    pm.expect(jsonData[0].count).to.eql(100000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select count(*) from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(100000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"SELECT COUNT(*) FROM f_user fu join f_banner_user fbu on fu.id = fbu.user_id where fbu.campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(100000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select count(*) from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign после start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка удаления записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка отсутствия записей\", function(){\r",
											"    pm.expect(jsonData).to.be.empty\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_user и f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(100000);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"WITH u_ids AS (DELETE FROM f_banner_user WHERE campaign_banner_id IN (SELECT id FROM f_banner_campaign WHERE banner_code = '{{bannerCode}}') RETURNING user_id) DELETE from f_user u WHERE id IN ((SELECT user_id FROM u_ids))\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "250к пользователей",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_EINFOSRV-2437_250k\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test EINFOSRV-2437\",\r\n    \"body\": \"Body Test EINFOSRV-2437\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "250k.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function(){\r",
											"    pm.expect(jsonData[0].count).to.eql(250000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select count(*) from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(250000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"SELECT COUNT(*) FROM f_user fu join f_banner_user fbu on fu.id = fbu.user_id where fbu.campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(250000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select count(*) from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign после start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка удаления записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка отсутствия записей\", function(){\r",
											"    pm.expect(jsonData).to.be.empty\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_user и f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(250000);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"WITH u_ids AS (DELETE FROM f_banner_user WHERE campaign_banner_id IN (SELECT id FROM f_banner_campaign WHERE banner_code = '{{bannerCode}}') RETURNING user_id) DELETE from f_user u WHERE id IN ((SELECT user_id FROM u_ids))\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "500к пользователей",
					"item": [
						{
							"name": "banners/create",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.collectionVariables.set(\"bannerCode\", \"Test_EINFOSRV-2437_500k\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"bannerObject\": {\r\n    \"bannerCode\": \"{{bannerCode}}\",\r\n    \"title\": \"Title Test EINFOSRV-2437\",\r\n    \"body\": \"Body Test EINFOSRV-2437\",\r\n    \"closable\": true,\r\n    \"authentication\": true,\r\n    \"startDate\": \"2024-04-08T11:35:09.605Z\",\r\n    \"endDate\": \"2024-12-10T11:35:09.605Z\",\r\n    \"location\": \"homeUp\",\r\n    \"userUpload\": true\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoEndpoint}}/api/v1/banners/create",
									"host": [
										"{{emiasInfoEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/upload",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "multipart/form-data",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "users",
											"type": "file",
											"src": "500k.xlsx"
										}
									]
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/upload?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"upload"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										},
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function(){\r",
											"    pm.expect(jsonData[0].count).to.eql(500000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select count(*) from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = UPLOAD\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"UPLOAD\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "banners/start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners/start?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners",
										"start"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(500000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"SELECT COUNT(*) FROM f_user fu join f_banner_user fbu on fu.id = fbu.user_id where fbu.campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка количества записей в f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка количества созданных записей\", function () {\r",
											"    pm.expect(jsonData[0].count).to.eql(500000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select count(*) from f_banner_user where campaign_banner_id = {{campaignBannerId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка upload_status в f_banner_campaign после start",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code = 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"upload_status = END\", function () {\r",
											"    pm.expect(jsonData[0].upload_status).to.eql(\"END\");\r",
											"});\r",
											"\r",
											"//Записать id кампании баннера\r",
											"var campaignBannerId = jsonData[0].id\r",
											"pm.collectionVariables.set(\"campaignBannerId\", campaignBannerId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"select * from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить баннер",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{emiasInfoNotificationsEndpoint}}/api/v1/banners?bannerCode={{bannerCode}}",
									"host": [
										"{{emiasInfoNotificationsEndpoint}}"
									],
									"path": [
										"api",
										"v1",
										"banners"
									],
									"query": [
										{
											"key": "bannerCode",
											"value": "{{bannerCode}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Проверка удаления записей в f_banner_raw",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Проверка отсутствия записей\", function(){\r",
											"    pm.expect(jsonData).to.be.empty\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbNotification}}\",\r\n    \"sql\": \"select * from f_banner_raw where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить записи в f_user и f_banner_user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(500000);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"WITH u_ids AS (DELETE FROM f_banner_user WHERE campaign_banner_id IN (SELECT id FROM f_banner_campaign WHERE banner_code = '{{bannerCode}}') RETURNING user_id) DELETE from f_user u WHERE id IN ((SELECT user_id FROM u_ids))\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						},
						{
							"name": "Удалить запись в f_banner_campaign",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"var jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Запись удалена успешно\", function () {\r",
											"    pm.expect(jsonData[0].UPDATE_COUNT).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"storageName\": \"{{dbApplication}}\",\r\n    \"sql\": \"delete from f_banner_campaign where banner_code = '{{bannerCode}}'\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{dbUrl}}/sql/exec",
									"host": [
										"{{dbUrl}}"
									],
									"path": [
										"sql",
										"exec"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "dbUrl",
			"value": "http://172.16.101.120:8881",
			"type": "string",
			"disabled": true
		},
		{
			"key": "dbNotification",
			"value": "emiasinfo_notification",
			"type": "string",
			"disabled": true
		},
		{
			"key": "dbApplication",
			"value": "emiasinfo_application",
			"type": "string",
			"disabled": true
		},
		{
			"key": "emiasInfoNotificationsEndpoint",
			"value": "http://notification.emiasinfo-services.test.emias.mos.ru",
			"type": "string",
			"disabled": true
		},
		{
			"key": "emiasInfoEndpoint",
			"value": "http://application.emiasinfo-services.test.emias.mos.ru",
			"type": "string",
			"disabled": true
		},
		{
			"key": "bannerCode",
			"value": "",
			"type": "string"
		},
		{
			"key": "campaignBannerId",
			"value": "",
			"type": "string"
		},
		{
			"key": "userId",
			"value": "",
			"type": "string"
		},
		{
			"key": "bannerId",
			"value": ""
		}
	]
}