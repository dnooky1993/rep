<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="e8aa94f7-7b91-4420-8d7d-b8ef454ca115" activeEnvironment="Default" name="ЕМИАС.ИНФО Сервис &quot;Главная страница приложения&quot;" resourceRoot="" soapui-version="5.7.2" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="35aeb502-f866-4109-b191-53ef04ee40df" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://lkservice.test.emias.ru" type="rest" basePath="" definitionUrl="C:\Users\dkuznetsov\Desktop\фЫАЫВА\_1.wadl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="file:/C:/Users/dkuznetsov/Desktop/фЫАЫВА/_1.wadl"><con:part><con:url>file:/C:/Users/dkuznetsov/Desktop/фЫАЫВА/_1.wadl</con:url><con:content><![CDATA[<application xmlns="http://wadl.dev.java.net/2009/02">
  <doc xml:lang="en" title="http://emiasinfo1.emias.solit-clouds.ru"/>
  <resources base="http://emiasinfo1.emias.solit-clouds.ru">
    <resource path="api/v2/mainPage/popularSpecialities" id="PopularSpecialities">
      <doc xml:lang="en" title="PopularSpecialities"/>
      <method name="POST" id="PopularSpecialities 1">
        <doc xml:lang="en" title="PopularSpecialities 1"/>
        <request>
          <representation mediaType="application/json"/>
        </request>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
        <response status="">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="api/v2/mainPage/getCountForServicesForYou" id="getCountForServicesForYou">
      <doc xml:lang="en" title="getCountForServicesForYou"/>
      <param name="ehrId" type="xs:string" required="false" default="" style="query" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <param name="omsNumber" type="xs:string" required="false" default="" style="query" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <param name="isCovidQR" type="xs:string" required="false" default="" style="query" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <method name="GET" id="Method 1">
        <doc xml:lang="en" title="Method 1"/>
        <request/>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="0">
          <representation mediaType=""/>
          <representation mediaType=""/>
        </response>
        <response status="400 404 500">
          <representation mediaType="application/json"/>
        </response>
        <response status="503">
          <representation mediaType="text/html"/>
        </response>
      </method>
    </resource>
    <resource path="api/v2/bzhd/acquireRemoteId" id="acquireRemoteId">
      <doc xml:lang="en" title="acquireRemoteId"/>
      <param name="oms" type="xs:string" required="false" default="" style="query" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <param name="birthDate" type="xs:string" required="false" default="" style="query" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <method name="GET" id="Method 1">
        <doc xml:lang="en" title="Method 1"/>
        <request/>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
  </resources>
</application>]]></con:content><con:type>http://wadl.dev.java.net/2009/02</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://lkservice-apigateway.test.emias.mos.ru</con:endpoint></con:endpoints><con:resource name="Plan" path="/api/1/dispensary-observation/plan" id="f3b573ff-27fd-42ec-ae66-98559fc30f96"><con:settings/><con:parameters><con:parameter><con:name>ehrId</con:name><con:value/><con:style>QUERY</con:style><con:default/></con:parameter><con:parameter><con:name>X-Access-JWT</con:name><con:value/><con:style>HEADER</con:style><con:default/></con:parameter></con:parameters><con:method name="Plan 1" id="aef672dd-6d8e-45fc-a6ba-94e111be846d" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="eb44b9b2-54e4-423f-b88f-a757faf2ec61" mediaType="application/json"><con:settings/><con:endpoint>http://lkservice-apigateway.test.emias.mos.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="X-Access-JWT" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>X-Access-JWT</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="onco" path="api/1/onco" id="5eed33e8-68c4-4d1c-bf17-f3211eec7b80"><con:settings/><con:parameters><con:parameter><con:name>ehrId</con:name><con:value/><con:style>QUERY</con:style><con:default/></con:parameter></con:parameters><con:method name="Method 1" id="1430dff9-6efc-413d-b8f0-dbaafd966615" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>404 406</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="cf2a9282-7f28-4dd4-acd3-d5596e111e0d" mediaType="application/json"><con:settings/><con:endpoint>http://lkservice-apigateway.test.emias.mos.ru</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="profile" path="api/2/profile" id="75e4ec17-ccfe-448e-a2ce-831ad3f31b3d"><con:settings/><con:parameters><con:parameter><con:name>ehrId</con:name><con:value/><con:style>QUERY</con:style><con:default/></con:parameter></con:parameters><con:method name="Method 1" id="b4c50252-68da-4c9f-bf44-01a88aa64825" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="a1d075f9-b867-4cc9-9ed2-3bc79abf8218" mediaType="application/json"><con:settings/><con:endpoint>http://lkservice-apigateway.test.emias.mos.ru</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="covid-certificates" path="api/1/documents/covid-certificates" id="52aeb44d-d666-4209-85f9-8588a3129112"><con:settings/><con:parameters><con:parameter><con:name>ehrId</con:name><con:value/><con:style>QUERY</con:style><con:default/></con:parameter></con:parameters><con:method name="Method 1" id="31962042-d161-477f-aba7-1059377fa7bb" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>400 401 406 520</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="877da5f2-2842-4f99-9e5f-c5e814101650" mediaType="application/json"><con:settings/><con:endpoint>http://lkservice-apigateway.test.emias.mos.ru</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="7b1e141b-f4b2-4b2d-b1b2-24c86da78b9c" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://emiasinfo1.emias.solit-clouds.ru" type="rest" basePath="" definitionUrl="C:\Users\dkuznetsov\Desktop\фЫАЫВА\_1.wadl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint></con:endpoints><con:resource name="getCountForServicesForYou" path="/api/v4/mainPage/getCountForServicesForYou" id="7863c68e-cc27-4b0d-8d89-e1d7a7891bd1"><con:settings/><con:parameters><con:parameter><con:name>ehrId</con:name><con:value/><con:style>QUERY</con:style><con:default/></con:parameter><con:parameter><con:name>omsNumber</con:name><con:value/><con:style>QUERY</con:style><con:default/></con:parameter><con:parameter><con:name>isCovidQR</con:name><con:value/><con:style>QUERY</con:style><con:default/></con:parameter><con:parameter><con:name>X-Access-JWT</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>EI-Token</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>Mock-hospitalization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>Mock-llo</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>Mock-pdn</con:name><con:value/><con:style>HEADER</con:style><con:default/></con:parameter><con:parameter><con:name>Mock-lk</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="9ae9a819-6599-47dc-a884-24b9b7483dc2" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/json</con:mediaType><con:status>400 404 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="c04b5b42-2520-4a01-9378-ca838f411484" mediaType="application/json"><con:settings/><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Mock-pdn" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="saCount" path="/api/v5/mainPage/saCount" id="af765dcd-b3ef-4898-8ce8-f4f2e60c02d3"><con:settings/><con:parameters><con:parameter required="true"><con:name>omsNumber</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter required="true"><con:name>birthDate</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>EI-token</con:name><con:value/><con:style>HEADER</con:style><con:default/></con:parameter><con:parameter><con:name>X-Access-JWT</con:name><con:value/><con:style>HEADER</con:style><con:default/></con:parameter><con:parameter><con:name>ehrId</con:name><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>Mock-lk</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>Mock-saOrchestrator</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="586eaa01-b9ce-4002-8774-3104d3f90faa" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings/><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="EI-token" value=""/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="getCountForServicesForYou" path="/api/v1/mainPage/getCountForServicesForYou" id="88037f64-822e-4f45-a225-9114315e6363"><con:settings/><con:parameters><con:parameter><con:name>X-Access-JWT</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>EI-Token</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>Mock-lk</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>Mock-pdn</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>Mock-llo</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>Mock-hospitalization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="606a7bf6-61e3-45e4-8c02-2c09321fe367" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint><con:request>{
  "ehrId": "string",
  "isCovidQR": true
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="saCount v1" path="/api/v1/mainPage/saCount" id="55f70265-9058-4abc-a709-3ff2528b7662"><con:settings/><con:parameters><con:parameter><con:name>X-Access-JWT</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>EI-Token</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="1f3b6e4c-4447-43a8-85b6-e4be2f37bd4a" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="saCount v2" path="/api/v2/mainPage/saCount" id="55f70265-9058-4abc-a709-3ff2528b7662"><con:settings/><con:parameters><con:parameter><con:name>X-Access-JWT</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>EI-Token</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="1f3b6e4c-4447-43a8-85b6-e4be2f37bd4a" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:WsdlInterface" id="f66729b6-1f80-4711-b8b5-98995796ce96" wsaVersion="NONE" name="PrescriptionInfoServiceV4SoapBinding" type="wsdl" bindingName="{http://emias2.gov.ru/business/llo/v4}PrescriptionInfoServiceV4SoapBinding" soapVersion="1_1" anonymous="optional" definition="http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService?wsdl"><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="PrescriptionInfoServiceV4" targetNamespace="http://emias2.gov.ru/business/llo/v4" xmlns:ns1="http://emias2.gov.ru/business/llo/v4/types" xmlns:ns2="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://emias2.gov.ru/business/llo/v4" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
    <xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias2.gov.ru/business/llo/v4/types" version="1.0" xmlns:tns="http://emias2.gov.ru/business/llo/v4/types" xmlns:xs="http://www.w3.org/2001/XMLSchema">
      <xs:complexType name="fpiChangeMilkShopRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element name="milkShopId" type="xs:long"/>
          <xs:element maxOccurs="unbounded" name="prescriptionNumber" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiChangeMilkShopResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="extendedResponse">
        <xs:complexContent>
          <xs:extension base="tns:detailedResponse">
            <xs:sequence>
              <xs:element minOccurs="0" name="resultUserInfo" type="xs:string"/>
            </xs:sequence>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="detailedResponse">
        <xs:complexContent>
          <xs:extension base="tns:generalResponse">
            <xs:sequence>
              <xs:element minOccurs="0" name="resultDetails" type="xs:string"/>
            </xs:sequence>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="generalResponse">
        <xs:sequence>
          <xs:element name="resultCode" type="xs:int"/>
          <xs:element minOccurs="0" name="resultDescription" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piCompleteOrderRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element name="QRCode" type="xs:string"/>
          <xs:element minOccurs="0" name="userIdent" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piCompleteOrderResponseType">
        <xs:sequence>
          <xs:element name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piDrugAnnotationRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="getFullText" type="xs:boolean"/>
          <xs:element minOccurs="0" name="getINNonly" type="xs:boolean"/>
          <xs:element minOccurs="0" name="getStructureLevel" type="xs:int"/>
          <xs:element minOccurs="0" name="ident" type="xs:string"/>
          <xs:element minOccurs="0" name="prescriptionNumber" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piDrugAnnotationResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="annotation" nillable="true" type="tns:annotationDrugs"/>
          <xs:element minOccurs="0" name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="annotationDrugs">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="chapter" nillable="true" type="tns:chapter"/>
          <xs:element minOccurs="0" name="fullText" type="xs:string"/>
          <xs:element minOccurs="0" name="isActual" type="xs:boolean"/>
          <xs:element minOccurs="0" name="latTitle" type="xs:string"/>
          <xs:element minOccurs="0" name="nameType" type="tns:annotationFeature"/>
          <xs:element minOccurs="0" name="rusTitle" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="chapter">
        <xs:sequence>
          <xs:element minOccurs="0" name="bodyStyle" type="xs:string"/>
          <xs:element minOccurs="0" name="chapterText" type="xs:string"/>
          <xs:element minOccurs="0" name="fullTitle" type="xs:string"/>
          <xs:element minOccurs="0" name="headerLevel" type="xs:int"/>
          <xs:element minOccurs="0" name="idx" type="xs:int"/>
          <xs:element minOccurs="0" name="shortTitle" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiCheckPatientRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element minOccurs="0" name="oms" type="xs:string"/>
          <xs:element minOccurs="0" name="patientID" type="xs:string"/>
          <xs:element minOccurs="0" name="snils" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiCheckPatientResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="hasFoodPrescriptions" type="xs:boolean"/>
          <xs:element minOccurs="0" name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piCheckOrderRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element name="QRCode" type="xs:string"/>
          <xs:element minOccurs="0" name="userIdent" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piCheckOrderResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="drug" nillable="true" type="tns:orderDrugInfo"/>
          <xs:element minOccurs="0" name="externalID" type="xs:string"/>
          <xs:element minOccurs="0" name="orderID" type="xs:long"/>
          <xs:element name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="orderDrugInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="amount" type="xs:long"/>
          <xs:element minOccurs="0" name="drugID" type="xs:string"/>
          <xs:element minOccurs="0" name="numero" type="xs:int"/>
          <xs:element name="qtySec" type="xs:int"/>
          <xs:element minOccurs="0" name="storageCondition" type="xs:string"/>
          <xs:element name="title" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piGetDrugOrdersRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element minOccurs="0" name="oms" type="xs:string"/>
          <xs:element minOccurs="0" name="patientID" type="xs:string"/>
          <xs:element minOccurs="0" name="snils" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piGetDrugOrdersResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="order" type="tns:orderDrugOrder"/>
          <xs:element name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="orderDrugOrder">
        <xs:sequence>
          <xs:element name="agregatorID" type="xs:long"/>
          <xs:element name="agregatorName" type="xs:string"/>
          <xs:element minOccurs="0" name="comment" type="xs:string"/>
          <xs:element name="createDate" type="xs:dateTime"/>
          <xs:element name="delivering" type="xs:boolean"/>
          <xs:element name="externalID" type="xs:string"/>
          <xs:element minOccurs="0" name="link" type="xs:string"/>
          <xs:element name="orderID" type="xs:long"/>
          <xs:element minOccurs="0" name="pharmacyID" type="xs:long"/>
          <xs:element maxOccurs="unbounded" name="prescription" type="tns:prescriptionDrugOrder"/>
          <xs:element name="QRCode" type="xs:string"/>
          <xs:element name="statusCode" type="xs:string"/>
          <xs:element minOccurs="0" name="statusDescription" type="xs:string"/>
          <xs:element minOccurs="0" name="statusDetail" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="prescriptionDrugOrder">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="drug" type="tns:drugOrder"/>
          <xs:element name="prescriptionNumber" type="xs:string"/>
          <xs:element name="type" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="drugOrder">
        <xs:sequence>
          <xs:element minOccurs="0" name="amount" type="xs:long"/>
          <xs:element minOccurs="0" name="drugID" type="xs:string"/>
          <xs:element name="qty" type="xs:int"/>
          <xs:element minOccurs="0" name="storageCondition" type="xs:string"/>
          <xs:element name="title" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piRatePharmacyRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="comment" type="xs:string"/>
          <xs:element name="ident" type="xs:string"/>
          <xs:element name="mark" type="xs:string"/>
          <xs:element name="markedObject" type="tns:markedObject"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="markedObject">
        <xs:sequence>
          <xs:element minOccurs="0" name="orderID" type="xs:long"/>
          <xs:element minOccurs="0" name="prescriptionNumber" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piRatePharmacyResponseType">
        <xs:sequence>
          <xs:element name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiSetScheduleRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element name="prescriptionNumber" type="xs:string"/>
          <xs:element maxOccurs="unbounded" name="servicingDay" type="xs:int"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiSetScheduleResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiGetScheduleRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element name="prescriptionNumber" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiGetScheduleResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="milkShop" type="tns:milkShop"/>
          <xs:element minOccurs="0" name="prescriptionNumber" type="xs:string"/>
          <xs:element minOccurs="0" name="prescriptionPeriod" type="xs:string"/>
          <xs:element minOccurs="0" name="result" type="tns:extendedResponse"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="schedule" nillable="true" type="tns:fpiScheduleItem"/>
          <xs:element minOccurs="0" name="serviceMode" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="milkShop">
        <xs:sequence>
          <xs:element minOccurs="0" name="address" type="xs:string"/>
          <xs:element name="id" type="xs:long"/>
          <xs:element minOccurs="0" name="title" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiScheduleItem">
        <xs:sequence>
          <xs:element name="day" type="xs:int"/>
          <xs:element minOccurs="0" name="notes" type="xs:string"/>
          <xs:element name="scheduled" type="xs:boolean"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="timeSlot" nillable="true" type="tns:timeSlotItem"/>
          <xs:element name="workLoad" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="timeSlotItem">
        <xs:sequence>
          <xs:element minOccurs="0" name="description" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="service" nillable="true" type="xs:string"/>
          <xs:element name="slotEnd" type="xs:string"/>
          <xs:element name="slotStart" type="xs:string"/>
          <xs:element name="slotType" type="xs:string"/>
          <xs:element minOccurs="0" name="title" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piDetailsRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="getQR" type="xs:boolean"/>
          <xs:element minOccurs="0" name="ident" type="xs:string"/>
          <xs:element minOccurs="0" name="options" type="tns:Options"/>
          <xs:element minOccurs="0" name="prescriptionNumber" type="xs:string"/>
          <xs:element minOccurs="0" name="signature" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="Options">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="entry" nillable="true" type="tns:KeyValuePair"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="KeyValuePair">
        <xs:simpleContent>
          <xs:extension base="xs:string">
            <xs:attribute name="key" type="xs:string" use="required"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="piDetailsResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="benefit" type="tns:benefitInfo"/>
          <xs:element minOccurs="0" name="controlType" type="xs:string"/>
          <xs:element minOccurs="0" name="expirationDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="issuedBy" type="tns:registrationData"/>
          <xs:element minOccurs="0" name="medicine" type="tns:medicineInfo"/>
          <xs:element minOccurs="0" name="options" type="tns:Options"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="pharmacy" type="tns:pharmacyInfo"/>
          <xs:element minOccurs="0" name="prescriptionNumber" type="xs:string"/>
          <xs:element minOccurs="0" name="prescriptionState" type="xs:string"/>
          <xs:element minOccurs="0" name="prescriptionTerm" type="xs:string"/>
          <xs:element minOccurs="0" name="prescriptionType" type="tns:prescriptionType"/>
          <xs:element minOccurs="0" name="QRstring" type="xs:string"/>
          <xs:element minOccurs="0" name="recipeService" type="tns:recipeServiceType"/>
          <xs:element minOccurs="0" name="registrationDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="benefitInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="budget" type="tns:benefitBudget"/>
          <xs:element minOccurs="0" name="code" type="xs:string"/>
          <xs:element minOccurs="0" name="discount" type="tns:discountValue"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="registrationData">
        <xs:sequence>
          <xs:element minOccurs="0" name="doctorName" type="xs:string"/>
          <xs:element minOccurs="0" name="doctorSpeciality" type="xs:string"/>
          <xs:element minOccurs="0" name="organizationCode" type="xs:string"/>
          <xs:element minOccurs="0" name="organizationStamp" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="medicineInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="dosage" type="xs:string"/>
          <xs:element minOccurs="0" name="medicineRus" type="xs:string"/>
          <xs:element minOccurs="0" name="qty" type="xs:string"/>
          <xs:element minOccurs="0" name="rp" type="xs:string"/>
          <xs:element minOccurs="0" name="usage" type="xs:string"/>
          <xs:element minOccurs="0" name="usageDetails" type="tns:signaDetails"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="signaDetails">
        <xs:sequence>
          <xs:element minOccurs="0" name="couponDose" type="xs:double"/>
          <xs:element minOccurs="0" name="couponLength" type="xs:int"/>
          <xs:element minOccurs="0" name="couponMethod" type="xs:string"/>
          <xs:element minOccurs="0" name="couponPer_day" type="xs:int"/>
          <xs:element minOccurs="0" name="couponUnit" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="schedule" nillable="true" type="tns:scheduleItem"/>
          <xs:element minOccurs="0" name="scheduleBase" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="sheduleLenght" type="xs:int"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="scheduleItem">
        <xs:sequence>
          <xs:element minOccurs="0" name="dayDirections" type="xs:string"/>
          <xs:element minOccurs="0" name="dayZ" type="xs:int"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="remainder" nillable="true" type="xs:dateTime"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="pharmacyInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="address" type="xs:string"/>
          <xs:element minOccurs="0" name="name" type="xs:string"/>
          <xs:element minOccurs="0" name="pharmacyIdent" type="xs:string"/>
          <xs:element minOccurs="0" name="phone" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="saleInfo" type="tns:saleInfo"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="saleInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="qty" type="xs:string"/>
          <xs:element name="saleDate" type="xs:date"/>
          <xs:element minOccurs="0" name="title" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="recipeServiceType">
        <xs:sequence>
          <xs:element name="periodsQty" type="xs:int"/>
          <xs:element name="periodDrugAmount" type="xs:int"/>
          <xs:element minOccurs="0" name="periodicity" type="xs:int"/>
          <xs:element minOccurs="0" name="periodicityUnit" type="xs:string"/>
          <xs:element maxOccurs="unbounded" name="servicePeriod" type="tns:ServicePeriod"/>
          <xs:element minOccurs="0" name="booking" type="tns:pharmacyShort"/>
          <xs:element minOccurs="0" name="serviceMessage" type="tns:infoMessageType"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="ServicePeriod">
        <xs:sequence>
          <xs:element name="periodNumber" type="xs:int"/>
          <xs:element name="periodTerm" type="tns:DatePeriod"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="periodMode" nillable="true" type="tns:KeyValuePair"/>
          <xs:element minOccurs="0" name="isAllowed" type="xs:boolean"/>
          <xs:element minOccurs="0" name="isCompleted" type="xs:boolean"/>
          <xs:element name="drugAmount" type="xs:int"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="serviceCase" nillable="true" type="tns:ServiceCase"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="DatePeriod">
        <xs:sequence>
          <xs:element minOccurs="0" name="start" type="xs:date"/>
          <xs:element minOccurs="0" name="end" type="xs:date"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="ServiceCase">
        <xs:sequence>
          <xs:element name="saleDate" type="xs:date"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="saleMode" nillable="true" type="tns:KeyValuePair"/>
          <xs:element minOccurs="0" name="pharmacy" type="tns:pharmacyShort"/>
          <xs:element maxOccurs="unbounded" name="drugSold" type="tns:DrugSold"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="pharmacyShort">
        <xs:sequence>
          <xs:element name="title" type="xs:string"/>
          <xs:element name="ident" type="xs:string"/>
          <xs:element minOccurs="0" name="address" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="phone" nillable="true" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="DrugSold">
        <xs:sequence>
          <xs:element minOccurs="0" name="fullTradeName" type="xs:string"/>
          <xs:element minOccurs="0" name="fullTradeNameID" type="xs:int"/>
          <xs:element minOccurs="0" name="packQty" type="xs:decimal"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="infoMessageType">
        <xs:sequence>
          <xs:element minOccurs="0" name="colorMark" type="xs:string"/>
          <xs:element minOccurs="0" name="title" type="xs:string"/>
          <xs:element minOccurs="0" name="details" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piGetMarkPharmacyRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element name="markedObject" type="tns:markedObject"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piGetMarkPharmacyResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="comment" type="xs:string"/>
          <xs:element minOccurs="0" name="mark" type="xs:string"/>
          <xs:element name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiGetMilkShopListRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element minOccurs="0" name="OMKTE" type="xs:string"/>
          <xs:element minOccurs="0" name="searchString" type="xs:string"/>
          <xs:element minOccurs="0" name="stationID" type="xs:long"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiGetMilkShopListResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="milkShop" nillable="true" type="tns:fullMilkShop"/>
          <xs:element minOccurs="0" name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fullMilkShop">
        <xs:complexContent>
          <xs:extension base="tns:milkShop">
            <xs:sequence>
              <xs:element minOccurs="0" name="area" type="tns:area"/>
              <xs:element minOccurs="0" name="geoTag" type="xs:string"/>
              <xs:element minOccurs="0" name="loadLevel" type="xs:string"/>
              <xs:element maxOccurs="unbounded" minOccurs="0" name="nearestMetro" nillable="true" type="tns:metro"/>
            </xs:sequence>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="area">
        <xs:sequence>
          <xs:element minOccurs="0" name="OMKTE" type="xs:string"/>
          <xs:element minOccurs="0" name="title" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="metro">
        <xs:sequence>
          <xs:element minOccurs="0" name="lineID" type="xs:long"/>
          <xs:element minOccurs="0" name="stationID" type="xs:long"/>
          <xs:element minOccurs="0" name="title" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piCancelOrderRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element name="QRCode" type="xs:string"/>
          <xs:element minOccurs="0" name="userIdent" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piCancelOrderResponseType">
        <xs:sequence>
          <xs:element name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piPatientPrescriptionsRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element name="oms" type="xs:string"/>
          <xs:element minOccurs="0" name="options" type="tns:Options"/>
          <xs:element maxOccurs="unbounded" name="prescriptionNumber" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piPatientPrescriptionsResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="prescription" nillable="true" type="tns:prescriptionItem"/>
          <xs:element name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="prescriptionItem">
        <xs:sequence>
          <xs:element minOccurs="0" name="expirationDate" type="xs:date"/>
          <xs:element name="medicine" type="tns:prescriptionMedicine"/>
          <xs:element name="number" type="xs:string"/>
          <xs:element minOccurs="0" name="options" type="tns:Options"/>
          <xs:element minOccurs="0" name="prescriptionState" type="xs:string"/>
          <xs:element minOccurs="0" name="registrationDate" type="xs:date"/>
          <xs:element name="type" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="prescriptionMedicine">
        <xs:sequence>
          <xs:element minOccurs="0" name="dosage" type="xs:string"/>
          <xs:element minOccurs="0" name="medicineRus" type="xs:string"/>
          <xs:element minOccurs="0" name="qty" type="xs:string"/>
          <xs:element minOccurs="0" name="rp" type="xs:string"/>
          <xs:element minOccurs="0" name="usage" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piPharmacyAuxiliaryRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piPharmacyAuxiliaryResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="agregator" nillable="true" type="tns:agregator"/>
          <xs:element name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="agregator">
        <xs:sequence>
          <xs:element name="bookingLink" type="xs:string"/>
          <xs:element minOccurs="0" name="bookingOfferUrl" type="xs:string"/>
          <xs:element minOccurs="0" name="logo" type="xs:string"/>
          <xs:element minOccurs="0" name="name" type="xs:string"/>
          <xs:element minOccurs="0" name="phone" type="xs:string"/>
          <xs:element name="shortName" type="xs:string"/>
          <xs:element minOccurs="0" name="website" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiListRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element minOccurs="0" name="mode" type="xs:string"/>
          <xs:element minOccurs="0" name="oms" type="xs:string"/>
          <xs:element minOccurs="0" name="patientID" type="xs:string"/>
          <xs:element minOccurs="0" name="snils" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiListResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="foodPrescription" nillable="true" type="tns:foodPrescriptionItem"/>
          <xs:element minOccurs="0" name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="foodPrescriptionItem">
        <xs:sequence>
          <xs:element minOccurs="0" name="issueDate" type="xs:date"/>
          <xs:element minOccurs="0" name="milkShop" type="tns:milkShop"/>
          <xs:element minOccurs="0" name="notes" type="xs:string"/>
          <xs:element name="prescriptionNumber" type="xs:string"/>
          <xs:element name="prescriptionPeriod" type="xs:string"/>
          <xs:element name="prescriptionTitle" type="xs:string"/>
          <xs:element name="state" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piGetPharmacyGeoRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="filters" type="tns:pharmacyGeoFilters"/>
          <xs:element name="ident" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="options" nillable="true" type="tns:Options"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="pharmacyGeoFilters">
        <xs:sequence>
          <xs:element minOccurs="0" name="is24Hours" type="xs:boolean"/>
          <xs:element minOccurs="0" name="OMKTE" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="pharmacyID" type="xs:long"/>
          <xs:element minOccurs="0" name="prescriptionNumber" type="xs:string"/>
          <xs:element minOccurs="0" name="searchRadius" type="tns:searchRadius"/>
          <xs:element minOccurs="0" name="stationID" type="xs:long"/>
          <xs:element minOccurs="0" name="type" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="searchRadius">
        <xs:sequence>
          <xs:element name="distance" type="xs:int"/>
          <xs:element name="geoTag" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piGetPharmacyGeoResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="pharmacy" nillable="true" type="tns:pharmacyGeo"/>
          <xs:element name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="pharmacyGeo">
        <xs:sequence>
          <xs:element name="address" type="xs:string"/>
          <xs:element minOccurs="0" name="isCommercial" type="xs:boolean"/>
          <xs:element name="geoTag" type="xs:string"/>
          <xs:element name="ID" type="xs:long"/>
          <xs:element minOccurs="0" name="is24Hours" type="xs:boolean"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="nearestMetro" nillable="true" type="tns:nearestMetro"/>
          <xs:element name="shortName" type="xs:string"/>
          <xs:element minOccurs="0" name="type" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="nearestMetro">
        <xs:sequence>
          <xs:element minOccurs="0" name="metroTitle" type="xs:string"/>
          <xs:element minOccurs="0" name="stationID" type="xs:long"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piGetPharmacyListRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="filters" type="tns:getPharmacyFilter"/>
          <xs:element name="ident" type="xs:string"/>
          <xs:element minOccurs="0" name="pagingOptions" type="tns:pagingOptions"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPharmacyFilter">
        <xs:sequence>
          <xs:element minOccurs="0" name="is24Hours" type="xs:boolean"/>
          <xs:element minOccurs="0" name="OMKTE" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="pharmacyID" type="xs:long"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="pharmacyIdent" nillable="true" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="pharmacyType" nillable="true" type="xs:long"/>
          <xs:element minOccurs="0" name="prescriptionNumber" type="xs:string"/>
          <xs:element minOccurs="0" name="searchRadius" type="tns:searchRadius"/>
          <xs:element minOccurs="0" name="searchString" type="xs:string"/>
          <xs:element minOccurs="0" name="stationID" type="xs:long"/>
          <xs:element minOccurs="0" name="type" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="pagingOptions">
        <xs:sequence>
          <xs:element name="pageNumber" type="xs:int"/>
          <xs:element name="pageSize" type="xs:int"/>
          <xs:element minOccurs="0" name="sortingOptions" type="tns:sortingOptions"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="sortingOptions">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="sortOrder" nillable="true" type="tns:sortOrder"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="sortOrder">
        <xs:sequence>
          <xs:element name="attributeName" type="xs:string"/>
          <xs:element name="descending" type="xs:boolean"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piGetPharmacyListResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="pagingResults" type="tns:pagingResults"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="pharmacy" nillable="true" type="tns:pharmacyERItem"/>
          <xs:element name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="pagingResults">
        <xs:sequence>
          <xs:element name="morePagesAvailable" type="xs:boolean"/>
          <xs:element name="pageNumber" type="xs:int"/>
          <xs:element name="pageSize" type="xs:int"/>
          <xs:element name="pageTotal" type="xs:int"/>
          <xs:element name="totalItemsCount" type="xs:long"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="pharmacyERItem">
        <xs:sequence>
          <xs:element name="address" type="xs:string"/>
          <xs:element minOccurs="0" name="area" type="tns:area"/>
          <xs:element name="benefitPrescription" type="xs:boolean"/>
          <xs:element name="booking" type="xs:boolean"/>
          <xs:element name="commercialPrescription" type="xs:boolean"/>
          <xs:element minOccurs="0" name="contacts" type="tns:pharmacyContact"/>
          <xs:element minOccurs="0" name="FIAS" type="xs:string"/>
          <xs:element minOccurs="0" name="geoTag" type="xs:string"/>
          <xs:element name="id" type="xs:long"/>
          <xs:element minOccurs="0" name="ident" type="xs:string"/>
          <xs:element name="is24Hours" type="xs:boolean"/>
          <xs:element name="name" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="nearestMetro" nillable="true" type="tns:nearestMetro"/>
          <xs:element minOccurs="0" name="pharmacyType" type="tns:pharmacyType"/>
          <xs:element minOccurs="0" name="rate" type="xs:string"/>
          <xs:element minOccurs="0" name="schedule" type="xs:string"/>
          <xs:element name="shortName" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="pharmacyContact">
        <xs:sequence>
          <xs:element minOccurs="0" name="phone" type="xs:string"/>
          <xs:element minOccurs="0" name="website" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="pharmacyType">
        <xs:sequence>
          <xs:element minOccurs="0" name="pharmacyTypeID" type="xs:long"/>
          <xs:element minOccurs="0" name="pharmacyTypeName" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piListRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="getForm" type="xs:boolean"/>
          <xs:element minOccurs="0" name="ident" type="xs:string"/>
          <xs:element minOccurs="0" name="oms" type="xs:string"/>
          <xs:element minOccurs="0" name="options" type="tns:Options"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
          <xs:element minOccurs="0" name="snils" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piListResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="prescriptionList" nillable="true" type="tns:prescriptionInfo"/>
          <xs:element minOccurs="0" name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="prescriptionInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="bookingAvailable" type="xs:boolean"/>
          <xs:element minOccurs="0" name="controlType" type="xs:string"/>
          <xs:element minOccurs="0" name="ctime" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="expirationDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="form" type="xs:string"/>
          <xs:element minOccurs="0" name="medicineRus" type="xs:string"/>
          <xs:element minOccurs="0" name="number" type="xs:string"/>
          <xs:element minOccurs="0" name="periodical" type="tns:recipePeriodicalType"/>
          <xs:element minOccurs="0" name="rp" type="xs:string"/>
          <xs:element minOccurs="0" name="saleDate" type="xs:date"/>
          <xs:element minOccurs="0" name="state" type="xs:string"/>
          <xs:element minOccurs="0" name="term" type="xs:string"/>
          <xs:element minOccurs="0" name="type" type="tns:prescriptionType"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="recipePeriodicalType">
        <xs:sequence>
          <xs:element name="periodsQty" type="xs:int"/>
          <xs:element minOccurs="0" name="periodNumber" type="xs:int"/>
          <xs:element minOccurs="0" name="drugAmount" type="xs:int"/>
          <xs:element minOccurs="0" name="keyDate" type="xs:date"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piDrugsAvailabilityRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="ident" type="xs:string"/>
          <xs:element minOccurs="0" name="prescriptionNumber" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piDrugsAvailabilityResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="pharmaciesList" nillable="true" type="tns:pharmacyItem"/>
          <xs:element minOccurs="0" name="prescriptionNumber" type="xs:string"/>
          <xs:element minOccurs="0" name="result" type="tns:extendedResponse"/>
          <xs:element minOccurs="0" name="rp" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="pharmacyItem">
        <xs:sequence>
          <xs:element minOccurs="0" name="pharmacyAddress" type="xs:string"/>
          <xs:element minOccurs="0" name="pharmacyIdent" type="xs:string"/>
          <xs:element minOccurs="0" name="pharmacyName" type="xs:string"/>
          <xs:element minOccurs="0" name="pharmacyPhone" type="xs:string"/>
          <xs:element minOccurs="0" name="pharmacySchedule" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="tradeRemains" nillable="true" type="tns:pharmacyRemainInfo"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="pharmacyRemainInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="remainsDescription" type="xs:string"/>
          <xs:element minOccurs="0" name="remainsMedicine" type="xs:string"/>
          <xs:element minOccurs="0" name="remainsState" type="tns:remainsState"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piMultiplyDrugsAvailabilityRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="filters" type="tns:multiplyDrugsAvailabilityFilters"/>
          <xs:element name="ident" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="options" type="tns:Options"/>
          <xs:element maxOccurs="unbounded" name="prescriptionNumber" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="multiplyDrugsAvailabilityFilters">
        <xs:sequence>
          <xs:element minOccurs="0" name="is24Hours" type="xs:boolean"/>
          <xs:element minOccurs="0" name="OMKTE" type="xs:string"/>
          <xs:element minOccurs="0" name="searchRadius" type="tns:searchRadius"/>
          <xs:element minOccurs="0" name="stationID" type="xs:long"/>
          <xs:element minOccurs="0" name="type" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="piMultiplyDrugsAvailabilityResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="pharmacy" type="tns:pharmacyMultiply"/>
          <xs:element name="result" type="tns:extendedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="pharmacyMultiply">
        <xs:sequence>
          <xs:element minOccurs="0" name="address" type="xs:string"/>
          <xs:element minOccurs="0" name="isCommercial" type="xs:boolean"/>
          <xs:element minOccurs="0" name="geoTag" type="xs:string"/>
          <xs:element minOccurs="0" name="is24Hours" type="xs:boolean"/>
          <xs:element name="name" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="nearestMetro" type="tns:nearestMetro"/>
          <xs:element name="pharmacyID" type="xs:long"/>
          <xs:element minOccurs="0" name="phone" type="xs:string"/>
          <xs:element maxOccurs="unbounded" name="prescription" type="tns:prescriptionMultiply"/>
          <xs:element minOccurs="0" name="rate" type="xs:string"/>
          <xs:element minOccurs="0" name="schedule" type="xs:string"/>
          <xs:element minOccurs="0" name="shortName" type="xs:string"/>
          <xs:element name="type" type="xs:string"/>
          <xs:element minOccurs="0" name="website" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="prescriptionMultiply">
        <xs:sequence>
          <xs:element name="amount" type="xs:long"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="available" type="tns:available"/>
          <xs:element minOccurs="0" name="INNName" type="xs:string"/>
          <xs:element name="medicineTitle" type="xs:string"/>
          <xs:element name="prescriptionNumber" type="xs:string"/>
          <xs:element name="qty" type="xs:int"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="available">
        <xs:sequence>
          <xs:element minOccurs="0" name="comment" type="xs:string"/>
          <xs:element minOccurs="0" name="expiration" type="xs:date"/>
          <xs:element minOccurs="0" name="manufacturer" type="xs:string"/>
          <xs:element name="medicineTitle" type="xs:string"/>
          <xs:element minOccurs="0" name="origin" type="xs:string"/>
          <xs:element name="price" type="xs:long"/>
          <xs:element name="qty" type="xs:int"/>
          <xs:element name="surcharge" type="xs:long"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiDetailsRequestType">
        <xs:sequence>
          <xs:element name="ident" type="xs:string"/>
          <xs:element name="prescriptionNumber" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fpiDetailsResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="doctor" type="tns:doctorInfo"/>
          <xs:element minOccurs="0" name="issueDate" type="xs:date"/>
          <xs:element minOccurs="0" name="milkShop" type="tns:milkShop"/>
          <xs:element minOccurs="0" name="MO" type="tns:moInfo"/>
          <xs:element minOccurs="0" name="notes" type="xs:string"/>
          <xs:element minOccurs="0" name="prescriptionNumber" type="xs:string"/>
          <xs:element minOccurs="0" name="prescriptionPeriod" type="tns:prescriptionPeriod"/>
          <xs:element minOccurs="0" name="prescriptionTitle" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="productLine" nillable="true" type="tns:productLineItem"/>
          <xs:element minOccurs="0" name="result" type="tns:extendedResponse"/>
          <xs:element minOccurs="0" name="state" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="doctorInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="doctorID" type="xs:string"/>
          <xs:element minOccurs="0" name="fullName" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="moInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="MOID" type="xs:string"/>
          <xs:element minOccurs="0" name="title" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="prescriptionPeriod">
        <xs:sequence>
          <xs:element minOccurs="0" name="dateBegin" type="xs:date"/>
          <xs:element minOccurs="0" name="dateEnd" type="xs:date"/>
          <xs:element minOccurs="0" name="periodTitle" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="productLineItem">
        <xs:sequence>
          <xs:element minOccurs="0" name="periodicity" type="xs:string"/>
          <xs:element name="productName" type="xs:string"/>
          <xs:element name="productOutput" type="xs:long"/>
          <xs:element minOccurs="0" name="unit" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:simpleType name="annotationFeature">
        <xs:restriction base="xs:string">
          <xs:enumeration value="inn"/>
          <xs:enumeration value="ftn"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="benefitBudget">
        <xs:restriction base="xs:string">
          <xs:enumeration value="federal"/>
          <xs:enumeration value="regional"/>
          <xs:enumeration value="municipal"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="discountValue">
        <xs:restriction base="xs:string">
          <xs:enumeration value="_50"/>
          <xs:enumeration value="_100"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="prescriptionType">
        <xs:restriction base="xs:string">
          <xs:enumeration value="benefit"/>
          <xs:enumeration value="commercial"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="remainsState">
        <xs:restriction base="xs:string">
          <xs:enumeration value="available"/>
          <xs:enumeration value="soldout"/>
          <xs:enumeration value="shortage"/>
          <xs:enumeration value="unknown"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:element name="fpiChangeMilkShopRequest" nillable="true" type="tns:fpiChangeMilkShopRequestType"/>
      <xs:element name="fpiChangeMilkShopResponse" nillable="true" type="tns:fpiChangeMilkShopResponseType"/>
      <xs:element name="piCompleteOrderRequest" nillable="true" type="tns:piCompleteOrderRequestType"/>
      <xs:element name="piCompleteOrderResponse" nillable="true" type="tns:piCompleteOrderResponseType"/>
      <xs:element name="piDrugAnnotationRequest" nillable="true" type="tns:piDrugAnnotationRequestType"/>
      <xs:element name="piDrugAnnotationResponse" nillable="true" type="tns:piDrugAnnotationResponseType"/>
      <xs:element name="fpiCheckPatientRequest" nillable="true" type="tns:fpiCheckPatientRequestType"/>
      <xs:element name="fpiCheckPatientResponse" nillable="true" type="tns:fpiCheckPatientResponseType"/>
      <xs:element name="piCheckOrderRequest" nillable="true" type="tns:piCheckOrderRequestType"/>
      <xs:element name="piCheckOrderResponse" nillable="true" type="tns:piCheckOrderResponseType"/>
      <xs:element name="piGetDrugOrdersRequest" nillable="true" type="tns:piGetDrugOrdersRequestType"/>
      <xs:element name="piGetDrugOrdersResponse" nillable="true" type="tns:piGetDrugOrdersResponseType"/>
      <xs:element name="piRatePharmacyRequest" nillable="true" type="tns:piRatePharmacyRequestType"/>
      <xs:element name="piRatePharmacyResponse" nillable="true" type="tns:piRatePharmacyResponseType"/>
      <xs:element name="fpiSetScheduleRequest" nillable="true" type="tns:fpiSetScheduleRequestType"/>
      <xs:element name="fpiSetScheduleResponse" nillable="true" type="tns:fpiSetScheduleResponseType"/>
      <xs:element name="fpiGetScheduleRequest" nillable="true" type="tns:fpiGetScheduleRequestType"/>
      <xs:element name="fpiGetScheduleResponse" nillable="true" type="tns:fpiGetScheduleResponseType"/>
      <xs:element name="piDetailsRequest" nillable="true" type="tns:piDetailsRequestType"/>
      <xs:element name="piDetailsResponse" nillable="true" type="tns:piDetailsResponseType"/>
      <xs:element name="piGetMarkPharmacyRequest" nillable="true" type="tns:piGetMarkPharmacyRequestType"/>
      <xs:element name="piGetMarkPharmacyResponse" nillable="true" type="tns:piGetMarkPharmacyResponseType"/>
      <xs:element name="fpiGetMilkShopListRequest" nillable="true" type="tns:fpiGetMilkShopListRequestType"/>
      <xs:element name="fpiGetMilkShopListResponse" nillable="true" type="tns:fpiGetMilkShopListResponseType"/>
      <xs:element name="piCancelOrderRequest" nillable="true" type="tns:piCancelOrderRequestType"/>
      <xs:element name="piCancelOrderResponse" nillable="true" type="tns:piCancelOrderResponseType"/>
      <xs:element name="piPatientPrescriptionsRequest" nillable="true" type="tns:piPatientPrescriptionsRequestType"/>
      <xs:element name="piPatientPrescriptionsResponse" nillable="true" type="tns:piPatientPrescriptionsResponseType"/>
      <xs:element name="piPharmacyAuxiliaryRequest" nillable="true" type="tns:piPharmacyAuxiliaryRequestType"/>
      <xs:element name="piPharmacyAuxiliaryResponse" nillable="true" type="tns:piPharmacyAuxiliaryResponseType"/>
      <xs:element name="fpiGetListRequest" nillable="true" type="tns:fpiListRequestType"/>
      <xs:element name="fpiGetListResponse" nillable="true" type="tns:fpiListResponseType"/>
      <xs:element name="piGetPharmacyGeoRequest" nillable="true" type="tns:piGetPharmacyGeoRequestType"/>
      <xs:element name="piGetPharmacyGeoResponse" nillable="true" type="tns:piGetPharmacyGeoResponseType"/>
      <xs:element name="piGetPharmacyListRequest" nillable="true" type="tns:piGetPharmacyListRequestType"/>
      <xs:element name="piGetPharmacyListResponse" nillable="true" type="tns:piGetPharmacyListResponseType"/>
      <xs:element name="piListRequest" nillable="true" type="tns:piListRequestType"/>
      <xs:element name="piListResponse" nillable="true" type="tns:piListResponseType"/>
      <xs:element name="piDrugsAvailabilityRequest" nillable="true" type="tns:piDrugsAvailabilityRequestType"/>
      <xs:element name="piDrugsAvailabilityResponse" nillable="true" type="tns:piDrugsAvailabilityResponseType"/>
      <xs:element name="piMultiplyDrugsAvailabilityRequest" nillable="true" type="tns:piMultiplyDrugsAvailabilityRequestType"/>
      <xs:element name="piMultiplyDrugsAvailabilityResponse" nillable="true" type="tns:piMultiplyDrugsAvailabilityResponseType"/>
      <xs:element name="fpiGetDetailsRequest" nillable="true" type="tns:fpiDetailsRequestType"/>
      <xs:element name="fpiGetDetailsResponse" nillable="true" type="tns:fpiDetailsResponseType"/>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="piPharmacyAuxiliaryResponse">
    <wsdl:part element="ns1:piPharmacyAuxiliaryResponse" name="piPharmacyAuxiliaryResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiCheckPatientResponse">
    <wsdl:part element="ns1:fpiCheckPatientResponse" name="fpiCheckPatientResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piRatePharmacy">
    <wsdl:part element="ns1:piRatePharmacyRequest" name="piRatePharmacyRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiGetListResponse">
    <wsdl:part element="ns1:fpiGetListResponse" name="fpiGetListResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiSetSchedule">
    <wsdl:part element="ns1:fpiSetScheduleRequest" name="fpiSetScheduleRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiGetScheduleResponse">
    <wsdl:part element="ns1:fpiGetScheduleResponse" name="fpiGetScheduleResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piCancelOrderResponse">
    <wsdl:part element="ns1:piCancelOrderResponse" name="piCancelOrderResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piGetDrugOrdersResponse">
    <wsdl:part element="ns1:piGetDrugOrdersResponse" name="piGetDrugOrdersResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiGetSchedule">
    <wsdl:part element="ns1:fpiGetScheduleRequest" name="fpiGetScheduleRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiChangeMilkShopResponse">
    <wsdl:part element="ns1:fpiChangeMilkShopResponse" name="fpiChangeMilkShopResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piRatePharmacyResponse">
    <wsdl:part element="ns1:piRatePharmacyResponse" name="piRatePharmacyResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piDetails">
    <wsdl:part element="ns1:piDetailsRequest" name="piDetailsRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiGetMilkShopList">
    <wsdl:part element="ns1:fpiGetMilkShopListRequest" name="fpiGetMilkShopListRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piGetPharmacyListResponse">
    <wsdl:part element="ns1:piGetPharmacyListResponse" name="piGetPharmacyListResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piDrugsAvailabilityResponse">
    <wsdl:part element="ns1:piDrugsAvailabilityResponse" name="piDrugsAvailabilityResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piDetailsResponse">
    <wsdl:part element="ns1:piDetailsResponse" name="piDetailsResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piMultiplyDrugsAvailabilityResponse">
    <wsdl:part element="ns1:piMultiplyDrugsAvailabilityResponse" name="piMultiplyDrugsAvailabilityResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piGetPharmacyList">
    <wsdl:part element="ns1:piGetPharmacyListRequest" name="piGetPharmacyListRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piCompleteOrderResponse">
    <wsdl:part element="ns1:piCompleteOrderResponse" name="piCompleteOrderResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piMultiplyDrugsAvailability">
    <wsdl:part element="ns1:piMultiplyDrugsAvailabilityRequest" name="piMultiplyDrugsAvailabilityRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiSetScheduleResponse">
    <wsdl:part element="ns1:fpiSetScheduleResponse" name="fpiSetScheduleResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiChangeMilkShop">
    <wsdl:part element="ns1:fpiChangeMilkShopRequest" name="fpiChangeMilkShopRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piCompleteOrder">
    <wsdl:part element="ns1:piCompleteOrderRequest" name="piCompleteOrderRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piDrugAnnotation">
    <wsdl:part element="ns1:piDrugAnnotationRequest" name="piDrugAnnotationRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piDrugAnnotationResponse">
    <wsdl:part element="ns1:piDrugAnnotationResponse" name="piDrugAnnotationResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiCheckPatient">
    <wsdl:part element="ns1:fpiCheckPatientRequest" name="fpiCheckPatientRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piCheckOrder">
    <wsdl:part element="ns1:piCheckOrderRequest" name="piCheckOrderRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piGetDrugOrders">
    <wsdl:part element="ns1:piGetDrugOrdersRequest" name="piGetDrugOrdersRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiGetDetailsResponse">
    <wsdl:part element="ns1:fpiGetDetailsResponse" name="fpiGetDetailsResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiGetMilkShopListResponse">
    <wsdl:part element="ns1:fpiGetMilkShopListResponse" name="fpiGetMilkShopListResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piGetMarkPharmacy">
    <wsdl:part element="ns1:piGetMarkPharmacyRequest" name="piGetMarkPharmacyRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piCancelOrder">
    <wsdl:part element="ns1:piCancelOrderRequest" name="piCancelOrderRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piPatientPrescriptions">
    <wsdl:part element="ns1:piPatientPrescriptionsRequest" name="piPatientPrescriptionsRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piGetPharmacyGeoResponse">
    <wsdl:part element="ns1:piGetPharmacyGeoResponse" name="piGetPharmacyGeoResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piCheckOrderResponse">
    <wsdl:part element="ns1:piCheckOrderResponse" name="piCheckOrderResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piPharmacyAuxiliary">
    <wsdl:part element="ns1:piPharmacyAuxiliaryRequest" name="piPharmacyAuxiliaryRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piGetMarkPharmacyResponse">
    <wsdl:part element="ns1:piGetMarkPharmacyResponse" name="piGetMarkPharmacyResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiGetList">
    <wsdl:part element="ns1:fpiGetListRequest" name="fpiGetListRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piGetPharmacyGeo">
    <wsdl:part element="ns1:piGetPharmacyGeoRequest" name="piGetPharmacyGeoRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piList">
    <wsdl:part element="ns1:piListRequest" name="piListRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piDrugsAvailability">
    <wsdl:part element="ns1:piDrugsAvailabilityRequest" name="piDrugsAvailabilityRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piPatientPrescriptionsResponse">
    <wsdl:part element="ns1:piPatientPrescriptionsResponse" name="piPatientPrescriptionsResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="piListResponse">
    <wsdl:part element="ns1:piListResponse" name="piListResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fpiGetDetails">
    <wsdl:part element="ns1:fpiGetDetailsRequest" name="fpiGetDetailsRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:portType name="PrescriptionInfoSrvV4">
    <wsdl:operation name="fpiChangeMilkShop">
      <wsdl:input message="tns:fpiChangeMilkShop" name="fpiChangeMilkShop"></wsdl:input>
      <wsdl:output message="tns:fpiChangeMilkShopResponse" name="fpiChangeMilkShopResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piCompleteOrder">
      <wsdl:input message="tns:piCompleteOrder" name="piCompleteOrder"></wsdl:input>
      <wsdl:output message="tns:piCompleteOrderResponse" name="piCompleteOrderResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piDrugAnnotation">
      <wsdl:input message="tns:piDrugAnnotation" name="piDrugAnnotation"></wsdl:input>
      <wsdl:output message="tns:piDrugAnnotationResponse" name="piDrugAnnotationResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="fpiCheckPatient">
      <wsdl:input message="tns:fpiCheckPatient" name="fpiCheckPatient"></wsdl:input>
      <wsdl:output message="tns:fpiCheckPatientResponse" name="fpiCheckPatientResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piCheckOrder">
      <wsdl:input message="tns:piCheckOrder" name="piCheckOrder"></wsdl:input>
      <wsdl:output message="tns:piCheckOrderResponse" name="piCheckOrderResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piGetDrugOrders">
      <wsdl:input message="tns:piGetDrugOrders" name="piGetDrugOrders"></wsdl:input>
      <wsdl:output message="tns:piGetDrugOrdersResponse" name="piGetDrugOrdersResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piRatePharmacy">
      <wsdl:input message="tns:piRatePharmacy" name="piRatePharmacy"></wsdl:input>
      <wsdl:output message="tns:piRatePharmacyResponse" name="piRatePharmacyResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="fpiSetSchedule">
      <wsdl:input message="tns:fpiSetSchedule" name="fpiSetSchedule"></wsdl:input>
      <wsdl:output message="tns:fpiSetScheduleResponse" name="fpiSetScheduleResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="fpiGetSchedule">
      <wsdl:input message="tns:fpiGetSchedule" name="fpiGetSchedule"></wsdl:input>
      <wsdl:output message="tns:fpiGetScheduleResponse" name="fpiGetScheduleResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piDetails">
      <wsdl:input message="tns:piDetails" name="piDetails"></wsdl:input>
      <wsdl:output message="tns:piDetailsResponse" name="piDetailsResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piGetMarkPharmacy">
      <wsdl:input message="tns:piGetMarkPharmacy" name="piGetMarkPharmacy"></wsdl:input>
      <wsdl:output message="tns:piGetMarkPharmacyResponse" name="piGetMarkPharmacyResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="fpiGetMilkShopList">
      <wsdl:input message="tns:fpiGetMilkShopList" name="fpiGetMilkShopList"></wsdl:input>
      <wsdl:output message="tns:fpiGetMilkShopListResponse" name="fpiGetMilkShopListResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piCancelOrder">
      <wsdl:input message="tns:piCancelOrder" name="piCancelOrder"></wsdl:input>
      <wsdl:output message="tns:piCancelOrderResponse" name="piCancelOrderResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piPatientPrescriptions">
      <wsdl:input message="tns:piPatientPrescriptions" name="piPatientPrescriptions"></wsdl:input>
      <wsdl:output message="tns:piPatientPrescriptionsResponse" name="piPatientPrescriptionsResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piPharmacyAuxiliary">
      <wsdl:input message="tns:piPharmacyAuxiliary" name="piPharmacyAuxiliary"></wsdl:input>
      <wsdl:output message="tns:piPharmacyAuxiliaryResponse" name="piPharmacyAuxiliaryResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="fpiGetList">
      <wsdl:input message="tns:fpiGetList" name="fpiGetList"></wsdl:input>
      <wsdl:output message="tns:fpiGetListResponse" name="fpiGetListResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piGetPharmacyGeo">
      <wsdl:input message="tns:piGetPharmacyGeo" name="piGetPharmacyGeo"></wsdl:input>
      <wsdl:output message="tns:piGetPharmacyGeoResponse" name="piGetPharmacyGeoResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piGetPharmacyList">
      <wsdl:input message="tns:piGetPharmacyList" name="piGetPharmacyList"></wsdl:input>
      <wsdl:output message="tns:piGetPharmacyListResponse" name="piGetPharmacyListResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piList">
      <wsdl:input message="tns:piList" name="piList"></wsdl:input>
      <wsdl:output message="tns:piListResponse" name="piListResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piDrugsAvailability">
      <wsdl:input message="tns:piDrugsAvailability" name="piDrugsAvailability"></wsdl:input>
      <wsdl:output message="tns:piDrugsAvailabilityResponse" name="piDrugsAvailabilityResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piMultiplyDrugsAvailability">
      <wsdl:input message="tns:piMultiplyDrugsAvailability" name="piMultiplyDrugsAvailability"></wsdl:input>
      <wsdl:output message="tns:piMultiplyDrugsAvailabilityResponse" name="piMultiplyDrugsAvailabilityResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="fpiGetDetails">
      <wsdl:input message="tns:fpiGetDetails" name="fpiGetDetails"></wsdl:input>
      <wsdl:output message="tns:fpiGetDetailsResponse" name="fpiGetDetailsResponse"></wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="PrescriptionInfoServiceV4SoapBinding" type="tns:PrescriptionInfoSrvV4">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="fpiChangeMilkShop">
      <soap:operation soapAction="fpiChangeMilkShop" style="document"/>
      <wsdl:input name="fpiChangeMilkShop">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="fpiChangeMilkShopResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piCompleteOrder">
      <soap:operation soapAction="piCompleteOrder" style="document"/>
      <wsdl:input name="piCompleteOrder">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piCompleteOrderResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piDrugAnnotation">
      <soap:operation soapAction="piDrugAnnotation" style="document"/>
      <wsdl:input name="piDrugAnnotation">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piDrugAnnotationResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="fpiCheckPatient">
      <soap:operation soapAction="fpiCheckPatient" style="document"/>
      <wsdl:input name="fpiCheckPatient">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="fpiCheckPatientResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piCheckOrder">
      <soap:operation soapAction="piCheckOrder" style="document"/>
      <wsdl:input name="piCheckOrder">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piCheckOrderResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piGetDrugOrders">
      <soap:operation soapAction="piGetDrugOrders" style="document"/>
      <wsdl:input name="piGetDrugOrders">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piGetDrugOrdersResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piRatePharmacy">
      <soap:operation soapAction="piRatePharmacy" style="document"/>
      <wsdl:input name="piRatePharmacy">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piRatePharmacyResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="fpiSetSchedule">
      <soap:operation soapAction="fpiSetSchedule" style="document"/>
      <wsdl:input name="fpiSetSchedule">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="fpiSetScheduleResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="fpiGetSchedule">
      <soap:operation soapAction="fpiGetSchedule" style="document"/>
      <wsdl:input name="fpiGetSchedule">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="fpiGetScheduleResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piDetails">
      <soap:operation soapAction="piDetails" style="document"/>
      <wsdl:input name="piDetails">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piDetailsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piGetMarkPharmacy">
      <soap:operation soapAction="piGetMarkPharmacy" style="document"/>
      <wsdl:input name="piGetMarkPharmacy">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piGetMarkPharmacyResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="fpiGetMilkShopList">
      <soap:operation soapAction="fpiGetMilkShopList" style="document"/>
      <wsdl:input name="fpiGetMilkShopList">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="fpiGetMilkShopListResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piCancelOrder">
      <soap:operation soapAction="piCancelOrder" style="document"/>
      <wsdl:input name="piCancelOrder">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piCancelOrderResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piPatientPrescriptions">
      <soap:operation soapAction="piPatientPrescriptions" style="document"/>
      <wsdl:input name="piPatientPrescriptions">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piPatientPrescriptionsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piPharmacyAuxiliary">
      <soap:operation soapAction="piPharmacyAuxiliary" style="document"/>
      <wsdl:input name="piPharmacyAuxiliary">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piPharmacyAuxiliaryResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="fpiGetList">
      <soap:operation soapAction="fpiGetList" style="document"/>
      <wsdl:input name="fpiGetList">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="fpiGetListResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piGetPharmacyGeo">
      <soap:operation soapAction="piGetPharmacyGeo" style="document"/>
      <wsdl:input name="piGetPharmacyGeo">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piGetPharmacyGeoResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piGetPharmacyList">
      <soap:operation soapAction="piGetPharmacyList" style="document"/>
      <wsdl:input name="piGetPharmacyList">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piGetPharmacyListResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piList">
      <soap:operation soapAction="piList" style="document"/>
      <wsdl:input name="piList">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piListResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piDrugsAvailability">
      <soap:operation soapAction="piDrugsAvailability" style="document"/>
      <wsdl:input name="piDrugsAvailability">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piDrugsAvailabilityResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="piMultiplyDrugsAvailability">
      <soap:operation soapAction="piMultiplyDrugsAvailability" style="document"/>
      <wsdl:input name="piMultiplyDrugsAvailability">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="piMultiplyDrugsAvailabilityResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="fpiGetDetails">
      <soap:operation soapAction="fpiGetDetails" style="document"/>
      <wsdl:input name="fpiGetDetails">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="fpiGetDetailsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="PrescriptionInfoServiceV4">
    <wsdl:port binding="tns:PrescriptionInfoServiceV4SoapBinding" name="PrescriptionInfoSrvPortV4">
      <soap:address location="http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint></con:endpoints><con:operation id="bf02ddef-80f0-4467-867c-d15361d805e0" isOneWay="false" action="fpiChangeMilkShop" name="fpiChangeMilkShop" bindingOperationName="fpiChangeMilkShop" type="Request-Response" outputName="fpiChangeMilkShopResponse" inputName="fpiChangeMilkShop" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="3f03d4ab-10db-4097-a845-615f9f4ba1c0" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:fpiChangeMilkShopRequest>\r
         <typ:ident>?</typ:ident>\r
         <typ:milkShopId>?</typ:milkShopId>\r
         <!--1 or more repetitions:-->\r
         <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
      </typ:fpiChangeMilkShopRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="fpiChangeMilkShop"/></con:call></con:operation><con:operation id="9cbb5875-5049-4ffb-9bec-53ccf04504c2" isOneWay="false" action="fpiCheckPatient" name="fpiCheckPatient" bindingOperationName="fpiCheckPatient" type="Request-Response" outputName="fpiCheckPatientResponse" inputName="fpiCheckPatient" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="02ab137b-3210-44f5-b852-753b234a76bf" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:fpiCheckPatientRequest>\r
         <typ:ident>?</typ:ident>\r
         <!--Optional:-->\r
         <typ:oms>?</typ:oms>\r
         <!--Optional:-->\r
         <typ:patientID>?</typ:patientID>\r
         <!--Optional:-->\r
         <typ:snils>?</typ:snils>\r
      </typ:fpiCheckPatientRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="fpiCheckPatient"/></con:call></con:operation><con:operation id="4f523d96-f179-421a-aa80-15042354cf6a" isOneWay="false" action="fpiGetDetails" name="fpiGetDetails" bindingOperationName="fpiGetDetails" type="Request-Response" outputName="fpiGetDetailsResponse" inputName="fpiGetDetails" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="f9a8a7ae-b9f7-469f-b94b-fcfbe0d2d305" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:fpiGetDetailsRequest>\r
         <typ:ident>?</typ:ident>\r
         <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
      </typ:fpiGetDetailsRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="fpiGetDetails"/></con:call></con:operation><con:operation id="92e8daf9-dd6a-435b-86cf-c05c40152227" isOneWay="false" action="fpiGetList" name="fpiGetList" bindingOperationName="fpiGetList" type="Request-Response" outputName="fpiGetListResponse" inputName="fpiGetList" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="7e908edb-e2e5-4c1e-bc40-33a30297cccb" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:fpiGetListRequest>\r
         <typ:ident>?</typ:ident>\r
         <!--Optional:-->\r
         <typ:mode>?</typ:mode>\r
         <!--Optional:-->\r
         <typ:oms>?</typ:oms>\r
         <!--Optional:-->\r
         <typ:patientID>?</typ:patientID>\r
         <!--Optional:-->\r
         <typ:snils>?</typ:snils>\r
      </typ:fpiGetListRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="fpiGetList"/></con:call></con:operation><con:operation id="fceadda7-27cd-4289-8f41-f40c8e315dfe" isOneWay="false" action="fpiGetMilkShopList" name="fpiGetMilkShopList" bindingOperationName="fpiGetMilkShopList" type="Request-Response" outputName="fpiGetMilkShopListResponse" inputName="fpiGetMilkShopList" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="bb2cb351-1779-419f-be09-b26a752e0d1b" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:fpiGetMilkShopListRequest>\r
         <typ:ident>?</typ:ident>\r
         <!--Optional:-->\r
         <typ:OMKTE>?</typ:OMKTE>\r
         <!--Optional:-->\r
         <typ:searchString>?</typ:searchString>\r
         <!--Optional:-->\r
         <typ:stationID>?</typ:stationID>\r
      </typ:fpiGetMilkShopListRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="fpiGetMilkShopList"/></con:call></con:operation><con:operation id="79b6ada5-7f34-4c76-b606-59ff9196d051" isOneWay="false" action="fpiGetSchedule" name="fpiGetSchedule" bindingOperationName="fpiGetSchedule" type="Request-Response" outputName="fpiGetScheduleResponse" inputName="fpiGetSchedule" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="ad2fb833-a4dc-4c9f-800f-132c3e9ffc1f" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:fpiGetScheduleRequest>\r
         <typ:ident>?</typ:ident>\r
         <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
      </typ:fpiGetScheduleRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="fpiGetSchedule"/></con:call></con:operation><con:operation id="602bbc61-f2d1-437f-8bb3-624a9f0042d5" isOneWay="false" action="fpiSetSchedule" name="fpiSetSchedule" bindingOperationName="fpiSetSchedule" type="Request-Response" outputName="fpiSetScheduleResponse" inputName="fpiSetSchedule" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="b1d779e5-e643-40d9-a6f5-0a2760a0ab35" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:fpiSetScheduleRequest>\r
         <typ:ident>?</typ:ident>\r
         <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
         <!--1 or more repetitions:-->\r
         <typ:servicingDay>?</typ:servicingDay>\r
      </typ:fpiSetScheduleRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="fpiSetSchedule"/></con:call></con:operation><con:operation id="257d7809-0c47-4992-8133-e64657d16da2" isOneWay="false" action="piCancelOrder" name="piCancelOrder" bindingOperationName="piCancelOrder" type="Request-Response" outputName="piCancelOrderResponse" inputName="piCancelOrder" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="f686b32b-0988-47e9-b054-9ef72c7b0cde" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piCancelOrderRequest>\r
         <typ:ident>?</typ:ident>\r
         <typ:QRCode>?</typ:QRCode>\r
         <!--Optional:-->\r
         <typ:userIdent>?</typ:userIdent>\r
      </typ:piCancelOrderRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piCancelOrder"/></con:call></con:operation><con:operation id="e91bd4c3-0399-4184-915b-f1f1fd80b70c" isOneWay="false" action="piCheckOrder" name="piCheckOrder" bindingOperationName="piCheckOrder" type="Request-Response" outputName="piCheckOrderResponse" inputName="piCheckOrder" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="cf65a5fd-0ca5-4713-b69c-44bc9195853f" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piCheckOrderRequest>\r
         <typ:ident>?</typ:ident>\r
         <typ:QRCode>?</typ:QRCode>\r
         <!--Optional:-->\r
         <typ:userIdent>?</typ:userIdent>\r
      </typ:piCheckOrderRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piCheckOrder"/></con:call></con:operation><con:operation id="3a3ac8e7-8d1c-40c4-a94e-ec3dd709e5f6" isOneWay="false" action="piCompleteOrder" name="piCompleteOrder" bindingOperationName="piCompleteOrder" type="Request-Response" outputName="piCompleteOrderResponse" inputName="piCompleteOrder" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="35daa318-b239-405b-85fa-3397181f5eea" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piCompleteOrderRequest>\r
         <typ:ident>?</typ:ident>\r
         <typ:QRCode>?</typ:QRCode>\r
         <!--Optional:-->\r
         <typ:userIdent>?</typ:userIdent>\r
      </typ:piCompleteOrderRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piCompleteOrder"/></con:call></con:operation><con:operation id="70c0a6d0-112d-4a7f-9849-42d50be34ff7" isOneWay="false" action="piDetails" name="piDetails" bindingOperationName="piDetails" type="Request-Response" outputName="piDetailsResponse" inputName="piDetails" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="17928f9b-5d61-4856-b440-64dbc1766602" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piDetailsRequest>\r
         <!--Optional:-->\r
         <typ:getQR>?</typ:getQR>\r
         <!--Optional:-->\r
         <typ:ident>?</typ:ident>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
         <!--Optional:-->\r
         <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
         <!--Optional:-->\r
         <typ:signature>?</typ:signature>\r
      </typ:piDetailsRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piDetails"/></con:call></con:operation><con:operation id="eff4c039-271a-4dc6-a9d7-5447556989c9" isOneWay="false" action="piDrugAnnotation" name="piDrugAnnotation" bindingOperationName="piDrugAnnotation" type="Request-Response" outputName="piDrugAnnotationResponse" inputName="piDrugAnnotation" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="5d887f30-ab24-403a-a222-245fb28baaa5" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piDrugAnnotationRequest>\r
         <!--Optional:-->\r
         <typ:getFullText>?</typ:getFullText>\r
         <!--Optional:-->\r
         <typ:getINNonly>?</typ:getINNonly>\r
         <!--Optional:-->\r
         <typ:getStructureLevel>?</typ:getStructureLevel>\r
         <!--Optional:-->\r
         <typ:ident>?</typ:ident>\r
         <!--Optional:-->\r
         <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
      </typ:piDrugAnnotationRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piDrugAnnotation"/></con:call></con:operation><con:operation id="6adac961-6331-4942-8f9c-b7455b135032" isOneWay="false" action="piDrugsAvailability" name="piDrugsAvailability" bindingOperationName="piDrugsAvailability" type="Request-Response" outputName="piDrugsAvailabilityResponse" inputName="piDrugsAvailability" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="34571787-b563-4754-acf2-2c60da89dc1f" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piDrugsAvailabilityRequest>\r
         <!--Optional:-->\r
         <typ:ident>?</typ:ident>\r
         <!--Optional:-->\r
         <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
      </typ:piDrugsAvailabilityRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piDrugsAvailability"/></con:call></con:operation><con:operation id="7eda62b9-7d99-4731-8907-fbcda5b92237" isOneWay="false" action="piGetDrugOrders" name="piGetDrugOrders" bindingOperationName="piGetDrugOrders" type="Request-Response" outputName="piGetDrugOrdersResponse" inputName="piGetDrugOrders" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="f5e39b09-524f-4277-81b7-acca6e81b350" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piGetDrugOrdersRequest>\r
         <typ:ident>?</typ:ident>\r
         <!--Optional:-->\r
         <typ:oms>?</typ:oms>\r
         <!--Optional:-->\r
         <typ:patientID>?</typ:patientID>\r
         <!--Optional:-->\r
         <typ:snils>?</typ:snils>\r
      </typ:piGetDrugOrdersRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piGetDrugOrders"/></con:call></con:operation><con:operation id="22525913-7145-4d66-89df-17bbfd4fab44" isOneWay="false" action="piGetMarkPharmacy" name="piGetMarkPharmacy" bindingOperationName="piGetMarkPharmacy" type="Request-Response" outputName="piGetMarkPharmacyResponse" inputName="piGetMarkPharmacy" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="1450867a-717b-4d7f-89b4-7986ef5e7557" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piGetMarkPharmacyRequest>\r
         <typ:ident>?</typ:ident>\r
         <typ:markedObject>\r
            <!--Optional:-->\r
            <typ:orderID>?</typ:orderID>\r
            <!--Optional:-->\r
            <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
         </typ:markedObject>\r
      </typ:piGetMarkPharmacyRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piGetMarkPharmacy"/></con:call></con:operation><con:operation id="7da9db27-fccf-4a0b-a87d-754502f6d955" isOneWay="false" action="piGetPharmacyGeo" name="piGetPharmacyGeo" bindingOperationName="piGetPharmacyGeo" type="Request-Response" outputName="piGetPharmacyGeoResponse" inputName="piGetPharmacyGeo" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="d6d35315-8a7a-401c-9357-b50b3125ecc0" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piGetPharmacyGeoRequest>\r
         <!--Optional:-->\r
         <typ:filters>\r
            <!--Optional:-->\r
            <typ:is24Hours>?</typ:is24Hours>\r
            <!--Optional:-->\r
            <typ:OMKTE>?</typ:OMKTE>\r
            <!--Zero or more repetitions:-->\r
            <typ:pharmacyID>?</typ:pharmacyID>\r
            <!--Optional:-->\r
            <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
            <!--Optional:-->\r
            <typ:searchRadius>\r
               <typ:distance>?</typ:distance>\r
               <typ:geoTag>?</typ:geoTag>\r
            </typ:searchRadius>\r
            <!--Optional:-->\r
            <typ:stationID>?</typ:stationID>\r
            <!--Optional:-->\r
            <typ:type>?</typ:type>\r
         </typ:filters>\r
         <typ:ident>?</typ:ident>\r
         <!--Zero or more repetitions:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
      </typ:piGetPharmacyGeoRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piGetPharmacyGeo"/></con:call></con:operation><con:operation id="24428b9a-a23c-4bcd-a7f8-5bd6525ba3c5" isOneWay="false" action="piGetPharmacyList" name="piGetPharmacyList" bindingOperationName="piGetPharmacyList" type="Request-Response" outputName="piGetPharmacyListResponse" inputName="piGetPharmacyList" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="70b4216c-b00e-45e7-904b-fec8c2d9d0dd" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piGetPharmacyListRequest>\r
         <!--Optional:-->\r
         <typ:filters>\r
            <!--Optional:-->\r
            <typ:is24Hours>?</typ:is24Hours>\r
            <!--Optional:-->\r
            <typ:OMKTE>?</typ:OMKTE>\r
            <!--Zero or more repetitions:-->\r
            <typ:pharmacyID>?</typ:pharmacyID>\r
            <!--Zero or more repetitions:-->\r
            <typ:pharmacyIdent>?</typ:pharmacyIdent>\r
            <!--Zero or more repetitions:-->\r
            <typ:pharmacyType>?</typ:pharmacyType>\r
            <!--Optional:-->\r
            <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
            <!--Optional:-->\r
            <typ:searchRadius>\r
               <typ:distance>?</typ:distance>\r
               <typ:geoTag>?</typ:geoTag>\r
            </typ:searchRadius>\r
            <!--Optional:-->\r
            <typ:searchString>?</typ:searchString>\r
            <!--Optional:-->\r
            <typ:stationID>?</typ:stationID>\r
            <!--Optional:-->\r
            <typ:type>?</typ:type>\r
         </typ:filters>\r
         <typ:ident>?</typ:ident>\r
         <!--Optional:-->\r
         <typ:pagingOptions>\r
            <typ:pageNumber>?</typ:pageNumber>\r
            <typ:pageSize>?</typ:pageSize>\r
            <!--Optional:-->\r
            <typ:sortingOptions>\r
               <!--Zero or more repetitions:-->\r
               <typ:sortOrder>\r
                  <typ:attributeName>?</typ:attributeName>\r
                  <typ:descending>?</typ:descending>\r
               </typ:sortOrder>\r
            </typ:sortingOptions>\r
         </typ:pagingOptions>\r
      </typ:piGetPharmacyListRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piGetPharmacyList"/></con:call></con:operation><con:operation id="3e1c2d4e-01bc-45e8-a418-6dc9474a2470" isOneWay="false" action="piList" name="piList" bindingOperationName="piList" type="Request-Response" outputName="piListResponse" inputName="piList" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="d375829c-b8cb-4adc-af4a-669b56d66137" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
<soapenv:Header>
  <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM/4c2f03d5-5c41-4c79-acd0-fe36faa92104</wsse:Username>
      <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"/>
    </wsse:UsernameToken>
  </wsse:Security>
</soapenv:Header>
   <soapenv:Body>\r
      <typ:piListRequest>\r
         <!--Optional:-->\r
         <typ:getForm>false</typ:getForm>\r
         <!--Optional:-->\r
         <typ:ident>?</typ:ident>\r
         <!--Optional:-->\r
         <typ:oms>?</typ:oms>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
         <!--Optional:-->\r
         <typ:snils>?</typ:snils>\r
      </typ:piListRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">
<soapenv:Header>
  <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM/4c2f03d5-5c41-4c79-acd0-fe36faa92104</wsse:Username>
      <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"/>
    </wsse:UsernameToken>
  </wsse:Security>
</soapenv:Header>
   <soapenv:Body>
      <typ:piGetDrugOrdersRequest>
         <typ:ident>EMIASINFO</typ:ident>
         <!--Optional:-->
         <typ:oms>${#TestCase#omsNumber}</typ:oms>
      </typ:piGetDrugOrdersRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piList"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="64111e59-d6d3-4389-b1db-1c45c5ae106d" isOneWay="false" action="piMultiplyDrugsAvailability" name="piMultiplyDrugsAvailability" bindingOperationName="piMultiplyDrugsAvailability" type="Request-Response" outputName="piMultiplyDrugsAvailabilityResponse" inputName="piMultiplyDrugsAvailability" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="80229698-197b-4fb8-ac9f-546f2e41ecdd" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piMultiplyDrugsAvailabilityRequest>\r
         <!--Optional:-->\r
         <typ:filters>\r
            <!--Optional:-->\r
            <typ:is24Hours>?</typ:is24Hours>\r
            <!--Optional:-->\r
            <typ:OMKTE>?</typ:OMKTE>\r
            <!--Optional:-->\r
            <typ:searchRadius>\r
               <typ:distance>?</typ:distance>\r
               <typ:geoTag>?</typ:geoTag>\r
            </typ:searchRadius>\r
            <!--Optional:-->\r
            <typ:stationID>?</typ:stationID>\r
            <!--Optional:-->\r
            <typ:type>?</typ:type>\r
         </typ:filters>\r
         <typ:ident>?</typ:ident>\r
         <!--Zero or more repetitions:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
         <!--1 or more repetitions:-->\r
         <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
      </typ:piMultiplyDrugsAvailabilityRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piMultiplyDrugsAvailability"/></con:call></con:operation><con:operation id="e98de88d-599b-4251-bf1d-e79adffe8f34" isOneWay="false" action="piPatientPrescriptions" name="piPatientPrescriptions" bindingOperationName="piPatientPrescriptions" type="Request-Response" outputName="piPatientPrescriptionsResponse" inputName="piPatientPrescriptions" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="e56a3acc-cd61-4151-86ce-2f962e7d62b7" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piPatientPrescriptionsRequest>\r
         <typ:ident>?</typ:ident>\r
         <typ:oms>?</typ:oms>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
         <!--1 or more repetitions:-->\r
         <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
      </typ:piPatientPrescriptionsRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piPatientPrescriptions"/></con:call></con:operation><con:operation id="6559d56d-d8ca-4f5e-a8ff-788a05fae2f7" isOneWay="false" action="piPharmacyAuxiliary" name="piPharmacyAuxiliary" bindingOperationName="piPharmacyAuxiliary" type="Request-Response" outputName="piPharmacyAuxiliaryResponse" inputName="piPharmacyAuxiliary" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="0d574f94-5461-48c1-b0dd-07e179540214" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piPharmacyAuxiliaryRequest>\r
         <typ:ident>?</typ:ident>\r
      </typ:piPharmacyAuxiliaryRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piPharmacyAuxiliary"/></con:call></con:operation><con:operation id="7bd4a539-e5d5-4b13-915b-4327352abbb5" isOneWay="false" action="piRatePharmacy" name="piRatePharmacy" bindingOperationName="piRatePharmacy" type="Request-Response" outputName="piRatePharmacyResponse" inputName="piRatePharmacy" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="53521583-9b1f-41a3-a9ad-2e9fd254d3c1" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:piRatePharmacyRequest>\r
         <!--Optional:-->\r
         <typ:comment>?</typ:comment>\r
         <typ:ident>?</typ:ident>\r
         <typ:mark>?</typ:mark>\r
         <typ:markedObject>\r
            <!--Optional:-->\r
            <typ:orderID>?</typ:orderID>\r
            <!--Optional:-->\r
            <typ:prescriptionNumber>?</typ:prescriptionNumber>\r
         </typ:markedObject>\r
      </typ:piRatePharmacyRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="piRatePharmacy"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" id="a6ac88eb-98d5-4f3f-9061-a3507cc5cc11" wsaVersion="NONE" name="SelfAppointmentServiceV5Binding" type="wsdl" bindingName="{http://impl.service.soap.emias.lanit.ru/v5/}SelfAppointmentServiceV5Binding" soapVersion="1_2" anonymous="optional" definition="http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService?wsdl"><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="SelfAppointmentService" targetNamespace="http://impl.service.soap.emias.lanit.ru/v5/" xmlns:api="http://api.service.soap.emias.lanit.ru/v5/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:tns="http://impl.service.soap.emias.lanit.ru/v5/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <!--WSDL контракта 5 (доработки по записи 2-х детей, для Инфомата и поддержки ЦЛС)-->
  <wsdl:documentation>version="5.2"</wsdl:documentation>
  <wsdl:types>
    <xs:schema xmlns="http://www.w3.org/2001/XMLSchema">
      <import namespace="http://api.service.soap.emias.lanit.ru/v5/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELvH8olfvFUzUOzR9Es_rBviwyrRrnxXTOMZf1KYWzL6hlqv_eyPYq5HlejT1ROkMeQ--"/>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="SoapException">
    <wsdl:part element="api:soapException" name="SoapException"/>
  </wsdl:message>
  <wsdl:message name="cancelAppointment">
    <wsdl:part element="api:cancelAppointment" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="cancelAppointmentResponse">
    <wsdl:part element="api:cancelAppointmentResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getAppointmentReceptionsByPatient">
    <wsdl:part element="api:getAppointmentReceptionsByPatient" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getAppointmentReceptionsByPatientResponse">
    <wsdl:part element="api:getAppointmentReceptionsByPatientResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getReferralsInfo">
    <wsdl:part element="api:getReferralsInfo" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getReferralsInfoResponse">
    <wsdl:part element="api:getReferralsInfoResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="createAppointment">
    <wsdl:part element="api:createAppointment" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="createAppointmentResponse">
    <wsdl:part element="api:createAppointmentResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getAvailableResourceScheduleInfo">
    <wsdl:part element="api:getAvailableResourceScheduleInfo" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getAvailableResourceScheduleInfoResponse">
    <wsdl:part element="api:getAvailableResourceScheduleInfoResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getDoctorsInfo">
    <wsdl:part element="api:getDoctorsInfo" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getDoctorsInfoResponse">
    <wsdl:part element="api:getDoctorsInfoResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getSpecialitiesInfo">
    <wsdl:part element="api:getSpecialitiesInfo" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getSpecialitiesInfoResponse">
    <wsdl:part element="api:getSpecialitiesInfoResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="shiftAppointment">
    <wsdl:part element="api:shiftAppointment" name="shiftAppointment"/>
  </wsdl:message>
  <wsdl:message name="shiftAppointmentResponse">
    <wsdl:part element="api:shiftAppointmentResponse" name="shiftAppointmentResponse"/>
  </wsdl:message>
  <wsdl:message name="getDutyARScheduleByPatient">
    <wsdl:part element="api:getDutyARScheduleByPatient" name="getDutyARScheduleByPatient"/>
  </wsdl:message>
  <wsdl:message name="getDutyARScheduleByPatientResponse">
    <wsdl:part element="api:getDutyARScheduleByPatientResponse" name="getDutyARScheduleByPatientResponse"/>
  </wsdl:message>
  <wsdl:message name="createAppointmentToDutyDoctorByPatient">
    <wsdl:part element="api:createAppointmentToDutyDoctorByPatient" name="createAppointmentToDutyDoctorByPatient"/>
  </wsdl:message>
  <wsdl:message name="createAppointmentToDutyDoctorByPatientResponse">
    <wsdl:part element="api:createAppointmentToDutyDoctorByPatientResponse" name="createAppointmentToDutyDoctorByPatientResponse"/>
  </wsdl:message>
  <wsdl:message name="cancelAppointmentToDutyDoctorByPatient">
    <wsdl:part element="api:cancelAppointmentToDutyDoctorByPatient" name="cancelAppointmentToDutyDoctorByPatient"/>
  </wsdl:message>
  <wsdl:message name="cancelAppointmentToDutyDoctorByPatientResponse">
    <wsdl:part element="api:cancelAppointmentToDutyDoctorByPatientResponse" name="cancelAppointmentToDutyDoctorByPatientResponse"/>
  </wsdl:message>
  <wsdl:message name="getHealthCareAvailabilityAttributes">
    <wsdl:part element="api:getHealthCareAvailabilityAttributes" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getHealthCareAvailabilityAttributesResponse">
    <wsdl:part element="api:getHealthCareAvailabilityAttributesResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="cancelAppointmentBySms">
    <wsdl:part element="api:cancelAppointmentBySms" name="cancelAppointmentBySms"/>
  </wsdl:message>
  <wsdl:message name="cancelAppointmentBySmsResponse">
    <wsdl:part element="api:cancelAppointmentBySmsResponse" name="cancelAppointmentBySmsResponse"/>
  </wsdl:message>
  <wsdl:message name="cancelAppointmentByID">
    <wsdl:part element="api:cancelAppointmentByID" name="cancelAppointmentByID"/>
  </wsdl:message>
  <wsdl:message name="cancelAppointmentByIDResponse">
    <wsdl:part element="api:cancelAppointmentByIDResponse" name="cancelAppointmentByIDResponse"/>
  </wsdl:message>
  <wsdl:message name="getAssignmentsInfo">
    <wsdl:part element="api:getAssignmentsInfo" name="getAssignmentsInfo"/>
  </wsdl:message>
  <wsdl:message name="getAssignmentsInfoResponse">
    <wsdl:part element="api:getAssignmentsInfoResponse" name="getAssignmentsInfoResponse"/>
  </wsdl:message>
  <wsdl:message name="getDoctorsInfoForLI">
    <wsdl:part element="api:getDoctorsInfoForLI" name="getDoctorsInfoForLI"/>
  </wsdl:message>
  <wsdl:message name="getDoctorsInfoForLIResponse">
    <wsdl:part element="api:getDoctorsInfoForLIResponse" name="getDoctorsInfoForLIResponse"/>
  </wsdl:message>
  <wsdl:message name="getSpecialitiesInfoForGroup">
    <wsdl:part element="api:getSpecialitiesInfoForGroup" name="getSpecialitiesInfoForGroup"/>
  </wsdl:message>
  <wsdl:message name="getSpecialitiesInfoForGroupResponse">
    <wsdl:part element="api:getSpecialitiesInfoForGroupResponse" name="getSpecialitiesInfoForGroupResponse"/>
  </wsdl:message>
  <wsdl:message name="getDoctorsInfoForGroup">
    <wsdl:part element="api:getDoctorsInfoForGroup" name="getDoctorsInfoForGroup"/>
  </wsdl:message>
  <wsdl:message name="getDoctorsInfoForGroupResponse">
    <wsdl:part element="api:getDoctorsInfoForGroupResponse" name="getDoctorsInfoForGroupResponse"/>
  </wsdl:message>
  <wsdl:message name="getAvailableResourceScheduleInfoForGroup">
    <wsdl:part element="api:getAvailableResourceScheduleInfoForGroup" name="getAvailableResourceScheduleInfoForGroup"/>
  </wsdl:message>
  <wsdl:message name="getAvailableResourceScheduleInfoForGroupResponse">
    <wsdl:part element="api:getAvailableResourceScheduleInfoForGroupResponse" name="getAvailableResourceScheduleInfoForGroupResponse"/>
  </wsdl:message>
  <wsdl:message name="createAppointmentForGroup">
    <wsdl:part element="api:createAppointmentForGroup" name="createAppointmentForGroup"/>
  </wsdl:message>
  <wsdl:message name="createAppointmentForGroupResponse">
    <wsdl:part element="api:createAppointmentForGroupResponse" name="createAppointmentForGroupResponse"/>
  </wsdl:message>
  <wsdl:message name="shiftAppointmentForGroup">
    <wsdl:part element="api:shiftAppointmentForGroup" name="shiftAppointmentForGroup"/>
  </wsdl:message>
  <wsdl:message name="shiftAppointmentForGroupResponse">
    <wsdl:part element="api:shiftAppointmentForGroupResponse" name="shiftAppointmentForGroupResponse"/>
  </wsdl:message>
  <wsdl:message name="getArchivedAppointments">
    <wsdl:part element="api:getArchivedAppointments" name="getArchivedAppointments"/>
  </wsdl:message>
  <wsdl:message name="getArchivedAppointmentsResponse">
    <wsdl:part element="api:getArchivedAppointmentsResponse" name="getArchivedAppointmentsResponse"/>
  </wsdl:message>
  <wsdl:portType name="SelfAppointmentServiceV5PT">
    <wsdl:operation name="getHealthCareAvailabilityAttributes">
      <wsdl:input message="tns:getHealthCareAvailabilityAttributes" name="getHealthCareAvailabilityAttributes"/>
      <wsdl:output message="tns:getHealthCareAvailabilityAttributesResponse" name="getHealthCareAvailabilityAttributesResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="createAppointment">
      <wsdl:input message="tns:createAppointment" name="createAppointment"/>
      <wsdl:output message="tns:createAppointmentResponse" name="createAppointmentResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="getAvailableResourceScheduleInfo">
      <wsdl:input message="tns:getAvailableResourceScheduleInfo" name="getAvailableResourceScheduleInfo"/>
      <wsdl:output message="tns:getAvailableResourceScheduleInfoResponse" name="getAvailableResourceScheduleInfoResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="getDoctorsInfo">
      <wsdl:input message="tns:getDoctorsInfo" name="getDoctorsInfo"/>
      <wsdl:output message="tns:getDoctorsInfoResponse" name="getDoctorsInfoResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="getSpecialitiesInfo">
      <wsdl:input message="tns:getSpecialitiesInfo" name="getSpecialitiesInfo"/>
      <wsdl:output message="tns:getSpecialitiesInfoResponse" name="getSpecialitiesInfoResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="shiftAppointment">
      <wsdl:input message="tns:shiftAppointment" name="shiftAppointment"/>
      <wsdl:output message="tns:shiftAppointmentResponse" name="shiftAppointmentResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="cancelAppointment">
      <wsdl:input message="tns:cancelAppointment" name="cancelAppointment"/>
      <wsdl:output message="tns:cancelAppointmentResponse" name="cancelAppointmentResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="getAppointmentReceptionsByPatient">
      <wsdl:input message="tns:getAppointmentReceptionsByPatient" name="getAppointmentReceptionsByPatient"/>
      <wsdl:output message="tns:getAppointmentReceptionsByPatientResponse" name="getAppointmentReceptionsByPatientResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="getReferralsInfo">
      <wsdl:input message="tns:getReferralsInfo" name="getReferralsInfo"/>
      <wsdl:output message="tns:getReferralsInfoResponse" name="getReferralsInfoResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="getDutyARScheduleByPatient">
      <wsdl:input message="tns:getDutyARScheduleByPatient" name="getDutyARScheduleByPatient"/>
      <wsdl:output message="tns:getDutyARScheduleByPatientResponse" name="getDutyARScheduleByPatientResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="createAppointmentToDutyDoctorByPatient">
      <wsdl:input message="tns:createAppointmentToDutyDoctorByPatient" name="createAppointmentToDutyDoctorByPatient"/>
      <wsdl:output message="tns:createAppointmentToDutyDoctorByPatientResponse" name="createAppointmentToDutyDoctorByPatientResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="cancelAppointmentToDutyDoctorByPatient">
      <wsdl:input message="tns:cancelAppointmentToDutyDoctorByPatient" name="cancelAppointmentToDutyDoctorByPatient"/>
      <wsdl:output message="tns:cancelAppointmentToDutyDoctorByPatientResponse" name="cancelAppointmentToDutyDoctorByPatientResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="cancelAppointmentBySms">
      <wsdl:input message="tns:cancelAppointmentBySms" name="cancelAppointmentBySms"/>
      <wsdl:output message="tns:cancelAppointmentBySmsResponse" name="cancelAppointmentBySmsResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="cancelAppointmentByID">
      <wsdl:input message="tns:cancelAppointmentByID" name="cancelAppointmentByID"/>
      <wsdl:output message="tns:cancelAppointmentByIDResponse" name="cancelAppointmentByIDResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="getAssignmentsInfo">
      <wsdl:input message="tns:getAssignmentsInfo" name="getAssignmentsInfo"/>
      <wsdl:output message="tns:getAssignmentsInfoResponse" name="getAssignmentsInfoResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="getDoctorsInfoForLI">
      <wsdl:input message="tns:getDoctorsInfoForLI" name="getDoctorsInfoForLI"/>
      <wsdl:output message="tns:getDoctorsInfoForLIResponse" name="getDoctorsInfoForLIResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="getSpecialitiesInfoForGroup">
      <wsdl:input message="tns:getSpecialitiesInfoForGroup" name="getSpecialitiesInfoForGroup"/>
      <wsdl:output message="tns:getSpecialitiesInfoForGroupResponse" name="getSpecialitiesInfoForGroupResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="getDoctorsInfoForGroup">
      <wsdl:input message="tns:getDoctorsInfoForGroup" name="getDoctorsInfoForGroup"/>
      <wsdl:output message="tns:getDoctorsInfoForGroupResponse" name="getDoctorsInfoForGroupResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="getAvailableResourceScheduleInfoForGroup">
      <wsdl:input message="tns:getAvailableResourceScheduleInfoForGroup" name="getAvailableResourceScheduleInfoForGroup"/>
      <wsdl:output message="tns:getAvailableResourceScheduleInfoForGroupResponse" name="getAvailableResourceScheduleInfoForGroupResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="createAppointmentForGroup">
      <wsdl:input message="tns:createAppointmentForGroup" name="createAppointmentForGroup"/>
      <wsdl:output message="tns:createAppointmentForGroupResponse" name="createAppointmentForGroupResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="shiftAppointmentForGroup">
      <wsdl:input message="tns:shiftAppointmentForGroup" name="shiftAppointmentForGroup"/>
      <wsdl:output message="tns:shiftAppointmentForGroupResponse" name="shiftAppointmentForGroupResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
    <wsdl:operation name="getArchivedAppointments">
      <wsdl:input message="tns:getArchivedAppointments" name="getArchivedAppointments"/>
      <wsdl:output message="tns:getArchivedAppointmentsResponse" name="getArchivedAppointmentsResponse"/>
      <wsdl:fault message="tns:SoapException" name="SoapException"/>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="SelfAppointmentServiceV5Binding" type="tns:SelfAppointmentServiceV5PT">
    <soap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getHealthCareAvailabilityAttributes">
      <soap12:operation soapAction="urn://getHealthCareAvailabilityAttributes"/>
      <wsdl:input name="getHealthCareAvailabilityAttributes">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getHealthCareAvailabilityAttributesResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="cancelAppointment">
      <soap12:operation soapAction="urn://cancelAppointment"/>
      <wsdl:input name="cancelAppointment">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="cancelAppointmentResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getAppointmentReceptionsByPatient">
      <soap12:operation soapAction="urn://getAppointmentReceptionsByPatient"/>
      <wsdl:input name="getAppointmentReceptionsByPatient">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getAppointmentReceptionsByPatientResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getReferralsInfo">
      <soap12:operation soapAction="urn://getReferralsInfo"/>
      <wsdl:input name="getReferralsInfo">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getReferralsInfoResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="createAppointment">
      <soap12:operation soapAction="urn://createAppointment"/>
      <wsdl:input name="createAppointment">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="createAppointmentResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getAvailableResourceScheduleInfo">
      <soap12:operation soapAction="urn://getAvailableResourceScheduleInfo"/>
      <wsdl:input name="getAvailableResourceScheduleInfo">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getAvailableResourceScheduleInfoResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getDoctorsInfo">
      <soap12:operation soapAction="urn://getDoctorsInfo"/>
      <wsdl:input name="getDoctorsInfo">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getDoctorsInfoResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getDoctorsInfoForLI">
      <soap12:operation soapAction="urn://getDoctorsInfoForLI"/>
      <wsdl:input name="getDoctorsInfoForLI">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getDoctorsInfoForLIResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getSpecialitiesInfo">
      <soap12:operation soapAction="urn://getSpecialitiesInfo"/>
      <wsdl:input name="getSpecialitiesInfo">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getSpecialitiesInfoResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="shiftAppointment">
      <soap12:operation soapAction="urn://shiftAppointment"/>
      <wsdl:input name="shiftAppointment">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="shiftAppointmentResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getDutyARScheduleByPatient">
      <soap12:operation soapAction="urn://getDutyARScheduleByPatient"/>
      <wsdl:input name="getDutyARScheduleByPatient">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getDutyARScheduleByPatientResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="createAppointmentToDutyDoctorByPatient">
      <soap12:operation soapAction="urn://createAppointmentToDutyDoctorByPatient"/>
      <wsdl:input name="createAppointmentToDutyDoctorByPatient">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="createAppointmentToDutyDoctorByPatientResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="cancelAppointmentToDutyDoctorByPatient">
      <soap12:operation soapAction="urn://cancelAppointmentToDutyDoctorByPatient"/>
      <wsdl:input name="cancelAppointmentToDutyDoctorByPatient">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="cancelAppointmentToDutyDoctorByPatientResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="cancelAppointmentBySms">
      <soap12:operation soapAction="urn://cancelAppointmentBySms"/>
      <wsdl:input name="cancelAppointmentBySms">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="cancelAppointmentBySmsResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="cancelAppointmentByID">
      <soap12:operation soapAction="urn://cancelAppointmentByID"/>
      <wsdl:input name="cancelAppointmentByID">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="cancelAppointmentByIDResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getAssignmentsInfo">
      <soap12:operation soapAction="urn://getAssignmentsInfo"/>
      <wsdl:input name="getAssignmentsInfo">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getAssignmentsInfoResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getSpecialitiesInfoForGroup">
      <soap12:operation soapAction="urn://getSpecialitiesInfoForGroup"/>
      <wsdl:input name="getSpecialitiesInfoForGroup">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getSpecialitiesInfoForGroupResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getDoctorsInfoForGroup">
      <soap12:operation soapAction="urn://getDoctorsInfoForGroup"/>
      <wsdl:input name="getDoctorsInfoForGroup">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getDoctorsInfoForGroupResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getAvailableResourceScheduleInfoForGroup">
      <soap12:operation soapAction="urn://getAvailableResourceScheduleInfoForGroup"/>
      <wsdl:input name="getAvailableResourceScheduleInfoForGroup">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getAvailableResourceScheduleInfoForGroupResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="createAppointmentForGroup">
      <soap12:operation soapAction="urn://createAppointmentForGroup"/>
      <wsdl:input name="createAppointmentForGroup">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="createAppointmentForGroupResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="shiftAppointmentForGroup">
      <soap12:operation soapAction="urn://shiftAppointmentForGroup"/>
      <wsdl:input name="shiftAppointmentForGroup">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="shiftAppointmentForGroupResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getArchivedAppointments">
      <soap12:operation soapAction="urn://getArchivedAppointments"/>
      <wsdl:input name="getArchivedAppointments">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getArchivedAppointmentsResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SoapException">
        <soap12:fault name="SoapException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="SelfAppointmentServiceV5">
    <wsdl:port binding="tns:SelfAppointmentServiceV5Binding" name="SelfAppointmentServiceV5PTB">
      <soap12:address location="http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELvH8olfvFUzUOzR9Es_rBviwyrRrnxXTOMZf1KYWzL6hlqv_eyPYq5HlejT1ROkMeQ--</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://api.service.soap.emias.lanit.ru/v5/" version="5.2" xmlns:core="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns1="http://api.service.soap.emias.lanit.ru/v5/" xmlns:tns="http://api.service.soap.emias.lanit.ru/v5/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import namespace="http://api.service.soap.emias.lanit.ru/core/v5/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELs3rrVnLFkjJMy5mDfngAN2826cviAmOKcwB0rpK0eO9luhxWIPHWt9l0e4P44rDtQmP"/>
  <!--======================== Элементы =====================================-->
  <!--Отмена записи на прием-->
  <xs:element name="cancelAppointment" type="tns:cancelAppointment"/>
  <xs:element name="cancelAppointmentResponse" type="tns:cancelAppointmentResponse"/>
  <!--Создание записи на прием2-->
  <xs:element name="createAppointment" type="tns:createAppointment"/>
  <xs:element name="createAppointmentResponse" type="tns:createAppointmentResponse"/>
  <!--Получение списка записей для пациента-->
  <xs:element name="getAppointmentReceptionsByPatient" type="tns:getAppointmentReceptionsByPatient"/>
  <xs:element name="getAppointmentReceptionsByPatientResponse" type="tns:getAppointmentReceptionsByPatientResponse"/>
  <!--Получение расписания врача-->
  <xs:element name="getAvailableResourceScheduleInfo" type="tns:getAvailableResourceScheduleInfo"/>
  <xs:element name="getAvailableResourceScheduleInfoResponse" type="tns:getAvailableResourceScheduleInfoResponse"/>
  <!--Получение списка врачей-->
  <xs:element name="getDoctorsInfo" type="tns:getDoctorsInfo"/>
  <xs:element name="getDoctorsInfoResponse" type="tns:getDoctorsInfoResponse"/>
  <!--Получение направлений для пациента-->
  <xs:element name="getReferralsInfo" type="tns:getReferralsInfo"/>
  <xs:element name="getReferralsInfoResponse" type="tns:getReferralsInfoResponse"/>
  <!--Получение списка специальностей-->
  <xs:element name="getSpecialitiesInfo" type="tns:getSpecialitiesInfo"/>
  <xs:element name="getSpecialitiesInfoResponse" type="tns:getSpecialitiesInfoResponse"/>
  <!--Перенос записи на прием-->
  <xs:element name="shiftAppointment" type="tns:shiftAppointment"/>
  <xs:element name="shiftAppointmentResponse" type="tns:shiftAppointmentResponse"/>
  <!--Предоставление расписания ближайшего доступного ДВ-->
  <xs:element name="getDutyARScheduleByPatient" type="tns:getDutyARScheduleByPatient"/>
  <xs:element name="getDutyARScheduleByPatientResponse" type="tns:getDutyARScheduleByPatientResponse"/>
  <!--Создание записи к ДВ-->
  <xs:element name="createAppointmentToDutyDoctorByPatient" type="tns:createAppointmentToDutyDoctorByPatient"/>
  <xs:element name="createAppointmentToDutyDoctorByPatientResponse" type="tns:createAppointmentToDutyDoctorByPatientResponse"/>
  <!--Отмена записи к ДВ-->
  <xs:element name="cancelAppointmentToDutyDoctorByPatient" type="tns:cancelAppointmentToDutyDoctorByPatient"/>
  <xs:element name="cancelAppointmentToDutyDoctorByPatientResponse" type="tns:cancelAppointmentToDutyDoctorByPatientResponse"/>
  <!--Предоставление ожидания по самозаписи-->
  <xs:element name="getHealthCareAvailabilityAttributes" type="tns:getHealthCareAvailabilityAttributes"/>
  <xs:element name="getHealthCareAvailabilityAttributesResponse" type="tns:getHealthCareAvailabilityAttributesResponse"/>
  <!--Отмена записи к ДВ-->
  <xs:element name="cancelAppointmentBySms" type="tns:cancelAppointmentBySms"/>
  <xs:element name="cancelAppointmentBySmsResponse" type="tns:cancelAppointmentBySmsResponse"/>
  <!--Отмена записи на прием (вариант 2, для ЦТО)-->
  <xs:element name="cancelAppointmentByID" type="tns:cancelAppointmentByID"/>
  <xs:element name="cancelAppointmentByIDResponse" type="tns:cancelAppointmentByIDResponse"/>
  <!--Предоставление перечня активных назначений пациента на ЛИ-->
  <xs:element name="getAssignmentsInfo" type="tns:getAssignmentsInfo"/>
  <xs:element name="getAssignmentsInfoResponse" type="tns:getAssignmentsInfoResponse"/>
  <!--Получение ДР на лабораторные исследования-->
  <xs:element name="getDoctorsInfoForLI" type="tns:getDoctorsInfoForLI"/>
  <xs:element name="getDoctorsInfoForLIResponse" type="tns:getDoctorsInfoForLIResponse"/>
  <!--Предоставление перечня специальностей доступных для самозаписи группой пациентов-->
  <xs:element name="getSpecialitiesInfoForGroup" type="tns:getSpecialitiesInfoForGroup"/>
  <xs:element name="getSpecialitiesInfoForGroupResponse" type="tns:getSpecialitiesInfoForGroupResponse"/>
  <!--Предоставление перечня ДР, к которым разрешена самозапись пациента-->
  <xs:element name="getDoctorsInfoForGroup" type="tns:getDoctorsInfoForGroup"/>
  <xs:element name="getDoctorsInfoForGroupResponse" type="tns:getDoctorsInfoForGroupResponse"/>
  <!--Предоставление расписания доступного ресурса и его слотов, доступных для самозаписи группе пациентов-->
  <xs:element name="getAvailableResourceScheduleInfoForGroup" type="tns:getAvailableResourceScheduleInfoForGroup"/>
  <xs:element name="getAvailableResourceScheduleInfoForGroupResponse" type="tns:getAvailableResourceScheduleInfoForGroupResponse"/>
  <!--Создание несколько записей-->
  <xs:element name="createAppointmentForGroup" type="tns:createAppointmentForGroup"/>
  <xs:element name="createAppointmentForGroupResponse" type="tns:createAppointmentForGroupResponse"/>
  <!--Перенос нескольких записей-->
  <xs:element name="shiftAppointmentForGroup" type="tns:shiftAppointmentForGroup"/>
  <xs:element name="shiftAppointmentForGroupResponse" type="tns:shiftAppointmentForGroupResponse"/>
  <!--Получение отмененных и архивных записей пациента-->
  <xs:element name="getArchivedAppointments" type="tns:getArchivedAppointments"/>
  <xs:element name="getArchivedAppointmentsResponse" type="tns:getArchivedAppointmentsResponse"/>
  <!--======================== Ошибки =====================================-->
  <xs:element name="soapException" nillable="false" type="tns:soapException"/>
  <xs:element name="appointmentCodeErrorFaultInfo" type="tns:appointmentCodeErrorFaultInfo"/>
  <!--======================== Типы данных =====================================-->
  <xs:complexType name="availableResourceBasis">
    <xs:sequence>
      <xs:element minOccurs="0" name="referralId" type="xs:string">
        <xs:annotation>
          <xs:documentation>Идентификатор направления, по которому осуществлялся подбор ДР</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="medSpecialityAttachment" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак записи по прикреплению к специальности</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="specialityId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД специализации ДР, по которой осуществлялся подбор ДР</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="ldpId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД вида ЛДП</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="samplingTypeId" type="xs:long">
        <xs:annotation>
          <xs:documentation>Профиль взятия</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:simpleType name="referralType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="REF_TO_DOCTOR"/>
      <xs:enumeration value="REF_TO_LDP"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="signActiveArchiveType">
    <xs:annotation>
      <xs:documentation>Признак «Архивные и отмененные записи»</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:long">
      <xs:enumeration value="0"/>
      <xs:enumeration value="1"/>
      <xs:enumeration value="2"/>
      <xs:minInclusive value="0"/>
      <xs:maxInclusive value="2"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="baseDto">
    <xs:sequence/>
  </xs:complexType>
  <xs:complexType name="ldpType">
    <xs:sequence>
      <xs:element name="id" type="xs:string"/>
      <xs:element name="code" type="xs:string"/>
      <xs:element name="name" type="xs:string"/>
      <xs:element minOccurs="0" name="procedure" type="xs:boolean"/>
      <xs:element minOccurs="0" name="investigation" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="lpuType">
    <xs:sequence>
      <xs:element name="code" type="xs:string"/>
      <xs:element name="name" type="xs:string"/>
      <xs:element minOccurs="0" name="ambulatory" type="xs:string"/>
      <xs:element minOccurs="0" name="patientSign" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="referral">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="number" type="xs:string"/>
      <xs:element minOccurs="0" name="comment" type="xs:string"/>
      <xs:element name="startTime" type="xs:date"/>
      <xs:element name="endTime" type="xs:date"/>
      <xs:element minOccurs="0" name="type" type="xs:string"/>
      <xs:element minOccurs="0" name="lpuId" type="xs:long"/>
      <xs:element minOccurs="0" name="lpuType" type="xs:string"/>
      <xs:element minOccurs="0" name="lpuName" type="xs:string"/>
      <xs:element minOccurs="0" name="availableResourceId" type="xs:long"/>
      <xs:element minOccurs="0" name="toDoctor" type="tns:toDoctor"/>
      <xs:element minOccurs="0" name="toLdp" type="tns:toLdp"/>
      <xs:element minOccurs="0" name="diagnosis" type="tns:diagnosis">
        <xs:annotation>
          <xs:documentation>Информация о диагнозе</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="issuedDoctor" type="tns:jobInfo">
        <xs:annotation>
          <xs:documentation>Информация о враче, выдавшем направление/назначение</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="countActiveAppointment" type="xs:int"/>
      <xs:element name="countAppointmentWithReceptionFact" type="xs:int"/>
      <xs:element minOccurs="0" name="invalid" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="referralDesc">
    <xs:sequence>
      <xs:element name="referralId" type="xs:long"/>
      <xs:element name="startTime" type="xs:date"/>
      <xs:element name="endTime" type="xs:date"/>
      <xs:element minOccurs="0" name="availableResourceId" type="xs:long"/>
      <xs:element minOccurs="0" name="lpuId" type="xs:long"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="appointmentDesc">
    <xs:sequence>
      <xs:element name="appointmentId" type="xs:long"/>
      <xs:element name="appointmentNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="patient" type="tns:patientShort"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="scheduleOfDay">
    <xs:sequence>
      <xs:element name="date" type="xs:date"/>
      <xs:element maxOccurs="unbounded" name="scheduleBySlot" type="tns:scheduleBySlot"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="medicalSpeciality">
    <xs:sequence>
      <xs:element name="code" type="xs:string"/>
      <xs:element name="name" type="xs:string"/>
      <xs:element minOccurs="0" name="male" type="xs:boolean"/>
      <xs:element minOccurs="0" name="female" type="xs:boolean"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="areaType" type="xs:string"/>
      <xs:element minOccurs="0" name="onlyByRefferal" type="xs:boolean"/>
      <xs:element minOccurs="0" name="therapeutic" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="toDoctor">
    <xs:sequence>
      <xs:element name="specialityId" type="xs:long"/>
      <xs:element name="specialityName" type="xs:string"/>
      <xs:element minOccurs="0" name="doctorFio" type="xs:string"/>
      <xs:element name="receptionTypeId" type="xs:long"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="toLdp">
    <xs:sequence>
      <xs:element name="ldpTypeId" type="xs:long"/>
      <xs:element name="ldpTypeName" type="xs:string"/>
      <xs:element minOccurs="0" name="countAssignmentProcedures" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="diagnosis">
    <xs:sequence>
      <xs:element name="code" type="xs:string">
        <xs:annotation>
          <xs:documentation>Код по МКБ-10</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="name" type="xs:string">
        <xs:annotation>
          <xs:documentation>Наименование диагноза</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="jobInfo">
    <xs:sequence>
      <xs:element name="jobExecutionId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД_Исполнение должности</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="fio" type="xs:string">
        <xs:annotation>
          <xs:documentation>Фамилия Имя Отчество</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="snils" type="xs:string">
        <xs:annotation>
          <xs:documentation>СНИЛС</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="specialityId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД_Специальность</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="specialityName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Наименование специальности</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="appointmentReception">
    <xs:sequence>
      <xs:element name="appointmentId" type="xs:long"/>
      <xs:element minOccurs="0" name="appointmentNumber" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="appointment">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="number" type="xs:string"/>
      <xs:element minOccurs="0" name="liveQueueTicketId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД талона в ЖО</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="liveQueueTicketNumber" type="xs:string">
        <xs:annotation>
          <xs:documentation>Номер талона в ЖО</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="lpuId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД ЛПУ</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="typeLpu" type="xs:string"/>
      <xs:element name="nameLpu" type="xs:string"/>
      <xs:element name="lpuAddress" type="xs:string"/>
      <xs:element name="startTime" type="xs:dateTime"/>
      <xs:element name="endTime" type="xs:dateTime"/>
      <xs:element name="type" type="xs:string"/>
      <xs:element minOccurs="0" name="enableCancel" type="xs:boolean"/>
      <xs:element minOccurs="0" name="enableShift" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Разрешен ли перенос</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="availableResourceId" type="xs:long"/>
      <xs:element name="complexResourceId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД КР</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="roomId" type="xs:long"/>
      <xs:element minOccurs="0" name="roomNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="addressPointId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД Адресной точки кабинета</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="toDoctor" type="tns:toDoctor"/>
      <xs:element minOccurs="0" name="toLdp" type="tns:toLdp"/>
      <xs:element minOccurs="0" name="toBM" type="ns1:SamplingType"/>
      <xs:element name="statusId" type="xs:int"/>
      <xs:element minOccurs="0" name="referral" type="tns:referralDesc">
        <xs:annotation>
          <xs:documentation>Направление</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="eno" type="xs:string"/>
      <xs:element minOccurs="0" name="cancelInfo" type="ns1:cancelInfo"/>
      <xs:element minOccurs="0" name="receptionFactId" type="xs:long"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="cancelInfo">
    <xs:sequence>
      <xs:element name="cancelReasonId" type="xs:long"/>
      <xs:element name="cancelReasonDesc" type="xs:string"/>
      <xs:element minOccurs="0" name="cancelTime" type="xs:dateTime"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="appointmentReceptionToDoctor">
    <xs:sequence>
      <xs:element minOccurs="0" name="doctorSpecialityCode" type="xs:string"/>
      <xs:element minOccurs="0" name="doctorSpeciality" type="xs:string"/>
      <xs:element minOccurs="0" name="doctorFio" type="xs:string"/>
      <xs:element minOccurs="0" name="viewReceptionCode" type="xs:string"/>
      <xs:element minOccurs="0" name="room" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="availableResource">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element minOccurs="0" name="lpuId" type="xs:long"/>
      <xs:element minOccurs="0" name="name" type="xs:string"/>
      <xs:element name="arType" type="xs:int"/>
      <xs:element minOccurs="0" name="specialityChangeAbility" type="xs:boolean"/>
      <xs:element minOccurs="0" name="arSpecialityId" type="xs:long"/>
      <xs:element minOccurs="0" name="arSpecialityName" type="xs:string"/>
      <xs:element minOccurs="0" name="mainDoctor" type="ns1:mainDoctor"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="receptionType" type="ns1:receptionType"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="ldpType" type="ns1:ldpTypeForAr"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="samplingType" type="ns1:SamplingType"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="complexResource" type="ns1:complexResource"/>
      <xs:element default="false" name="district" type="xs:boolean"/>
      <xs:element default="false" name="replacement" type="xs:boolean"/>
      <xs:element minOccurs="0" name="nondistrict" type="xs:boolean"/>
      <xs:element default="false" name="availableByReferral" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DutyARScheduleInfo">
    <xs:sequence>
      <xs:element name="startTime" type="xs:time"/>
      <xs:element name="endTime" type="xs:time"/>
      <xs:element name="existedLiveQueueTickets" type="xs:int"/>
      <xs:element name="availableResource" type="tns:availableResource"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ResultCreationAppointmentToDutyDoctor">
    <xs:sequence>
      <xs:element name="appointmentDesc" type="tns:appointmentDesc"/>
      <xs:element name="liveQueueTicketId" type="xs:long"/>
      <xs:element name="liveQueueTicketNumber" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="createAppointment">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:element name="availableResourceId" type="xs:long"/>
      <xs:element name="complexResourceId" type="xs:long"/>
      <xs:element name="startTime" type="xs:dateTime"/>
      <xs:element name="endTime" type="xs:dateTime"/>
      <xs:choice minOccurs="0">
        <xs:element name="referralId" type="xs:long"/>
        <xs:element name="receptionTypeId" type="xs:long"/>
      </xs:choice>
      <xs:element name="externalSystemId" type="xs:string"/>
      <xs:element minOccurs="0" name="eno" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="createAppointmentResponse">
    <xs:sequence>
      <xs:element name="appointmentDesc" type="ns1:appointmentDesc"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getAppointmentReceptionsByPatient">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:element name="externalSystemId" type="xs:string"/>
      <xs:element minOccurs="0" name="signActiveArchive" type="tns:signActiveArchiveType"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getAppointmentReceptionsByPatientResponse">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="appointment" type="tns:appointment"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getAvailableResourceScheduleInfo">
    <xs:sequence>
      <xs:element name="availableResourceId" type="xs:long"/>
      <xs:element minOccurs="0" name="complexResourceId" type="xs:long"/>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:element minOccurs="0" name="referralId" type="xs:long"/>
      <xs:element minOccurs="0" name="period" type="ns1:DatePeriod"/>
      <xs:element minOccurs="0" name="appointmentId" type="xs:long"/>
      <xs:element minOccurs="0" name="quotaTypes" type="tns:quotaTypes"/>
      <xs:element minOccurs="0" name="disableQuotaTypes" type="tns:quotaTypes"/>
      <xs:element name="externalSystemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getAvailableResourceScheduleInfoResponse">
    <xs:sequence>
      <xs:element minOccurs="0" name="return" type="tns:availableResourceScheduleBySlots"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getDoctorsInfo">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:choice>
        <xs:element name="appointmentId" type="xs:long"/>
        <xs:element name="referralId" type="xs:long"/>
        <xs:element name="specialityId" type="xs:long"/>
      </xs:choice>
      <xs:element minOccurs="0" name="includeArWithoutSlots" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>По умолчанию - true</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="quotaTypes" type="tns:quotaTypes"/>
      <xs:element minOccurs="0" name="disableQuotaTypes" type="tns:quotaTypes"/>
      <xs:element name="externalSystemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="quotaTypes">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="quotaType" type="xs:long"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getDoctorsInfoResponse">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="availableResource" type="tns:availableResource"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getReferralsInfo">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:element minOccurs="0" name="returnExtended" type="xs:boolean"/>
      <xs:element name="externalSystemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getReferralsInfoResponse">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="referral" type="tns:referral"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getSpecialitiesInfo">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:element minOccurs="0" name="quotaTypes" type="tns:quotaTypes"/>
      <xs:element minOccurs="0" name="disableQuotaTypes" type="tns:quotaTypes"/>
      <xs:element name="externalSystemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getSpecialitiesInfoResponse">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="medicalSpeciality" type="tns:medicalSpeciality"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="shiftAppointment">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:element name="availableResourceId" type="xs:long"/>
      <xs:element minOccurs="0" name="complexResourceId" type="xs:long"/>
      <xs:element name="startTime" type="xs:dateTime"/>
      <xs:element name="endTime" type="xs:dateTime"/>
      <xs:choice minOccurs="0">
        <xs:element name="referralId" type="xs:long"/>
        <xs:element name="receptionTypeId" type="xs:long"/>
      </xs:choice>
      <xs:element name="appointmentId" type="xs:long"/>
      <xs:element name="externalSystemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="shiftAppointmentResponse">
    <xs:sequence>
      <xs:element name="return" type="tns:appointmentDesc"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="cancelAppointment">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:element name="appointmentId" type="xs:long"/>
      <xs:element name="externalSystemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="cancelAppointmentResponse">
    <xs:sequence>
      <xs:element name="return" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getDutyARScheduleByPatient">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:element name="externalSystemId" type="xs:string"/>
      <xs:element name="lpuId" type="xs:long"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getDutyARScheduleByPatientResponse">
    <xs:sequence>
      <xs:element name="return" type="tns:DutyARScheduleInfo"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="createAppointmentToDutyDoctorByPatient">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:element name="externalSystemId" type="xs:string"/>
      <xs:element name="lpuId" type="xs:long"/>
      <xs:element name="availableResourceId" type="xs:long"/>
      <xs:element name="complexResourceId" type="xs:long"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="createAppointmentToDutyDoctorByPatientResponse">
    <xs:sequence>
      <xs:element name="return" type="tns:ResultCreationAppointmentToDutyDoctor"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="cancelAppointmentToDutyDoctorByPatient">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:element name="externalSystemId" type="xs:string"/>
      <xs:element name="appointmentId" type="xs:long"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="cancelAppointmentToDutyDoctorByPatientResponse">
    <xs:sequence>
      <xs:element name="return" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getHealthCareAvailabilityAttributes">
    <xs:sequence>
      <xs:element name="patientId" type="xs:long">
        <xs:annotation>
          <xs:documentation>Идентификатор пациента</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:choice minOccurs="0">
        <xs:element name="referralId" type="xs:long"/>
        <xs:element name="specialityId" type="xs:long"/>
        <xs:element name="ldpId" type="xs:long"/>
        <xs:element name="samplingTypeId" type="xs:long"/>
      </xs:choice>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getHealthCareAvailabilityAttributesResponse">
    <xs:sequence>
      <xs:element minOccurs="0" name="availabilityInfo" type="tns:availabilityInfo"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="availabilityInfo">
    <xs:sequence>
      <xs:element name="nearestAppointmentDate" type="xs:dateTime">
        <xs:annotation>
          <xs:documentation>Дата и время ближайшего свободного талона</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="availableResourceBasis" type="tns:availableResourceBasis">
        <xs:annotation>
          <xs:documentation>Группирующая сущность: основание для подбора ДР</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="externalSystemId" type="xs:string">
        <xs:annotation>
          <xs:documentation>ИД внешней системы, через которую осуществлялся подбор ДР</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="creationDate" type="xs:dateTime">
        <xs:annotation>
          <xs:documentation>Дата и время создания записи</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="ldpId" type="xs:long"/>
      <xs:element minOccurs="0" name="nearestMainDoctorDate" type="xs:dateTime">
        <xs:annotation>
          <xs:documentation>Дата и время ближайшего свободного талона основного врача</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="nearestReplacementDoctorDate" type="xs:dateTime">
        <xs:annotation>
          <xs:documentation>Дата и время ближайшего свободного талона замещающего врача</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="cancelAppointmentBySms">
    <xs:sequence>
      <xs:element name="patientPhoneNumber" type="xs:string"/>
      <xs:element name="message" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="cancelAppointmentBySmsResponse">
    <xs:sequence>
      <xs:element name="return" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="cancelAppointmentByID">
    <xs:sequence>
      <xs:element name="appointmentId" type="xs:long"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="cancelAppointmentByIDResponse">
    <xs:sequence>
      <xs:element name="return" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getAssignmentsInfo">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string">
        <xs:annotation>
          <xs:documentation>Номер полиса ОМС</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string">
        <xs:annotation>
          <xs:documentation>Серия полиса ОМС</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="birthDate" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата рождения пациента</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element default="false" minOccurs="0" name="returnExtended" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Вернуть расширенную версию направления</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="externalSystemId" type="xs:string">
        <xs:annotation>
          <xs:documentation>Обозначение внешней системы</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getAssignmentsInfoResponse">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="assignment" type="ns1:AssignmentGroup">
        <xs:annotation>
          <xs:documentation>Активные назначения пациента</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getDoctorsInfoForLI">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:element name="assignment" type="ns1:Assignment">
        <xs:annotation>
          <xs:documentation>Назначение</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="appointmentId" type="xs:long"/>
      <xs:element name="externalSystemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getDoctorsInfoForLIResponse">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="availableResource" type="tns:availableResource"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getSpecialitiesInfoForGroup">
    <xs:sequence>
      <xs:element maxOccurs="10" minOccurs="2" name="patientGroupEntry" type="tns:patientGroupEntry"/>
      <xs:element minOccurs="0" name="quotaTypes" type="tns:quotaTypes"/>
      <xs:element minOccurs="0" name="disableQuotaTypes" type="tns:quotaTypes"/>
      <xs:element name="externalSystemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getSpecialitiesInfoForGroupResponse">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="medicalSpeciality" type="tns:medicalSpeciality"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getDoctorsInfoForGroup">
    <xs:sequence>
      <xs:element maxOccurs="10" minOccurs="2" name="patientGroupEntry">
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="tns:patientGroupEntry">
              <xs:sequence>
                <xs:element minOccurs="0" name="appointmentId" type="xs:long"/>
              </xs:sequence>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element minOccurs="0" name="quotaTypes" type="tns:quotaTypes"/>
      <xs:element minOccurs="0" name="disableQuotaTypes" type="tns:quotaTypes"/>
      <xs:element name="specialityId" type="xs:long"/>
      <xs:element name="externalSystemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getDoctorsInfoForGroupResponse">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="availableResource" type="tns:availableResource"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getAvailableResourceScheduleInfoForGroup">
    <xs:sequence>
      <xs:element name="availableResourceId" type="xs:long"/>
      <xs:element maxOccurs="10" minOccurs="2" name="patientGroupEntry">
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="tns:patientGroupEntry">
              <xs:sequence>
                <xs:element minOccurs="0" name="appointmentId" type="xs:long"/>
              </xs:sequence>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element minOccurs="0" name="quotaTypes" type="tns:quotaTypes"/>
      <xs:element minOccurs="0" name="disableQuotaTypes" type="tns:quotaTypes"/>
      <xs:element name="externalSystemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getAvailableResourceScheduleInfoForGroupResponse">
    <xs:sequence>
      <xs:element minOccurs="0" name="return" type="tns:availableResourceScheduleBySlots"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="createAppointmentForGroup">
    <xs:sequence>
      <xs:element maxOccurs="10" minOccurs="2" name="patientGroupEntry">
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="tns:patientGroupEntry">
              <xs:sequence>
                <xs:element name="appTime" type="tns:TimeInterval"/>
                <xs:element name="complexResourceId" type="xs:long"/>
              </xs:sequence>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="availableResourceId" type="xs:long"/>
      <xs:element name="receptionTypeId" type="xs:long"/>
      <xs:element name="externalSystemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="createAppointmentForGroupResponse">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="appointmentDesc" type="ns1:appointmentDesc"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="shiftAppointmentForGroup">
    <xs:sequence>
      <xs:element maxOccurs="10" minOccurs="2" name="patientGroupEntry">
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="tns:patientGroupEntry">
              <xs:sequence>
                <xs:element name="appTime" type="tns:TimeInterval"/>
                <xs:element name="complexResourceId" type="xs:long"/>
                <xs:element name="appointmentId" type="xs:long"/>
              </xs:sequence>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="availableResourceId" type="xs:long"/>
      <xs:element name="receptionTypeId" type="xs:long"/>
      <xs:element name="externalSystemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="shiftAppointmentForGroupResponse">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="appointmentDesc" type="tns:appointmentDesc"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getArchivedAppointments">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
      <xs:element minOccurs="0" name="period" type="ns1:DatePeriodOptional"/>
      <xs:element name="externalSystemId" type="xs:string"/>
      <xs:element minOccurs="0" name="pagingOptions" type="core:PagingOptions"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getArchivedAppointmentsResponse">
    <xs:sequence>
      <xs:element name="result" type="tns:AppointmentListPage"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="AppointmentListPage">
    <xs:annotation>
      <xs:documentation>Страница Списка записей</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="core:PagingResults">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="appointment" type="tns:appointment">
            <xs:annotation>
              <xs:documentation>Сведения о Записи</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="appointmentCodeErrorFaultInfo">
    <xs:annotation>
      <xs:documentation>Error</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="code" type="xs:string"/>
      <xs:element name="messageText" type="xs:string"/>
      <xs:element minOccurs="0" name="userId" type="xs:string"/>
      <xs:element minOccurs="0" name="operation" type="xs:string"/>
      <xs:element minOccurs="0" name="resource" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="availableResourceScheduleBySlots">
    <xs:sequence>
      <xs:element name="availableResource" type="ns1:availableResource"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="scheduleOfDay" type="ns1:scheduleOfDay"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="appointmentLock">
    <xs:sequence>
      <xs:element name="appointmentId" type="xs:long"/>
      <xs:element minOccurs="0" name="arSpecialityId" type="xs:long"/>
      <xs:element minOccurs="0" name="arSamplingTypeId" type="xs:long"/>
      <xs:element minOccurs="0" name="lpuId" type="xs:long"/>
      <xs:element minOccurs="0" name="patient" type="tns:patientShort"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="scheduleBySlot">
    <xs:sequence>
      <xs:element name="complexResourceId" type="xs:long"/>
      <xs:element name="cabinetNumber" type="xs:string"/>
      <xs:element maxOccurs="unbounded" name="slot" type="ns1:slot"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="slot">
    <xs:sequence>
      <xs:element name="startTime" type="xs:dateTime"/>
      <xs:element name="endTime" type="xs:dateTime"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="mainDoctor">
    <xs:sequence>
      <xs:element minOccurs="0" name="specialityName" type="xs:string"/>
      <xs:element name="specialityId" type="xs:long"/>
      <xs:element name="firstName" type="xs:string"/>
      <xs:element name="lastName" type="xs:string"/>
      <xs:element minOccurs="0" name="secondName" type="xs:string"/>
      <xs:element name="mejiId" type="xs:long"/>
      <xs:element name="employeeId" type="xs:long"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="Assignment">
    <xs:sequence>
      <xs:element name="moId" type="xs:long"/>
      <xs:element name="samplingTypeId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД профиля взятия БМ</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="period" type="ns1:DatePeriod"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="AssignmentGroup">
    <xs:sequence>
      <xs:element name="moId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД МО принимающее (головное ЛПУ куста)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="toBM" type="ns1:SamplingType">
        <xs:annotation>
          <xs:documentation>Профиль взятия БМ</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="period" type="ns1:DatePeriod">
        <xs:annotation>
          <xs:documentation>Период действия назначения</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="active" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак активности назначения</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="appointmentAvailable" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак возможности создать запись</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="appointmentId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД активной записи по данному назначению</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" name="registryEntry" type="ns1:registryEntry">
        <xs:annotation>
          <xs:documentation>Реестровые записи</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DatePeriod">
    <xs:sequence>
      <xs:element name="dateFrom" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата начала периода</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="dateTo" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата окончания периода</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="registryEntry">
    <xs:sequence>
      <xs:element name="entryId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД реестровой записи</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="laboratoryId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД лабораторного исследования</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="laboratoryName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Наименование ЛИ (краткое)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="biomaterialId" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД биоматериала</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="biomaterialName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Наименование биоматериала</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="hasMemo" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак наличия памятки</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="diagnosis" type="ns1:diagnosis">
        <xs:annotation>
          <xs:documentation>Информация о диагнозе</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="issuedDoctor" type="ns1:jobInfo">
        <xs:annotation>
          <xs:documentation>Информация о назначившем враче</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="receptionType">
    <xs:sequence>
      <xs:element name="code" type="xs:string"/>
      <xs:element name="name" type="xs:string"/>
      <xs:element minOccurs="0" name="primary" type="xs:string"/>
      <xs:element minOccurs="0" name="home" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ldpTypeForAr">
    <xs:sequence>
      <xs:element name="code" type="xs:string"/>
      <xs:element name="name" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="complexResource">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="name" type="xs:string"/>
      <xs:element minOccurs="0" name="room" type="ns1:room"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="room">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element minOccurs="0" name="number" type="xs:string"/>
      <xs:element minOccurs="0" name="lpuId" type="xs:long"/>
      <xs:element minOccurs="0" name="lpuShortName" type="xs:string"/>
      <xs:element minOccurs="0" name="addressPointId" type="xs:long"/>
      <xs:element minOccurs="0" name="defaultAddress" type="xs:string"/>
      <xs:element name="availabilityDate" type="xs:dateTime"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="SamplingType">
    <xs:sequence>
      <xs:element name="id" type="xs:long">
        <xs:annotation>
          <xs:documentation>ИД профиля взятия БМ</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="name" type="xs:string">
        <xs:annotation>
          <xs:documentation>Название профиля</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="self" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак самовзятого БМ</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="soapException">
    <xs:sequence>
      <xs:element name="code" type="xs:string"/>
      <xs:element name="text" type="xs:string"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="appointmentLock" type="tns:appointmentLock"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="patientGroupError" type="tns:patientShort"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="patientShort">
    <xs:sequence>
      <xs:element minOccurs="0" name="patientId" type="xs:long"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="patientGroupEntry">
    <xs:sequence>
      <xs:element name="omsNumber" type="xs:string"/>
      <xs:element minOccurs="0" name="omsSeries" type="xs:string"/>
      <xs:element name="birthDate" type="xs:date"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="TimeInterval">
    <xs:sequence>
      <xs:element name="start" type="xs:dateTime"/>
      <xs:element name="end" type="xs:dateTime"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DatePeriodOptional">
    <xs:annotation>
      <xs:documentation>Описывает календарный период</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="dateFrom" type="xs:date"/>
      <xs:element minOccurs="0" name="dateTo" type="xs:date"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELs3rrVnLFkjJMy5mDfngAN2826cviAmOKcwB0rpK0eO9luhxWIPHWt9l0e4P44rDtQmP</con:url><con:content>&lt;xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://api.service.soap.emias.lanit.ru/core/v5/" version="1.0" xmlns="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:xs="http://www.w3.org/2001/XMLSchema">&#13;
  &lt;xs:include schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELsf0p1DdS1_UID8nCZurCtixl_TVFNCF.Zm2IERIorUG3w--"/>&#13;
&lt;/xs:schema></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELsf0p1DdS1_UID8nCZurCtixl_TVFNCF.Zm2IERIorUG3w--</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.2" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELsf0p1DdS0_CIS5sEoTzQ4Wty6YHlLYutqNN7wO_MFN0JMBt"/>
  <!--references-->
  <xs:element name="mail" type="Mail">
    <xs:annotation>
      <xs:documentation>Адрес электронной почты</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="medicalOrganizationId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор Медицинской организации</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="medicalFacilityId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор Медицинского учреждения</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="compositionId" type="GUID">
    <xs:annotation>
      <xs:documentation>Идентификатор Композиции Think!EHR ЕМИАС.СИМИ</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="simiDocumentId" type="GUID">
    <xs:annotation>
      <xs:documentation>Идентификатор Документа СИМИ ЕМИАС.СИМИ</xs:documentation>
    </xs:annotation>
  </xs:element>
  <!--abstract types-->
  <xs:complexType abstract="true" name="Base">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип, используемый для описания компонентов сущностей, владельцеми которых является текущий продукт ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:attribute name="id" type="ID" use="required">
      <xs:annotation>
        <xs:documentation>Идентификатор сущности/записи на уровне всего ЕМИАС</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType abstract="true" name="EntityBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип, используемый для описания сущностей, владельцем которых является текущий продукт ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Base">
        <xs:attribute name="archived" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Признак "Архивная сущность"</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="ForeignBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип, используемый для описания компонентов сущностей, владельцами которых являются другие продукты ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Base"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="ForeignEntityBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип, используемый для описания сущностей, владельцами которых являются другие продукты ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="EntityBase"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="NsiBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип, используемый для описания типов, реализующих справочники ЕМИАС.НСИ.2</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="ForeignEntityBase">
        <xs:sequence>
          <xs:element name="title" type="xs:string">
            <xs:annotation>
              <xs:documentation>Наименование элемента справочника</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="NsiWithCodeBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип, используемый для описания типов, реализующих справочники ЕМИАС.НСИ.2, в которых имеется бизнес-код</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="NsiBase">
        <xs:attribute name="code" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Бизнес-код</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="SIMIDocumentBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип, используемый для описания cведений о документе СИМИ</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element ref="simiDocumentId"/>
      <xs:element minOccurs="0" ref="compositionId"/>
    </xs:sequence>
  </xs:complexType>
  <!--async operation status-->
  <xs:element name="operationId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор операции</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="OperationExecutionStatus">
    <xs:annotation>
      <xs:documentation>Статус выполнения операции</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="isCompleted" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак окончания выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="completenessProgress" type="OperationCompletenessBase">
        <xs:annotation>
          <xs:documentation>Сведения о текущем статусе выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="hasSucceded" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак успешности выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
        <xs:annotation>
          <xs:documentation>Коллекция сообщений, порожденных в ходе выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="id" type="ID" use="required">
      <xs:annotation>
        <xs:documentation>Идентификатор операции</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType abstract="false" name="OperationCompletenessPercentage">
    <xs:annotation>
      <xs:documentation>Описание текущего статуса выполнения операции в процентах (0%-100%)</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="OperationCompletenessBase">
        <xs:sequence>
          <xs:element name="completenessStatus">
            <xs:annotation>
              <xs:documentation>Статус (0%-100%)</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:unsignedByte">
                <xs:minInclusive value="0"/>
                <xs:maxInclusive value="100"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="OperationCompletenessBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип для описания текущего статуса выполнения операции</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
  </xs:complexType>
  <!--calling methods' options-->
  <xs:element name="options" type="Options">
    <xs:annotation>
      <xs:documentation>Параметры вызова метода</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="Options">
    <xs:annotation>
      <xs:documentation>Набор именованных значений</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="entry" type="KeyValuePair">
        <xs:annotation>
          <xs:documentation>Именованное значение</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--pagination-->
  <xs:element name="pagingOptions" type="PagingOptions">
    <xs:annotation>
      <xs:documentation>Параметры пагинации</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType abstract="true" name="PagingResults">
    <xs:annotation>
      <xs:documentation>Список с пагинацией</xs:documentation>
    </xs:annotation>
    <xs:attribute name="pageNumber" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Номер страницы (zero-based)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageTotal" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Общее количество страниц</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageSize" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Размер страницы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="morePagesAvailable" type="xs:boolean" use="required">
      <xs:annotation>
        <xs:documentation>Флаг доступности других страниц с результатами для "постраничного листания" (true - если доступны еще страницы; false - иначе)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="totalItemsCount" type="xs:long" use="required">
      <xs:annotation>
        <xs:documentation>Общее количество элементов (на всех страницах)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PagingOptions">
    <xs:annotation>
      <xs:documentation>Параметры пагинации</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" ref="sortingOptions"/>
    </xs:sequence>
    <xs:attribute name="pageNumber" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Номер страницы (zero-based)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageSize" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Размер страницы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <!--sorting-->
  <xs:element name="sortingOptions" type="SortingOptions">
    <xs:annotation>
      <xs:documentation>Параметры сортировки</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="SortingOptions">
    <xs:annotation>
      <xs:documentation>Условия сортировки</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="3" name="sortOrder" type="SortOrder">
        <xs:annotation>
          <xs:documentation>Условия сортировки (используются в соответствии с переданной последовательностью)</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="SortOrder">
    <xs:annotation>
      <xs:documentation>Сортировка</xs:documentation>
    </xs:annotation>
    <xs:attribute name="attributeName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Наименование поля, по которому должна быть произведена сортировка</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute default="false" name="desceding" type="xs:boolean">
      <xs:annotation>
        <xs:documentation>Направление сортировки</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <!--void response-->
  <xs:element fixed="true" name="result">
    <xs:annotation>
      <xs:documentation>Элемент для использования в методах, не предполагающих возврат какого-либо значения</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:simpleContent>
        <xs:extension base="xs:boolean"/>
      </xs:simpleContent>
    </xs:complexType>
  </xs:element>
  <!--base types-->
  <xs:complexType name="TimeInterval">
    <xs:annotation>
      <xs:documentation>Временной период (время)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="start" type="xs:time">
        <xs:annotation>
          <xs:documentation>Время начала интервала</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="end" type="xs:time">
        <xs:annotation>
          <xs:documentation>Время окончания интервала</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DatePeriod">
    <xs:annotation>
      <xs:documentation>Временной период (дата)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="start" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата начала периода</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="end" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата окончания периода</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--keys-->
  <xs:complexType name="EntityId">
    <xs:annotation>
      <xs:documentation>Идентфикатор сущности, непосредственно принадлежащей текущему продукту ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Base"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ForeignEntityId">
    <xs:annotation>
      <xs:documentation>Идентфикатор сущности ЕМИАС, внешней по отношнению к текущему продукту ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="ForeignBase"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="NsiGlobalId">
    <xs:annotation>
      <xs:documentation>Глобальный идентфикатор ЕМИАС.НСИ</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="ForeignBase"/>
    </xs:complexContent>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELsf0p1DdS0_CIS5sEoTzQ4Wty6YHlLYutqNN7wO_MFN0JMBt</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.1" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <!--error message description-->
  <xs:complexType name="ErrorMessageCollection">
    <xs:annotation>
      <xs:documentation>Коллекция сообщений об ошибках</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="message" type="ErrorMessage">
        <xs:annotation>
          <xs:documentation>Сообщение об ошибке</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ErrorMessage">
    <xs:annotation>
      <xs:documentation>Сообщение об ошибке</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Message">
        <xs:sequence>
          <xs:element minOccurs="0" name="parameters">
            <xs:annotation>
              <xs:documentation>Коллекция параметров сообщения</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="unbounded" name="parameter" type="KeyValuePair">
                  <xs:annotation>
                    <xs:documentation>Параметр сообщения</xs:documentation>
                  </xs:annotation>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
          <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Сопутствующие сообщения об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="type" type="ErrorMessageTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип сообщения</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:simpleType name="ErrorMessageTypes">
    <xs:annotation>
      <xs:documentation>Тип сообщения об ошибке</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="ERROR">
        <xs:annotation>
          <xs:documentation>Ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="WARNING">
        <xs:annotation>
          <xs:documentation>Предупреждение (не блокирующая ошибка)</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="INFO">
        <xs:annotation>
          <xs:documentation>Информационное сообщение</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:long"/>
  </xs:simpleType>
  <xs:simpleType name="GUID">
    <xs:annotation>
      <xs:documentation>Глобальный 128-битный идентификатор (Globally Unique Identifier)</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="KeyValuePair">
    <xs:annotation>
      <xs:documentation>Представляет тип "ключ/значение"</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="key" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Ключ</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:simpleType name="Mail">
    <xs:annotation>
      <xs:documentation>Адрес электронной почты</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:maxLength value="320"/>
      <xs:pattern value=".+@.+\..+"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="Message">
    <xs:annotation>
      <xs:documentation>Сообщение</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="code" type="xs:string">
        <xs:annotation>
          <xs:documentation>Код сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="message" type="xs:string">
        <xs:annotation>
          <xs:documentation>Текст сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint></con:endpoints><con:operation id="33ee011d-9fcb-4fe2-8677-0b41a3f20350" isOneWay="false" action="urn://cancelAppointment" name="cancelAppointment" bindingOperationName="cancelAppointment" type="Request-Response" outputName="cancelAppointmentResponse" inputName="cancelAppointment" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="507019e3-6cf7-4baf-8c7f-3f396d3405c5" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:cancelAppointment>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <appointmentId>?</appointmentId>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:cancelAppointment>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/cancelAppointment"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="d1a59785-d163-4779-91a5-193d98a08536" isOneWay="false" action="urn://cancelAppointmentByID" name="cancelAppointmentByID" bindingOperationName="cancelAppointmentByID" type="Request-Response" outputName="cancelAppointmentByIDResponse" inputName="cancelAppointmentByID" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="608d193f-a156-4df4-8588-f08d82a96e37" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:cancelAppointmentByID>\r
         <appointmentId>?</appointmentId>\r
      </v5:cancelAppointmentByID>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/cancelAppointmentByID"/></con:call></con:operation><con:operation id="d84373b7-824a-470f-aa07-ab2d44f914b1" isOneWay="false" action="urn://cancelAppointmentBySms" name="cancelAppointmentBySms" bindingOperationName="cancelAppointmentBySms" type="Request-Response" outputName="cancelAppointmentBySmsResponse" inputName="cancelAppointmentBySms" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="e681ef10-b704-4c04-85fc-42120a8558c4" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:cancelAppointmentBySms>\r
         <patientPhoneNumber>?</patientPhoneNumber>\r
         <message>?</message>\r
      </v5:cancelAppointmentBySms>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/cancelAppointmentBySms"/></con:call></con:operation><con:operation id="ef54eab5-b4ab-44ea-bde7-1bbda42c2529" isOneWay="false" action="urn://cancelAppointmentToDutyDoctorByPatient" name="cancelAppointmentToDutyDoctorByPatient" bindingOperationName="cancelAppointmentToDutyDoctorByPatient" type="Request-Response" outputName="cancelAppointmentToDutyDoctorByPatientResponse" inputName="cancelAppointmentToDutyDoctorByPatient" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="2b7e15ed-f039-45a6-9fc7-2eb6f2323e4f" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:cancelAppointmentToDutyDoctorByPatient>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <externalSystemId>?</externalSystemId>\r
         <appointmentId>?</appointmentId>\r
      </v5:cancelAppointmentToDutyDoctorByPatient>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/cancelAppointmentToDutyDoctorByPatient"/></con:call></con:operation><con:operation id="b2b39698-4c71-4141-aa75-caa84abc05ee" isOneWay="false" action="urn://createAppointment" name="createAppointment" bindingOperationName="createAppointment" type="Request-Response" outputName="createAppointmentResponse" inputName="createAppointment" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="17f3539d-dfcd-4172-8351-42dcdfa7e265" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:createAppointment>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <availableResourceId>?</availableResourceId>\r
         <complexResourceId>?</complexResourceId>\r
         <startTime>?</startTime>\r
         <endTime>?</endTime>\r
         <!--You have a CHOICE of the next 2 items at this level-->\r
         <referralId>?</referralId>\r
         <receptionTypeId>?</receptionTypeId>\r
         <externalSystemId>?</externalSystemId>\r
         <!--Optional:-->\r
         <eno>?</eno>\r
      </v5:createAppointment>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/createAppointment"/></con:call></con:operation><con:operation id="4667a25d-804b-47a8-8a21-20f28485e16b" isOneWay="false" action="urn://createAppointmentForGroup" name="createAppointmentForGroup" bindingOperationName="createAppointmentForGroup" type="Request-Response" outputName="createAppointmentForGroupResponse" inputName="createAppointmentForGroup" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="e9ed0b7b-6e89-417f-87ed-ef08bbdde724" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:createAppointmentForGroup>\r
         <!--2 to 10 repetitions:-->\r
         <patientGroupEntry>\r
            <omsNumber>?</omsNumber>\r
            <!--Optional:-->\r
            <omsSeries>?</omsSeries>\r
            <birthDate>?</birthDate>\r
            <appTime>\r
               <start>?</start>\r
               <end>?</end>\r
            </appTime>\r
            <complexResourceId>?</complexResourceId>\r
         </patientGroupEntry>\r
         <patientGroupEntry>\r
            <omsNumber>?</omsNumber>\r
            <!--Optional:-->\r
            <omsSeries>?</omsSeries>\r
            <birthDate>?</birthDate>\r
            <appTime>\r
               <start>?</start>\r
               <end>?</end>\r
            </appTime>\r
            <complexResourceId>?</complexResourceId>\r
         </patientGroupEntry>\r
         <availableResourceId>?</availableResourceId>\r
         <receptionTypeId>?</receptionTypeId>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:createAppointmentForGroup>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/createAppointmentForGroup"/></con:call></con:operation><con:operation id="87c1d1cd-008d-469e-af23-b9c63d7594b0" isOneWay="false" action="urn://createAppointmentToDutyDoctorByPatient" name="createAppointmentToDutyDoctorByPatient" bindingOperationName="createAppointmentToDutyDoctorByPatient" type="Request-Response" outputName="createAppointmentToDutyDoctorByPatientResponse" inputName="createAppointmentToDutyDoctorByPatient" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="1149c9c6-1fea-4e93-b50e-7555d77fda11" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:createAppointmentToDutyDoctorByPatient>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <externalSystemId>?</externalSystemId>\r
         <lpuId>?</lpuId>\r
         <availableResourceId>?</availableResourceId>\r
         <complexResourceId>?</complexResourceId>\r
      </v5:createAppointmentToDutyDoctorByPatient>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/createAppointmentToDutyDoctorByPatient"/></con:call></con:operation><con:operation id="998f897d-7951-475b-acf0-f41e3df9b1f2" isOneWay="false" action="urn://getAppointmentReceptionsByPatient" name="getAppointmentReceptionsByPatient" bindingOperationName="getAppointmentReceptionsByPatient" type="Request-Response" outputName="getAppointmentReceptionsByPatientResponse" inputName="getAppointmentReceptionsByPatient" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="7782db30-ac58-4efa-9dfa-ff04c5c7033e" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://YRS0052:8080/</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getAppointmentReceptionsByPatient>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <externalSystemId>?</externalSystemId>\r
         <!--Optional:-->\r
         <signActiveArchive>?</signActiveArchive>\r
      </v5:getAppointmentReceptionsByPatient>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getAppointmentReceptionsByPatient"/><con:wsrmConfig version="1.2"/></con:call><con:call id="f538f8df-546d-46b2-9801-4931891473f4" name="Request 2"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://YRS0052:8080/</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getAppointmentReceptionsByPatient>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <externalSystemId>?</externalSystemId>\r
         <!--Optional:-->\r
         <signActiveArchive>?</signActiveArchive>\r
      </v5:getAppointmentReceptionsByPatient>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getAppointmentReceptionsByPatient"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="57dd7187-0084-4655-9fd2-39ca8e972456" isOneWay="false" action="urn://getArchivedAppointments" name="getArchivedAppointments" bindingOperationName="getArchivedAppointments" type="Request-Response" outputName="getArchivedAppointmentsResponse" inputName="getArchivedAppointments" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="30646dce-107a-4f97-a18f-fd79dc45667e" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/" xmlns:v51="http://api.service.soap.emias.lanit.ru/core/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getArchivedAppointments>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <!--Optional:-->\r
         <period>\r
            <!--Optional:-->\r
            <dateFrom>?</dateFrom>\r
            <!--Optional:-->\r
            <dateTo>?</dateTo>\r
         </period>\r
         <externalSystemId>?</externalSystemId>\r
         <!--Optional:-->\r
         <pagingOptions pageNumber="?" pageSize="?">\r
            <!--Optional:-->\r
            <v51:sortingOptions>\r
               <!--1 to 3 repetitions:-->\r
               <v51:sortOrder attributeName="?" desceding="false"/>\r
            </v51:sortingOptions>\r
         </pagingOptions>\r
      </v5:getArchivedAppointments>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getArchivedAppointments"/></con:call></con:operation><con:operation id="3b8cbe15-9a5c-4a45-8272-97419f549b9b" isOneWay="false" action="urn://getAssignmentsInfo" name="getAssignmentsInfo" bindingOperationName="getAssignmentsInfo" type="Request-Response" outputName="getAssignmentsInfoResponse" inputName="getAssignmentsInfo" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="8f0e24d4-9bf0-459a-9959-4011ffa51c91" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://YRS0052:8080/</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getAssignmentsInfo>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <!--Optional:-->\r
         <returnExtended>false</returnExtended>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:getAssignmentsInfo>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getAssignmentsInfo"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="b061569a-dd9b-4aa5-ab93-d7a980c5de7e" isOneWay="false" action="urn://getAvailableResourceScheduleInfo" name="getAvailableResourceScheduleInfo" bindingOperationName="getAvailableResourceScheduleInfo" type="Request-Response" outputName="getAvailableResourceScheduleInfoResponse" inputName="getAvailableResourceScheduleInfo" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="f25f54a8-501f-43b6-acd7-acf884da4c29" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getAvailableResourceScheduleInfo>\r
         <availableResourceId>?</availableResourceId>\r
         <!--Optional:-->\r
         <complexResourceId>?</complexResourceId>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <!--Optional:-->\r
         <referralId>?</referralId>\r
         <!--Optional:-->\r
         <period>\r
            <dateFrom>?</dateFrom>\r
            <dateTo>?</dateTo>\r
         </period>\r
         <!--Optional:-->\r
         <appointmentId>?</appointmentId>\r
         <!--Optional:-->\r
         <quotaTypes>\r
            <!--1 or more repetitions:-->\r
            <quotaType>?</quotaType>\r
         </quotaTypes>\r
         <!--Optional:-->\r
         <disableQuotaTypes>\r
            <!--1 or more repetitions:-->\r
            <quotaType>?</quotaType>\r
         </disableQuotaTypes>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:getAvailableResourceScheduleInfo>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getAvailableResourceScheduleInfo"/></con:call></con:operation><con:operation id="b1a473ca-8fa9-4cad-9ad6-4cf41a4f816e" isOneWay="false" action="urn://getAvailableResourceScheduleInfoForGroup" name="getAvailableResourceScheduleInfoForGroup" bindingOperationName="getAvailableResourceScheduleInfoForGroup" type="Request-Response" outputName="getAvailableResourceScheduleInfoForGroupResponse" inputName="getAvailableResourceScheduleInfoForGroup" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="f2476e94-aeb3-42e5-a6be-8a1043e40a07" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getAvailableResourceScheduleInfoForGroup>\r
         <availableResourceId>?</availableResourceId>\r
         <!--2 to 10 repetitions:-->\r
         <patientGroupEntry>\r
            <omsNumber>?</omsNumber>\r
            <!--Optional:-->\r
            <omsSeries>?</omsSeries>\r
            <birthDate>?</birthDate>\r
            <!--Optional:-->\r
            <appointmentId>?</appointmentId>\r
         </patientGroupEntry>\r
         <patientGroupEntry>\r
            <omsNumber>?</omsNumber>\r
            <!--Optional:-->\r
            <omsSeries>?</omsSeries>\r
            <birthDate>?</birthDate>\r
            <!--Optional:-->\r
            <appointmentId>?</appointmentId>\r
         </patientGroupEntry>\r
         <!--Optional:-->\r
         <quotaTypes>\r
            <!--1 or more repetitions:-->\r
            <quotaType>?</quotaType>\r
         </quotaTypes>\r
         <!--Optional:-->\r
         <disableQuotaTypes>\r
            <!--1 or more repetitions:-->\r
            <quotaType>?</quotaType>\r
         </disableQuotaTypes>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:getAvailableResourceScheduleInfoForGroup>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getAvailableResourceScheduleInfoForGroup"/></con:call></con:operation><con:operation id="3f538c35-d5c3-4fe8-a716-52930ca15670" isOneWay="false" action="urn://getDoctorsInfo" name="getDoctorsInfo" bindingOperationName="getDoctorsInfo" type="Request-Response" outputName="getDoctorsInfoResponse" inputName="getDoctorsInfo" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="cbc9948d-743c-4960-a240-317658540488" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getDoctorsInfo>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <!--You have a CHOICE of the next 3 items at this level-->\r
         <appointmentId>?</appointmentId>\r
         <referralId>?</referralId>\r
         <specialityId>?</specialityId>\r
         <!--Optional:-->\r
         <includeArWithoutSlots>?</includeArWithoutSlots>\r
         <!--Optional:-->\r
         <quotaTypes>\r
            <!--1 or more repetitions:-->\r
            <quotaType>?</quotaType>\r
         </quotaTypes>\r
         <!--Optional:-->\r
         <disableQuotaTypes>\r
            <!--1 or more repetitions:-->\r
            <quotaType>?</quotaType>\r
         </disableQuotaTypes>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:getDoctorsInfo>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getDoctorsInfo"/></con:call></con:operation><con:operation id="f476112c-952b-4600-81f5-497011852e74" isOneWay="false" action="urn://getDoctorsInfoForGroup" name="getDoctorsInfoForGroup" bindingOperationName="getDoctorsInfoForGroup" type="Request-Response" outputName="getDoctorsInfoForGroupResponse" inputName="getDoctorsInfoForGroup" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="59af8db4-77b1-40ca-884e-5c7b1cc5534b" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getDoctorsInfoForGroup>\r
         <!--2 to 10 repetitions:-->\r
         <patientGroupEntry>\r
            <omsNumber>?</omsNumber>\r
            <!--Optional:-->\r
            <omsSeries>?</omsSeries>\r
            <birthDate>?</birthDate>\r
            <!--Optional:-->\r
            <appointmentId>?</appointmentId>\r
         </patientGroupEntry>\r
         <patientGroupEntry>\r
            <omsNumber>?</omsNumber>\r
            <!--Optional:-->\r
            <omsSeries>?</omsSeries>\r
            <birthDate>?</birthDate>\r
            <!--Optional:-->\r
            <appointmentId>?</appointmentId>\r
         </patientGroupEntry>\r
         <!--Optional:-->\r
         <quotaTypes>\r
            <!--1 or more repetitions:-->\r
            <quotaType>?</quotaType>\r
         </quotaTypes>\r
         <!--Optional:-->\r
         <disableQuotaTypes>\r
            <!--1 or more repetitions:-->\r
            <quotaType>?</quotaType>\r
         </disableQuotaTypes>\r
         <specialityId>?</specialityId>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:getDoctorsInfoForGroup>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getDoctorsInfoForGroup"/></con:call></con:operation><con:operation id="899f444e-e685-456e-a3ab-930599f07fda" isOneWay="false" action="urn://getDoctorsInfoForLI" name="getDoctorsInfoForLI" bindingOperationName="getDoctorsInfoForLI" type="Request-Response" outputName="getDoctorsInfoForLIResponse" inputName="getDoctorsInfoForLI" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="e137d73d-9aaf-4fd6-9fff-ce53e2a779f0" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getDoctorsInfoForLI>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <assignment>\r
            <moId>?</moId>\r
            <samplingTypeId>?</samplingTypeId>\r
            <period>\r
               <dateFrom>?</dateFrom>\r
               <dateTo>?</dateTo>\r
            </period>\r
         </assignment>\r
         <!--Optional:-->\r
         <appointmentId>?</appointmentId>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:getDoctorsInfoForLI>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getDoctorsInfoForLI"/></con:call></con:operation><con:operation id="072c1e8b-ce57-4585-9a93-e297fdf1b6c7" isOneWay="false" action="urn://getDutyARScheduleByPatient" name="getDutyARScheduleByPatient" bindingOperationName="getDutyARScheduleByPatient" type="Request-Response" outputName="getDutyARScheduleByPatientResponse" inputName="getDutyARScheduleByPatient" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="c6a4d29b-0b97-4174-9822-e0e4007dba0e" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getDutyARScheduleByPatient>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <externalSystemId>?</externalSystemId>\r
         <lpuId>?</lpuId>\r
      </v5:getDutyARScheduleByPatient>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getDutyARScheduleByPatient"/></con:call></con:operation><con:operation id="a9baca43-8ed0-4bca-a228-678e1c297e98" isOneWay="false" action="urn://getHealthCareAvailabilityAttributes" name="getHealthCareAvailabilityAttributes" bindingOperationName="getHealthCareAvailabilityAttributes" type="Request-Response" outputName="getHealthCareAvailabilityAttributesResponse" inputName="getHealthCareAvailabilityAttributes" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="3000746a-b0a7-4910-a12b-2a2b810dc5a3" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getHealthCareAvailabilityAttributes>\r
         <patientId>?</patientId>\r
         <!--You have a CHOICE of the next 4 items at this level-->\r
         <referralId>?</referralId>\r
         <specialityId>?</specialityId>\r
         <ldpId>?</ldpId>\r
         <samplingTypeId>?</samplingTypeId>\r
      </v5:getHealthCareAvailabilityAttributes>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getHealthCareAvailabilityAttributes"/></con:call></con:operation><con:operation id="d3e9b6e2-bb9c-4256-b902-4292c89f0821" isOneWay="false" action="urn://getReferralsInfo" name="getReferralsInfo" bindingOperationName="getReferralsInfo" type="Request-Response" outputName="getReferralsInfoResponse" inputName="getReferralsInfo" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="3dbfa384-cca0-43b2-aa6f-7e4a432e8366" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://YRS0052:8080/</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getReferralsInfo>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <!--Optional:-->\r
         <returnExtended>?</returnExtended>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:getReferralsInfo>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getReferralsInfo"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="3b347e79-a8e0-4d8b-a30b-61a8679335a0" isOneWay="false" action="urn://getSpecialitiesInfo" name="getSpecialitiesInfo" bindingOperationName="getSpecialitiesInfo" type="Request-Response" outputName="getSpecialitiesInfoResponse" inputName="getSpecialitiesInfo" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="3dbaebc0-da60-4451-9010-ce55ce7866ac" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getSpecialitiesInfo>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <!--Optional:-->\r
         <quotaTypes>\r
            <!--1 or more repetitions:-->\r
            <quotaType>?</quotaType>\r
         </quotaTypes>\r
         <!--Optional:-->\r
         <disableQuotaTypes>\r
            <!--1 or more repetitions:-->\r
            <quotaType>?</quotaType>\r
         </disableQuotaTypes>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:getSpecialitiesInfo>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getSpecialitiesInfo"/></con:call></con:operation><con:operation id="95d5b464-094d-46bd-b0c9-ce3d32dc4d04" isOneWay="false" action="urn://getSpecialitiesInfoForGroup" name="getSpecialitiesInfoForGroup" bindingOperationName="getSpecialitiesInfoForGroup" type="Request-Response" outputName="getSpecialitiesInfoForGroupResponse" inputName="getSpecialitiesInfoForGroup" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="d2265d57-619a-43f6-8310-281fc1bc5fbd" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:getSpecialitiesInfoForGroup>\r
         <!--2 to 10 repetitions:-->\r
         <patientGroupEntry>\r
            <omsNumber>?</omsNumber>\r
            <!--Optional:-->\r
            <omsSeries>?</omsSeries>\r
            <birthDate>?</birthDate>\r
         </patientGroupEntry>\r
         <patientGroupEntry>\r
            <omsNumber>?</omsNumber>\r
            <!--Optional:-->\r
            <omsSeries>?</omsSeries>\r
            <birthDate>?</birthDate>\r
         </patientGroupEntry>\r
         <!--Optional:-->\r
         <quotaTypes>\r
            <!--1 or more repetitions:-->\r
            <quotaType>?</quotaType>\r
         </quotaTypes>\r
         <!--Optional:-->\r
         <disableQuotaTypes>\r
            <!--1 or more repetitions:-->\r
            <quotaType>?</quotaType>\r
         </disableQuotaTypes>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:getSpecialitiesInfoForGroup>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/getSpecialitiesInfoForGroup"/></con:call></con:operation><con:operation id="d382303f-5eaf-4885-b151-4a1c1452455e" isOneWay="false" action="urn://shiftAppointment" name="shiftAppointment" bindingOperationName="shiftAppointment" type="Request-Response" outputName="shiftAppointmentResponse" inputName="shiftAppointment" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="dc88037b-fa75-42f3-9124-5896200fefb0" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:shiftAppointment>\r
         <omsNumber>?</omsNumber>\r
         <!--Optional:-->\r
         <omsSeries>?</omsSeries>\r
         <birthDate>?</birthDate>\r
         <availableResourceId>?</availableResourceId>\r
         <!--Optional:-->\r
         <complexResourceId>?</complexResourceId>\r
         <startTime>?</startTime>\r
         <endTime>?</endTime>\r
         <!--You have a CHOICE of the next 2 items at this level-->\r
         <referralId>?</referralId>\r
         <receptionTypeId>?</receptionTypeId>\r
         <appointmentId>?</appointmentId>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:shiftAppointment>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/shiftAppointment"/></con:call></con:operation><con:operation id="8b3ce41d-06d8-4120-99a3-6a40b8bb6427" isOneWay="false" action="urn://shiftAppointmentForGroup" name="shiftAppointmentForGroup" bindingOperationName="shiftAppointmentForGroup" type="Request-Response" outputName="shiftAppointmentForGroupResponse" inputName="shiftAppointmentForGroup" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="f6df75d7-4a02-4356-a5e2-1dd3ede68573" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v5:shiftAppointmentForGroup>\r
         <!--2 to 10 repetitions:-->\r
         <patientGroupEntry>\r
            <omsNumber>?</omsNumber>\r
            <!--Optional:-->\r
            <omsSeries>?</omsSeries>\r
            <birthDate>?</birthDate>\r
            <appTime>\r
               <start>?</start>\r
               <end>?</end>\r
            </appTime>\r
            <complexResourceId>?</complexResourceId>\r
            <appointmentId>?</appointmentId>\r
         </patientGroupEntry>\r
         <patientGroupEntry>\r
            <omsNumber>?</omsNumber>\r
            <!--Optional:-->\r
            <omsSeries>?</omsSeries>\r
            <birthDate>?</birthDate>\r
            <appTime>\r
               <start>?</start>\r
               <end>?</end>\r
            </appTime>\r
            <complexResourceId>?</complexResourceId>\r
            <appointmentId>?</appointmentId>\r
         </patientGroupEntry>\r
         <availableResourceId>?</availableResourceId>\r
         <receptionTypeId>?</receptionTypeId>\r
         <externalSystemId>?</externalSystemId>\r
      </v5:shiftAppointmentForGroup>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.service.soap.emias.lanit.ru/v5/SelfAppointmentServiceV5PT/shiftAppointmentForGroup"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" id="50eb1b50-a75a-4834-83c1-f2aa20e0b6e7" wsaVersion="NONE" name="hospitalServiceBinding" type="wsdl" bindingName="{http://emias.mos.ru/hospitalization/hospitalService/v2/}hospitalServiceBinding" soapVersion="1_2" anonymous="optional" definition="http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?wsdl"><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="hospitalServiceV2" targetNamespace="http://emias.mos.ru/hospitalization/hospitalService/v2/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:ns1="http://emias.mos.ru/hospitalization/hospitalService/v2/types/" xmlns:nsf="http://emias.mos.ru/system/v1/faults/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:tns="http://emias.mos.ru/hospitalization/hospitalService/v2/" xmlns:uctx="http://emias.mos.ru/system/v1/userContext/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <wsdl:documentation>Версия 1.4.3.128</wsdl:documentation>
  <wsdl:types>
    <xs:schema>
      <xs:import namespace="http://emias.mos.ru/system/v1/userContext/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfEnz4Aq8EXihXLYVPF.1JQugAOTDB3XtiTgBkXUbvh0Ip781WlYcmvrJdZp8GzrY-"/>
      <xs:import namespace="http://emias.mos.ru/system/v1/faults/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfEnz4Aq8EXihXLYVPF.1JQvsSKS72wTtuWByg9TI1WJQ1OHSqO66HMx71"/>
      <xs:import namespace="http://emias.mos.ru/hospitalization/hospitalService/v2/types/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfVD2kF6sZXjcQJJ1ICudKQvUcLzLrxnR6eB1iBVf_hs9m.ZCDetDRV4DIesEDk_xQES6ZlxUAymHvEA4X"/>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="getHospitalPatientOutput">
    <wsdl:part element="ns1:getHospitalizationInfoByPatientResponse" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fault">
    <wsdl:documentation>Ошибка</wsdl:documentation>
    <wsdl:part element="nsf:fault" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getHospitalPatientInput">
    <wsdl:part element="ns1:getHospitalizationInfoByPatientRequest" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="userContext">
    <wsdl:documentation>Контекст пользователя</wsdl:documentation>
    <wsdl:part element="uctx:userContext" name="userContext"></wsdl:part>
  </wsdl:message>
  <wsdl:portType name="hospitalServicePortType">
    <wsdl:operation name="getHospitalizationInfoByPatient">
      <wsdl:input message="tns:getHospitalPatientInput"></wsdl:input>
      <wsdl:output message="tns:getHospitalPatientOutput"></wsdl:output>
      <wsdl:fault message="tns:fault" name="fault"></wsdl:fault>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="hospitalServiceBinding" type="tns:hospitalServicePortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getHospitalizationInfoByPatient">
      <soap:operation soapAction="getHospitalizationInfoByPatient"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"></soap:header>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="hospitalServiceV2">
    <wsdl:port binding="tns:hospitalServiceBinding" name="hospitalServicePort">
      <soap:address location="http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService"/>
    </wsdl:port>
    <wsp:PolicyReference URI="#authPolicy"/>
  </wsdl:service>
  <wsp:Policy wsu:Id="authPolicy">
    <sp:SupportingTokens xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
      <wsp:Policy>
        <sp:UsernameToken sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
          <wsp:Policy>
            <sp:NoPassword/>
          </wsp:Policy>
        </sp:UsernameToken>
      </wsp:Policy>
    </sp:SupportingTokens>
  </wsp:Policy>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfEnz4Aq8EXihXLYVPF.1JQugAOTDB3XtiTgBkXUbvh0Ip781WlYcmvrJdZp8GzrY-</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/system/v1/userContext/" xmlns="http://emias.mos.ru/system/v1/userContext/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfEnz4Aq8EXihXLYVPF.1JQuUAOMlNthnEiDjF8Ke3UJvOzdI-"/>
  <xs:element name="userContext" type="UserContext">
    <xs:annotation>
      <xs:documentation>Контекст пользователя</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="UserContext">
    <xs:annotation>
      <xs:documentation>Контекст пользователя</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="systemName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Шифр системы-потребителя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Имя пользователя (логин)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userRoleId" type="ID">
        <xs:annotation>
          <xs:documentation>Идентификатор Роли пользователя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="isUserRoleSystemWide" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак "Общесистемная Роль пользователя"</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userRights">
        <xs:annotation>
          <xs:documentation>Коллекция Полномочий пользователя</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="userRightId" type="ID">
              <xs:annotation>
                <xs:documentation>ИД Полномочия пользователя</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="jobExecutionId" type="ID"/>
      <xs:element minOccurs="0" name="hostIp" type="xs:string">
        <xs:annotation>
          <xs:documentation>IP адрес хоста</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="hostName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Имя хоста</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfEnz4Aq8EXihXLYVPF.1JQuUAOMlNthnEiDjF8Ke3UJvOzdI-</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <!--error message description-->
  <xs:complexType name="ErrorMessageCollection">
    <xs:annotation>
      <xs:documentation>Коллекция сообщений об ошибках</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="message" type="ErrorMessage">
        <xs:annotation>
          <xs:documentation>Сообщение об ошибке</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ErrorMessage">
    <xs:annotation>
      <xs:documentation>Сообщение об ошибке</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Message">
        <xs:sequence>
          <xs:element minOccurs="0" name="parameters">
            <xs:annotation>
              <xs:documentation>Коллекция параметров сообщения</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="unbounded" name="parameter" type="KeyValuePair">
                  <xs:annotation>
                    <xs:documentation>Параметр сообщения</xs:documentation>
                  </xs:annotation>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
          <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Сопутствующие сообщения об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="type" type="ErrorMessageTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип сообщения</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:simpleType name="ErrorMessageTypes">
    <xs:annotation>
      <xs:documentation>Тип сообщения об ошибке</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="ERROR">
        <xs:annotation>
          <xs:documentation>Ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="WARNING">
        <xs:annotation>
          <xs:documentation>Предупреждение (не блокирующая ошибка)</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="INFO">
        <xs:annotation>
          <xs:documentation>Информационное сообщение</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:long"/>
  </xs:simpleType>
  <xs:complexType name="KeyValuePair">
    <xs:annotation>
      <xs:documentation>Представляет тип "ключ/значение"</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="key" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Ключ</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="Message">
    <xs:annotation>
      <xs:documentation>Сообщение</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="code" type="xs:string">
        <xs:annotation>
          <xs:documentation>Код сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="message" type="xs:string">
        <xs:annotation>
          <xs:documentation>Текст сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfEnz4Aq8EXihXLYVPF.1JQvsSKS72wTtuWByg9TI1WJQ1OHSqO66HMx71</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/system/v1/faults/" xmlns="http://emias.mos.ru/system/v1/faults/" xmlns:uctx="http://emias.mos.ru/system/v1/userContext/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfEnz4Aq8EXihXLYVPF.1JQuUAOMlNthnEiDjF8Ke3UJvOzdI-"/>
  <xs:import namespace="http://emias.mos.ru/system/v1/userContext/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfEnz4Aq8EXihXLYVPF.1JQugAOTDB3XtiTgBkXUbvh0Ip781WlYcmvrJdZp8GzrY-"/>
  <!--faults-->
  <xs:element name="fault" type="BaseFault">
    <xs:annotation>
      <xs:documentation>Базовый тип ошибки</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="SecurityFault">
    <xs:annotation>
      <xs:documentation>Ошибка безопасности</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element ref="uctx:userContext"/>
          <xs:choice>
            <xs:element name="unauthorizedRequestSecurityException" type="UnauthorizedRequestSecurityException">
              <xs:annotation>
                <xs:documentation>Исключение безопасности типа UNAUTHORIZED_REQUEST_EXCEPTION</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="otherSecurityException" type="OtherSecurityException">
              <xs:annotation>
                <xs:documentation>Исключение безопасности типа OTHER_SECURITY_EXCEPTION</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:sequence>
        <xs:attribute fixed="SECURITY" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="BusinessFault">
    <xs:annotation>
      <xs:documentation>Бизнес ошибка</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Коллекция Сообщений об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="hasErrors" type="xs:boolean">
            <xs:annotation>
              <xs:documentation>Признак наличия ошибок в списке сообщений</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute fixed="BUSINESS" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="UnexpectedFault">
    <xs:annotation>
      <xs:documentation>Непредвиденная ошибка</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element name="version" type="xs:string">
            <xs:annotation>
              <xs:documentation>Версия продукта-сервиса</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="stackTrace">
            <xs:annotation>
              <xs:documentation>Стек вызова (последние 10 записей)</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="10" name="stackTraceRecord">
                  <xs:annotation>
                    <xs:documentation>Запись StackTrace</xs:documentation>
                  </xs:annotation>
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element name="declaringClass" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование класса, содержащего метод</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="methodName" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование метода</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="fileName" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование файла</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="lineNumber" type="xs:int">
                        <xs:annotation>
                          <xs:documentation>Номер строки кода</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
        <xs:attribute fixed="UNEXPECTED" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="BaseFault">
    <xs:annotation>
      <xs:documentation>Описание базового типа описания ошибки</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
  </xs:complexType>
  <!--security exceptions-->
  <xs:complexType name="UnauthorizedRequestSecurityException">
    <xs:annotation>
      <xs:documentation>Исключение безопасности типа UNAUTHORIZED_REQUEST_EXCEPTION</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="requiredRights">
        <xs:annotation>
          <xs:documentation>Перечень идентификаторов недостающих Полномочий пользователя</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" name="userRightId" type="ID">
              <xs:annotation>
                <xs:documentation>Идентификатор Полномочия пользователя</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute fixed="UNAUTHORIZED_REQUEST_EXCEPTION" name="type" type="SecurityExceptionTypes" use="required">
      <xs:annotation>
        <xs:documentation>Тип исключения безопасности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="OtherSecurityException">
    <xs:annotation>
      <xs:documentation>Исключение безопасности типа OTHER_SECURITY_EXCEPTION</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="message" type="Message">
        <xs:annotation>
          <xs:documentation>Сообщение</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute fixed="OTHER_SECURITY_EXCEPTION" name="type" type="SecurityExceptionTypes" use="required">
      <xs:annotation>
        <xs:documentation>Тип исключения безопасности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:simpleType name="SecurityExceptionTypes">
    <xs:annotation>
      <xs:documentation>Типы исключений безопасности</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="UNAUTHORIZED_REQUEST_EXCEPTION"/>
      <xs:enumeration value="OTHER_SECURITY_EXCEPTION"/>
    </xs:restriction>
  </xs:simpleType>
  <!--components-->
  <xs:simpleType name="FaultTypes">
    <xs:annotation>
      <xs:documentation>Тип ошибки</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="SECURITY">
        <xs:annotation>
          <xs:documentation>Непредвиденная ошибка приложения</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="BUSINESS">
        <xs:annotation>
          <xs:documentation>Бизнес ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="UNEXPECTED">
        <xs:annotation>
          <xs:documentation>Ошибка безопасности</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfVD2kF6sZXjcQJJ1ICudKQvUcLzLrxnR6eB1iBVf_hs9m.ZCDetDRV4DIesEDk_xQES6ZlxUAymHvEA4X</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/hospitalization/hospitalService/v2/types/" version="Версия 1.4.3.128" xmlns:core="http://emias.mos.ru/hospitalization/core/v2/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import namespace="http://emias.mos.ru/hospitalization/core/v2/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfVD2kF6sZXjcQJJ1ICudKQv4cLiesxCc4Uwt0O.EIWYW92Xo6qRmYgGvsQQ--"/>
  <xs:element name="getHospitalizationInfoByPatientRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getHospitalizationInfoByPatient</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="patientId" type="xs:long"/>
        <xs:element name="options" type="core:Options"/>
        <xs:element maxOccurs="1" minOccurs="0" name="datePeriod" type="core:DatePeriod"/>
        <xs:element maxOccurs="1" minOccurs="0" name="pagingOptions" type="core:PagingSortingOptions"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getHospitalizationInfoByPatientResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="pagingResults" type="core:PagingResultsImpl">
          <xs:annotation>
            <xs:documentation>Параметры пагинации</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element maxOccurs="1" minOccurs="0" name="patientId" type="xs:long">
          <xs:annotation>
            <xs:documentation>Идентификатор Пациента</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element maxOccurs="1" minOccurs="0" name="hospitalizationSign" type="xs:boolean">
          <xs:annotation>
            <xs:documentation>Признак госпитализации пациента</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element maxOccurs="1" minOccurs="0" name="deathSign" type="xs:boolean">
          <xs:annotation>
            <xs:documentation>Признак смерти пациента</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="hospitalizations" type="core:Hospitalization">
          <xs:annotation>
            <xs:documentation>Госпитализации</xs:documentation>
          </xs:annotation>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfVD2kF6sZXjcQJJ1ICudKQv4cLiesxCc4Uwt0O.EIWYW92Xo6qRmYgGvsQQ--</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/hospitalization/core/v2/" xmlns="http://emias.mos.ru/hospitalization/core/v2/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfEnz4Aq8EXihXPZNOBqZcH_lbwVjIfo.5RvA5BOhllxkY"/>
  <xs:complexType name="Hospitalization">
    <xs:annotation>
      <xs:documentation>Сущность Госпитализации</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="docId" type="xs:string">
        <xs:annotation>
          <xs:documentation>Идентификатор документа</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="hospitalDate" type="xs:dateTime">
        <xs:annotation>
          <xs:documentation>Дата и время госпитализации</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="admissionsDate" type="xs:dateTime">
        <xs:annotation>
          <xs:documentation>Дата и время поступления в стационар</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="MOName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Наименование стационарной МО</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="MOId" type="xs:long">
        <xs:annotation>
          <xs:documentation>Идентификатор МО (МО, в которой осуществлялось лечение)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="departmentName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Наименование стационарного отделения</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="diagnosis" type="Diagnosis">
        <xs:annotation>
          <xs:documentation>Диагноз при поступлении (развернутый клинический диагноз)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="hospitalizationStatus" type="KeyValuePair">
        <xs:annotation>
          <xs:documentation>Статус случая госпитализации</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="epicrisis" nillable="true" type="HospitalizationEpicris">
        <xs:annotation>
          <xs:documentation>Выписные эпикризы</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="deathFact" nillable="true" type="HospitalizationDeathFact">
        <xs:annotation>
          <xs:documentation>Выписные эпикризы</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="HospitalizationDeathFact">
    <xs:sequence>
      <xs:element name="docId" type="xs:string">
        <xs:annotation>
          <xs:documentation>Идентификатор документа</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="deathDate" type="xs:dateTime">
        <xs:annotation>
          <xs:documentation>Дата смерти пациента</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="HospitalizationEpicris">
    <xs:sequence>
      <xs:element name="docId" type="xs:string">
        <xs:annotation>
          <xs:documentation>Идентификатор документа</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="hospitalAdmissionsDate" type="xs:dateTime">
        <xs:annotation>
          <xs:documentation>Идентификатор документа</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="extractDate" type="xs:dateTime">
        <xs:annotation>
          <xs:documentation>Идентификатор документа</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="isConfidential" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Идентификатор документа</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="Diagnosis">
    <xs:sequence>
      <xs:element name="diagnosisTypeCode" type="xs:string">
        <xs:annotation>
          <xs:documentation>Код типа диагноза</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="MKB10Code" type="xs:string">
        <xs:annotation>
          <xs:documentation>Код диагноза по МКБ-10</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="MKB10Name" type="xs:string">
        <xs:annotation>
          <xs:documentation>Наименование диагноза по МКБ-10</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="detailedDiagnosis" type="xs:string">
        <xs:annotation>
          <xs:documentation>Развернутый клинический диагноз</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="PagingSortingOptions">
    <xs:complexContent>
      <xs:extension base="PagingOptions">
        <xs:sequence>
          <xs:element minOccurs="0" name="sortingOptions" type="SortingOptions">
            <xs:annotation>
              <xs:documentation>Параметры сортировки</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="SortingOptions">
    <xs:annotation>
      <xs:documentation>Параметры сортировки</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="3" minOccurs="1" name="sortOrder" type="SortOrder">
        <xs:annotation>
          <xs:documentation>Условия сортировки (используются в соответствии с переданной
                        последовательностью)</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="SortOrder">
    <xs:annotation>
      <xs:documentation>Условия сортировки
                (используются в соответствии с переданной последовательностью)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="attributeName" type="SortVariant">
        <xs:annotation>
          <xs:documentation>Наименование поля, по которому должна быть произведена сортировка.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="descending" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Направление сортировки.
                        Возможные значения:
                        true - сортировка по убыванию;
                        false - сортировка по возрастанию
                        По умолчанию устанавливается значение true.</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:simpleType name="SortVariant">
    <xs:restriction base="xs:string">
      <xs:enumeration value="hospitalizationMOName"/>
      <xs:enumeration value="hospitalizationsdiagnosisTypeCode"/>
      <xs:enumeration value="hospitalizationhospitalDate"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfEnz4Aq8EXihXPZNOBqZcH_lbwVjIfo.5RvA5BOhllxkY</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkK9jOJsv5giiOUhb0eXelLZ_MVcjWuwlyDKagWTUZFb5IrTJjaIkVwX6_lRYMzStnQS4B57K5YfEnz4Aq8EXihXLYVPF.1JQuUAOMlNthnEiDjF8Ke3UJvOzdI-"/>
  <!--references-->
  <xs:element name="medicalOrganizationId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор Медицинской организации</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="medicalFacilityId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор Медицинского учреждения</xs:documentation>
    </xs:annotation>
  </xs:element>
  <!--async operation status-->
  <xs:element name="operationId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор операции</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="OperationExecutionStatus">
    <xs:annotation>
      <xs:documentation>Статус выполнения операции</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="isCompleted" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак окончания выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="completenessProgress" type="OperationCompletenessBase">
        <xs:annotation>
          <xs:documentation>Сведения о текущем статусе выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="hasSucceded" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак успешности выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
        <xs:annotation>
          <xs:documentation>Коллекция сообщений, порожденных в ходе выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="id" type="ID" use="required">
      <xs:annotation>
        <xs:documentation>Идентификатор операции</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType abstract="true" name="OperationCompletenessPercentage">
    <xs:annotation>
      <xs:documentation>Описание текущего статуса выполнения операции в процентах (0%-100%)</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="OperationCompletenessBase">
        <xs:sequence>
          <xs:element name="completenessStatus">
            <xs:annotation>
              <xs:documentation>Статус (0%-100%)</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:unsignedByte">
                <xs:minInclusive value="0"/>
                <xs:maxInclusive value="100"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="OperationCompletenessBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип для описания текущего статуса выполнения операции</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
  </xs:complexType>
  <!--calling methods' options-->
  <xs:element name="options" type="Options">
    <xs:annotation>
      <xs:documentation>Параметры вызова метода</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="Options">
    <xs:annotation>
      <xs:documentation>Набор именованных значений</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="entry" type="KeyValuePair">
        <xs:annotation>
          <xs:documentation>Именованное значение</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--pagination-->
  <xs:element name="pagingOptions" type="PagingOptions">
    <xs:annotation>
      <xs:documentation>Параметры пагинации</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType abstract="true" name="PagingResults">
    <xs:annotation>
      <xs:documentation>Список с пагинацией</xs:documentation>
    </xs:annotation>
    <xs:attribute name="pageNumber" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Номер страницы (zero-based)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageTotal" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Общее количество страниц</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageSize" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Размер страницы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="morePagesAvailable" type="xs:boolean" use="required">
      <xs:annotation>
        <xs:documentation>Флаг доступности других страниц с результатами для "постраничного листания" (true -
                    если доступны еще страницы; false - иначе)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="totalItemsCount" type="xs:long" use="required">
      <xs:annotation>
        <xs:documentation>Общее количество элементов в выборке</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PagingResultsImpl">
    <xs:complexContent>
      <xs:extension base="PagingResults"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="PagingOptions">
    <xs:annotation>
      <xs:documentation>Параметры пагинации</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
    <xs:attribute name="pageNumber" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Номер страницы (zero-based)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageSize" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Размер страницы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <!--base types-->
  <xs:complexType name="TimeInterval">
    <xs:annotation>
      <xs:documentation>Временной период (время)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="start" type="xs:time">
        <xs:annotation>
          <xs:documentation>Время начала интервала</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="end" type="xs:time">
        <xs:annotation>
          <xs:documentation>Время окончания интервала</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DatePeriod">
    <xs:annotation>
      <xs:documentation>Временной период (дата)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="start" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата начала периода</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="end" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата окончания периода</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService</con:endpoint></con:endpoints><con:operation id="8085f8f1-eb1f-41f4-907f-daa9472b5c9e" isOneWay="false" action="getHospitalizationInfoByPatient" name="getHospitalizationInfoByPatient" bindingOperationName="getHospitalizationInfoByPatient" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="718402f3-876e-4a53-8b90-b76ec33a5f7c" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/hospitalization/hospitalService/v2/types/" xmlns:v2="http://emias.mos.ru/hospitalization/core/v2/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getHospitalizationInfoByPatientRequest>\r
         <typ:patientId>?</typ:patientId>\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <v2:entry key="?">?</v2:entry>\r
         </typ:options>\r
         <!--Optional:-->\r
         <typ:datePeriod>\r
            <!--Optional:-->\r
            <v2:start>?</v2:start>\r
            <!--Optional:-->\r
            <v2:end>?</v2:end>\r
         </typ:datePeriod>\r
         <!--Optional:-->\r
         <typ:pagingOptions pageNumber="?" pageSize="?">\r
            <!--Optional:-->\r
            <v2:sortingOptions>\r
               <!--1 to 3 repetitions:-->\r
               <v2:sortOrder>\r
                  <v2:attributeName>?</v2:attributeName>\r
                  <v2:descending>?</v2:descending>\r
               </v2:sortOrder>\r
            </v2:sortingOptions>\r
         </typ:pagingOptions>\r
      </typ:getHospitalizationInfoByPatientRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/hospitalization/hospitalService/v2/hospitalServicePortType/getHospitalizationInfoByPatientRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" id="8d0d6c0a-d0c7-4340-b70b-bfc11b014236" wsaVersion="NONE" name="planServiceBinding" type="wsdl" bindingName="{http://emias.mos.ru/dnpdn/planService/v2/}planServiceBinding" soapVersion="1_2" anonymous="optional" definition="http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?wsdl"><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="planService" targetNamespace="http://emias.mos.ru/dnpdn/planService/v2/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:ns1="http://emias.mos.ru/dnpdn/planService/v2/types/" xmlns:nsf="http://emias.mos.ru/system/v1/faults/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:tns="http://emias.mos.ru/dnpdn/planService/v2/" xmlns:uctx="http://emias.mos.ru/system/v1/userContext/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
    <xs:schema>
      <xs:import namespace="http://emias.mos.ru/system/v1/userContext/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Cy_OJPCNz0JEvHwUwGkuCPjPM_RFui1_6Xf6LTygA6.WQIQioP8.dJttWfYnwQLyXm9"/>
      <xs:import namespace="http://emias.mos.ru/system/v1/faults/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Cy_OJPCNz0JEvHwUwGkuCPjPM_CBPiryLmf5KLuF3ojpVAaaFouiWJ1oD6ztg--"/>
      <xs:import namespace="http://emias.mos.ru/dnpdn/planService/v2/types/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Gb_Z5LBcCwWXezaRQe3vG7wI5eWS_m.zK_Csqn5kOn8ihZYcyn.IEq7hc8EOjo-"/>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="getPlanExtensionInput">
    <wsdl:part element="ns1:GetPlanExtensionRequest" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="userContext">
    <wsdl:documentation>Контекст пользователя</wsdl:documentation>
    <wsdl:part element="uctx:userContext" name="userContext"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getEventsByPatientsOutput">
    <wsdl:part element="ns1:GetEventsByPatientsResponse" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPlanShortOutput">
    <wsdl:part element="ns1:GetPlanShortResponse" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPlanExtensionOutput">
    <wsdl:part element="ns1:GetPlanExtensionResponse" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPlansOutput">
    <wsdl:part element="ns1:GetPlansResponse" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPlanShortInput">
    <wsdl:part element="ns1:GetPlanShortRequest" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getCardForm30ProcessingStatusOutput">
    <wsdl:part element="ns1:GetCardForm30ProcessingStatusResponse" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getEventsByPatientsInput">
    <wsdl:part element="ns1:GetEventsByPatientsRequest" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPlansInput">
    <wsdl:part element="ns1:GetPlansRequest" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getCurrentEventStatusInput">
    <wsdl:part element="ns1:GetCurrentEventStatusRequest" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getCardForm30ProcessingStatusInput">
    <wsdl:part element="ns1:GetCardForm30ProcessingStatusRequest" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="fault">
    <wsdl:documentation>Ошибка</wsdl:documentation>
    <wsdl:part element="nsf:fault" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getCurrentEventStatusOutput">
    <wsdl:part element="ns1:GetCurrentEventStatusResponse" name="body"></wsdl:part>
  </wsdl:message>
  <wsdl:portType name="planServicePortType">
    <wsdl:operation name="GetPlanExtension">
      <wsdl:input message="tns:getPlanExtensionInput"></wsdl:input>
      <wsdl:output message="tns:getPlanExtensionOutput"></wsdl:output>
      <wsdl:fault message="tns:fault" name="fault"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetPlanShort">
      <wsdl:input message="tns:getPlanShortInput"></wsdl:input>
      <wsdl:output message="tns:getPlanShortOutput"></wsdl:output>
      <wsdl:fault message="tns:fault" name="fault"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetEventsByPatient">
      <wsdl:input message="tns:getEventsByPatientsInput"></wsdl:input>
      <wsdl:output message="tns:getEventsByPatientsOutput"></wsdl:output>
      <wsdl:fault message="tns:fault" name="fault"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetCurrentEventStatus">
      <wsdl:input message="tns:getCurrentEventStatusInput"></wsdl:input>
      <wsdl:output message="tns:getCurrentEventStatusOutput"></wsdl:output>
      <wsdl:fault message="tns:fault" name="fault"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetPlans">
      <wsdl:input message="tns:getPlansInput"></wsdl:input>
      <wsdl:output message="tns:getPlansOutput"></wsdl:output>
      <wsdl:fault message="tns:fault" name="fault"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetCardForm30ProcessingStatus">
      <wsdl:input message="tns:getCardForm30ProcessingStatusInput"></wsdl:input>
      <wsdl:output message="tns:getCardForm30ProcessingStatusOutput"></wsdl:output>
      <wsdl:fault message="tns:fault" name="fault"></wsdl:fault>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="planServiceBinding" type="tns:planServicePortType">
    <soap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="GetPlanExtension">
      <soap12:operation soapAction="GetPlanExtension"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"></soap12:header>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetPlanShort">
      <soap12:operation soapAction="GetPlanShort"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"></soap12:header>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetEventsByPatient">
      <soap12:operation soapAction="GetEventsByPatient"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"></soap12:header>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetCurrentEventStatus">
      <soap12:operation soapAction="GetCurrentEventStatus"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"></soap12:header>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetPlans">
      <soap12:operation soapAction="GetPlans"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"></soap12:header>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetCardForm30ProcessingStatus">
      <soap12:operation soapAction="GetCardForm30ProcessingStatus"/>
      <wsdl:input>
        <soap12:header message="tns:userContext" part="userContext" use="literal"></soap12:header>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap12:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="planService">
    <wsdl:port binding="tns:planServiceBinding" name="planServicePortSoap12">
      <soap12:address location="http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService"/>
    </wsdl:port>
    <wsp:PolicyReference URI="#authPolicy"/>
  </wsdl:service>
  <wsp:Policy wsu:Id="authPolicy">
    <sp:SupportingTokens xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
      <wsp:Policy>
        <sp:UsernameToken sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
          <wsp:Policy>
            <sp:NoPassword/>
          </wsp:Policy>
        </sp:UsernameToken>
      </wsp:Policy>
    </sp:SupportingTokens>
  </wsp:Policy>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Cy_OJPCNz0JEvHwUwGkuCPjPM_RFui1_6Xf6LTygA6.WQIQioP8.dJttWfYnwQLyXm9</con:url><con:content><![CDATA[<!--Published by JAX-WS RI (http://jax-ws.java.net). RI's version is Metro/2.4.3 (RELEASE-2.4.3-ad3323c; 2019-01-21T17:46:06+0000) JAXWS-RI/2.3.2 JAXWS-API/2.3.2 JAXB-RI/2.3.2 JAXB-API/2.3.2 git-revision#unknown.-->
<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/system/v1/userContext/" xmlns="http://emias.mos.ru/system/v1/userContext/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <!--error message description-->
  <xs:complexType name="ErrorMessageCollection">
    <xs:annotation>
      <xs:documentation>Коллекция сообщений об ошибках</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="message" type="ErrorMessage">
        <xs:annotation>
          <xs:documentation>Сообщение об ошибке</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ErrorMessage">
    <xs:annotation>
      <xs:documentation>Сообщение об ошибке</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Message">
        <xs:sequence>
          <xs:element minOccurs="0" name="parameters">
            <xs:annotation>
              <xs:documentation>Коллекция параметров сообщения</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="unbounded" name="parameter" type="KeyValuePair">
                  <xs:annotation>
                    <xs:documentation>Параметр сообщения</xs:documentation>
                  </xs:annotation>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
          <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Сопутствующие сообщения об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="type" type="ErrorMessageTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип сообщения</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:simpleType name="ErrorMessageTypes">
    <xs:annotation>
      <xs:documentation>Тип сообщения об ошибке</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="ERROR">
        <xs:annotation>
          <xs:documentation>Ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="WARNING">
        <xs:annotation>
          <xs:documentation>Предупреждение (не блокирующая ошибка)</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="INFO">
        <xs:annotation>
          <xs:documentation>Информационное сообщение</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:long"/>
  </xs:simpleType>
  <xs:complexType name="KeyValuePair">
    <xs:annotation>
      <xs:documentation>Представляет тип "ключ/значение"</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="key" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Ключ</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="Message">
    <xs:annotation>
      <xs:documentation>Сообщение</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="code" type="xs:string">
        <xs:annotation>
          <xs:documentation>Код сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="message" type="xs:string">
        <xs:annotation>
          <xs:documentation>Текст сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="userContext" type="UserContext">
    <xs:annotation>
      <xs:documentation>Контекст пользователя</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="UserContext">
    <xs:annotation>
      <xs:documentation>Контекст пользователя</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="systemName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Шифр системы-потребителя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Имя пользователя (логин)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userRoleId" type="ID">
        <xs:annotation>
          <xs:documentation>Идентификатор Роли пользователя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="isUserRoleSystemWide" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак "Общесистемная Роль пользователя"</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userRights">
        <xs:annotation>
          <xs:documentation>Коллекция Полномочий пользователя</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="userRightId" type="ID">
              <xs:annotation>
                <xs:documentation>ИД Полномочия пользователя</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="jobExecutionId" type="ID"/>
      <xs:element minOccurs="0" name="hostIp" type="xs:string">
        <xs:annotation>
          <xs:documentation>IP адрес хоста</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="hostName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Имя хоста</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Cy_OJPCNz0JEvHwUwGkuCPjPM_CBPiryLmf5KLuF3ojpVAaaFouiWJ1oD6ztg--</con:url><con:content><![CDATA[<!--Published by JAX-WS RI (http://jax-ws.java.net). RI's version is Metro/2.4.3 (RELEASE-2.4.3-ad3323c; 2019-01-21T17:46:06+0000) JAXWS-RI/2.3.2 JAXWS-API/2.3.2 JAXB-RI/2.3.2 JAXB-API/2.3.2 git-revision#unknown.-->
<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/system/v1/faults/" xmlns="http://emias.mos.ru/system/v1/faults/" xmlns:uctx="http://emias.mos.ru/system/v1/userContext/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import namespace="http://emias.mos.ru/system/v1/userContext/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Cy_OJPCNz0JEvHwUwGkuCPjPM_RFui1_6Xf6LTygA6.WQIQioP8.dJttWfYnwQLyXm9"/>
  <xs:complexType name="ErrorMessageCollection">
    <xs:annotation>
      <xs:documentation>Коллекция сообщений об ошибках</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="message" type="ErrorMessage">
        <xs:annotation>
          <xs:documentation>Сообщение об ошибке</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ErrorMessage">
    <xs:annotation>
      <xs:documentation>Сообщение об ошибке</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Message">
        <xs:sequence>
          <xs:element minOccurs="0" name="parameters">
            <xs:annotation>
              <xs:documentation>Коллекция параметров сообщения</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="unbounded" name="parameter" type="KeyValuePair">
                  <xs:annotation>
                    <xs:documentation>Параметр сообщения</xs:documentation>
                  </xs:annotation>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
          <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Сопутствующие сообщения об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="type" type="ErrorMessageTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип сообщения</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:simpleType name="ErrorMessageTypes">
    <xs:annotation>
      <xs:documentation>Тип сообщения об ошибке</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="ERROR">
        <xs:annotation>
          <xs:documentation>Ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="WARNING">
        <xs:annotation>
          <xs:documentation>Предупреждение (не блокирующая ошибка)</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="INFO">
        <xs:annotation>
          <xs:documentation>Информационное сообщение</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:long"/>
  </xs:simpleType>
  <xs:complexType name="KeyValuePair">
    <xs:annotation>
      <xs:documentation>Представляет тип "ключ/значение"</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="key" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Ключ</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="Message">
    <xs:annotation>
      <xs:documentation>Сообщение</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="code" type="xs:string">
        <xs:annotation>
          <xs:documentation>Код сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="message" type="xs:string">
        <xs:annotation>
          <xs:documentation>Текст сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--faults-->
  <xs:element name="fault" type="BaseFault">
    <xs:annotation>
      <xs:documentation>Базовый тип ошибки</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="SecurityFault">
    <xs:annotation>
      <xs:documentation>Ошибка безопасности</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element ref="uctx:userContext"/>
          <xs:choice>
            <xs:element name="unauthorizedRequestSecurityException" type="UnauthorizedRequestSecurityException">
              <xs:annotation>
                <xs:documentation>Исключение безопасности типа UNAUTHORIZED_REQUEST_EXCEPTION</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="otherSecurityException" type="OtherSecurityException">
              <xs:annotation>
                <xs:documentation>Исключение безопасности типа OTHER_SECURITY_EXCEPTION</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:sequence>
        <xs:attribute fixed="SECURITY" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="BusinessFault">
    <xs:annotation>
      <xs:documentation>Бизнес ошибка</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Коллекция Сообщений об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="hasErrors" type="xs:boolean">
            <xs:annotation>
              <xs:documentation>Признак наличия ошибок в списке сообщений</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute fixed="BUSINESS" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="UnexpectedFault">
    <xs:annotation>
      <xs:documentation>Непредвиденная ошибка</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element name="version" type="xs:string">
            <xs:annotation>
              <xs:documentation>Версия продукта-сервиса</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="stackTrace">
            <xs:annotation>
              <xs:documentation>Стек вызова (последние 10 записей)</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="10" name="stackTraceRecord">
                  <xs:annotation>
                    <xs:documentation>Запись StackTrace</xs:documentation>
                  </xs:annotation>
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element name="declaringClass" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование класса, содержащего метод</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="methodName" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование метода</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="fileName" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование файла</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="lineNumber" type="xs:int">
                        <xs:annotation>
                          <xs:documentation>Номер строки кода</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
        <xs:attribute fixed="UNEXPECTED" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="BaseFault">
    <xs:annotation>
      <xs:documentation>Описание базового типа описания ошибки</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
  </xs:complexType>
  <!--security exceptions-->
  <xs:complexType name="UnauthorizedRequestSecurityException">
    <xs:annotation>
      <xs:documentation>Исключение безопасности типа UNAUTHORIZED_REQUEST_EXCEPTION</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="requiredRights">
        <xs:annotation>
          <xs:documentation>Перечень идентификаторов недостающих Полномочий пользователя</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" name="userRightId" type="ID">
              <xs:annotation>
                <xs:documentation>Идентификатор Полномочия пользователя</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute fixed="UNAUTHORIZED_REQUEST_EXCEPTION" name="type" type="SecurityExceptionTypes" use="required">
      <xs:annotation>
        <xs:documentation>Тип исключения безопасности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="OtherSecurityException">
    <xs:annotation>
      <xs:documentation>Исключение безопасности типа OTHER_SECURITY_EXCEPTION</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="message" type="Message">
        <xs:annotation>
          <xs:documentation>Сообщение</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute fixed="OTHER_SECURITY_EXCEPTION" name="type" type="SecurityExceptionTypes" use="required">
      <xs:annotation>
        <xs:documentation>Тип исключения безопасности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:simpleType name="SecurityExceptionTypes">
    <xs:annotation>
      <xs:documentation>Типы исключений безопасности</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="UNAUTHORIZED_REQUEST_EXCEPTION"/>
      <xs:enumeration value="OTHER_SECURITY_EXCEPTION"/>
    </xs:restriction>
  </xs:simpleType>
  <!--components-->
  <xs:simpleType name="FaultTypes">
    <xs:annotation>
      <xs:documentation>Тип ошибки</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="SECURITY">
        <xs:annotation>
          <xs:documentation>Непредвиденная ошибка приложения</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="BUSINESS">
        <xs:annotation>
          <xs:documentation>Бизнес ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="UNEXPECTED">
        <xs:annotation>
          <xs:documentation>Ошибка безопасности</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Gb_Z5LBcCwWXezaRQe3vG7wI5eWS_m.zK_Csqn5kOn8ihZYcyn.IEq7hc8EOjo-</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/dnpdn/planService/v2/types/" xmlns:core="http://emias.mos.ru/dnpdn/core/v2/" xmlns:tns="http://emias.mos.ru/dnpdn/planService/v2/types/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import namespace="http://emias.mos.ru/dnpdn/core/v2/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Gb_Z5LBcD8VTuenVkfvrX7xCk4a7lNmOVw2knbX79MMPw--"/>
  <!--Метод получения расширенной информации о ПДН-->
  <xs:element name="GetPlanExtensionRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="planOfEventsId" type="xs:long"/>
        <xs:element minOccurs="0" name="patientId" type="xs:long"/>
        <xs:element minOccurs="0" name="documentId" type="xs:string"/>
        <xs:element minOccurs="0" name="archivePlans" type="xs:boolean"/>
        <xs:element minOccurs="0" name="options" type="core:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="GetPlanExtensionResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="result" type="core:PlanOfEventsExtension"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <!--Метод получения краткой информации о ПДН-->
  <xs:element name="GetPlanShortRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="planOfEventsId" type="xs:long"/>
        <xs:element minOccurs="0" name="patientId" type="xs:long"/>
        <xs:element minOccurs="0" name="documentId" type="xs:string"/>
        <xs:element minOccurs="0" name="options" type="core:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="GetPlanShortResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="result" type="core:PlanOfEventsShort"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <!--Метод обеспечивает предоставление информации о мероприятиях пациента на период времени.-->
  <xs:element name="GetEventsByPatientsRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="patientId" type="xs:long"/>
        <xs:element name="startDate" type="xs:dateTime"/>
        <xs:element name="endDate" type="xs:dateTime"/>
        <xs:element minOccurs="0" name="archiveEvents" type="xs:boolean"/>
        <xs:element name="pagingOptions" type="core:PagingOptions"/>
        <xs:element minOccurs="0" name="options" type="core:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="GetEventsByPatientsResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="result" type="tns:EventsByPatientResultPage"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="EventsByPatientResultPage">
    <xs:complexContent>
      <xs:extension base="core:PagingResults">
        <xs:sequence>
          <xs:element minOccurs="0" name="eventsByPatient" type="core:EventsByPatient"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Метод получения информации по созданным назначениям-->
  <xs:element name="GetCurrentEventStatusRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="patientId" type="xs:long"/>
        <xs:element minOccurs="0" name="documentId" type="xs:string"/>
        <xs:element minOccurs="0" name="options" type="core:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="GetCurrentEventStatusResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="result" type="core:CurrentEvents"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <!--Метод получения информации о программах ПДН-->
  <xs:element name="GetPlansRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="planOfEventsId" type="xs:long"/>
        <xs:element minOccurs="0" name="patientId" type="xs:long"/>
        <xs:element minOccurs="0" name="documentId" type="xs:string"/>
        <xs:element minOccurs="0" name="returnActualPlan" type="xs:boolean"/>
        <xs:element minOccurs="0" name="planStartDateFrom" type="xs:date"/>
        <xs:element minOccurs="0" name="planEndDateTo" type="xs:date"/>
        <xs:element minOccurs="0" name="options" type="core:Options"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="GetPlansResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="result" type="core:PlansOfEvents"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <!--Метод получения статуса обработки документов карты формы 030-->
  <xs:element name="GetCardForm30ProcessingStatusRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" name="documentId" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="GetCardForm30ProcessingStatusResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" name="documentStatuses" type="core:DocumentStatus"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Gb_Z5LBcD8VTuenVkfvrX7xCk4a7lNmOVw2knbX79MMPw--</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/dnpdn/core/v2/" xmlns="http://emias.mos.ru/dnpdn/core/v2/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Cy_OJPCNz0JEuHmUhDvozy7dZLAs2rTS0UCFnwFLedfIMkk4w--"/>
  <!--planManageService-->
  <xs:complexType name="Assigment">
    <xs:sequence>
      <xs:element name="id" type="xs:string"/>
      <xs:element name="passedInExternalMO" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="EventPDN">
    <xs:sequence>
      <xs:element name="id" type="ID"/>
      <xs:element name="status" type="StatusEnum"/>
      <xs:element name="assigmentPDN" type="Assigment"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ListOfEvents">
    <xs:sequence>
      <xs:element name="events">
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" name="event" type="EventPDN"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--planService-->
  <!--PlanOfEvents-->
  <xs:complexType name="PlanOfEvents">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="jobExecutionId" type="xs:long"/>
      <xs:element maxOccurs="unbounded" name="diagnosis" type="Diagnosis"/>
      <xs:element name="startTime" type="xs:dateTime"/>
      <xs:element name="endTime" type="xs:dateTime"/>
      <xs:element name="documentId" type="xs:string"/>
      <xs:element minOccurs="0" name="parentDocumentId" type="xs:string"/>
      <xs:element name="moId" type="xs:long"/>
      <xs:element name="moName" type="xs:string"/>
      <xs:element name="status" type="xs:string"/>
      <xs:element name="archived" type="xs:boolean"/>
      <xs:element minOccurs="0" name="calendarYearStartDate" type="xs:dateTime"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="planOfEventsDiagnosis" type="Diagnosis"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="observationProgram" type="ObservationProgram"/>
    </xs:sequence>
  </xs:complexType>
  <!--PlanOfEventsShort-->
  <xs:complexType name="PlanOfEventsShort">
    <xs:complexContent>
      <xs:extension base="PlanOfEvents">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="eventsPeriod" type="EventsPeriod"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--PlanOfEventsExtension-->
  <xs:complexType name="PlanOfEventsExtension">
    <xs:complexContent>
      <xs:extension base="PlanOfEvents">
        <xs:sequence>
          <xs:element name="patientId" type="xs:long"/>
          <xs:element maxOccurs="unbounded" name="eventsPeriod" type="EventsPeriodInExtendedPlan"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="archivePlans" type="ArchivePlanOfEvents"/>
          <xs:element minOccurs="0" name="statusHistoryLists" type="StatusHistoryLists"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="PlanOfEventsForCurrentEventStatus">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="documentId" type="xs:string"/>
      <xs:element name="status" type="xs:string"/>
      <xs:element maxOccurs="unbounded" name="Events" type="EventsPeriodForCurrentEventStatus"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="Diagnosis">
    <xs:sequence>
      <xs:element name="diagnosisCode" type="xs:string"/>
      <xs:element name="diagnosisTitle" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="EventsPeriodInExtendedPlan">
    <xs:sequence>
      <xs:element minOccurs="0" name="priority" type="xs:string"/>
      <xs:element name="startTime" type="xs:dateTime"/>
      <xs:element name="endTime" type="xs:dateTime"/>
      <xs:element maxOccurs="unbounded" name="event" type="EventInExtendedPlan"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="EventInExtendedPlan">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="eventStatus" type="StatusEnum"/>
      <xs:element minOccurs="0" name="comment" type="xs:string"/>
      <xs:element name="archived" type="xs:boolean"/>
      <xs:element minOccurs="0" name="assignment" type="AssignmentInExtendedPlan"/>
      <xs:element minOccurs="0" name="appointment" type="AppointmentInExtendedPlan"/>
      <xs:element minOccurs="0" name="drugsEvent" type="DrugsEventInExtendedPlan"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="diagnoses" type="Diagnosis"/>
      <xs:element minOccurs="0" name="referralCreated" type="xs:boolean"/>
      <xs:element minOccurs="0" name="destinationType" type="xs:string"/>
      <xs:element minOccurs="0" name="destinationMedicalOrganizationId" type="xs:long"/>
      <xs:element minOccurs="0" name="destinationMedicalOrganizationName" type="xs:string"/>
      <xs:element minOccurs="0" name="passedBeforePDNCreated" type="xs:boolean"/>
      <xs:element minOccurs="0" name="eventExecutionType" type="xs:string"/>
      <xs:element minOccurs="0" name="unplannedEvent" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  <!--AssignmentInExtendedPlan-->
  <xs:complexType name="AssignmentInExtendedPlan">
    <xs:sequence>
      <xs:element minOccurs="0" name="assignmentConsultation" type="AssignmentConsultationExtended"/>
      <xs:element minOccurs="0" name="assignmentInstrumental" type="AssignmentInstrumentalExtended"/>
      <xs:element minOccurs="0" name="assignmentLaboratoryExtended" type="AssignmentLaboratoryExtended"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="AssignmentConsultationExtended">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element minOccurs="0" name="assignment_id" type="xs:string"/>
      <xs:element minOccurs="0" name="suppReferralId" type="xs:long"/>
      <xs:element name="diagnosisCode" type="xs:string"/>
      <xs:element name="diagnosisTitle" type="xs:string"/>
      <xs:element name="specializationCode" type="xs:string"/>
      <xs:element name="specializationTitle" type="xs:string"/>
      <xs:element name="reason" type="xs:string"/>
      <xs:element minOccurs="0" name="documentId" type="xs:string"/>
      <xs:element name="status" type="StatusEnum"/>
      <xs:element minOccurs="0" name="documentCreateDate" type="xs:dateTime"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="documentsByAssignment" type="DocumentsByAssignment"/>
      <xs:element minOccurs="0" name="examinationPassedInExternalMO" type="xs:boolean"/>
      <xs:element minOccurs="0" name="careEventLinkedpassedInExternalMO" type="ID"/>
      <xs:element minOccurs="0" name="specialityCode" type="xs:string"/>
      <xs:element minOccurs="0" name="assigmentToControlCheckUp" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DocumentsByAssignment">
    <xs:sequence>
      <xs:element name="documentId" type="xs:string"/>
      <xs:element name="documentTypeName" type="DocumentTypeNameEnum"/>
      <xs:element name="documentCreateDate" type="xs:dateTime"/>
    </xs:sequence>
  </xs:complexType>
  <xs:simpleType name="DocumentTypeNameEnum">
    <xs:restriction base="xs:string">
      <xs:enumeration value="ASSIGNMENT_INSTRUMENTAL"/>
      <xs:enumeration value="ASSIGNMENT_LABORATORY"/>
      <xs:enumeration value="ASSIGNMENT_CONSULTATION"/>
      <xs:enumeration value="PRESCRIPTION"/>
      <xs:enumeration value="PROCESSING_PROTOCOL_AI"/>
      <xs:enumeration value="DECODE_PROTOCOL_AI"/>
      <xs:enumeration value="RESULT_OF_LI"/>
      <xs:enumeration value="INSPECTION_PROTOCOL"/>
      <xs:enumeration value="CANCELED_ASSIGNMENT"/>
      <xs:enumeration value="RESULT_OF_CONSULTATION"/>
      <xs:enumeration value="REFERRAL_TO_HOSPITAL"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="AssignmentInstrumentalExtended">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element minOccurs="0" name="assignment_id" type="xs:long"/>
      <xs:element minOccurs="0" name="suppReferralId" type="xs:long"/>
      <xs:element name="diagnosisCode" type="xs:string"/>
      <xs:element name="diagnosisTitle" type="xs:string"/>
      <xs:element name="mainDiagnosticId" type="xs:long"/>
      <xs:element name="mainDiagnosticTitle" type="xs:string"/>
      <xs:element name="reason" type="xs:string"/>
      <xs:element minOccurs="0" name="documentId" type="xs:string"/>
      <xs:element name="status" type="StatusEnum"/>
      <xs:element minOccurs="0" name="documentCreateDate" type="xs:dateTime"/>
      <xs:element minOccurs="0" name="examinationPassedInExternalMO" type="xs:boolean"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="additionalDiagnostics" type="AdditionalDiagnostics"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="documentsByAssignment" type="DocumentsByAssignment"/>
      <xs:element minOccurs="0" name="careEventLinkedpassedInExternalMO" type="ID"/>
      <xs:element minOccurs="0" name="justification" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="AdditionalDiagnostics">
    <xs:sequence>
      <xs:element name="additionalDiagnosticId" type="xs:long"/>
      <xs:element name="additionalDiagnosticTitle" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="AssignmentLaboratoryExtended">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element minOccurs="0" name="assignment_id" type="xs:long"/>
      <xs:element name="diagnosisCode" type="xs:string"/>
      <xs:element name="diagnosisTitle" type="xs:string"/>
      <xs:element name="laboratoryCode" type="xs:string"/>
      <xs:element name="laboratoryTitle" type="xs:string"/>
      <xs:element name="biomaterialCode" type="xs:string"/>
      <xs:element name="biomaterialTitle" type="xs:string"/>
      <xs:element name="locusCode" type="xs:string"/>
      <xs:element name="locusTitle" type="xs:string"/>
      <xs:element minOccurs="0" name="samplingTypeId" type="xs:long"/>
      <xs:element minOccurs="0" name="examinationPassedInExternalMO" type="xs:boolean"/>
      <xs:element minOccurs="0" name="careEventLinkedpassedInExternalMO" type="ID"/>
      <xs:element minOccurs="0" name="samplingTypeName" type="xs:string"/>
      <xs:element minOccurs="0" name="documentId" type="xs:string"/>
      <xs:element name="status" type="StatusEnum"/>
      <xs:element minOccurs="0" name="documentCreateDate" type="xs:dateTime"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="anthropometricData" type="AnthropometricData"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="documentsByAssignment" type="DocumentsByAssignment"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="result" type="TestResult"/>
      <xs:element minOccurs="0" name="moIdTakingBiomaterial" type="xs:long"/>
      <xs:element minOccurs="0" name="moNameTakingBiomaterial" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="AnthropometricData">
    <xs:sequence>
      <xs:element name="anthropometricDataId" type="xs:string"/>
      <xs:element name="anthropometricDataName" type="xs:string"/>
      <xs:element name="anthropometricDataValue" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="TestResult">
    <xs:sequence>
      <xs:element minOccurs="0" name="testName" type="xs:string"/>
      <xs:element minOccurs="0" name="testStandartValue" type="xs:string"/>
      <xs:element minOccurs="0" name="testValue" type="xs:string"/>
      <xs:element minOccurs="0" name="testUnit" type="xs:string"/>
      <xs:element minOccurs="0" name="testDeviation" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <!--AppointmentInExtendedPlan-->
  <xs:complexType name="AppointmentInExtendedPlan">
    <xs:complexContent>
      <xs:extension base="Appointment">
        <xs:sequence>
          <xs:element name="type" type="xs:string"/>
          <xs:element name="appointmentDate" type="xs:dateTime"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--DrugsEvent-->
  <xs:complexType name="DrugsEventInExtendedPlan">
    <xs:complexContent>
      <xs:extension base="DrugsEvent">
        <xs:sequence>
          <xs:element minOccurs="0" name="drugMnId" type="xs:string"/>
          <xs:element minOccurs="0" name="drugTnId" type="xs:string"/>
          <xs:element name="diagnosisCode" type="xs:string"/>
          <xs:element name="diagnosisTitle" type="xs:string"/>
          <xs:element name="title" type="xs:string"/>
          <xs:element minOccurs="0" name="number" type="xs:string"/>
          <xs:element minOccurs="0" name="prescriptionId" type="xs:long"/>
          <xs:element minOccurs="0" name="documentId" type="xs:string"/>
          <xs:element minOccurs="0" name="documentCreateDate" type="xs:dateTime"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="EventsPeriod">
    <xs:sequence>
      <xs:element name="startTime" type="xs:dateTime"/>
      <xs:element name="endTime" type="xs:dateTime"/>
      <xs:element maxOccurs="unbounded" name="event" type="Event"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="EventsPeriodForCurrentEventStatus">
    <xs:sequence>
      <xs:element name="startTime" type="xs:dateTime"/>
      <xs:element name="endTime" type="xs:dateTime"/>
      <xs:element maxOccurs="unbounded" name="event" type="EventForCurrentEventStatus"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="Event">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="eventStatus" type="StatusEnum"/>
      <xs:element name="archived" type="xs:boolean"/>
      <xs:element minOccurs="0" name="assignment" type="Assignment"/>
      <xs:element minOccurs="0" name="appointment" type="Appointment"/>
      <xs:element minOccurs="0" name="drugsEvent" type="DrugsEvent"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="diagnoses" type="Diagnosis"/>
      <xs:element minOccurs="0" name="referralCreated" type="xs:boolean"/>
      <xs:element minOccurs="0" name="destinationType" type="xs:string"/>
      <xs:element minOccurs="0" name="destinationMedicalOrganizationId" type="xs:long"/>
      <xs:element minOccurs="0" name="destinationMedicalOrganizationName" type="xs:string"/>
      <xs:element minOccurs="0" name="passedBeforePDNCreated" type="xs:boolean"/>
      <xs:element minOccurs="0" name="eventExecutionType" type="xs:string"/>
      <xs:element minOccurs="0" name="unplannedEvent" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="EventForCurrentEventStatus">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="eventStatus" type="StatusEnum"/>
      <xs:element name="archived" type="xs:boolean"/>
      <xs:element minOccurs="0" name="assignment" type="AssignmentForCurrentEventStatus"/>
      <xs:element minOccurs="0" name="drugsEvent" type="DrugsEventForCurrentEventStatus"/>
    </xs:sequence>
  </xs:complexType>
  <!--Assignments-->
  <xs:complexType name="Assignment">
    <xs:sequence>
      <xs:element minOccurs="0" name="assignmentConsultation" type="AssignmentConsultation"/>
      <xs:element minOccurs="0" name="assignmentInstrumental" type="AssignmentInstrumental"/>
      <xs:element minOccurs="0" name="assignmentLaboratory" type="AssignmentLaboratory"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="AssignmentForCurrentEventStatus">
    <xs:sequence>
      <xs:element minOccurs="0" name="assignmentConsultation" type="AssignmentConsultationForCurrentEventStatus"/>
      <xs:element minOccurs="0" name="assignmentInstrumental" type="AssignmentBaseForCurrentEventStatus"/>
      <xs:element minOccurs="0" name="assignmentLaboratory" type="AssignmentBaseForCurrentEventStatus"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="AssignmentConsultation">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="specializationTitle" type="xs:string"/>
      <xs:element name="status" type="StatusEnum"/>
      <xs:element minOccurs="0" name="examinationPassedInExternalMO" type="xs:boolean"/>
      <xs:element minOccurs="0" name="careEventLinkedpassedInExternalMO" type="ID"/>
      <xs:element minOccurs="0" name="assigmentToControlCheckUp" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="AssignmentInstrumental">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="mainDiagnsoticTitle" type="xs:string"/>
      <xs:element name="status" type="StatusEnum"/>
      <xs:element minOccurs="0" name="examinationPassedInExternalMO" type="xs:boolean"/>
      <xs:element minOccurs="0" name="careEventLinkedpassedInExternalMO" type="ID"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="AssignmentLaboratory">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="laboratoryTitle" type="xs:string"/>
      <xs:element name="status" type="StatusEnum"/>
      <xs:element minOccurs="0" name="examinationPassedInExternalMO" type="xs:boolean"/>
      <xs:element minOccurs="0" name="careEventLinkedpassedInExternalMO" type="ID"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="AssignmentBaseForCurrentEventStatus">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element minOccurs="0" name="assignmentId" type="xs:string"/>
      <xs:element minOccurs="0" name="documentId" type="xs:string"/>
      <xs:element minOccurs="0" name="documentCreateDate" type="xs:dateTime"/>
      <xs:element name="status" type="StatusEnum"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="AssignmentConsultationForCurrentEventStatus">
    <xs:complexContent>
      <xs:extension base="AssignmentBaseForCurrentEventStatus">
        <xs:sequence>
          <xs:element minOccurs="0" name="suppReferralId" type="xs:long"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="Appointment">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="assignmentId" type="xs:string"/>
      <xs:element name="eventType" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DrugsEvent">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="status" type="StatusEnum"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DrugsEventForCurrentEventStatus">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element minOccurs="0" name="prescriptionId" type="xs:long"/>
      <xs:element minOccurs="0" name="documentId" type="xs:string"/>
      <xs:element minOccurs="0" name="documentCreateDate" type="xs:dateTime"/>
      <xs:element name="status" type="StatusEnum"/>
    </xs:sequence>
  </xs:complexType>
  <!--EventsByPatient-->
  <xs:complexType name="EventsByPatient">
    <xs:sequence>
      <xs:element name="patientId" type="xs:long"/>
      <xs:element maxOccurs="unbounded" name="eventsPeriod" type="EventsByPatientPeriod"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="EventsByPatientPeriod">
    <xs:sequence>
      <xs:element name="startTime" type="xs:dateTime"/>
      <xs:element name="endTime" type="xs:dateTime"/>
      <xs:element minOccurs="0" name="priority" type="xs:string"/>
      <xs:element maxOccurs="unbounded" name="event" type="EventByPatient"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="EventByPatient">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="planOfEventId" type="xs:long"/>
      <xs:element name="eventStatus" type="StatusEnum"/>
      <xs:element minOccurs="0" name="comment" type="xs:string"/>
      <xs:element minOccurs="0" name="assignment" type="AssignmentInExtendedPlan"/>
      <xs:element minOccurs="0" name="drugsEvent" type="DrugsEventInExtendedPlan"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="diagnoses" type="Diagnosis"/>
      <xs:element minOccurs="0" name="referralCreated" type="xs:boolean"/>
      <xs:element minOccurs="0" name="destinationType" type="xs:string"/>
      <xs:element minOccurs="0" name="destinationMedicalOrganizationId" type="xs:long"/>
      <xs:element minOccurs="0" name="destinationMedicalOrganizationName" type="xs:string"/>
      <xs:element minOccurs="0" name="passedBeforePDNCreated" type="xs:boolean"/>
      <xs:element minOccurs="0" name="eventExecutionType" type="xs:string"/>
      <xs:element minOccurs="0" name="unplannedEvent" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  <xs:simpleType name="StatusEnum">
    <xs:restriction base="xs:string">
      <xs:enumeration value="PLANNED"/>
      <xs:enumeration value="CREATED"/>
      <xs:enumeration value="COMPLETED"/>
      <xs:enumeration value="UNFINISHED"/>
      <xs:enumeration value="CANCELLED"/>
      <xs:enumeration value="EXPIRED"/>
      <xs:enumeration value="PRESCRIPTED"/>
    </xs:restriction>
  </xs:simpleType>
  <!--CurrentEventStatus-->
  <xs:complexType name="CurrentEvents">
    <xs:sequence>
      <xs:element name="patientId" type="xs:long"/>
      <xs:element name="eventsSum" type="xs:string"/>
      <xs:element name="eventsCreated" type="xs:string"/>
      <xs:element name="PlanOfEvents" type="PlanOfEventsForCurrentEventStatus"/>
    </xs:sequence>
  </xs:complexType>
  <!--PlanOfEventsMainInfo-->
  <xs:complexType name="PlanOfEventsMainInfo">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="startTime" type="xs:dateTime"/>
      <xs:element name="endTime" type="xs:dateTime"/>
      <xs:element name="documentId" type="xs:string"/>
      <xs:element minOccurs="0" name="parentDocumentId" type="xs:string"/>
      <xs:element name="moId" type="xs:long"/>
      <xs:element name="moName" type="xs:string"/>
      <xs:element name="status" type="xs:string"/>
      <xs:element name="archived" type="xs:boolean"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="planOfEventsDiagnosis" type="Diagnosis"/>
      <xs:element minOccurs="0" name="statusHistoryLists" type="StatusHistoryLists"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="PlansOfEvents">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="planOfEvents" type="PlanOfEventsMainInfo"/>
    </xs:sequence>
  </xs:complexType>
  <!--DocumentStatus-->
  <xs:complexType name="DocumentStatus">
    <xs:sequence>
      <xs:element name="documentId" type="xs:string"/>
      <xs:element name="isProcessed" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ArchivePlanOfEvents">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
      <xs:element name="jobExecutionId" type="xs:long"/>
      <xs:element name="startTime" type="xs:dateTime"/>
      <xs:element name="endTime" type="xs:dateTime"/>
      <xs:element name="documentId" type="xs:string"/>
      <xs:element minOccurs="0" name="parentDocumentId" type="xs:string"/>
      <xs:element name="moId" type="xs:long"/>
      <xs:element name="moName" type="xs:string"/>
      <xs:element name="status" type="xs:string"/>
      <xs:element name="archived" type="xs:boolean"/>
      <xs:element maxOccurs="unbounded" name="planOfEventsDiagnosis" type="Diagnosis"/>
      <xs:element maxOccurs="unbounded" name="observationProgram" type="ObservationProgram"/>
      <xs:element name="createDate" type="xs:dateTime"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ObservationProgram">
    <xs:sequence>
      <xs:element name="id" type="xs:long"/>
    </xs:sequence>
  </xs:complexType>
  <!--statusHistoryLists-->
  <xs:complexType name="StatusHistoryLists">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="statusHistory" type="StatusHistory"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="StatusHistory">
    <xs:sequence>
      <xs:element minOccurs="0" name="previousStatus" type="xs:string"/>
      <xs:element name="currentStatus" type="xs:string"/>
      <xs:element name="changeStatusReasonCode" type="xs:string"/>
      <xs:element name="changeStatusReasonDescription" type="xs:string"/>
      <xs:element minOccurs="0" name="removedDiagnosisCode" type="xs:string"/>
      <xs:element minOccurs="0" name="addedDiagnosisCode" type="xs:string"/>
      <xs:element name="created" type="xs:dateTime"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Cy_OJPCNz0JEuHmUhDvozy7dZLAs2rTS0UCFnwFLedfIMkk4w--</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.2" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Cy_OJPCNz0JEvHwUwGkuCPjPM_cFunWBerMmxg.4m3BPrNyW724"/>
  <!--references-->
  <xs:element name="mail" type="Mail">
    <xs:annotation>
      <xs:documentation>Адрес электронной почты</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="medicalOrganizationId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор Медицинской организации</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="medicalFacilityId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор Медицинского учреждения</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="compositionId" type="GUID">
    <xs:annotation>
      <xs:documentation>Идентификатор
                Композиции Think!EHR
                ЕМИАС.СИМИ</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="simiDocumentId" type="GUID">
    <xs:annotation>
      <xs:documentation>Идентификатор
                Документа СИМИ
                ЕМИАС.СИМИ</xs:documentation>
    </xs:annotation>
  </xs:element>
  <!--abstract types-->
  <xs:complexType abstract="true" name="Base">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
                используемый для описания
                компонентов сущностей,
                владельцеми которых является
                текущий продукт ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:attribute name="id" type="ID" use="required">
      <xs:annotation>
        <xs:documentation>Идентификатор
                    сущности/записи
                    на уровне всего ЕМИАС</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType abstract="true" name="EntityBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
                используемый для описания сущностей,
                владельцем которых является
                текущий продукт ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Base">
        <xs:attribute name="archived" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Признак "Архивная сущность"</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="ForeignBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
                используемый для описания
                компонентов сущностей,
                владельцами которых являются
                другие продукты ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Base"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="ForeignEntityBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
                используемый для описания сущностей,
                владельцами которых являются
                другие продукты ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="EntityBase"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="NsiBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
                используемый для описания типов,
                реализующих справочники ЕМИАС.НСИ.2</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="ForeignEntityBase">
        <xs:sequence>
          <xs:element name="title" type="xs:string">
            <xs:annotation>
              <xs:documentation>Наименование элемента справочника</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="NsiWithCodeBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
                используемый для описания типов,
                реализующих справочники ЕМИАС.НСИ.2, в которых имеется бизнес-код</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="NsiBase">
        <xs:attribute name="code" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Бизнес-код</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="SIMIDocumentBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип,
                используемый для описания cведений о документе СИМИ</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element ref="simiDocumentId"/>
      <xs:element minOccurs="0" ref="compositionId"/>
    </xs:sequence>
  </xs:complexType>
  <!--async operation status-->
  <xs:element name="operationId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор операции</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="OperationExecutionStatus">
    <xs:annotation>
      <xs:documentation>Статус выполнения операции</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="isCompleted" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак окончания выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="completenessProgress" type="OperationCompletenessBase">
        <xs:annotation>
          <xs:documentation>Сведения о текущем статусе выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="hasSucceded" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак успешности выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
        <xs:annotation>
          <xs:documentation>Коллекция сообщений, порожденных в ходе выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="id" type="ID" use="required">
      <xs:annotation>
        <xs:documentation>Идентификатор операции</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType abstract="false" name="OperationCompletenessPercentage">
    <xs:annotation>
      <xs:documentation>Описание текущего статуса выполнения операции в процентах (0%-100%)</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="OperationCompletenessBase">
        <xs:sequence>
          <xs:element name="completenessStatus">
            <xs:annotation>
              <xs:documentation>Статус (0%-100%)</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:unsignedByte">
                <xs:minInclusive value="0"/>
                <xs:maxInclusive value="100"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="OperationCompletenessBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип для описания текущего статуса выполнения операции</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
  </xs:complexType>
  <!--calling methods' options-->
  <xs:element name="options" type="Options">
    <xs:annotation>
      <xs:documentation>Параметры вызова метода</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="Options">
    <xs:annotation>
      <xs:documentation>Набор именованных значений</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="entry" type="KeyValuePair">
        <xs:annotation>
          <xs:documentation>Именованное значение</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--pagination-->
  <xs:element name="pagingOptions" type="PagingOptions">
    <xs:annotation>
      <xs:documentation>Параметры пагинации</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType abstract="true" name="PagingResults">
    <xs:annotation>
      <xs:documentation>Список с пагинацией</xs:documentation>
    </xs:annotation>
    <xs:attribute name="pageNumber" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Номер страницы (zero-based)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageTotal" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Общее количество страниц</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageSize" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Размер страницы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="morePagesAvailable" type="xs:boolean" use="required">
      <xs:annotation>
        <xs:documentation>Флаг доступности других страниц с результатами для "постраничного листания" (true - если доступны еще страницы; false - иначе)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="totalItemsCount" type="xs:long" use="required">
      <xs:annotation>
        <xs:documentation>Общее количество элементов (на всех страницах)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PagingOptions">
    <xs:annotation>
      <xs:documentation>Параметры пагинации</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" ref="sortingOptions"/>
    </xs:sequence>
    <xs:attribute name="pageNumber" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Номер страницы (zero-based)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageSize" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Размер страницы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <!--sorting-->
  <xs:element name="sortingOptions" type="SortingOptions">
    <xs:annotation>
      <xs:documentation>Параметры сортировки</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="SortingOptions">
    <xs:annotation>
      <xs:documentation>Условия сортировки</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="3" name="sortOrder" type="SortOrder">
        <xs:annotation>
          <xs:documentation>Условия сортировки
                        (используются в соответствии с
                        переданной последовательностью)</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="SortOrder">
    <xs:annotation>
      <xs:documentation>Сортировка</xs:documentation>
    </xs:annotation>
    <xs:attribute name="attributeName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Наименование поля, по которому должна быть произведена сортировка</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute default="false" name="desceding" type="xs:boolean">
      <xs:annotation>
        <xs:documentation>Направление сортировки</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <!--void response-->
  <xs:element fixed="true" name="result">
    <xs:annotation>
      <xs:documentation>Элемент для использования в методах, не предполагающих возврат какого-либо значения</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:simpleContent>
        <xs:extension base="xs:boolean"/>
      </xs:simpleContent>
    </xs:complexType>
  </xs:element>
  <!--base types-->
  <xs:complexType name="TimeInterval">
    <xs:annotation>
      <xs:documentation>Временной период (время)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="start" type="xs:time">
        <xs:annotation>
          <xs:documentation>Время начала интервала</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="end" type="xs:time">
        <xs:annotation>
          <xs:documentation>Время окончания интервала</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DatePeriod">
    <xs:annotation>
      <xs:documentation>Временной период (дата)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="start" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата начала периода</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="end" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата окончания периода</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--keys-->
  <xs:complexType name="EntityId">
    <xs:annotation>
      <xs:documentation>Идентфикатор сущности,
                непосредственно принадлежащей
                текущему продукту ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Base"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ForeignEntityId">
    <xs:annotation>
      <xs:documentation>Идентфикатор
                сущности ЕМИАС,
                внешней по отношнению
                к текущему продукту ЕМИАС</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="ForeignBase"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="NsiGlobalId">
    <xs:annotation>
      <xs:documentation>Глобальный идентфикатор
                ЕМИАС.НСИ</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="ForeignBase"/>
    </xs:complexContent>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELkr28OZcnVx.w5rcvVhVanFLWwJwARx0kRxnRT.1rJxvodJtg3NYLQROpcIEkEiqn1uu0dwR4Cy_OJPCNz0JEvHwUwGkuCPjPM_cFunWBerMmxg.4m3BPrNyW724</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.1" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <!--error message description-->
  <xs:complexType name="ErrorMessageCollection">
    <xs:annotation>
      <xs:documentation>Коллекция сообщений об ошибках</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="message" type="ErrorMessage">
        <xs:annotation>
          <xs:documentation>Сообщение об ошибке</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ErrorMessage">
    <xs:annotation>
      <xs:documentation>Сообщение об ошибке</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Message">
        <xs:sequence>
          <xs:element minOccurs="0" name="parameters">
            <xs:annotation>
              <xs:documentation>Коллекция параметров сообщения</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="unbounded" name="parameter" type="KeyValuePair">
                  <xs:annotation>
                    <xs:documentation>Параметр сообщения</xs:documentation>
                  </xs:annotation>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
          <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Сопутствующие сообщения об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="type" type="ErrorMessageTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип сообщения</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:simpleType name="ErrorMessageTypes">
    <xs:annotation>
      <xs:documentation>Тип сообщения об ошибке</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="ERROR">
        <xs:annotation>
          <xs:documentation>Ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="WARNING">
        <xs:annotation>
          <xs:documentation>Предупреждение (не блокирующая ошибка)</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="INFO">
        <xs:annotation>
          <xs:documentation>Информационное сообщение</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:long"/>
  </xs:simpleType>
  <xs:simpleType name="GUID">
    <xs:annotation>
      <xs:documentation>Глобальный 128-битный идентификатор (Globally Unique Identifier)</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="KeyValuePair">
    <xs:annotation>
      <xs:documentation>Представляет тип "ключ/значение"</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="key" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Ключ</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:simpleType name="Mail">
    <xs:annotation>
      <xs:documentation>Адрес электронной почты</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:maxLength value="320"/>
      <xs:pattern value=".+@.+\..+"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="Message">
    <xs:annotation>
      <xs:documentation>Сообщение</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="code" type="xs:string">
        <xs:annotation>
          <xs:documentation>Код сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="message" type="xs:string">
        <xs:annotation>
          <xs:documentation>Текст сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService</con:endpoint></con:endpoints><con:operation id="f6f3ccfd-7c34-4013-91d2-68c7165a009b" isOneWay="false" action="GetCardForm30ProcessingStatus" name="GetCardForm30ProcessingStatus" bindingOperationName="GetCardForm30ProcessingStatus" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="04059564-3f7f-4ff6-9c92-b467d45674b5" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/dnpdn/planService/v2/types/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:GetCardForm30ProcessingStatusRequest>\r
         <!--1 or more repetitions:-->\r
         <typ:documentId>?</typ:documentId>\r
      </typ:GetCardForm30ProcessingStatusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/dnpdn/planService/v2/planServicePortType/GetCardForm30ProcessingStatusRequest"/></con:call></con:operation><con:operation id="aa1c8f1c-0dce-4ecc-b1af-5558bdf9200d" isOneWay="false" action="GetCurrentEventStatus" name="GetCurrentEventStatus" bindingOperationName="GetCurrentEventStatus" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="837966fc-7624-4f87-88d7-7da6d33dbff2" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/dnpdn/planService/v2/types/" xmlns:v2="http://emias.mos.ru/dnpdn/core/v2/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:GetCurrentEventStatusRequest>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
         <!--Optional:-->\r
         <typ:documentId>?</typ:documentId>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <v2:entry key="?">?</v2:entry>\r
         </typ:options>\r
      </typ:GetCurrentEventStatusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/dnpdn/planService/v2/planServicePortType/GetCurrentEventStatusRequest"/></con:call></con:operation><con:operation id="c1a33bd6-fbbb-4db1-9987-eb831fb1c1c4" isOneWay="false" action="GetEventsByPatient" name="GetEventsByPatient" bindingOperationName="GetEventsByPatient" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="25c0da78-3af4-47de-a8cb-22255ce7b259" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/dnpdn/planService/v2/types/" xmlns:v2="http://emias.mos.ru/dnpdn/core/v2/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:GetEventsByPatientsRequest>\r
         <typ:patientId>?</typ:patientId>\r
         <typ:startDate>?</typ:startDate>\r
         <typ:endDate>?</typ:endDate>\r
         <!--Optional:-->\r
         <typ:archiveEvents>?</typ:archiveEvents>\r
         <typ:pagingOptions pageNumber="?" pageSize="?">\r
            <!--Optional:-->\r
            <v2:sortingOptions>\r
               <!--1 to 3 repetitions:-->\r
               <v2:sortOrder attributeName="?" desceding="false"/>\r
            </v2:sortingOptions>\r
         </typ:pagingOptions>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <v2:entry key="?">?</v2:entry>\r
         </typ:options>\r
      </typ:GetEventsByPatientsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/dnpdn/planService/v2/planServicePortType/GetEventsByPatientRequest"/></con:call></con:operation><con:operation id="c8f27adb-feca-4f10-bf7f-90261653b4d8" isOneWay="false" action="GetPlanExtension" name="GetPlanExtension" bindingOperationName="GetPlanExtension" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="263ef260-2c23-4d08-9d79-d4306095a90f" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/dnpdn/planService/v2/types/" xmlns:v2="http://emias.mos.ru/dnpdn/core/v2/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:GetPlanExtensionRequest>\r
         <!--Optional:-->\r
         <typ:planOfEventsId>?</typ:planOfEventsId>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
         <!--Optional:-->\r
         <typ:documentId>?</typ:documentId>\r
         <!--Optional:-->\r
         <typ:archivePlans>?</typ:archivePlans>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <v2:entry key="?">?</v2:entry>\r
         </typ:options>\r
      </typ:GetPlanExtensionRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/dnpdn/planService/v2/planServicePortType/GetPlanExtensionRequest"/></con:call></con:operation><con:operation id="d41e6786-036a-46c4-a8d2-c4d5d416f323" isOneWay="false" action="GetPlans" name="GetPlans" bindingOperationName="GetPlans" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="7047630a-55fb-4c22-9e7c-722b38d2b2a3" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/dnpdn/planService/v2/types/" xmlns:v2="http://emias.mos.ru/dnpdn/core/v2/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:GetPlansRequest>\r
         <!--Optional:-->\r
         <typ:planOfEventsId>?</typ:planOfEventsId>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
         <!--Optional:-->\r
         <typ:documentId>?</typ:documentId>\r
         <!--Optional:-->\r
         <typ:returnActualPlan>?</typ:returnActualPlan>\r
         <!--Optional:-->\r
         <typ:planStartDateFrom>?</typ:planStartDateFrom>\r
         <!--Optional:-->\r
         <typ:planEndDateTo>?</typ:planEndDateTo>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <v2:entry key="?">?</v2:entry>\r
         </typ:options>\r
      </typ:GetPlansRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/dnpdn/planService/v2/planServicePortType/GetPlansRequest"/></con:call></con:operation><con:operation id="7d555842-c6f1-4584-882f-5dfad544bdb2" isOneWay="false" action="GetPlanShort" name="GetPlanShort" bindingOperationName="GetPlanShort" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="77d8660b-ead0-4d5b-90cf-9f69bdfe268e" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/dnpdn/planService/v2/types/" xmlns:v2="http://emias.mos.ru/dnpdn/core/v2/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:GetPlanShortRequest>\r
         <!--Optional:-->\r
         <typ:planOfEventsId>?</typ:planOfEventsId>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
         <!--Optional:-->\r
         <typ:documentId>?</typ:documentId>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <v2:entry key="?">?</v2:entry>\r
         </typ:options>\r
      </typ:GetPlanShortRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/dnpdn/planService/v2/planServicePortType/GetPlanShortRequest"/><con:wsrmConfig version="1.2"/></con:call><con:call id="1915e29a-24d1-4fd8-9c63-988c9e085ada" name="Request 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/dnpdn/planService/v2/types/" xmlns:v2="http://emias.mos.ru/dnpdn/core/v2/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:GetPlanShortRequest>\r
         <!--Optional:-->\r
         <typ:planOfEventsId>?</typ:planOfEventsId>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
         <!--Optional:-->\r
         <typ:documentId>?</typ:documentId>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <v2:entry key="?">?</v2:entry>\r
         </typ:options>\r
      </typ:GetPlanShortRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/dnpdn/planService/v2/planServicePortType/GetPlanShortRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" id="0384ed03-5ecd-4e6a-ac8f-faac169941ec" wsaVersion="NONE" name="EmiasGibddAppointmentBinding" type="wsdl" bindingName="{http://emias2.gov.ru/emias/appointment/v1/soap/}EmiasGibddAppointmentBinding" soapVersion="1_2" anonymous="optional" definition="http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService?wsdl"><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService?wsdl</con:url><con:content><![CDATA[<definitions name="EmiasGibddAppointment" targetNamespace="http://emias2.gov.ru/emias/appointment/v1/soap/" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:anw="http://emias2.gov.ru/emias/appointment/v1/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:tns="http://emias2.gov.ru/emias/appointment/v1/soap/">
  <documentation>version="1.0"</documentation>
  <import location="http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService?wsdl=AAAADHAjUCM4P2cuZURELj5RSlgzK2dAjd_SqktYBl5MQzZneqwqv6LRr8dwVApKYKYfYAxtOjSjDGmxAeZ_phaf5bE179GWAye7P4cbluUFG8_.1TEhKq7sXewYC90.s01CgI12df8Vf05Vk12bRmQBJW8jZ_CaSXGh6B5yYzPjskuepI3OlhkVE7gantaTFTyd2dUh6I_R6g--" namespace="http://emias2.gov.ru/emias/appointment/v1/"></import>
  <types></types>
  <binding name="EmiasGibddAppointmentBinding" type="anw:EmiasGibddAppointmentService">
    <soap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="GetAvailableResourceScheduleInfo">
      <soap12:operation soapAction="GetAvailableResourceScheduleInfo"/>
      <input>
        <soap12:body use="literal"/>
      </input>
      <output>
        <soap12:body use="literal"/>
      </output>
      <fault name="AppointmentCodeError">
        <soap12:fault name="AppointmentCodeError"/>
      </fault>
    </operation>
    <operation name="CreateAppointment">
      <soap12:operation soapAction="CreateAppointment"/>
      <input>
        <soap12:body use="literal"/>
      </input>
      <output>
        <soap12:body use="literal"/>
      </output>
      <fault name="AppointmentCodeError">
        <soap12:fault name="AppointmentCodeError"/>
      </fault>
    </operation>
    <operation name="GetAppointmentReceptionsByPatient">
      <soap12:operation soapAction="GetAppointmentReceptionsByPatient"/>
      <input>
        <soap12:body use="literal"/>
      </input>
      <output>
        <soap12:body use="literal"/>
      </output>
      <fault name="AppointmentCodeError">
        <soap12:fault name="AppointmentCodeError"/>
      </fault>
    </operation>
    <operation name="CancelAppointment">
      <soap12:operation soapAction="CancelAppointment"/>
      <input>
        <soap12:body use="literal"/>
      </input>
      <output>
        <soap12:body use="literal"/>
      </output>
      <fault name="AppointmentCodeError">
        <soap12:fault name="AppointmentCodeError"/>
      </fault>
    </operation>
    <operation name="TransferAppointment">
      <soap12:operation soapAction="TransferAppointment"/>
      <input>
        <soap12:body use="literal"/>
      </input>
      <output>
        <soap12:body use="literal"/>
      </output>
      <fault name="AppointmentCodeError">
        <soap12:fault name="AppointmentCodeError"/>
      </fault>
    </operation>
    <operation name="GetReferenceTypes">
      <soap12:operation soapAction="GetReferenceTypes"/>
      <input>
        <soap12:body use="literal"/>
      </input>
      <output>
        <soap12:body use="literal"/>
      </output>
      <fault name="AppointmentCodeError">
        <soap12:fault name="AppointmentCodeError"/>
      </fault>
    </operation>
    <operation name="GetLpuList">
      <soap12:operation soapAction="GetLpuList"/>
      <input>
        <soap12:body use="literal"/>
      </input>
      <output>
        <soap12:body use="literal"/>
      </output>
      <fault name="AppointmentCodeError">
        <soap12:fault name="AppointmentCodeError"/>
      </fault>
    </operation>
    <operation name="GetLpuList2">
      <soap12:operation soapAction="GetLpuList2"/>
      <input>
        <soap12:body use="literal"/>
      </input>
      <output>
        <soap12:body use="literal"/>
      </output>
      <fault name="AppointmentCodeError">
        <soap12:fault name="AppointmentCodeError"/>
      </fault>
    </operation>
  </binding>
  <service name="EmiasGibddAppointment">
    <port binding="tns:EmiasGibddAppointmentBinding" name="EmiasGibddAppointmentBinding">
      <soap12:address location="http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService"/>
    </port>
  </service>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService?wsdl=AAAADHAjUCM4P2cuZURELj5RSlgzK2dAjd_SqktYBl5MQzZneqwqv6LRr8dwVApKYKYfYAxtOjSjDGmxAeZ_phaf5bE179GWAye7P4cbluUFG8_.1TEhKq7sXewYC90.s01CgI12df8Vf05Vk12bRmQBJW8jZ_CaSXGh6B5yYzPjskuepI3OlhkVE7gantaTFTyd2dUh6I_R6g--</con:url><con:content><![CDATA[<definitions name="EmiasGibddAppointment" targetNamespace="http://emias2.gov.ru/emias/appointment/v1/" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:base="http://emias2.gov.ru/emias/gibdd/v1/types/" xmlns:tns="http://emias2.gov.ru/emias/appointment/v1/" xmlns:uni-fault="http://emias2.gov.ru/universal/v1/types/exceptions/">
  <documentation>version="1.0"</documentation>
  <types>
    <schema targetNamespace="http://emias2.gov.ru/emias/appointment/v1/" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:ttns="http://emias2.gov.ru/emias/appointment/v1/types/">
      <import namespace="http://emias2.gov.ru/emias/appointment/v1/types/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELj5RSlgzK2dAjd_SqktYBl5MQzZneqwqv6LRr8dwVApKYKYfYAxtOjSjDGmxAeZ_phaf5bE179GWAye7P4cbluUFG8_.1TEhKq7sXewYC90.s01CgI12df8Vf05Vk12bRmQBJW8jaPCaGC2w6AF0ZCn6ukCE_dfAlRgK84SdIA51nxaRZhXxP7XHJg.pbjw-"/>
      <import namespace="http://emias2.gov.ru/emias/gibdd/v1/types/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELj5RSlgzK2dAjd_SqktYBl5MQzZneqwqv6LRr8dwVApKYKYfYAxtOjSjDGmxAeZ_phaf5bE179GWAye7P4cbluUFG8_.1TEhKq7sXewYC90.s01CgI12df8Vf05Vk12bRmQBJW8jaPCaGCup.gp5Jynur0uD_tvKgdKC8CtHhryu4yGJ_YKADYg-"/>
      <import namespace="http://emias2.gov.ru/universal/v1/types/exceptions/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELj5RSlgzK2dAjd_SqktYBl5MQzZneqwqv6LRr8dwVApKYKYfYAxtOjSjDGmxAeZ_phaf5bE179GWAye7P4cbluUFG8_.1TEhKq7sXewYC90.s01CgI12df8Vf05Vk12bRmQBJW8jaPCaGCqh7QJpeXPvrEpoDJ.q7_f05j3gqY9nDBNh"/>
      <element name="GetAvailableResourceScheduleInfoRequest">
        <complexType>
          <sequence>
            <element name="lpuId" type="base:LpuKey"/>
            <element name="referenceId" type="long"/>
            <element name="startDate" type="dateTime"/>
            <element name="endDate" type="dateTime"/>
            <element default="false" minOccurs="0" name="actual" type="boolean"/>
          </sequence>
        </complexType>
      </element>
      <element name="GetAvailableResourceScheduleInfoResponse">
        <complexType>
          <sequence>
            <element maxOccurs="unbounded" minOccurs="0" name="arScheduleContainers" type="ttns:ARScheduleContainer"/>
            <element maxOccurs="unbounded" minOccurs="0" name="slot" type="base:Slot"/>
          </sequence>
        </complexType>
      </element>
      <element name="GetAppointmentReceptionsByPatientRequest">
        <complexType>
          <sequence>
            <element default="false" minOccurs="0" name="upcoming" type="boolean"/>
            <element name="oms" type="string"/>
            <element name="birthDate" type="date"/>
          </sequence>
        </complexType>
      </element>
      <element name="GetAppointmentReceptionsByPatientResponse">
        <complexType>
          <sequence>
            <element maxOccurs="unbounded" minOccurs="0" name="appointments" type="ttns:Appointment"/>
          </sequence>
        </complexType>
      </element>
      <element name="CancelAppointmentRequest">
        <complexType>
          <sequence>
            <element name="appointmentId" type="long"/>
            <element minOccurs="0" name="cancelReason" type="string"/>
          </sequence>
        </complexType>
      </element>
      <element name="CancelAppointmentResponse">
        <complexType>
          <sequence>
            <element name="code" type="string"/>
            <element name="messageText" type="string"/>
          </sequence>
        </complexType>
      </element>
      <element name="GetReferenceTypesRequest">
        <complexType>
          <sequence></sequence>
        </complexType>
      </element>
      <element name="GetReferenceTypesResponse">
        <complexType>
          <sequence>
            <element maxOccurs="unbounded" minOccurs="0" name="referenceType" type="ttns:ReferenceType"/>
          </sequence>
        </complexType>
      </element>
      <element name="GetLpuListRequest">
        <complexType>
          <sequence>
            <element minOccurs="0" name="lpuId" type="base:LpuKey"/>
          </sequence>
        </complexType>
      </element>
      <element name="GetLpuListResponse">
        <complexType>
          <sequence>
            <element maxOccurs="unbounded" minOccurs="0" name="lpu" type="base:Lpu"/>
          </sequence>
        </complexType>
      </element>
      <element name="GetLpuList2Request">
        <complexType>
          <sequence>
            <element minOccurs="0" name="lpuId" type="base:LpuKey"/>
          </sequence>
        </complexType>
      </element>
      <element name="GetLpuList2Response">
        <complexType>
          <sequence>
            <element maxOccurs="unbounded" minOccurs="0" name="lpu" type="ttns:Lpu2"/>
          </sequence>
        </complexType>
      </element>
      <element name="CreateAppointmentRequest">
        <complexType>
          <sequence>
            <element name="oms" type="string"/>
            <element name="birthday" type="date"/>
            <element name="availableResourceId" type="base:AvailableResourceKey"/>
            <element name="startDate" type="dateTime"/>
            <element name="referenceId" type="long"/>
            <element minOccurs="0" name="comment" type="string"/>
            <element minOccurs="0" name="recChannel" type="string"/>
          </sequence>
        </complexType>
      </element>
      <element name="CreateAppointmentResponse">
        <complexType>
          <sequence>
            <element name="id" type="long"/>
            <element minOccurs="0" name="number" type="string"/>
            <element minOccurs="0" name="fio" type="string"/>
            <element minOccurs="0" name="roomCode" type="string"/>
            <element minOccurs="0" name="roomTitle" type="string"/>
          </sequence>
        </complexType>
      </element>
      <element name="TransferAppointmentRequest">
        <complexType>
          <sequence>
            <element name="appointmentId" type="long"/>
            <element minOccurs="0" name="transferReason" type="string"/>
            <element name="availableResourceId" type="base:AvailableResourceKey"/>
            <element name="startDate" type="dateTime"/>
            <!--<element name="referenceId" type="long"/>-->
            <element minOccurs="0" name="comment" type="string"/>
            <element minOccurs="0" name="recChannel" type="string"/>
          </sequence>
        </complexType>
      </element>
    </schema>
  </types>
  <message name="GetAvailableResourceScheduleInfo">
    <part element="tns:GetAvailableResourceScheduleInfoRequest" name="body"></part>
  </message>
  <message name="GetLpuList">
    <part element="tns:GetLpuListRequest" name="body"></part>
  </message>
  <message name="AvailableResourceScheduleInfo">
    <part element="tns:GetAvailableResourceScheduleInfoResponse" name="body"></part>
  </message>
  <message name="GetAppointmentReceptionsByPatient">
    <part element="tns:GetAppointmentReceptionsByPatientRequest" name="body"></part>
  </message>
  <message name="CreateAppointmentResponse">
    <part element="tns:CreateAppointmentResponse" name="body"></part>
  </message>
  <message name="CancelAppointment">
    <part element="tns:CancelAppointmentRequest" name="body"></part>
  </message>
  <message name="LpuList">
    <part element="tns:GetLpuListResponse" name="body"></part>
  </message>
  <message name="GetReferenceTypes">
    <part element="tns:GetReferenceTypesRequest" name="body"></part>
  </message>
  <message name="ReferenceTypes">
    <part element="tns:GetReferenceTypesResponse" name="body"></part>
  </message>
  <message name="AppointmentCodeError">
    <part element="uni-fault:GibddCodeErrorFaultInfo" name="dody"></part>
  </message>
  <message name="AppointmentReceptionsByPatient">
    <part element="tns:GetAppointmentReceptionsByPatientResponse" name="body"></part>
  </message>
  <message name="CreateAppointment">
    <part element="tns:CreateAppointmentRequest" name="body"></part>
  </message>
  <message name="LpuList2">
    <part element="tns:GetLpuList2Response" name="body"></part>
  </message>
  <message name="GetLpuList2">
    <part element="tns:GetLpuList2Request" name="body"></part>
  </message>
  <message name="TransferAppointmentResponse">
    <part element="tns:CreateAppointmentResponse" name="body"></part>
  </message>
  <message name="TransferAppointment">
    <part element="tns:TransferAppointmentRequest" name="body"></part>
  </message>
  <message name="ObjectNotFoundException">
    <documentation>Объект/сущность не были найдены</documentation>
    <part element="uni-fault:objectNotFoundFaultInfo" name="body"></part>
  </message>
  <message name="CancelAppointmentResponse">
    <part element="tns:CancelAppointmentResponse" name="body"></part>
  </message>
  <portType name="EmiasGibddAppointmentService">
    <operation name="CreateAppointment">
      <input message="tns:CreateAppointment"></input>
      <output message="tns:CreateAppointmentResponse"></output>
      <fault message="tns:AppointmentCodeError" name="AppointmentCodeError"></fault>
    </operation>
    <operation name="GetAvailableResourceScheduleInfo">
      <input message="tns:GetAvailableResourceScheduleInfo"></input>
      <output message="tns:AvailableResourceScheduleInfo"></output>
      <fault message="tns:AppointmentCodeError" name="AppointmentCodeError"></fault>
    </operation>
    <operation name="GetAppointmentReceptionsByPatient">
      <input message="tns:GetAppointmentReceptionsByPatient"></input>
      <output message="tns:AppointmentReceptionsByPatient"></output>
      <fault message="tns:AppointmentCodeError" name="AppointmentCodeError"></fault>
    </operation>
    <operation name="CancelAppointment">
      <input message="tns:CancelAppointment"></input>
      <output message="tns:CancelAppointmentResponse"></output>
      <fault message="tns:AppointmentCodeError" name="AppointmentCodeError"></fault>
    </operation>
    <operation name="TransferAppointment">
      <input message="tns:TransferAppointment"></input>
      <output message="tns:TransferAppointmentResponse"></output>
      <fault message="tns:AppointmentCodeError" name="AppointmentCodeError"></fault>
    </operation>
    <operation name="GetReferenceTypes">
      <input message="tns:GetReferenceTypes"></input>
      <output message="tns:ReferenceTypes"></output>
      <fault message="tns:AppointmentCodeError" name="AppointmentCodeError"></fault>
    </operation>
    <operation name="GetLpuList">
      <input message="tns:GetLpuList"></input>
      <output message="tns:LpuList"></output>
      <fault message="tns:AppointmentCodeError" name="AppointmentCodeError"></fault>
    </operation>
    <operation name="GetLpuList2">
      <input message="tns:GetLpuList2"></input>
      <output message="tns:LpuList2"></output>
      <fault message="tns:AppointmentCodeError" name="AppointmentCodeError"></fault>
    </operation>
  </portType>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELj5RSlgzK2dAjd_SqktYBl5MQzZneqwqv6LRr8dwVApKYKYfYAxtOjSjDGmxAeZ_phaf5bE179GWAye7P4cbluUFG8_.1TEhKq7sXewYC90.s01CgI12df8Vf05Vk12bRmQBJW8jaPCaGC2w6AF0ZCn6ukCE_dfAlRgK84SdIA51nxaRZhXxP7XHJg.pbjw-</con:url><con:content><![CDATA[<schema elementFormDefault="qualified" targetNamespace="http://emias2.gov.ru/emias/appointment/v1/types/" version="1.0" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:base="http://emias2.gov.ru/emias/gibdd/v1/types/" xmlns:tns="http://emias2.gov.ru/emias/appointment/v1/types/">
  <import namespace="http://emias2.gov.ru/emias/gibdd/v1/types/" schemaLocation="http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELj5RSlgzK2dAjd_SqktYBl5MQzZneqwqv6LRr8dwVApKYKYfYAxtOjSjDGmxAeZ_phaf5bE179GWAye7P4cbluUFG8_.1TEhKq7sXewYC90.s01CgI12df8Vf05Vk12bRmQBJW8jaPCaGCup.gp5Jynur0uD_tvKgdKC8CtHhryu4yGJ_YKADYg-"/>
  <simpleType name="NumberId">
    <restriction base="long"/>
  </simpleType>
  <complexType name="ARScheduleContainer">
    <annotation>
      <documentation>Контейнер ИД ДР и слотов расписания</documentation>
    </annotation>
    <sequence>
      <element name="arId" type="long"/>
      <element maxOccurs="unbounded" name="scheduleContainer">
        <complexType>
          <sequence>
            <element name="scheduleId" type="base:AvailableResourceScheduleKey"/>
            <element maxOccurs="unbounded" minOccurs="0" name="slot" type="base:Slot">
              <annotation>
                <documentation>Слоты расписания ДР для записи</documentation>
              </annotation>
            </element>
          </sequence>
        </complexType>
      </element>
    </sequence>
  </complexType>
  <complexType name="Patient">
    <annotation>
      <documentation>Пациент</documentation>
    </annotation>
    <sequence>
      <element name="birthday" type="dateTime"/>
      <element name="oms" type="string"/>
      <element minOccurs="0" name="mobilePhone" type="string"/>
      <element minOccurs="0" name="email" type="string"/>
    </sequence>
  </complexType>
  <complexType name="ReferenceType">
    <annotation>
      <documentation>Вид справки</documentation>
    </annotation>
    <sequence>
      <element name="referenceTypeId" type="long"/>
      <element name="referenceTypeName" type="string"/>
    </sequence>
  </complexType>
  <complexType name="Appointment">
    <annotation>
      <documentation>Запись</documentation>
    </annotation>
    <sequence>
      <element name="id" type="long"/>
      <element name="patient" type="tns:Patient"/>
      <element minOccurs="0" name="appointmentNum" type="string"/>
      <element name="startDate" type="dateTime"/>
      <element name="endDate" type="dateTime"/>
      <element name="actual" type="boolean"/>
      <element minOccurs="0" name="comments" type="string"/>
      <element name="availableResource">
        <complexType>
          <sequence>
            <element name="availableResourceId" type="long"/>
            <element name="availableResourceTitle" type="string"/>
            <element name="roomCode" type="string"/>
          </sequence>
        </complexType>
      </element>
      <element name="lpu" type="base:LpuShort"/>
      <element name="referenceType" type="tns:ReferenceType"/>
      <element minOccurs="0" name="cancelType" type="string"/>
      <element name="createDate" type="dateTime"/>
      <element minOccurs="0" name="editDate" type="dateTime"/>
    </sequence>
  </complexType>
  <complexType name="Lpu2">
    <annotation>
      <documentation>ЛПУ</documentation>
    </annotation>
    <sequence>
      <element name="id" type="base:LpuKey"/>
      <element name="name" type="string"/>
      <element name="shortName" type="string"/>
      <element name="moId" type="base:LpuKey"/>
      <element name="lpuAddress" type="string"/>
      <element name="phone" type="string"/>
      <element name="website" type="string"/>
      <element name="email" type="string"/>
      <element name="lpuSchedule" type="base:LpuScheduleShort"/>
    </sequence>
  </complexType>
</schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELj5RSlgzK2dAjd_SqktYBl5MQzZneqwqv6LRr8dwVApKYKYfYAxtOjSjDGmxAeZ_phaf5bE179GWAye7P4cbluUFG8_.1TEhKq7sXewYC90.s01CgI12df8Vf05Vk12bRmQBJW8jaPCaGCup.gp5Jynur0uD_tvKgdKC8CtHhryu4yGJ_YKADYg-</con:url><con:content><![CDATA[<schema elementFormDefault="qualified" targetNamespace="http://emias2.gov.ru/emias/gibdd/v1/types/" version="1.0" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://emias2.gov.ru/emias/gibdd/v1/types/">
  <simpleType name="NumberId">
    <restriction base="long"/>
  </simpleType>
  <simpleType name="NsiCodeType">
    <annotation>
      <documentation>Тип, определяющий код записи НСИ</documentation>
    </annotation>
    <restriction base="string"/>
  </simpleType>
  <simpleType name="NsiName">
    <annotation>
      <documentation>Тип, описывающий значение записи НСИ</documentation>
    </annotation>
    <restriction base="string"/>
  </simpleType>
  <complexType name="Speciality">
    <annotation>
      <documentation>МО</documentation>
    </annotation>
    <sequence>
      <element name="nsiCodeType" type="tns:NsiCodeType"/>
      <element name="nsiName" type="tns:NsiName"/>
    </sequence>
  </complexType>
  <simpleType name="LpuKey">
    <annotation>
      <documentation>ИД МУ</documentation>
    </annotation>
    <restriction base="tns:NumberId"/>
  </simpleType>
  <simpleType name="QuotaRuleKey">
    <annotation>
      <documentation>ИД Квоты</documentation>
    </annotation>
    <restriction base="tns:NumberId"/>
  </simpleType>
  <complexType name="Lpu">
    <annotation>
      <documentation>МО</documentation>
    </annotation>
    <sequence>
      <element name="id" type="tns:LpuKey"/>
      <element name="name" type="string"/>
      <element name="shortName" type="string"/>
      <element name="moId" type="tns:LpuKey"/>
      <element name="lpuAddress" type="string"/>
      <element name="lpuSchedule" type="tns:LpuScheduleShort"/>
    </sequence>
  </complexType>
  <complexType name="LpuShort">
    <annotation>
      <documentation>Краткое МО</documentation>
    </annotation>
    <sequence>
      <element name="id" type="tns:LpuKey"/>
      <element name="name" type="string"/>
      <element name="shortName" type="string"/>
      <element name="lpuAddress" type="string"/>
      <element name="moId" type="tns:LpuKey"/>
    </sequence>
  </complexType>
  <complexType name="LpuSchedule">
    <annotation>
      <documentation>Расписание ЛПУ</documentation>
    </annotation>
    <sequence>
      <element name="LpuId" type="tns:LpuKey"/>
      <element name="begin" type="tns:LpuScheduleStartTime"/>
      <element name="end" type="tns:LpuScheduleEndTime"/>
      <element name="arSchedules" type="tns:ScheduleKey"/>
    </sequence>
  </complexType>
  <complexType name="LpuScheduleShort">
    <annotation>
      <documentation>Расписание ЛПУ</documentation>
    </annotation>
    <sequence>
      <element name="LpuScheduleId" type="tns:LpuKey"/>
      <element name="begin" type="dateTime"/>
      <element name="end" type="dateTime"/>
    </sequence>
  </complexType>
  <complexType name="LpuScheduleStartTime">
    <annotation>
      <documentation>Дата начала действия</documentation>
    </annotation>
    <sequence>
      <element name="startTime" type="date"/>
    </sequence>
  </complexType>
  <complexType name="LpuScheduleEndTime">
    <annotation>
      <documentation>Дата окончания действия</documentation>
    </annotation>
    <sequence>
      <element name="endTime" type="date"/>
    </sequence>
  </complexType>
  <complexType name="DayOfWeekSchedule">
    <annotation>
      <documentation>Расписание по дням недели</documentation>
    </annotation>
    <sequence>
      <element name="dayOfWeek" type="tns:DayOfWeek"/>
      <element name="startTime" type="tns:ScheduleTime"/>
      <element name="endTime" type="tns:ScheduleTime"/>
    </sequence>
  </complexType>
  <simpleType name="DayOfWeek">
    <annotation>
      <documentation>Номер дня недели</documentation>
    </annotation>
    <restriction base="tns:NumberId">
      <minInclusive value="1"/>
      <maxInclusive value="7"/>
    </restriction>
  </simpleType>
  <simpleType name="ScheduleTime">
    <annotation>
      <documentation>Время из расписание</documentation>
    </annotation>
    <restriction base="time">
      <pattern value="([0-1][0-9]|[2][0-3]):[0-5][0-9]:00"/>
    </restriction>
  </simpleType>
  <simpleType name="ScheduleKey">
    <annotation>
      <documentation>ИД расписания</documentation>
    </annotation>
    <restriction base="tns:NumberId"/>
  </simpleType>
  <simpleType name="AvailableResourceKey">
    <annotation>
      <documentation>Идентификатор доступного ресурса</documentation>
    </annotation>
    <restriction base="tns:NumberId"/>
  </simpleType>
  <simpleType name="GridSize">
    <annotation>
      <documentation>Среднее время приёма</documentation>
    </annotation>
    <restriction base="unsignedInt"/>
  </simpleType>
  <simpleType name="Horizon">
    <annotation>
      <documentation>Горизонт записи в днях</documentation>
    </annotation>
    <restriction base="unsignedInt"/>
  </simpleType>
  <simpleType name="AvailableResourceScheduleKey">
    <annotation>
      <documentation>ИД расписания ДР</documentation>
    </annotation>
    <restriction base="tns:NumberId"/>
  </simpleType>
  <complexType name="AvailableResourceSchedule">
    <annotation>
      <documentation>Расписание ДР</documentation>
    </annotation>
    <sequence>
      <element name="id" type="tns:AvailableResourceScheduleKey"/>
      <element name="availableResource" type="tns:AvailableResource"/>
      <element name="gridSize" type="tns:GridSize"/>
      <element name="horizon" type="tns:Horizon"/>
      <element maxOccurs="unbounded" minOccurs="0" name="quotaRule" type="tns:QuotaRule"/>
    </sequence>
  </complexType>
  <complexType name="AvailableResource">
    <sequence>
      <element name="id" type="tns:AvailableResourceKey"/>
      <element name="name" type="tns:AvailableResourceName"/>
      <element name="selfAppointment" type="boolean"/>
      <element maxOccurs="unbounded" name="doctors" type="tns:MedicalEmployeeAvailableResource"/>
      <element name="roomCode" type="string"/>
    </sequence>
  </complexType>
  <simpleType name="AvailableResourceName">
    <annotation>
      <documentation>Имя доступного ресурса</documentation>
    </annotation>
    <restriction base="string"/>
  </simpleType>
  <complexType name="MedicalEmployee">
    <annotation>
      <documentation>Исполнение должности сотрудника</documentation>
    </annotation>
    <sequence>
      <element name="id" type="tns:NumberId"/>
      <element name="lastName" type="string"/>
      <element name="firstName" type="string"/>
      <element minOccurs="0" name="secondName" type="string"/>
    </sequence>
  </complexType>
  <complexType name="MedicalEmployeeAvailableResource">
    <annotation>
      <documentation>Исполнение должности сотрудника в ДР</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:MedicalEmployee">
        <sequence>
          <!--<element name="isMain" type="boolean"/>
                    <element name="isRelevance" type="boolean"/>-->
          <element name="speciality" type="tns:Speciality"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="Rule">
    <annotation>
      <documentation>Правило рабочего времени, Правило установки квот, Правило отмены записи</documentation>
    </annotation>
    <sequence>
      <element name="id" type="tns:NumberId"/>
      <element name="begin" type="date"/>
      <element name="end" type="date"/>
      <element minOccurs="0" name="excludedDates" type="tns:excludedDates"/>
      <element name="lastEditDate" type="date"/>
      <element name="datesTemplate" type="tns:DatesTemplate"/>
      <element maxOccurs="unbounded" minOccurs="0" name="ruleCapacity" type="tns:RuleCapacity"/>
      <element maxOccurs="unbounded" name="quotaTypeId" type="tns:QuotaTypeKey"/>
      <element maxOccurs="unbounded" name="referenceTypeId" type="tns:ReferenceTypeKey"/>
      <element name="arId" type="tns:NumberId"/>
    </sequence>
  </complexType>
  <complexType name="QuotaRule">
    <annotation>
      <documentation>Правила</documentation>
    </annotation>
    <sequence>
      <element name="id" type="tns:QuotaRuleKey"/>
      <element name="startTime" type="time"/>
      <element name="endTime" type="time"/>
      <element name="startDate" type="date"/>
      <element name="endDate" type="date"/>
      <element name="template" type="tns:DatesTemplate"/>
      <element minOccurs="0" name="referenceType" type="long"/>
      <element name="quotaTypeCode" type="long"/>
      <element name="selectedDatesContainer" type="tns:SelectedDates"/>
    </sequence>
  </complexType>
  <complexType name="SelectedDates">
    <annotation>
      <documentation>Выбранные даты</documentation>
    </annotation>
    <sequence>
      <element maxOccurs="unbounded" name="dates" type="date"/>
    </sequence>
  </complexType>
  <complexType name="excludedDates">
    <annotation>
      <documentation>Исключаемые Исключаемые даты</documentation>
    </annotation>
    <sequence>
      <element maxOccurs="unbounded" name="excludedDay" type="date">
        <annotation>
          <documentation>Исключаемые даты</documentation>
        </annotation>
      </element>
    </sequence>
  </complexType>
  <simpleType name="DayOfWeekNumber">
    <annotation>
      <documentation>Номер дня недели</documentation>
    </annotation>
    <restriction base="tns:NumberId">
      <minInclusive value="1"/>
      <maxInclusive value="7"/>
    </restriction>
  </simpleType>
  <complexType abstract="true" name="DatesTemplate">
    <annotation>
      <documentation>Общий шаблон</documentation>
    </annotation>
    <sequence>
      <element minOccurs="0" name="templateName" type="string"/>
    </sequence>
  </complexType>
  <complexType name="DayOfWeekDatesTemplate">
    <annotation>
      <documentation>По дням недели</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:DatesTemplate">
        <sequence>
          <element maxOccurs="7" name="dayOfWeek" type="tns:DayOfWeekNumber"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="EvenDatesTemplate">
    <annotation>
      <documentation>По четным или нечетным числам</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:DatesTemplate">
        <sequence>
          <element name="isEven" type="boolean"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="RuleCapacity">
    <sequence>
      <element name="begin" type="tns:RuleTime">
        <annotation>
          <documentation>Время с</documentation>
        </annotation>
      </element>
      <element name="end" type="tns:RuleTime">
        <annotation>
          <documentation>Время по</documentation>
        </annotation>
      </element>
    </sequence>
  </complexType>
  <simpleType name="RuleTime">
    <annotation>
      <documentation>Время объема правила</documentation>
    </annotation>
    <restriction base="time">
      <pattern value="([0-1][0-9]|[2][0-3]):[0-5][0-9]:00"/>
    </restriction>
  </simpleType>
  <simpleType name="QuotaTypeKey">
    <annotation>
      <documentation>ИД вида квоты</documentation>
    </annotation>
    <restriction base="tns:NumberId"/>
  </simpleType>
  <simpleType name="ReferenceTypeKey">
    <annotation>
      <documentation>ИД вида справки</documentation>
    </annotation>
    <restriction base="tns:NumberId"/>
  </simpleType>
  <simpleType name="ReferenceTypeTitle">
    <annotation>
      <documentation>Название вида справки</documentation>
    </annotation>
    <restriction base="string"/>
  </simpleType>
  <simpleType name="arId">
    <annotation>
      <documentation>ИД ДР</documentation>
    </annotation>
    <restriction base="tns:NumberId"/>
  </simpleType>
  <simpleType name="RuleKey">
    <annotation>
      <documentation>ИД правила</documentation>
    </annotation>
    <restriction base="tns:NumberId"/>
  </simpleType>
  <simpleType name="AppointmentTypeKey">
    <annotation>
      <documentation>ИД типа справки</documentation>
    </annotation>
    <restriction base="tns:NumberId"/>
  </simpleType>
  <simpleType name="AppointmentKey">
    <annotation>
      <documentation>ИД справки</documentation>
    </annotation>
    <restriction base="tns:NumberId"/>
  </simpleType>
  <complexType name="QuotaType">
    <annotation>
      <documentation>Вид квоты</documentation>
    </annotation>
    <sequence>
      <element name="id" type="tns:QuotaTypeKey"/>
      <element name="shortName" type="string"/>
      <element name="fullName" type="string"/>
      <element name="code" type="long"/>
      <element name="quotaTypeMode" type="string"/>
    </sequence>
  </complexType>
  <complexType name="Slot">
    <annotation>
      <documentation>Слот расписания ДР</documentation>
    </annotation>
    <sequence>
      <element name="startTime" type="dateTime"/>
      <element name="endTime" type="dateTime"/>
      <element maxOccurs="unbounded" minOccurs="0" name="quotaRuleId" type="tns:QuotaRuleKey"/>
      <element name="arId" type="long"/>
      <element name="isAvailable" type="boolean"/>
      <element name="isBusy" type="boolean"/>
    </sequence>
  </complexType>
  <complexType name="AvailableResourceEmployee">
    <annotation>
      <documentation>Медработник в доступном ресурсе</documentation>
    </annotation>
    <sequence>
      <element name="id" type="tns:StaffUnitKey"/>
      <!--<element name="isMain" type="boolean"/>-->
    </sequence>
  </complexType>
  <simpleType name="StaffUnitKey">
    <annotation>
      <documentation>ИД медработника в подразделении. Оно же - исполнение должности</documentation>
    </annotation>
    <restriction base="tns:NumberId"/>
  </simpleType>
  <complexType name="AvailableResourceIds">
    <annotation>
      <documentation>Список ID доступных ресурсов</documentation>
    </annotation>
    <sequence>
      <element maxOccurs="unbounded" name="availableResourceId" type="tns:AvailableResourceKey">
        <annotation>
          <documentation>ID доступных ресурсов</documentation>
        </annotation>
      </element>
    </sequence>
  </complexType>
</schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELj5RSlgzK2dAjd_SqktYBl5MQzZneqwqv6LRr8dwVApKYKYfYAxtOjSjDGmxAeZ_phaf5bE179GWAye7P4cbluUFG8_.1TEhKq7sXewYC90.s01CgI12df8Vf05Vk12bRmQBJW8jaPCaGCqh7QJpeXPvrEpoDJ.q7_f05j3gqY9nDBNh</con:url><con:content><![CDATA[<schema elementFormDefault="qualified" targetNamespace="http://emias2.gov.ru/universal/v1/types/exceptions/" version="1" xmlns="http://www.w3.org/2001/XMLSchema">
  <element name="objectNotFoundFaultInfo">
    <complexType>
      <sequence>
        <element name="code" type="string"/>
        <element name="objectId" type="string"/>
        <element name="objectType" type="string"/>
        <element name="reason" type="string"/>
      </sequence>
    </complexType>
  </element>
  <element name="objectIsOutdatedFaultInfo">
    <complexType>
      <sequence>
        <element name="code" type="string"/>
        <element name="reason" type="string"/>
        <element name="entityId" type="string"/>
        <element name="entityType" type="string"/>
      </sequence>
    </complexType>
  </element>
  <element name="GibddCodeErrorFaultInfo">
    <complexType>
      <annotation>
        <documentation>Ошибка</documentation>
      </annotation>
      <sequence>
        <element name="code" type="string"/>
        <element name="messageText" type="string"/>
      </sequence>
    </complexType>
  </element>
</schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService</con:endpoint></con:endpoints><con:operation id="2f840cd6-05e3-4d9b-9036-c4983ca1a2ab" isOneWay="false" action="CancelAppointment" name="CancelAppointment" bindingOperationName="CancelAppointment" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="1eb88cc9-83ce-4e5e-a333-d18a5d893346" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v1:CancelAppointmentRequest>\r
         <appointmentId>?</appointmentId>\r
         <!--Optional:-->\r
         <cancelReason>?</cancelReason>\r
      </v1:CancelAppointmentRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias2.gov.ru/emias/appointment/v1/soap/EmiasGibddAppointmentService/CancelAppointmentRequest"/></con:call></con:operation><con:operation id="d0bf6204-62c1-4023-b2ea-38500d8248fc" isOneWay="false" action="CreateAppointment" name="CreateAppointment" bindingOperationName="CreateAppointment" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="7bed3385-db4e-45b4-8bd3-6935ea36b42e" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v1:CreateAppointmentRequest>\r
         <oms>?</oms>\r
         <birthday>?</birthday>\r
         <availableResourceId>?</availableResourceId>\r
         <startDate>?</startDate>\r
         <referenceId>?</referenceId>\r
         <!--Optional:-->\r
         <comment>?</comment>\r
         <!--Optional:-->\r
         <recChannel>?</recChannel>\r
      </v1:CreateAppointmentRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias2.gov.ru/emias/appointment/v1/soap/EmiasGibddAppointmentService/CreateAppointmentRequest"/></con:call></con:operation><con:operation id="b5a22599-37bd-4735-ae10-b0b6cb1c1cce" isOneWay="false" action="GetAppointmentReceptionsByPatient" name="GetAppointmentReceptionsByPatient" bindingOperationName="GetAppointmentReceptionsByPatient" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="02887a3a-a63b-4889-b853-b106fa67d6ab" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v1:GetAppointmentReceptionsByPatientRequest>\r
         <!--Optional:-->\r
         <upcoming>false</upcoming>\r
         <oms>?</oms>\r
         <birthDate>?</birthDate>\r
      </v1:GetAppointmentReceptionsByPatientRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias2.gov.ru/emias/appointment/v1/soap/EmiasGibddAppointmentService/GetAppointmentReceptionsByPatientRequest"/></con:call></con:operation><con:operation id="9475d24b-9244-4b1e-8cb8-c425f34939c2" isOneWay="false" action="GetAvailableResourceScheduleInfo" name="GetAvailableResourceScheduleInfo" bindingOperationName="GetAvailableResourceScheduleInfo" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="48232e43-d4ba-48c4-98c0-71ac9f9206f4" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v1:GetAvailableResourceScheduleInfoRequest>\r
         <lpuId>?</lpuId>\r
         <referenceId>?</referenceId>\r
         <startDate>?</startDate>\r
         <endDate>?</endDate>\r
         <!--Optional:-->\r
         <actual>false</actual>\r
      </v1:GetAvailableResourceScheduleInfoRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias2.gov.ru/emias/appointment/v1/soap/EmiasGibddAppointmentService/GetAvailableResourceScheduleInfoRequest"/></con:call></con:operation><con:operation id="2e59b7be-ab65-4a82-9d19-b7231c9c18ac" isOneWay="false" action="GetLpuList" name="GetLpuList" bindingOperationName="GetLpuList" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="a2213b08-91f7-461e-8ecd-0690c4cb15cd" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v1:GetLpuListRequest>\r
         <!--Optional:-->\r
         <lpuId>?</lpuId>\r
      </v1:GetLpuListRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias2.gov.ru/emias/appointment/v1/soap/EmiasGibddAppointmentService/GetLpuListRequest"/></con:call></con:operation><con:operation id="8aa82146-da80-4b4f-a3ba-8fe2d3d05758" isOneWay="false" action="GetLpuList2" name="GetLpuList2" bindingOperationName="GetLpuList2" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="17b3a640-db7d-4778-ac44-7889feddb486" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v1:GetLpuList2Request>\r
         <!--Optional:-->\r
         <lpuId>?</lpuId>\r
      </v1:GetLpuList2Request>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias2.gov.ru/emias/appointment/v1/soap/EmiasGibddAppointmentService/GetLpuList2Request"/></con:call></con:operation><con:operation id="f62c475d-480d-458d-ad0f-f6560b0c07fc" isOneWay="false" action="GetReferenceTypes" name="GetReferenceTypes" bindingOperationName="GetReferenceTypes" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="385e297f-c8d8-4eb4-a25c-4986d5b8208f" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v1:GetReferenceTypesRequest/>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias2.gov.ru/emias/appointment/v1/soap/EmiasGibddAppointmentService/GetReferenceTypesRequest"/></con:call></con:operation><con:operation id="70c6e245-5cd2-4159-aa69-0788b7170514" isOneWay="false" action="TransferAppointment" name="TransferAppointment" bindingOperationName="TransferAppointment" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="9dd0ad9e-c4fd-420e-9df8-584a1a724424" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <v1:TransferAppointmentRequest>\r
         <appointmentId>?</appointmentId>\r
         <!--Optional:-->\r
         <transferReason>?</transferReason>\r
         <availableResourceId>?</availableResourceId>\r
         <startDate>?</startDate>\r
         <!--Optional:-->\r
         <comment>?</comment>\r
         <!--Optional:-->\r
         <recChannel>?</recChannel>\r
      </v1:TransferAppointmentRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias2.gov.ru/emias/appointment/v1/soap/EmiasGibddAppointmentService/TransferAppointmentRequest"/></con:call></con:operation></con:interface><con:interface xsi:type="con:RestService" id="46c45603-c9b6-4e6b-a21a-70e17ef16a5f" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://application-emiasinfo4.emias.solit-clouds.ru" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://application-emiasinfo4.emias.solit-clouds.ru</con:endpoint></con:endpoints><con:resource name="{medicationId}" path="/api/v2/medication/{medicationId}" id="2634247a-fde3-4189-b3d4-5d6df956afc7"><con:settings/><con:parameters><con:parameter><con:name>medicationId</con:name><con:value>medicationId</con:value><con:style>TEMPLATE</con:style><con:default>medicationId</con:default></con:parameter><con:parameter><con:name>patientId</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>EI-token</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="4177614c-e949-4194-967e-237de70c132e" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>401 500 400 403 404</con:status><con:params/><con:element xmlns:ns="http://application-emiasinfo4.emias.solit-clouds.ru/api/v2/medication/1429026">ns:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://application-emiasinfo4.emias.solit-clouds.ru/api/v2/medication/1429026">ns:Response</con:element></con:representation><con:request name="Request 1" id="977a1038-d52a-4f85-9f05-cbf23878a384" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://application-emiasinfo4.emias.solit-clouds.ru</con:endpoint><con:request/><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v2/medication/1429026</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="medicationId" value="1429026"/>
  <con:entry key="patientId" value="11715757"/>
  <con:entry key="EI-token" value="nMy1BkAkF5U_ugbtQhVsr03pNNF6O_stRBPUeb9XdNk"/>
</con:parameters><con:parameterOrder><con:entry>medicationId</con:entry><con:entry>patientId</con:entry><con:entry>EI-token</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="getLpusForVaccinations" path="/api/v2/saOrchestratorCovid/getLpusForVaccinations" id="80c1dd96-3021-4b8e-b1cc-b8144abcf389"><con:settings/><con:parameters><con:parameter><con:name>Mock-saOrchestrator</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="e2b20d48-b3e5-411a-b312-f870df0cdfb7" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500 404 400</con:status><con:params/><con:element xmlns:get="http://application-emiasinfo1.emias.solit-clouds.ru/api/v2/saOrchestratorCovid/getLpusForVaccinations">get:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="http://application-emiasinfo1.emias.solit-clouds.ru/api/v2/saOrchestratorCovid/getLpusForVaccinations">get:Response</con:element></con:representation><con:request name="Request 1" id="8bee050a-7d15-4af7-941b-765ab81d5841" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
    "omsNumber" : "7789789727001182",
    "birthDate": "2012-10-22"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v2/saOrchestratorCovid/getLpusForVaccinations</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="getReferralsInfo" path="/api/v2/saOrchestrator/getReferralsInfo" id="ca0fc273-e0f1-447e-ad55-4acf2c8676e1"><con:settings/><con:parameters/><con:method name="Method 1" id="8dc3aeaa-34eb-4a33-a719-1a2151f2e0f8" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="http://emiasinfo1.emias.solit-clouds.ru/api/v2/saOrchestrator/getReferralsInfo">get:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:element xmlns:get="http://application-emiasinfo3.emias.solit-clouds.ru/api/v2/saOrchestrator/getReferralsInfo">get:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="83c26fce-52b2-4512-a33a-8a1426ea0c82" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Mock-id" value="" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry/></con:parameterOrder></con:request></con:method></con:resource><con:resource name="saCount" path="/api/v1/mainPage/saCount" id="970f1e95-1945-4cbc-8019-a265a9a344cc"><con:settings/><con:parameters/><con:method name="Method 1" id="6034ca5d-1688-43c9-aaac-d31ce8bd2d9b" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:sac="http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount">sac:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:sac="http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount">sac:Fault</con:element></con:representation><con:request name="Request 1" id="bde66ab3-e5e6-459f-99be-a87a858a1ef4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="saCount v2" path="/api/v2/mainPage/saCount" id="970f1e95-1945-4cbc-8019-a265a9a344cc"><con:settings/><con:parameters/><con:method name="Method 1" id="6034ca5d-1688-43c9-aaac-d31ce8bd2d9b" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:sac="http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount">sac:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:sac="http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount">sac:Fault</con:element></con:representation><con:request name="Request 1" id="bde66ab3-e5e6-459f-99be-a87a858a1ef4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:WsdlInterface" id="ee8b24b5-97f6-4735-898b-5300e9bacb2a" wsaVersion="NONE" name="BenefitsRegistryServiceV3SoapBinding" type="wsdl" bindingName="{http://emias2.gov.ru/business/llo/v3}BenefitsRegistryServiceV3SoapBinding" soapVersion="1_1" anonymous="optional" definition="http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService?wsdl"><con:part><con:url>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="BenefitsRegistryServiceV3" targetNamespace="http://emias2.gov.ru/business/llo/v3" xmlns:ns1="http://emias2.gov.ru/business/llo/v3/types" xmlns:ns2="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://emias2.gov.ru/business/llo/v3" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
    <xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias2.gov.ru/business/llo/v3/types" version="1.0" xmlns:tns="http://emias2.gov.ru/business/llo/v3/types" xmlns:xs="http://www.w3.org/2001/XMLSchema">
      <xs:complexType name="getBenefitEventsRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="benefitCode" type="xs:long"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="authCtx">
        <xs:sequence>
          <xs:element minOccurs="0" name="currentAPU" type="xs:string"/>
          <xs:element minOccurs="0" name="currentPos" type="xs:string"/>
          <xs:element minOccurs="0" name="emiasUserUID" type="xs:string"/>
          <xs:element minOccurs="0" name="orgType" type="xs:string"/>
          <xs:element minOccurs="0" name="speciality" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getBenefitEventsResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="benefitCode" type="xs:string"/>
          <xs:element minOccurs="0" name="benefitInfo" type="xs:string"/>
          <xs:element minOccurs="0" name="benefitName" type="xs:string"/>
          <xs:element minOccurs="0" name="budget" type="tns:benefitBudget"/>
          <xs:element minOccurs="0" name="discount" type="tns:discountValue"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="events" nillable="true" type="tns:benefitEvent"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
          <xs:element minOccurs="0" name="state" type="tns:benefitStatus"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="benefitEvent">
        <xs:sequence>
          <xs:element minOccurs="0" name="actor" type="xs:string"/>
          <xs:element minOccurs="0" name="eventDescription" type="xs:string"/>
          <xs:element minOccurs="0" name="timestamp" type="xs:dateTime"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="detailedResponse">
        <xs:complexContent>
          <xs:extension base="tns:generalResponse">
            <xs:sequence>
              <xs:element minOccurs="0" name="resultDetails" type="xs:string"/>
            </xs:sequence>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="generalResponse">
        <xs:sequence>
          <xs:element name="resultCode" type="xs:int"/>
          <xs:element minOccurs="0" name="resultDescription" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getDocumentTypesListRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getDocumentTypesListResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="documentTypeList" nillable="true" type="tns:documentTypeListItem"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="documentTypeListItem">
        <xs:sequence>
          <xs:element minOccurs="0" name="documentDescription" type="xs:string"/>
          <xs:element minOccurs="0" name="documentName" type="xs:string"/>
          <xs:element minOccurs="0" name="documentTypeId" type="xs:long"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="fields" nillable="true" type="tns:documentFieldListItem"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="documentFieldListItem">
        <xs:complexContent>
          <xs:extension base="tns:documentFieldDefinition">
            <xs:sequence>
              <xs:element minOccurs="0" name="fieldDefaultValue" type="xs:string"/>
            </xs:sequence>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="documentFieldDefinition">
        <xs:sequence>
          <xs:element minOccurs="0" name="fieldDescription" type="xs:string"/>
          <xs:element minOccurs="0" name="fieldId" type="xs:long"/>
          <xs:element minOccurs="0" name="fieldIdx" type="xs:int"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="fieldSelecorValues" nillable="true" type="tns:fieldSelecorValue"/>
          <xs:element minOccurs="0" name="fieldTitle" type="xs:string"/>
          <xs:element minOccurs="0" name="fieldType" type="tns:documentFieldType"/>
          <xs:element minOccurs="0" name="validationRegexp" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fieldSelecorValue">
        <xs:sequence>
          <xs:element minOccurs="0" name="fieldSelectorCode" type="xs:string"/>
          <xs:element minOccurs="0" name="fieldSelectorText" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="checkBenefitCancellationRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="benefitCode" type="xs:string"/>
          <xs:element minOccurs="0" name="cancellationDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="checkBenefitCancellationResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="invalidatedPrescriptionsCount" type="tns:prescriptionCountInfo"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="prescriptionCountInfo">
        <xs:sequence>
          <xs:element name="prescriptionsNotProcessed" type="xs:int"/>
          <xs:element name="prescriptionsProcessed" type="xs:int"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPatientDocumentRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="documentId" type="xs:long"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPatientDocumentResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="documentDescription" type="xs:string"/>
          <xs:element minOccurs="0" name="documentError" type="xs:string"/>
          <xs:element minOccurs="0" name="documentId" type="xs:long"/>
          <xs:element minOccurs="0" name="documentName" type="xs:string"/>
          <xs:element minOccurs="0" name="documentState" type="tns:patientDocumentStatus"/>
          <xs:element minOccurs="0" name="documentStateText" type="xs:string"/>
          <xs:element minOccurs="0" name="documentTypeId" type="xs:long"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="fields" nillable="true" type="tns:patientDocumentFieldInfo"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="patientDocumentFieldInfo">
        <xs:complexContent>
          <xs:extension base="tns:documentFieldDefinition">
            <xs:sequence>
              <xs:element minOccurs="0" name="currentValue" type="xs:string"/>
            </xs:sequence>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="deregistrationRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="newStatus" type="tns:entryStatus"/>
          <xs:element minOccurs="0" name="newStatusComment" type="xs:string"/>
          <xs:element minOccurs="0" name="newStatusDescription" type="xs:string"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="deregistrationResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="checkSNILSRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="patientID" type="xs:string"/>
          <xs:element minOccurs="0" name="SNILS" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="checkSNILSResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="allowRequest" type="xs:boolean"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
          <xs:element minOccurs="0" name="status" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="changePatientInfoRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="explicitServicePermission" type="xs:boolean"/>
          <xs:element minOccurs="0" name="explicitServicePermissionAdd" type="xs:boolean"/>
          <xs:element minOccurs="0" name="explicitServicePermissionExpiration" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="explicitServicePermissionInfo" type="xs:string"/>
          <xs:element minOccurs="0" name="explicitServicePermissionIssued" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="changePatientInfoResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="validateDocumentRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="documentId" type="xs:long"/>
          <xs:element minOccurs="0" name="documentTypeId" type="xs:long"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="fields" nillable="true" type="tns:fieldValue"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="fieldValue">
        <xs:sequence>
          <xs:element minOccurs="0" name="fieldId" type="xs:int"/>
          <xs:element minOccurs="0" name="fieldValue" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="validateDocumentResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="docuemntToDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="documentDescription" type="xs:string"/>
          <xs:element minOccurs="0" name="documentError" type="xs:string"/>
          <xs:element minOccurs="0" name="documentFromDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="documentId" type="xs:long"/>
          <xs:element minOccurs="0" name="documentInfo" type="xs:string"/>
          <xs:element name="documentIsValid" type="xs:boolean"/>
          <xs:element minOccurs="0" name="documentName" type="xs:string"/>
          <xs:element minOccurs="0" name="documentTypeId" type="xs:long"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="fields" nillable="true" type="tns:validateDocumentFieldInfo"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="validateDocumentFieldInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="currentValue" type="xs:string"/>
          <xs:element minOccurs="0" name="errorInfo" type="xs:string"/>
          <xs:element minOccurs="0" name="fieldDescription" type="xs:string"/>
          <xs:element minOccurs="0" name="fieldId" type="xs:int"/>
          <xs:element name="fieldIsValid" type="xs:boolean"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="fieldSelectorValues" nillable="true" type="tns:fieldSelecorValue"/>
          <xs:element minOccurs="0" name="fieldTitle" type="xs:string"/>
          <xs:element minOccurs="0" name="fieldType" type="tns:documentFieldType"/>
          <xs:element minOccurs="0" name="validationRegexp" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPatientEventsRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPatientEventsResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="events" nillable="true" type="tns:patientEvent"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="patientEvent">
        <xs:sequence>
          <xs:element minOccurs="0" name="description" type="xs:string"/>
          <xs:element minOccurs="0" name="emiasUser" type="xs:string"/>
          <xs:element minOccurs="0" name="emiasUserUID" type="xs:string"/>
          <xs:element minOccurs="0" name="externalSource" type="xs:string"/>
          <xs:element minOccurs="0" name="timestamp" type="xs:dateTime"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPermitsOutlanderHistoryRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPermitsOutlanderHistoryResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="permissionList" nillable="true" type="tns:permittance"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="permittance">
        <xs:sequence>
          <xs:element minOccurs="0" name="permissionFromDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="permissionId" type="xs:long"/>
          <xs:element minOccurs="0" name="permissionName" type="xs:string"/>
          <xs:element minOccurs="0" name="permissionState" type="xs:string"/>
          <xs:element minOccurs="0" name="permissionToDate" type="xs:dateTime"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="changeDocumentsSetRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="benefitCode" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="documentList" nillable="true" type="tns:documentListItem"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="documentListItem">
        <xs:sequence>
          <xs:element minOccurs="0" name="actionCause" type="xs:string"/>
          <xs:element minOccurs="0" name="actionComment" type="xs:string"/>
          <xs:element minOccurs="0" name="actionDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="documentAction" type="tns:documentActionType"/>
          <xs:element minOccurs="0" name="documentId" type="xs:long"/>
          <xs:element minOccurs="0" name="documentTypeId" type="xs:long"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="fields" nillable="true" type="tns:fieldValue"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="changeDocumentsSetResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="cancelBenefitRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="benefitCode" type="xs:string"/>
          <xs:element minOccurs="0" name="cancellationCause" type="xs:string"/>
          <xs:element minOccurs="0" name="cancellationDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="cancellationRemark" type="xs:string"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="cancelBenefitResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPrintFormXMLRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element name="documentID" type="xs:long"/>
          <xs:element name="formID" type="xs:long"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPrintFormXMLResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="printForm" type="xs:string"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
          <xs:element minOccurs="0" name="templateName" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="validateDocumentsSetRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="benefitCode" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="documentList" nillable="true" type="tns:documentListItem"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="validateDocumentsSetResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="affectedBenefits" nillable="true" type="tns:affectedBenefit"/>
          <xs:element name="globalProhibitActive" type="xs:boolean"/>
          <xs:element minOccurs="0" name="globalProhibitMessage" type="xs:string"/>
          <xs:element minOccurs="0" name="invalidatedPrescriptionsCount" type="tns:prescriptionCountInfo"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="affectedBenefit">
        <xs:sequence>
          <xs:element minOccurs="0" name="affectedBenefitAction" type="tns:benefitActionType"/>
          <xs:element minOccurs="0" name="affectedBenefitCode" type="xs:string"/>
          <xs:element minOccurs="0" name="affectedBenefitName" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getBenefitRequirementsRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="benefitCode" type="xs:string"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getBenefitRequirementsResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="benefitCode" type="xs:string"/>
          <xs:element minOccurs="0" name="benefitDescription" type="xs:string"/>
          <xs:element name="benefitIsValid" type="xs:boolean"/>
          <xs:element minOccurs="0" name="benefitName" type="xs:string"/>
          <xs:element minOccurs="0" name="benefitWarning" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="documents" nillable="true" type="tns:documentInstance"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="groups" nillable="true" type="tns:documentGroup"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="documentInstance">
        <xs:sequence>
          <xs:element minOccurs="0" name="documentExpires" type="xs:dateTime"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="documentFields" nillable="true" type="tns:fieldValue"/>
          <xs:element minOccurs="0" name="documentId" type="xs:long"/>
          <xs:element minOccurs="0" name="documentInfo" type="xs:string"/>
          <xs:element name="documentIsReadOnly" type="xs:boolean"/>
          <xs:element minOccurs="0" name="documentIssued" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="documentName" type="xs:string"/>
          <xs:element minOccurs="0" name="documentState" type="tns:patientDocumentStatus"/>
          <xs:element minOccurs="0" name="documentTypeId" type="xs:long"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="documentGroup">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="documentTypes" nillable="true" type="tns:benefitDocumentTypeListItem"/>
          <xs:element minOccurs="0" name="groupComment" type="xs:string"/>
          <xs:element minOccurs="0" name="groupId" type="xs:int"/>
          <xs:element name="groupIsReadOnly" type="xs:boolean"/>
          <xs:element name="groupIsValid" type="xs:boolean"/>
          <xs:element minOccurs="0" name="groupName" type="xs:string"/>
          <xs:element minOccurs="0" name="groupWarning" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="benefitDocumentTypeListItem">
        <xs:sequence>
          <xs:element minOccurs="0" name="documentComment" type="xs:string"/>
          <xs:element name="documentIsReadOnly" type="xs:boolean"/>
          <xs:element minOccurs="0" name="documentTypeId" type="xs:long"/>
          <xs:element minOccurs="0" name="documentTypeName" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="fields" nillable="true" type="tns:documentFieldListItem"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPatientDocumentsRequestType">
        <xs:sequence>
          <xs:element name="activeOnly" type="xs:boolean"/>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPatientDocumentsResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="documentList" nillable="true" type="tns:patientDocumentInfo"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="patientDocumentInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="docuemntToDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="documentFromDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="documentId" type="xs:long"/>
          <xs:element minOccurs="0" name="documentInfo" type="xs:string"/>
          <xs:element minOccurs="0" name="documentInsults" type="xs:string"/>
          <xs:element name="documentIsEditable" type="xs:boolean"/>
          <xs:element minOccurs="0" name="documentName" type="xs:string"/>
          <xs:element minOccurs="0" name="documentNoEditReason" type="xs:string"/>
          <xs:element minOccurs="0" name="documentRegistrationDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="documentState" type="tns:patientDocumentStatus"/>
          <xs:element minOccurs="0" name="documentTypeId" type="xs:long"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPrintFormsRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element name="documentID" type="xs:long"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPrintFormsResponseType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="printForm" nillable="true" type="tns:printForm"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="printForm">
        <xs:sequence>
          <xs:element minOccurs="0" name="description" type="xs:string"/>
          <xs:element name="formID" type="xs:long"/>
          <xs:element name="title" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="updateBenefitInfoRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="benefitCode" type="xs:string"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="updateBenefitInfoResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="result" type="tns:generalResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="validateDocumentForBenefitRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element minOccurs="0" name="benefitCode" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="documentList" nillable="true" type="tns:documentListItem"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="validateDocumentForBenefitResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="benefitCode" type="xs:string"/>
          <xs:element name="benefitIsValid" type="xs:boolean"/>
          <xs:element minOccurs="0" name="benefitWarning" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="documents" nillable="true" type="tns:documentInstance"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="groups" nillable="true" type="tns:documentGroup"/>
          <xs:element minOccurs="0" name="result" type="tns:detailedResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getPatientInfoRequestType">
        <xs:sequence>
          <xs:element minOccurs="0" name="authCtx" type="tns:authCtx"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="benefitType" nillable="true" type="xs:string"/>
          <xs:element minOccurs="0" name="details" type="tns:responseDetailsLevel"/>
          <xs:element minOccurs="0" name="options" type="tns:options"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
          <xs:element minOccurs="0" name="permission" type="xs:string"/>
          <xs:element minOccurs="0" name="queryType" type="tns:patientQuery"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="options">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="entry" nillable="true" type="tns:KeyValuePair"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="KeyValuePair">
        <xs:simpleContent>
          <xs:extension base="xs:string">
            <xs:attribute name="key" type="xs:string" use="required"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="getPatientInfoResponseType">
        <xs:sequence>
          <xs:element minOccurs="0" name="archiveStatusDescription" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="benefits" nillable="true" type="tns:benefitInfo"/>
          <xs:element minOccurs="0" name="details" type="tns:responseDetailsLevel"/>
          <xs:element minOccurs="0" name="explicitServicePermission" type="xs:boolean"/>
          <xs:element minOccurs="0" name="explicitServicePermissionExpiration" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="explicitServicePermissionInfo" type="xs:string"/>
          <xs:element minOccurs="0" name="hasBenefits" type="xs:boolean"/>
          <xs:element minOccurs="0" name="invalidStatusDescription" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="normBenefit" nillable="true" type="tns:normBenefitItem"/>
          <xs:element minOccurs="0" name="patientId" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="queries" nillable="true" type="tns:externalQueryInfo"/>
          <xs:element minOccurs="0" name="residenceStatus" type="tns:residenceStatus"/>
          <xs:element minOccurs="0" name="result" type="tns:generalResponse"/>
          <xs:element minOccurs="0" name="status" type="tns:entryStatus"/>
          <xs:element minOccurs="0" name="updateProcessEstimatedFinish" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="updateProcessStatus" type="tns:updateProcessStatus"/>
          <xs:element minOccurs="0" name="warningInfo" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="benefitInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="activationDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="benefitCode" type="xs:long"/>
          <xs:element minOccurs="0" name="benefitIsNotAllowed" type="xs:boolean"/>
          <xs:element name="benefitIsNotApplicable" type="xs:boolean"/>
          <xs:element minOccurs="0" name="benefitName" type="xs:string"/>
          <xs:element minOccurs="0" name="benefitShortName" type="xs:string"/>
          <xs:element minOccurs="0" name="benefitStatus" type="tns:benefitStatus"/>
          <xs:element minOccurs="0" name="benefitStatusComment" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="benefitType" nillable="true" type="xs:string"/>
          <xs:element minOccurs="0" name="budget" type="tns:benefitBudget"/>
          <xs:element minOccurs="0" name="comment" type="xs:string"/>
          <xs:element minOccurs="0" name="discount" type="tns:discountValue"/>
          <xs:element minOccurs="0" name="expirationDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="lastUpdate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="source" type="xs:string"/>
          <xs:element minOccurs="0" name="updateProcessStatus" type="tns:updateProcessStatus"/>
          <xs:element minOccurs="0" name="updateProcessStatusComment" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="normBenefitItem">
        <xs:sequence>
          <xs:element minOccurs="0" name="normBenefitCode" type="xs:string"/>
          <xs:element minOccurs="0" name="normBenefitType" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="externalQueryInfo">
        <xs:sequence>
          <xs:element name="id" type="xs:int"/>
          <xs:element minOccurs="0" name="requestStart" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="requestStatus" type="xs:string"/>
          <xs:element minOccurs="0" name="requestTitle" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:simpleType name="benefitBudget">
        <xs:restriction base="xs:string">
          <xs:enumeration value="federal"/>
          <xs:enumeration value="regional"/>
          <xs:enumeration value="municipal"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="discountValue">
        <xs:restriction base="xs:string">
          <xs:enumeration value="_50"/>
          <xs:enumeration value="_100"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="benefitStatus">
        <xs:restriction base="xs:string">
          <xs:enumeration value="active"/>
          <xs:enumeration value="expired"/>
          <xs:enumeration value="canceled"/>
          <xs:enumeration value="hasnot"/>
          <xs:enumeration value="invalid"/>
          <xs:enumeration value="future"/>
          <xs:enumeration value="notInUse"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="documentFieldType">
        <xs:restriction base="xs:string">
          <xs:enumeration value="date"/>
          <xs:enumeration value="text"/>
          <xs:enumeration value="number"/>
          <xs:enumeration value="list"/>
          <xs:enumeration value="readonly"/>
          <xs:enumeration value="checkbox"/>
          <xs:enumeration value="mkb10"/>
          <xs:enumeration value="patient"/>
          <xs:enumeration value="medOrg"/>
          <xs:enumeration value="medEmployee"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="patientDocumentStatus">
        <xs:restriction base="xs:string">
          <xs:enumeration value="active"/>
          <xs:enumeration value="canceled"/>
          <xs:enumeration value="expired"/>
          <xs:enumeration value="invalid"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="entryStatus">
        <xs:restriction base="xs:string">
          <xs:enumeration value="active"/>
          <xs:enumeration value="invalid"/>
          <xs:enumeration value="archive"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="documentActionType">
        <xs:restriction base="xs:string">
          <xs:enumeration value="remove"/>
          <xs:enumeration value="delete"/>
          <xs:enumeration value="change"/>
          <xs:enumeration value="edit"/>
          <xs:enumeration value="add"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="benefitActionType">
        <xs:restriction base="xs:string">
          <xs:enumeration value="cancel"/>
          <xs:enumeration value="add"/>
          <xs:enumeration value="changePeriod"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="responseDetailsLevel">
        <xs:restriction base="xs:string">
          <xs:enumeration value="status"/>
          <xs:enumeration value="full"/>
          <xs:enumeration value="extended"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="patientQuery">
        <xs:restriction base="xs:string">
          <xs:enumeration value="check"/>
          <xs:enumeration value="confirm"/>
          <xs:enumeration value="food"/>
          <xs:enumeration value="dentures"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="updateProcessStatus">
        <xs:restriction base="xs:string">
          <xs:enumeration value="is_actual"/>
          <xs:enumeration value="request_is_allowed"/>
          <xs:enumeration value="sync_update"/>
          <xs:enumeration value="async_update"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="residenceStatus">
        <xs:restriction base="xs:string">
          <xs:enumeration value="muscovite"/>
          <xs:enumeration value="outlander"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:element name="getBenefitEventsRequest" nillable="true" type="tns:getBenefitEventsRequestType"/>
      <xs:element name="getBenefitEventsResponse" nillable="true" type="tns:getBenefitEventsResponseType"/>
      <xs:element name="getDocumentTypesListRequest" nillable="true" type="tns:getDocumentTypesListRequestType"/>
      <xs:element name="getDocumentTypesListResponse" nillable="true" type="tns:getDocumentTypesListResponseType"/>
      <xs:element name="checkBenefitCancellationRequest" nillable="true" type="tns:checkBenefitCancellationRequestType"/>
      <xs:element name="checkBenefitCancellationResponse" nillable="true" type="tns:checkBenefitCancellationResponseType"/>
      <xs:element name="getPatientDocumentRequest" nillable="true" type="tns:getPatientDocumentRequestType"/>
      <xs:element name="getPatientDocumentResponse" nillable="true" type="tns:getPatientDocumentResponseType"/>
      <xs:element name="deregistrationRequest" nillable="true" type="tns:deregistrationRequestType"/>
      <xs:element name="deregistrationResponse" nillable="true" type="tns:deregistrationResponseType"/>
      <xs:element name="checkSNILSRequest" nillable="true" type="tns:checkSNILSRequestType"/>
      <xs:element name="checkSNILSResponse" nillable="true" type="tns:checkSNILSResponseType"/>
      <xs:element name="changePatientInfoRequest" nillable="true" type="tns:changePatientInfoRequestType"/>
      <xs:element name="changePatientInfoResponse" nillable="true" type="tns:changePatientInfoResponseType"/>
      <xs:element name="validateDocumentRequest" nillable="true" type="tns:validateDocumentRequestType"/>
      <xs:element name="validateDocumentResponse" nillable="true" type="tns:validateDocumentResponseType"/>
      <xs:element name="getPatientEventsRequest" nillable="true" type="tns:getPatientEventsRequestType"/>
      <xs:element name="getPatientEventsResponse" nillable="true" type="tns:getPatientEventsResponseType"/>
      <xs:element name="getPermitsOutlanderHistoryRequest" nillable="true" type="tns:getPermitsOutlanderHistoryRequestType"/>
      <xs:element name="getPermitsOutlanderHistoryResponse" nillable="true" type="tns:getPermitsOutlanderHistoryResponseType"/>
      <xs:element name="changeDocumentsSetRequest" nillable="true" type="tns:changeDocumentsSetRequestType"/>
      <xs:element name="changeDocumentsSetResponse" nillable="true" type="tns:changeDocumentsSetResponseType"/>
      <xs:element name="cancelBenefitRequest" nillable="true" type="tns:cancelBenefitRequestType"/>
      <xs:element name="cancelBenefitResponse" nillable="true" type="tns:cancelBenefitResponseType"/>
      <xs:element name="getPrintFormXMLRequest" nillable="true" type="tns:getPrintFormXMLRequestType"/>
      <xs:element name="getPrintFormXMLResponse" nillable="true" type="tns:getPrintFormXMLResponseType"/>
      <xs:element name="validateDocumentsSetRequest" nillable="true" type="tns:validateDocumentsSetRequestType"/>
      <xs:element name="validateDocumentsSetResponse" nillable="true" type="tns:validateDocumentsSetResponseType"/>
      <xs:element name="getBenefitRequirementsRequest" nillable="true" type="tns:getBenefitRequirementsRequestType"/>
      <xs:element name="getBenefitRequirementsResponse" nillable="true" type="tns:getBenefitRequirementsResponseType"/>
      <xs:element name="getPatientDocumentsRequest" nillable="true" type="tns:getPatientDocumentsRequestType"/>
      <xs:element name="getPatientDocumentsResponse" nillable="true" type="tns:getPatientDocumentsResponseType"/>
      <xs:element name="getPrintFormsRequest" nillable="true" type="tns:getPrintFormsRequestType"/>
      <xs:element name="getPrintFormsResponse" nillable="true" type="tns:getPrintFormsResponseType"/>
      <xs:element name="updateBenefitInfoRequest" nillable="true" type="tns:updateBenefitInfoRequestType"/>
      <xs:element name="updateBenefitInfoResponse" nillable="true" type="tns:updateBenefitInfoResponseType"/>
      <xs:element name="validateDocumentForBenefitRequest" nillable="true" type="tns:validateDocumentForBenefitRequestType"/>
      <xs:element name="validateDocumentForBenefitResponse" nillable="true" type="tns:validateDocumentForBenefitResponseType"/>
      <xs:element name="getPatientInfoRequest" nillable="true" type="tns:getPatientInfoRequestType"/>
      <xs:element name="getPatientInfoResponse" nillable="true" type="tns:getPatientInfoResponseType"/>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="getDocumentTypesList">
    <wsdl:part element="ns1:getDocumentTypesListRequest" name="getDocumentTypesListRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="checkSNILSResponse">
    <wsdl:part element="ns1:checkSNILSResponse" name="checkSNILSResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPatientEventsResponse">
    <wsdl:part element="ns1:getPatientEventsResponse" name="getPatientEventsResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPatientInfoResponse">
    <wsdl:part element="ns1:getPatientInfoResponse" name="getPatientInfoResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="checkBenefitCancellation">
    <wsdl:part element="ns1:checkBenefitCancellationRequest" name="checkBenefitCancellationRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="changeDocumentsSetResponse">
    <wsdl:part element="ns1:changeDocumentsSetResponse" name="changeDocumentsSetResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="validateDocumentForBenefitResponse">
    <wsdl:part element="ns1:validateDocumentForBenefitResponse" name="validateDocumentForBenefitResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getBenefitRequirementsResponse">
    <wsdl:part element="ns1:getBenefitRequirementsResponse" name="getBenefitRequirementsResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPatientEvents">
    <wsdl:part element="ns1:getPatientEventsRequest" name="getPatientEventsRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="validateDocumentsSetResponse">
    <wsdl:part element="ns1:validateDocumentsSetResponse" name="validateDocumentsSetResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getDocumentTypesListResponse">
    <wsdl:part element="ns1:getDocumentTypesListResponse" name="getDocumentTypesListResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="changePatientInfoResponse">
    <wsdl:part element="ns1:changePatientInfoResponse" name="changePatientInfoResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPrintFormXML">
    <wsdl:part element="ns1:getPrintFormXMLRequest" name="getPrintFormXMLRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="updateBenefitInfoResponse">
    <wsdl:part element="ns1:updateBenefitInfoResponse" name="updateBenefitInfoResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPatientDocumentResponse">
    <wsdl:part element="ns1:getPatientDocumentResponse" name="getPatientDocumentResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getBenefitRequirements">
    <wsdl:part element="ns1:getBenefitRequirementsRequest" name="getBenefitRequirementsRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPrintForms">
    <wsdl:part element="ns1:getPrintFormsRequest" name="getPrintFormsRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPatientDocumentsResponse">
    <wsdl:part element="ns1:getPatientDocumentsResponse" name="getPatientDocumentsResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getBenefitEventsResponse">
    <wsdl:part element="ns1:getBenefitEventsResponse" name="getBenefitEventsResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="updateBenefitInfo">
    <wsdl:part element="ns1:updateBenefitInfoRequest" name="updateBenefitInfoRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="validateDocumentForBenefit">
    <wsdl:part element="ns1:validateDocumentForBenefitRequest" name="validateDocumentForBenefitRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPermitsOutlanderHistoryResponse">
    <wsdl:part element="ns1:getPermitsOutlanderHistoryResponse" name="getPermitsOutlanderHistoryResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getBenefitEvents">
    <wsdl:part element="ns1:getBenefitEventsRequest" name="getBenefitEventsRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPatientDocument">
    <wsdl:part element="ns1:getPatientDocumentRequest" name="getPatientDocumentRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="deregistration">
    <wsdl:part element="ns1:deregistrationRequest" name="deregistrationRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="checkSNILS">
    <wsdl:part element="ns1:checkSNILSRequest" name="checkSNILSRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="deregistrationResponse">
    <wsdl:part element="ns1:deregistrationResponse" name="deregistrationResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPrintFormsResponse">
    <wsdl:part element="ns1:getPrintFormsResponse" name="getPrintFormsResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="changePatientInfo">
    <wsdl:part element="ns1:changePatientInfoRequest" name="changePatientInfoRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="validateDocument">
    <wsdl:part element="ns1:validateDocumentRequest" name="validateDocumentRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="validateDocumentResponse">
    <wsdl:part element="ns1:validateDocumentResponse" name="validateDocumentResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPermitsOutlanderHistory">
    <wsdl:part element="ns1:getPermitsOutlanderHistoryRequest" name="getPermitsOutlanderHistoryRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="changeDocumentsSet">
    <wsdl:part element="ns1:changeDocumentsSetRequest" name="changeDocumentsSetRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="cancelBenefit">
    <wsdl:part element="ns1:cancelBenefitRequest" name="cancelBenefitRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="checkBenefitCancellationResponse">
    <wsdl:part element="ns1:checkBenefitCancellationResponse" name="checkBenefitCancellationResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="validateDocumentsSet">
    <wsdl:part element="ns1:validateDocumentsSetRequest" name="validateDocumentsSetRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="cancelBenefitResponse">
    <wsdl:part element="ns1:cancelBenefitResponse" name="cancelBenefitResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPatientDocuments">
    <wsdl:part element="ns1:getPatientDocumentsRequest" name="getPatientDocumentsRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPrintFormXMLResponse">
    <wsdl:part element="ns1:getPrintFormXMLResponse" name="getPrintFormXMLResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPatientInfo">
    <wsdl:part element="ns1:getPatientInfoRequest" name="getPatientInfoRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:portType name="BenefitsRegistryV3">
    <wsdl:operation name="getBenefitEvents">
      <wsdl:input message="tns:getBenefitEvents" name="getBenefitEvents"></wsdl:input>
      <wsdl:output message="tns:getBenefitEventsResponse" name="getBenefitEventsResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getDocumentTypesList">
      <wsdl:input message="tns:getDocumentTypesList" name="getDocumentTypesList"></wsdl:input>
      <wsdl:output message="tns:getDocumentTypesListResponse" name="getDocumentTypesListResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="checkBenefitCancellation">
      <wsdl:input message="tns:checkBenefitCancellation" name="checkBenefitCancellation"></wsdl:input>
      <wsdl:output message="tns:checkBenefitCancellationResponse" name="checkBenefitCancellationResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPatientDocument">
      <wsdl:input message="tns:getPatientDocument" name="getPatientDocument"></wsdl:input>
      <wsdl:output message="tns:getPatientDocumentResponse" name="getPatientDocumentResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="deregistration">
      <wsdl:input message="tns:deregistration" name="deregistration"></wsdl:input>
      <wsdl:output message="tns:deregistrationResponse" name="deregistrationResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="checkSNILS">
      <wsdl:input message="tns:checkSNILS" name="checkSNILS"></wsdl:input>
      <wsdl:output message="tns:checkSNILSResponse" name="checkSNILSResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="changePatientInfo">
      <wsdl:input message="tns:changePatientInfo" name="changePatientInfo"></wsdl:input>
      <wsdl:output message="tns:changePatientInfoResponse" name="changePatientInfoResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="validateDocument">
      <wsdl:input message="tns:validateDocument" name="validateDocument"></wsdl:input>
      <wsdl:output message="tns:validateDocumentResponse" name="validateDocumentResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPatientEvents">
      <wsdl:input message="tns:getPatientEvents" name="getPatientEvents"></wsdl:input>
      <wsdl:output message="tns:getPatientEventsResponse" name="getPatientEventsResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPermitsOutlanderHistory">
      <wsdl:input message="tns:getPermitsOutlanderHistory" name="getPermitsOutlanderHistory"></wsdl:input>
      <wsdl:output message="tns:getPermitsOutlanderHistoryResponse" name="getPermitsOutlanderHistoryResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="changeDocumentsSet">
      <wsdl:input message="tns:changeDocumentsSet" name="changeDocumentsSet"></wsdl:input>
      <wsdl:output message="tns:changeDocumentsSetResponse" name="changeDocumentsSetResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="cancelBenefit">
      <wsdl:input message="tns:cancelBenefit" name="cancelBenefit"></wsdl:input>
      <wsdl:output message="tns:cancelBenefitResponse" name="cancelBenefitResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPrintFormXML">
      <wsdl:input message="tns:getPrintFormXML" name="getPrintFormXML"></wsdl:input>
      <wsdl:output message="tns:getPrintFormXMLResponse" name="getPrintFormXMLResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="validateDocumentsSet">
      <wsdl:input message="tns:validateDocumentsSet" name="validateDocumentsSet"></wsdl:input>
      <wsdl:output message="tns:validateDocumentsSetResponse" name="validateDocumentsSetResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getBenefitRequirements">
      <wsdl:input message="tns:getBenefitRequirements" name="getBenefitRequirements"></wsdl:input>
      <wsdl:output message="tns:getBenefitRequirementsResponse" name="getBenefitRequirementsResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPatientDocuments">
      <wsdl:input message="tns:getPatientDocuments" name="getPatientDocuments"></wsdl:input>
      <wsdl:output message="tns:getPatientDocumentsResponse" name="getPatientDocumentsResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPrintForms">
      <wsdl:input message="tns:getPrintForms" name="getPrintForms"></wsdl:input>
      <wsdl:output message="tns:getPrintFormsResponse" name="getPrintFormsResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="updateBenefitInfo">
      <wsdl:input message="tns:updateBenefitInfo" name="updateBenefitInfo"></wsdl:input>
      <wsdl:output message="tns:updateBenefitInfoResponse" name="updateBenefitInfoResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="validateDocumentForBenefit">
      <wsdl:input message="tns:validateDocumentForBenefit" name="validateDocumentForBenefit"></wsdl:input>
      <wsdl:output message="tns:validateDocumentForBenefitResponse" name="validateDocumentForBenefitResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPatientInfo">
      <wsdl:input message="tns:getPatientInfo" name="getPatientInfo"></wsdl:input>
      <wsdl:output message="tns:getPatientInfoResponse" name="getPatientInfoResponse"></wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="BenefitsRegistryServiceV3SoapBinding" type="tns:BenefitsRegistryV3">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getBenefitEvents">
      <soap:operation soapAction="getBenefitEvents" style="document"/>
      <wsdl:input name="getBenefitEvents">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getBenefitEventsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getDocumentTypesList">
      <soap:operation soapAction="getDocumentTypesList" style="document"/>
      <wsdl:input name="getDocumentTypesList">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getDocumentTypesListResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="checkBenefitCancellation">
      <soap:operation soapAction="checkBenefitCancellation" style="document"/>
      <wsdl:input name="checkBenefitCancellation">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="checkBenefitCancellationResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPatientDocument">
      <soap:operation soapAction="getPatientDocument" style="document"/>
      <wsdl:input name="getPatientDocument">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getPatientDocumentResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="deregistration">
      <soap:operation soapAction="deregistration" style="document"/>
      <wsdl:input name="deregistration">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="deregistrationResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="checkSNILS">
      <soap:operation soapAction="checkSNILS" style="document"/>
      <wsdl:input name="checkSNILS">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="checkSNILSResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="changePatientInfo">
      <soap:operation soapAction="changePatientInfo" style="document"/>
      <wsdl:input name="changePatientInfo">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="changePatientInfoResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="validateDocument">
      <soap:operation soapAction="validateDocument" style="document"/>
      <wsdl:input name="validateDocument">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="validateDocumentResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPatientEvents">
      <soap:operation soapAction="getPatientEvents" style="document"/>
      <wsdl:input name="getPatientEvents">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getPatientEventsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPermitsOutlanderHistory">
      <soap:operation soapAction="getPermitsOutlanderHistory" style="document"/>
      <wsdl:input name="getPermitsOutlanderHistory">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getPermitsOutlanderHistoryResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="changeDocumentsSet">
      <soap:operation soapAction="changeDocumentsSet" style="document"/>
      <wsdl:input name="changeDocumentsSet">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="changeDocumentsSetResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="cancelBenefit">
      <soap:operation soapAction="cancelBenefit" style="document"/>
      <wsdl:input name="cancelBenefit">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="cancelBenefitResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPrintFormXML">
      <soap:operation soapAction="getPrintFormXML" style="document"/>
      <wsdl:input name="getPrintFormXML">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getPrintFormXMLResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="validateDocumentsSet">
      <soap:operation soapAction="validateDocumentsSet" style="document"/>
      <wsdl:input name="validateDocumentsSet">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="validateDocumentsSetResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getBenefitRequirements">
      <soap:operation soapAction="getBenefitRequirements" style="document"/>
      <wsdl:input name="getBenefitRequirements">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getBenefitRequirementsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPatientDocuments">
      <soap:operation soapAction="getPatientDocuments" style="document"/>
      <wsdl:input name="getPatientDocuments">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getPatientDocumentsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPrintForms">
      <soap:operation soapAction="getPrintForms" style="document"/>
      <wsdl:input name="getPrintForms">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getPrintFormsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="updateBenefitInfo">
      <soap:operation soapAction="updateBenefitInfo" style="document"/>
      <wsdl:input name="updateBenefitInfo">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="updateBenefitInfoResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="validateDocumentForBenefit">
      <soap:operation soapAction="validateDocumentForBenefit" style="document"/>
      <wsdl:input name="validateDocumentForBenefit">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="validateDocumentForBenefitResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPatientInfo">
      <soap:operation soapAction="getPatientInfo" style="document"/>
      <wsdl:input name="getPatientInfo">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getPatientInfoResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="BenefitsRegistryServiceV3">
    <wsdl:port binding="tns:BenefitsRegistryServiceV3SoapBinding" name="BenefitsRegistryPortV3">
      <soap:address location="http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint></con:endpoints><con:operation id="9e109b99-4df9-49e4-8c51-98849599aebe" isOneWay="false" action="cancelBenefit" name="cancelBenefit" bindingOperationName="cancelBenefit" type="Request-Response" outputName="cancelBenefitResponse" inputName="cancelBenefit" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="de805601-62db-41a4-a4dd-32c5bbd9e6e4" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:cancelBenefitRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:benefitCode>?</typ:benefitCode>\r
         <!--Optional:-->\r
         <typ:cancellationCause>?</typ:cancellationCause>\r
         <!--Optional:-->\r
         <typ:cancellationDate>?</typ:cancellationDate>\r
         <!--Optional:-->\r
         <typ:cancellationRemark>?</typ:cancellationRemark>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:cancelBenefitRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="cancelBenefit"/></con:call></con:operation><con:operation id="366191c6-398a-434f-88a6-c7064d48cf2d" isOneWay="false" action="changeDocumentsSet" name="changeDocumentsSet" bindingOperationName="changeDocumentsSet" type="Request-Response" outputName="changeDocumentsSetResponse" inputName="changeDocumentsSet" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="a9599591-24c2-4111-bfcf-1da6ec4596f0" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:changeDocumentsSetRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:benefitCode>?</typ:benefitCode>\r
         <!--Zero or more repetitions:-->\r
         <typ:documentList>\r
            <!--Optional:-->\r
            <typ:actionCause>?</typ:actionCause>\r
            <!--Optional:-->\r
            <typ:actionComment>?</typ:actionComment>\r
            <!--Optional:-->\r
            <typ:actionDate>?</typ:actionDate>\r
            <!--Optional:-->\r
            <typ:documentAction>?</typ:documentAction>\r
            <!--Optional:-->\r
            <typ:documentId>?</typ:documentId>\r
            <!--Optional:-->\r
            <typ:documentTypeId>?</typ:documentTypeId>\r
            <!--Zero or more repetitions:-->\r
            <typ:fields>\r
               <!--Optional:-->\r
               <typ:fieldId>?</typ:fieldId>\r
               <!--Optional:-->\r
               <typ:fieldValue>?</typ:fieldValue>\r
            </typ:fields>\r
         </typ:documentList>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:changeDocumentsSetRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="changeDocumentsSet"/></con:call></con:operation><con:operation id="f998e4a1-5dde-45be-aa1f-fe6f5780f390" isOneWay="false" action="changePatientInfo" name="changePatientInfo" bindingOperationName="changePatientInfo" type="Request-Response" outputName="changePatientInfoResponse" inputName="changePatientInfo" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="6a11e969-46c6-45e1-9215-7e2bf00834c0" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:changePatientInfoRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:explicitServicePermission>?</typ:explicitServicePermission>\r
         <!--Optional:-->\r
         <typ:explicitServicePermissionAdd>?</typ:explicitServicePermissionAdd>\r
         <!--Optional:-->\r
         <typ:explicitServicePermissionExpiration>?</typ:explicitServicePermissionExpiration>\r
         <!--Optional:-->\r
         <typ:explicitServicePermissionInfo>?</typ:explicitServicePermissionInfo>\r
         <!--Optional:-->\r
         <typ:explicitServicePermissionIssued>?</typ:explicitServicePermissionIssued>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:changePatientInfoRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="changePatientInfo"/></con:call></con:operation><con:operation id="a58d6fca-3b38-44e7-bdb6-bed9f0f3d275" isOneWay="false" action="checkBenefitCancellation" name="checkBenefitCancellation" bindingOperationName="checkBenefitCancellation" type="Request-Response" outputName="checkBenefitCancellationResponse" inputName="checkBenefitCancellation" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="86b7b8c2-0e42-4964-81ca-199c58885ddb" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:checkBenefitCancellationRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:benefitCode>?</typ:benefitCode>\r
         <!--Optional:-->\r
         <typ:cancellationDate>?</typ:cancellationDate>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:checkBenefitCancellationRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="checkBenefitCancellation"/></con:call></con:operation><con:operation id="27eb929b-2cfb-4bbc-a22a-25e79aee1d8d" isOneWay="false" action="checkSNILS" name="checkSNILS" bindingOperationName="checkSNILS" type="Request-Response" outputName="checkSNILSResponse" inputName="checkSNILS" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="f6f32eb2-198c-452f-9820-c0efb8c1e8ed" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:checkSNILSRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:patientID>?</typ:patientID>\r
         <!--Optional:-->\r
         <typ:SNILS>?</typ:SNILS>\r
      </typ:checkSNILSRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="checkSNILS"/></con:call></con:operation><con:operation id="65270ead-6f8a-4244-a9fa-11d371dfe3f7" isOneWay="false" action="deregistration" name="deregistration" bindingOperationName="deregistration" type="Request-Response" outputName="deregistrationResponse" inputName="deregistration" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="57befb33-ade7-456a-a1c6-41c5e4bde8c9" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:deregistrationRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:newStatus>?</typ:newStatus>\r
         <!--Optional:-->\r
         <typ:newStatusComment>?</typ:newStatusComment>\r
         <!--Optional:-->\r
         <typ:newStatusDescription>?</typ:newStatusDescription>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:deregistrationRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="deregistration"/></con:call></con:operation><con:operation id="1093bf13-9d2a-44e0-8179-7b70a50e2ad3" isOneWay="false" action="getBenefitEvents" name="getBenefitEvents" bindingOperationName="getBenefitEvents" type="Request-Response" outputName="getBenefitEventsResponse" inputName="getBenefitEvents" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="7e3ab2c4-eb0a-450d-ad28-847ee282d878" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:getBenefitEventsRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:benefitCode>?</typ:benefitCode>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:getBenefitEventsRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getBenefitEvents"/></con:call></con:operation><con:operation id="24d58b30-f32f-4572-8f48-1755f70cc555" isOneWay="false" action="getBenefitRequirements" name="getBenefitRequirements" bindingOperationName="getBenefitRequirements" type="Request-Response" outputName="getBenefitRequirementsResponse" inputName="getBenefitRequirements" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="84a25bed-e25f-406b-90d0-4613c7a50986" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:getBenefitRequirementsRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:benefitCode>?</typ:benefitCode>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:getBenefitRequirementsRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getBenefitRequirements"/></con:call></con:operation><con:operation id="b5b39ae4-ea52-4467-89da-b1d2b369fc1a" isOneWay="false" action="getDocumentTypesList" name="getDocumentTypesList" bindingOperationName="getDocumentTypesList" type="Request-Response" outputName="getDocumentTypesListResponse" inputName="getDocumentTypesList" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="ca8f67eb-dc24-48eb-91c2-920080fd67c3" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:getDocumentTypesListRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
      </typ:getDocumentTypesListRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getDocumentTypesList"/></con:call></con:operation><con:operation id="11550482-42fd-4dd7-a6b0-cfae4f522b81" isOneWay="false" action="getPatientDocument" name="getPatientDocument" bindingOperationName="getPatientDocument" type="Request-Response" outputName="getPatientDocumentResponse" inputName="getPatientDocument" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="bd2a7867-5fa2-4f2f-b065-764fc8c67c96" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:getPatientDocumentRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:documentId>?</typ:documentId>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:getPatientDocumentRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getPatientDocument"/></con:call></con:operation><con:operation id="48dbb8a4-7799-4238-94a3-cb6194108bab" isOneWay="false" action="getPatientDocuments" name="getPatientDocuments" bindingOperationName="getPatientDocuments" type="Request-Response" outputName="getPatientDocumentsResponse" inputName="getPatientDocuments" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="4a03459d-c1a3-40a8-ac5b-8f6151249981" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:getPatientDocumentsRequest>\r
         <typ:activeOnly>?</typ:activeOnly>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:getPatientDocumentsRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getPatientDocuments"/></con:call></con:operation><con:operation id="8772f41a-57ce-4781-aafe-baa787ff4029" isOneWay="false" action="getPatientEvents" name="getPatientEvents" bindingOperationName="getPatientEvents" type="Request-Response" outputName="getPatientEventsResponse" inputName="getPatientEvents" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="c8d34d8c-008b-4ee7-9777-e0dc1f920972" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:getPatientEventsRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:getPatientEventsRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getPatientEvents"/></con:call></con:operation><con:operation id="ee12ad02-3a24-40b1-95cd-f859d79966b2" isOneWay="false" action="getPatientInfo" name="getPatientInfo" bindingOperationName="getPatientInfo" type="Request-Response" outputName="getPatientInfoResponse" inputName="getPatientInfo" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="a0d18f5b-f1ff-4474-95a5-673676624e30" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#lloenefitsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:getPatientInfoRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Zero or more repetitions:-->\r
         <typ:benefitType>?</typ:benefitType>\r
         <!--Optional:-->\r
         <typ:details>?</typ:details>\r
         <!--Optional:-->\r
         <typ:options>\r
            <!--Zero or more repetitions:-->\r
            <typ:entry key="?">?</typ:entry>\r
         </typ:options>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
         <!--Optional:-->\r
         <typ:permission>?</typ:permission>\r
         <!--Optional:-->\r
         <typ:queryType>?</typ:queryType>\r
      </typ:getPatientInfoRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getPatientInfo"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="7e2d47fd-1806-463a-b3e4-2ea6af655e88" isOneWay="false" action="getPermitsOutlanderHistory" name="getPermitsOutlanderHistory" bindingOperationName="getPermitsOutlanderHistory" type="Request-Response" outputName="getPermitsOutlanderHistoryResponse" inputName="getPermitsOutlanderHistory" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="69663889-a0eb-4f53-b2a8-c216c92641f1" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:getPermitsOutlanderHistoryRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:getPermitsOutlanderHistoryRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getPermitsOutlanderHistory"/></con:call></con:operation><con:operation id="0f0fa128-2c77-4924-8573-52aad0a7f1ce" isOneWay="false" action="getPrintForms" name="getPrintForms" bindingOperationName="getPrintForms" type="Request-Response" outputName="getPrintFormsResponse" inputName="getPrintForms" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="f4763061-e5cc-40a2-9853-c3841a680e6f" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:getPrintFormsRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <typ:documentID>?</typ:documentID>\r
      </typ:getPrintFormsRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getPrintForms"/></con:call></con:operation><con:operation id="dd9fd145-8da5-4544-b751-b9502b2abf41" isOneWay="false" action="getPrintFormXML" name="getPrintFormXML" bindingOperationName="getPrintFormXML" type="Request-Response" outputName="getPrintFormXMLResponse" inputName="getPrintFormXML" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="ecda482f-4de6-4bdc-bdfc-33d7a6194d5a" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:getPrintFormXMLRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <typ:documentID>?</typ:documentID>\r
         <typ:formID>?</typ:formID>\r
      </typ:getPrintFormXMLRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getPrintFormXML"/></con:call></con:operation><con:operation id="8def5545-e1d2-48cc-bfb8-b817598d2cf3" isOneWay="false" action="updateBenefitInfo" name="updateBenefitInfo" bindingOperationName="updateBenefitInfo" type="Request-Response" outputName="updateBenefitInfoResponse" inputName="updateBenefitInfo" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="5bfc05d3-f52f-421a-aa5f-e0a9538c1850" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:updateBenefitInfoRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:benefitCode>?</typ:benefitCode>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:updateBenefitInfoRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="updateBenefitInfo"/></con:call></con:operation><con:operation id="118a00d0-fe11-40ea-a684-98bb549564b6" isOneWay="false" action="validateDocument" name="validateDocument" bindingOperationName="validateDocument" type="Request-Response" outputName="validateDocumentResponse" inputName="validateDocument" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="44cc723e-2023-4a81-8d23-636cf2d1cc1a" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:validateDocumentRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:documentId>?</typ:documentId>\r
         <!--Optional:-->\r
         <typ:documentTypeId>?</typ:documentTypeId>\r
         <!--Zero or more repetitions:-->\r
         <typ:fields>\r
            <!--Optional:-->\r
            <typ:fieldId>?</typ:fieldId>\r
            <!--Optional:-->\r
            <typ:fieldValue>?</typ:fieldValue>\r
         </typ:fields>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:validateDocumentRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="validateDocument"/></con:call></con:operation><con:operation id="1eafc6ef-9752-4fa0-a906-9364ca0f8a8b" isOneWay="false" action="validateDocumentForBenefit" name="validateDocumentForBenefit" bindingOperationName="validateDocumentForBenefit" type="Request-Response" outputName="validateDocumentForBenefitResponse" inputName="validateDocumentForBenefit" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="f4753f23-4171-451f-b8d5-c2f53c4d3ae1" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:validateDocumentForBenefitRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:benefitCode>?</typ:benefitCode>\r
         <!--Zero or more repetitions:-->\r
         <typ:documentList>\r
            <!--Optional:-->\r
            <typ:actionCause>?</typ:actionCause>\r
            <!--Optional:-->\r
            <typ:actionComment>?</typ:actionComment>\r
            <!--Optional:-->\r
            <typ:actionDate>?</typ:actionDate>\r
            <!--Optional:-->\r
            <typ:documentAction>?</typ:documentAction>\r
            <!--Optional:-->\r
            <typ:documentId>?</typ:documentId>\r
            <!--Optional:-->\r
            <typ:documentTypeId>?</typ:documentTypeId>\r
            <!--Zero or more repetitions:-->\r
            <typ:fields>\r
               <!--Optional:-->\r
               <typ:fieldId>?</typ:fieldId>\r
               <!--Optional:-->\r
               <typ:fieldValue>?</typ:fieldValue>\r
            </typ:fields>\r
         </typ:documentList>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:validateDocumentForBenefitRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="validateDocumentForBenefit"/></con:call></con:operation><con:operation id="86c8cdb8-0cf9-4912-8796-954f45fbf165" isOneWay="false" action="validateDocumentsSet" name="validateDocumentsSet" bindingOperationName="validateDocumentsSet" type="Request-Response" outputName="validateDocumentsSetResponse" inputName="validateDocumentsSet" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="1c756e61-951c-44a7-998a-ef239fbebac4" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <typ:validateDocumentsSetRequest>\r
         <!--Optional:-->\r
         <typ:authCtx>\r
            <!--Optional:-->\r
            <typ:currentAPU>?</typ:currentAPU>\r
            <!--Optional:-->\r
            <typ:currentPos>?</typ:currentPos>\r
            <!--Optional:-->\r
            <typ:emiasUserUID>?</typ:emiasUserUID>\r
            <!--Optional:-->\r
            <typ:orgType>?</typ:orgType>\r
            <!--Optional:-->\r
            <typ:speciality>?</typ:speciality>\r
         </typ:authCtx>\r
         <!--Optional:-->\r
         <typ:benefitCode>?</typ:benefitCode>\r
         <!--Zero or more repetitions:-->\r
         <typ:documentList>\r
            <!--Optional:-->\r
            <typ:actionCause>?</typ:actionCause>\r
            <!--Optional:-->\r
            <typ:actionComment>?</typ:actionComment>\r
            <!--Optional:-->\r
            <typ:actionDate>?</typ:actionDate>\r
            <!--Optional:-->\r
            <typ:documentAction>?</typ:documentAction>\r
            <!--Optional:-->\r
            <typ:documentId>?</typ:documentId>\r
            <!--Optional:-->\r
            <typ:documentTypeId>?</typ:documentTypeId>\r
            <!--Zero or more repetitions:-->\r
            <typ:fields>\r
               <!--Optional:-->\r
               <typ:fieldId>?</typ:fieldId>\r
               <!--Optional:-->\r
               <typ:fieldValue>?</typ:fieldValue>\r
            </typ:fields>\r
         </typ:documentList>\r
         <!--Optional:-->\r
         <typ:patientId>?</typ:patientId>\r
      </typ:validateDocumentsSetRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="validateDocumentsSet"/></con:call></con:operation></con:interface><con:testSuite id="ef999a49-5740-4378-9f80-1e9ac62fb4b8" name="getSaCount"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="dd961e0d-4cb5-4036-8c7d-d5810b8e88a3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение количества активных записей" searchProperties="true"><con:settings/><con:testStep type="request" name="getAppointmentReceptionsByPatient" id="a804cfe7-ba81-4c2f-80d6-39a585d0ce98"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatient" id="f8352831-221f-4cef-96e9-f6f8ecc0dfb4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@strip-whitespaces">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getAppointmentReceptionsByPatient>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthdate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
         <!--Optional:-->
         <signActiveArchive>0</signActiveArchive>
      </v5:getAppointmentReceptionsByPatient>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="872b5eab-2024-461f-a2ed-4096a21e0210"/><con:assertion type="SOAP Fault Assertion" id="5b841e46-88b6-47f5-9d1d-1f5520697e57" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="30f159d7-e560-4e4f-89ca-117f7f28830b" name="Contains"><con:configuration><token>appointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="06408a68-5274-4f08-a817-6365f10b2f96"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="Mock-saOrchestrator" value=""/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить маппинг activeAppointment" id="da2befc1-6181-4ccb-9d76-4f54ea281fd5"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.time.format.DateTimeFormatter

def soapResponse = context.expand('${getAppointmentReceptionsByPatient#Response}')
def appointmentReceptions = new XmlSlurper().parseText(soapResponse)
def appointments=appointmentReceptions.Body.getAppointmentReceptionsByPatientResponse.appointment

def restResponse = context.expand('${getSaCount#Response}')
def saCount =  new JsonSlurper().parseText(restResponse)
def activeAppointment = saCount.payload.activeAppointment

assert appointments.size() == activeAppointment.count //сравниваем количество ответов c полем count

appointments.sort{it.startTime} //сортирует записи по startDate

def currentDate = new Date()
def appontmentDate = Date.parse("yyyy-MM-dd", appointments[0].startTime.toString()[0..-16]) // 2023-01-12T15:30:00+03:00 -> 2023-01-12 и создаём объект Date на основе даты

def difference = appontmentDate.minus(currentDate) //вычисляем разницу в днях между датами
if (difference &lt; 7)
{
	log.info(activeAppointment.closeDate)
	log.info(appontmentDate.format("yyyy-MM-dd"))
	assert activeAppointment.closeDate == appontmentDate.format("yyyy-MM-dd")
}</script></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700003097180466</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1966-04-18</con:value></con:property></con:properties></con:testCase><con:testCase id="1e317031-846e-4687-9fd9-10d8b9097267" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение количества активных направлений" searchProperties="true"><con:settings/><con:testStep type="request" name="getRefferalsInfo" id="4048e62a-53b5-46c5-a226-56d94e9babfc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getReferralsInfo</con:operation><con:request name="getRefferalsInfo" id="8862a9bf-7810-43f2-982c-90101dcee21f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getReferralsInfo>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthdate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getReferralsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="c5a43031-4c9f-4529-8cb6-48b70f0c5aa7"/><con:assertion type="SOAP Fault Assertion" id="8b0fb789-2d89-4c2d-b1e7-7995312c7ba8" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAssignmentsInfo" id="7d1b07f1-02b3-40bb-89ca-001787ab0151"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAssignmentsInfo</con:operation><con:request name="getAssignmentsInfo" id="e420ee18-2943-4554-b3ae-8c47398bb925"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getAssignmentsInfo>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthdate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getAssignmentsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="251077f8-f57c-411b-b282-8960064dee65"/><con:assertion type="SOAP Fault Assertion" id="bdc0e5f9-7b08-49d4-b320-fed18c690b2f" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="9a028a56-4a08-4cb3-a2d1-c4ea1ced16bf"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="Mock-saOrchestrator" value=""/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить количество активных записей" id="058ca7d9-ec9f-47a1-9047-f0919426b84b"><con:settings/><con:config><script><![CDATA[import groovy.json.JsonSlurper
import java.time.format.DateTimeFormatter

def soapResponse = context.expand('${getRefferalsInfo#Response}')
def referralsInfo = new XmlSlurper().parseText(soapResponse)
def referrals=referralsInfo.Body.getReferralsInfoResponse.referral

soapResponse = context.expand('${getAssignmentsInfo#Response}')
def assignmentsInfo = new XmlSlurper().parseText(soapResponse)
def assignments=assignmentsInfo.Body.getAssignmentsInfoResponse.assignment

def restResponse = context.expand('${getSaCount#Response}')
def saCount =  new JsonSlurper().parseText(restResponse)
def activeReferrals = saCount.payload.activeReferrals

def currentDate = new Date()

def activeReferralsCount = 0 // переменная для хранения количества активных направлений и назначений

log.info("Количество направлений: "+referrals.size())
referrals.each{
	// referral.startTime <= текущая дата <= referral.endTime
	def startDate = Date.parse("yyyy-MM-dd", it.startTime.toString())
	def endDate = Date.parse("yyyy-MM-dd", it.endTime.toString())
	if(startDate <= currentDate & currentDate <= endDate)
		activeReferralsCount++
}

log.info("Количество назначений: "+assignments.size())
assignments.each{
	// assignment.period.dateFrom <= текущая дата <= assignment.period.dateTo
	def startDate = Date.parse("yyyy-MM-dd", it.period.dateFrom.toString())
	def endDate = Date.parse("yyyy-MM-dd", it.period.dateTo.toString())
	if(startDate <= currentDate & currentDate <= endDate)
		activeReferralsCount++
}

assert activeReferrals.count == activeReferralsCount // сравниваем количество в ответе с получившейся суммой]]></script></con:config></con:testStep><con:testStep type="groovy" name="Проверить наличие поля closeDate и работу поля closeCount" id="6777cae6-3e86-4b98-a173-926b66a9fd62"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.time.format.DateTimeFormatter

def soapResponse = context.expand('${getRefferalsInfo#Response}')
def referralsInfo = new XmlSlurper().parseText(soapResponse)
def referrals=referralsInfo.Body.getReferralsInfoResponse.referral

soapResponse = context.expand('${getAssignmentsInfo#Response}')
def assignmentsInfo = new XmlSlurper().parseText(soapResponse)
def assignments=assignmentsInfo.Body.getAssignmentsInfoResponse.assignment

def restResponse = context.expand('${getSaCount#Response}')
def saCount =  new JsonSlurper().parseText(restResponse)
def activeReferrals = saCount.payload.activeReferrals

def currentDate = new Date()

def closeDate = Date.parse("yyyy-MM-dd", referrals[0].endTime.text())
def difference = Math.abs(currentDate.minus(closeDate)) // получаем разницу в днях между текущей датой и endTime первого направления

referrals.each{
	def localCloseDate = Date.parse("yyyy-MM-dd", it.endTime.text())
	def localDiff = Math.abs(currentDate.minus(localCloseDate)) // получаем разницу в днях между текущей датой и endTime каждого направления
	if (localDiff &lt; difference)
	{
		closeDate = localCloseDate
		difference = localDiff
	}
}

assignments.each{
	def localCloseDate = Date.parse("yyyy-MM-dd", it.period.dateTo.text())
	def localDiff = Math.abs(currentDate.minus(localCloseDate)) // получаем разницу в днях между текущей датой и dateTo каждого назначения
	if (localDiff &lt; difference)
	{
		closeDate = localCloseDate
		difference = localDiff
	}
}

log.info("CloseDate: "+closeDate.format("yyyy-MM-dd"))
if (difference &lt;= 7) //Если разница между текущей датой меньше или равна 7 дням
{
	assert activeReferrals.closeDate == closeDate.format("yyyy-MM-dd")

	def closeCount = 0

	referrals.each{
		if ( it.endTime == closeDate.format("yyyy-MM-dd")) //проверяем совпадение дат
		{
			closeCount++
		}
	}

	assignments.each{
		if ( it.period.dateTo == closeDate.format("yyyy-MM-dd")) //проверяем совпадение дат
		{
			closeCount++
		}
	}
	log.info("CloseCount: "+closeCount)
	assert  activeReferrals.closeCount == closeCount
}
else
{
	assert activeReferrals.closeDate == null
	assert  activeReferrals.closeCount == 0 // т.к closeDate отсуствует, даты не с чем сравнивать
}
</script></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700003097180466</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1966-04-18</con:value></con:property></con:properties></con:testCase><con:testCase id="9ee53076-12b2-4c77-bd35-320a7657b7f3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС7. Ошибка проверки доступов к ЭМК (НЕ SUDIR_TOKEN_EXPIRED)" searchProperties="true"><con:settings/><con:testStep type="request" name="getRefferalsInfo" id="3e543901-9e03-42a8-a9ae-be01c3271497"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getReferralsInfo</con:operation><con:request name="getRefferalsInfo" id="8862a9bf-7810-43f2-982c-90101dcee21f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getReferralsInfo>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthDate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getReferralsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="c5a43031-4c9f-4529-8cb6-48b70f0c5aa7"/><con:assertion type="SOAP Fault Assertion" id="8b0fb789-2d89-4c2d-b1e7-7995312c7ba8" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAssignmentsInfo" id="07e35dd0-df14-4e59-80ff-006cf75181a5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAssignmentsInfo</con:operation><con:request name="getAssignmentsInfo" id="e420ee18-2943-4554-b3ae-8c47398bb925"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getAssignmentsInfo>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthdate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getAssignmentsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="251077f8-f57c-411b-b282-8960064dee65"/><con:assertion type="SOAP Fault Assertion" id="bdc0e5f9-7b08-49d4-b320-fed18c690b2f" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="7bd29918-2436-430a-b2d2-3b0dfc574789"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-saOrchestrator" value=""/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value="${#Project#sudirToken}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1982-04-09</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property></con:properties></con:testCase><con:testCase id="85783292-0114-4e8c-9576-c4c69e12f527" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС9. SUDIR_TOKEN_EXPIRED" searchProperties="true"><con:settings/><con:testStep type="request" name="getRefferalsInfo" id="f1797a27-0f0e-44b8-8cb5-b68b17f266cf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getReferralsInfo</con:operation><con:request name="getRefferalsInfo" id="8862a9bf-7810-43f2-982c-90101dcee21f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getReferralsInfo>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthDate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getReferralsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="c5a43031-4c9f-4529-8cb6-48b70f0c5aa7"/><con:assertion type="SOAP Fault Assertion" id="8b0fb789-2d89-4c2d-b1e7-7995312c7ba8" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAssignmentsInfo" id="d8b5aac9-95ee-431e-8b15-d9d623e8c3a3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAssignmentsInfo</con:operation><con:request name="getAssignmentsInfo" id="e420ee18-2943-4554-b3ae-8c47398bb925"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getAssignmentsInfo>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthdate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getAssignmentsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="251077f8-f57c-411b-b282-8960064dee65"/><con:assertion type="SOAP Fault Assertion" id="bdc0e5f9-7b08-49d4-b320-fed18c690b2f" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="54775aaa-86e7-4016-8db6-950e4ce2ef59"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-saOrchestrator" value=""/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value="${#Project#sudirToken}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1982-04-09</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property></con:properties></con:testCase><con:testCase id="5db54d25-19d0-44e5-af0f-2263ec21e609" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС7. LK_PERMISSION_ERROR" searchProperties="true"><con:settings/><con:testStep type="request" name="getRefferalsInfo" id="8aae5a8c-1b52-4238-8f8d-8aa25660c3e5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getReferralsInfo</con:operation><con:request name="getRefferalsInfo" id="8862a9bf-7810-43f2-982c-90101dcee21f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getReferralsInfo>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthDate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getReferralsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="c5a43031-4c9f-4529-8cb6-48b70f0c5aa7"/><con:assertion type="SOAP Fault Assertion" id="8b0fb789-2d89-4c2d-b1e7-7995312c7ba8" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAssignmentsInfo" id="8c92f266-e3d6-49b2-a816-add79dbf8c72"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAssignmentsInfo</con:operation><con:request name="getAssignmentsInfo" id="e420ee18-2943-4554-b3ae-8c47398bb925"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getAssignmentsInfo>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthdate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getAssignmentsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="251077f8-f57c-411b-b282-8960064dee65"/><con:assertion type="SOAP Fault Assertion" id="bdc0e5f9-7b08-49d4-b320-fed18c690b2f" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="ca5b05f6-8d57-47a0-aa46-826c6c503445"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-saOrchestrator" value=""/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value="${#Project#sudirToken}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-lk" value="https://2d0428c7-43c2-4fa0-9419-7048804121a4.mock.pstmn.io"/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1982-04-09</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property></con:properties></con:testCase><con:testCase id="5c579cde-d108-46b8-96bb-c8b2ba4ba4b1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС10. LK_AUTH_TOKEN_EXPIRED" searchProperties="true"><con:settings/><con:testStep type="request" name="getRefferalsInfo" id="ab5a04de-da3f-42ad-bf3c-dd33845ae2b5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getReferralsInfo</con:operation><con:request name="getRefferalsInfo" id="8862a9bf-7810-43f2-982c-90101dcee21f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getReferralsInfo>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthDate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getReferralsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="c5a43031-4c9f-4529-8cb6-48b70f0c5aa7"/><con:assertion type="SOAP Fault Assertion" id="8b0fb789-2d89-4c2d-b1e7-7995312c7ba8" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAssignmentsInfo" id="f57029e0-ba47-46b3-a01a-ee2779e64098"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAssignmentsInfo</con:operation><con:request name="getAssignmentsInfo" id="e420ee18-2943-4554-b3ae-8c47398bb925"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getAssignmentsInfo>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthdate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getAssignmentsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="251077f8-f57c-411b-b282-8960064dee65"/><con:assertion type="SOAP Fault Assertion" id="bdc0e5f9-7b08-49d4-b320-fed18c690b2f" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="dedd01cd-d92f-4f0b-983f-79b2db64847f"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-saOrchestrator" value=""/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value="${#Project#sudirToken}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-lk" value="https://2d0428c7-43c2-4fa0-9419-7048804121a4.mock.pstmn.io"/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1982-04-09</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property></con:properties></con:testCase><con:testCase id="b4b70cb0-5b90-49c4-abb9-e5c4fd9a5ca2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС7. LK_PERMISSION_ERROR (пустые списки)" searchProperties="true"><con:settings/><con:testStep type="request" name="getRefferalsInfo" id="5f2ff80f-ca9c-4b6d-a69c-0dec7786b654"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getReferralsInfo</con:operation><con:request name="getRefferalsInfo" id="8862a9bf-7810-43f2-982c-90101dcee21f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getReferralsInfo>
         <omsNumber>123</omsNumber>
         <birthDate>${#TestCase#birthDate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getReferralsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="c5a43031-4c9f-4529-8cb6-48b70f0c5aa7"/><con:assertion type="SOAP Fault Assertion" id="8b0fb789-2d89-4c2d-b1e7-7995312c7ba8" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAssignmentsInfo" id="0cb6b9eb-c579-4be5-903d-ef8346d73c57"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAssignmentsInfo</con:operation><con:request name="getAssignmentsInfo" id="e420ee18-2943-4554-b3ae-8c47398bb925"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getAssignmentsInfo>
         <omsNumber>123</omsNumber>
         <birthDate>${#TestCase#birthdate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getAssignmentsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="251077f8-f57c-411b-b282-8960064dee65"/><con:assertion type="SOAP Fault Assertion" id="bdc0e5f9-7b08-49d4-b320-fed18c690b2f" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="2d86fbfa-9bbe-4be9-b550-ffc1080525ae"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-saOrchestrator" value="https://1e984a1b-d2b3-488a-889f-552f47eabcb7.mock.pstmn.io"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value="${#Project#sudirToken}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-lk" value="https://63352865-3f68-4419-ba98-20615598b4ef.mock.pstmn.io"/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7748310870000218</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1986-11-29</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>119defa4-7921-4e24-a88a-c5098e70d995</con:value></con:property></con:properties></con:testCase><con:testCase id="5cc55ba5-4432-4273-9d4c-3223b2220b26" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС7. LK_PERMISSION_ERROR (пустой список + ошибка)" searchProperties="true"><con:settings/><con:testStep type="request" name="getRefferalsInfo" id="9db5e527-73a2-4385-861b-aab476404ba3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getReferralsInfo</con:operation><con:request name="getRefferalsInfo" id="8862a9bf-7810-43f2-982c-90101dcee21f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getReferralsInfo>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthDate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getReferralsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="c5a43031-4c9f-4529-8cb6-48b70f0c5aa7"/><con:assertion type="SOAP Fault Assertion" id="8b0fb789-2d89-4c2d-b1e7-7995312c7ba8" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAssignmentsInfo" id="2861a682-aa05-4faf-8c0a-dd9dffe2a379"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAssignmentsInfo</con:operation><con:request name="getAssignmentsInfo" id="e420ee18-2943-4554-b3ae-8c47398bb925"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">
   <soap:Header>
   <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM</wsse:Username>
    </wsse:UsernameToken>
  </wsse:Security>
  </soap:Header>
   <soap:Body>
      <v5:getAssignmentsInfo>
         <omsNumber>${#TestCase#omsNumber}</omsNumber>
         <birthDate>${#TestCase#birthdate}</birthDate>
         <externalSystemId>EIM</externalSystemId>
      </v5:getAssignmentsInfo>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="251077f8-f57c-411b-b282-8960064dee65"/><con:assertion type="SOAP Fault Assertion" id="bdc0e5f9-7b08-49d4-b320-fed18c690b2f" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="9442b8da-9316-4d83-af76-31f0c81b27f9"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-saOrchestrator" value=""/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value="${#Project#sudirToken}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-lk" value="https://2d0428c7-43c2-4fa0-9419-7048804121a4.mock.pstmn.io"/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7748310870000218</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1986-11-29</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>119defa4-7921-4e24-a88a-c5098e70d995</con:value></con:property></con:properties></con:testCase><con:testCase id="d31f0fc2-48d7-47fa-a0c4-befd937c9562" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Есть запись в d_reception_type_tmk_code (неархивная неудаленная)_385256" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Создать мок с ответом от getReferralsInfo" id="c6c97809-a2af-4ed9-b01e-cbe5c710adbb"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74444353435</id>
            <number>Н20231218-48</number>
            <startTime>2023-12-18</startTime>
            <endTime>2024-01-18</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353752</id>
            <number>Н20231219-56</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353753</id>
            <number>Н20231219-57</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353754</id>
            <number>Н20231219-58</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354195</id>
            <number>Н20231221-200</number>
            <startTime>2023-12-21</startTime>
            <endTime>2024-01-21</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20716996033</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354883</id>
            <number>Н20231226-131</number>
            <startTime>2023-12-26</startTime>
            <endTime>2024-01-24</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444356396</id>
            <number>Н20231229-21</number>
            <startTime>2023-12-29</startTime>
            <endTime>2024-01-27</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444357029</id>
            <number>Н20240109-246</number>
            <startTime>2024-01-09</startTime>
            <endTime>2024-02-07</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAssignmentsInfo" id="b2f9edb3-9ab0-483f-82ad-417274d5083d"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>&lt;soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   &lt;soap:Body>
      &lt;ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/"/>
   &lt;/soap:Body>
&lt;/soap:Envelope></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAppointmentReceptionsByPatient" id="15e6f495-d27a-4858-b6d1-3948f4f0d3ef"><con:description>1). Изменить значения startTime и endTime первой записи на сегодняшнюю дату и будущее время
2). Изменить значения startTime и endTime второй записи на сегодняшнюю дату и будущее время +1 секунда
3). Проверить, что оба значения receptionTypeId есть в таблице d_reception_type_tmk_code и выполнены условия:
archived_reception_type = false
is_deleted = false
4). Записать значение startTime из пункта 1 в пропертис тест-кейса
</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930045467</id>
            <number>С20240110-3</number>
            <lpuId>10266728</lpuId>
            <typeLpu>Онкологический диспансер</typeLpu>
            <nameLpu>ЦАОП ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</nameLpu>
            <lpuAddress>Москва, Верхняя Первомайская улица, д. 48, стр. 1</lpuAddress>
            <startTime>2024-01-11T07:00:00+03:00</startTime>
            <endTime>2024-01-11T07:10:00+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918952</availableResourceId>
            <complexResourceId>243952538</complexResourceId>
            <roomId>31156323</roomId>
            <roomNumber>109 ТМК</roomNumber>
            <addressPointId>2115592</addressPointId>
            <toDoctor>
               <specialityId>26</specialityId>
               <specialityName>Врач-онколог</specialityName>
               <doctorFio>Агарков Артём Михайлович</doctorFio>
               <receptionTypeId>1699</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
         <appointment>
            <id>391930044470</id>
            <number>С20240109-107</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>2024-01-11T07:00:01+03:00</startTime>
            <endTime>2024-01-11T07:10:01+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>true</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20701267441</availableResourceId>
            <complexResourceId>242719463</complexResourceId>
            <roomId>30914423</roomId>
            <roomNumber>1331</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>602</specialityId>
               <specialityName>Врач-терапевт участковый</specialityName>
               <doctorFio>Сивков Всеволод Игорьевич</doctorFio>
               <receptionTypeId>1161</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="f1bfc2cd-66bb-4a8a-b034-f28efbeec05a"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d07ece27-9309-4df5-af28-13f872c7cdd4" name="Contains activeAppointment"><con:configuration><token>activeAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89ca98ca-c4a6-400b-81fd-0515926cfc6a" name="Contains activeReferrals"><con:configuration><token>activeReferrals</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c3ab377c-fc1d-4676-aafb-e542a2b11bbd" name="Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="Mock-saOrchestrator" value="https://1e984a1b-d2b3-488a-889f-552f47eabcb7.mock.pstmn.io/385256"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить маппинг activeTmk" id="f86d202a-eda2-4964-b63c-fcd5b2029d4c"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.time.format.DateTimeFormatter

def restResponse = context.expand('${getSaCount#Response}')
def saCount =  new JsonSlurper().parseText(restResponse)
def activeTmk = saCount.payload.activeTmk
def appointmentId = testRunner.testCase.getPropertyValue("appointmentId").toLong()
def eventName = testRunner.testCase.getPropertyValue("spacialityName")
def startTime = testRunner.testCase.getPropertyValue("startTime")

assert activeTmk.appointmentId == appointmentId // проверяем appointmentId
assert activeTmk.eventName == eventName // проверяем eventName
assert activeTmk.startTime == startTime // проверяем eventName
</script></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>0556130838000530</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1968-03-11</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-01-11T07:00:00+03:00</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930045467</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач-онколог</con:value></con:property></con:properties></con:testCase><con:testCase id="790b0a57-99ef-4a83-bd56-ceb3f280dbc1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Есть запись в d_reception_type_tmk_code (архивная неудаленная)_385372" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Создать мок с ответом от getReferralsInfo" id="6c59e437-8af8-41ed-9a29-de39c4a710c9"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74444353435</id>
            <number>Н20231218-48</number>
            <startTime>2023-12-18</startTime>
            <endTime>2024-01-18</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353752</id>
            <number>Н20231219-56</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353753</id>
            <number>Н20231219-57</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353754</id>
            <number>Н20231219-58</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354195</id>
            <number>Н20231221-200</number>
            <startTime>2023-12-21</startTime>
            <endTime>2024-01-21</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20716996033</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354883</id>
            <number>Н20231226-131</number>
            <startTime>2023-12-26</startTime>
            <endTime>2024-01-24</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444356396</id>
            <number>Н20231229-21</number>
            <startTime>2023-12-29</startTime>
            <endTime>2024-01-27</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444357029</id>
            <number>Н20240109-246</number>
            <startTime>2024-01-09</startTime>
            <endTime>2024-02-07</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAssignmentsInfo" id="d15e10fb-e67a-4aa2-9d65-848e728f1a32"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>&lt;soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   &lt;soap:Body>
      &lt;ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/"/>
   &lt;/soap:Body>
&lt;/soap:Envelope></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAppointmentReceptionsByPatient" id="906a064c-90d4-48ca-9293-64f228867d08"><con:description>1). Изменить значения startTime и endTime первой записи на сегодняшнюю дату и будущее время
2). Изменить значения startTime и endTime второй записи на сегодняшнюю дату и будущее время +1 секунда
3). Проверить, что значение receptionTypeId есть в таблице d_reception_type_tmk_code, иначе взять существующее значение</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930045467</id>
            <number>С20240110-3</number>
            <lpuId>10266728</lpuId>
            <typeLpu>Онкологический диспансер</typeLpu>
            <nameLpu>ЦАОП ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</nameLpu>
            <lpuAddress>Москва, Верхняя Первомайская улица, д. 48, стр. 1</lpuAddress>
            <startTime>2024-01-11T07:00:00+03:00</startTime>
            <endTime>2024-01-11T07:10:00+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918952</availableResourceId>
            <complexResourceId>243952538</complexResourceId>
            <roomId>31156323</roomId>
            <roomNumber>109 ТМК</roomNumber>
            <addressPointId>2115592</addressPointId>
            <toDoctor>
               <specialityId>26</specialityId>
               <specialityName>Врач-онколог</specialityName>
               <doctorFio>Агарков Артём Михайлович</doctorFio>
               <receptionTypeId>1699</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="jdbc" name="Изменить запись в таблице d_reception_type_tmk_code" id="1c942181-c923-4605-b18e-5ea68f4dae42"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_reception_type_tmk_code
set archived_reception_type = true, is_deleted = false
where code_reception_type = 1699;</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="47c11f94-4b05-4dd5-bd22-6cd3af9a0d03"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d07ece27-9309-4df5-af28-13f872c7cdd4" name="Contains activeAppointment"><con:configuration><token>activeAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89ca98ca-c4a6-400b-81fd-0515926cfc6a" name="Contains activeReferrals"><con:configuration><token>activeReferrals</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="ee1873e7-d151-47f0-b4fb-2b937c5e47b2" name="Not Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="Mock-saOrchestrator" value="https://1e984a1b-d2b3-488a-889f-552f47eabcb7.mock.pstmn.io/385256"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Вернуть на исходную запись в таблице d_reception_type_tmk_code" id="6809bfbe-1e13-4f92-8ad6-c97369700238"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_reception_type_tmk_code
set archived_reception_type = false, is_deleted = false
where code_reception_type = 1699;</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>0556130838000530</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1968-03-11</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-01-11T07:00:00+03:00</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930045467</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач-онколог</con:value></con:property></con:properties></con:testCase><con:testCase id="3856f454-6f39-4b1e-a082-23d3c2d1b1a7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Есть запись в d_reception_type_tmk_code (неархивная удаленная)_385373" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Создать мок с ответом от getReferralsInfo" id="66cc442d-8b3e-4d76-ac5e-fd556d58d4c4"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74444353435</id>
            <number>Н20231218-48</number>
            <startTime>2023-12-18</startTime>
            <endTime>2024-01-18</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353752</id>
            <number>Н20231219-56</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353753</id>
            <number>Н20231219-57</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353754</id>
            <number>Н20231219-58</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354195</id>
            <number>Н20231221-200</number>
            <startTime>2023-12-21</startTime>
            <endTime>2024-01-21</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20716996033</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354883</id>
            <number>Н20231226-131</number>
            <startTime>2023-12-26</startTime>
            <endTime>2024-01-24</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444356396</id>
            <number>Н20231229-21</number>
            <startTime>2023-12-29</startTime>
            <endTime>2024-01-27</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444357029</id>
            <number>Н20240109-246</number>
            <startTime>2024-01-09</startTime>
            <endTime>2024-02-07</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAssignmentsInfo" id="bcb689c8-2883-49e3-8729-316f8712f4db"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>&lt;soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   &lt;soap:Body>
      &lt;ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/"/>
   &lt;/soap:Body>
&lt;/soap:Envelope></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAppointmentReceptionsByPatient" id="6c774031-2ef4-4f64-ba54-015b3f8960ce"><con:description>1). Изменить значения startTime и endTime первой записи на сегодняшнюю дату и будущее время
2). Изменить значения startTime и endTime второй записи на сегодняшнюю дату и будущее время +1 секунда
3). Проверить, что значение receptionTypeId есть в таблице d_reception_type_tmk_code, иначе взять существующее значение</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930045467</id>
            <number>С20240110-3</number>
            <lpuId>10266728</lpuId>
            <typeLpu>Онкологический диспансер</typeLpu>
            <nameLpu>ЦАОП ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</nameLpu>
            <lpuAddress>Москва, Верхняя Первомайская улица, д. 48, стр. 1</lpuAddress>
            <startTime>2024-01-11T07:00:00+03:00</startTime>
            <endTime>2024-01-11T07:10:00+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918952</availableResourceId>
            <complexResourceId>243952538</complexResourceId>
            <roomId>31156323</roomId>
            <roomNumber>109 ТМК</roomNumber>
            <addressPointId>2115592</addressPointId>
            <toDoctor>
               <specialityId>26</specialityId>
               <specialityName>Врач-онколог</specialityName>
               <doctorFio>Агарков Артём Михайлович</doctorFio>
               <receptionTypeId>1699</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="jdbc" name="Изменить запись в таблице d_reception_type_tmk_code" id="a8bdeefb-feff-469f-b64a-80e1028d00d1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_reception_type_tmk_code
set archived_reception_type = false, is_deleted = true
where code_reception_type = 1699;</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="0e361c0f-8885-4348-855d-b260cb2d6438"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d07ece27-9309-4df5-af28-13f872c7cdd4" name="Contains activeAppointment"><con:configuration><token>activeAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89ca98ca-c4a6-400b-81fd-0515926cfc6a" name="Contains activeReferrals"><con:configuration><token>activeReferrals</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="ee1873e7-d151-47f0-b4fb-2b937c5e47b2" name="Not Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="Mock-saOrchestrator" value="https://1e984a1b-d2b3-488a-889f-552f47eabcb7.mock.pstmn.io/385256"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Вернуть на исходную запись в таблице d_reception_type_tmk_code" id="c286b66f-006d-4a2c-876a-f5e1c1ee9da3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_reception_type_tmk_code
set archived_reception_type = false, is_deleted = false
where code_reception_type = 1699;</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>0556130838000530</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1968-03-11</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-01-11T07:00:00+03:00</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930045467</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач-онколог</con:value></con:property></con:properties></con:testCase><con:testCase id="20e9727a-9ff4-495d-a275-8d821d5babbd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Есть запись в d_reception_type_tmk_code (архивная удаленная)_385374" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Создать мок с ответом от getReferralsInfo" id="eb8640ec-d80f-4321-a016-ee4eafac4da0"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74444353435</id>
            <number>Н20231218-48</number>
            <startTime>2023-12-18</startTime>
            <endTime>2024-01-18</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353752</id>
            <number>Н20231219-56</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353753</id>
            <number>Н20231219-57</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353754</id>
            <number>Н20231219-58</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354195</id>
            <number>Н20231221-200</number>
            <startTime>2023-12-21</startTime>
            <endTime>2024-01-21</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20716996033</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354883</id>
            <number>Н20231226-131</number>
            <startTime>2023-12-26</startTime>
            <endTime>2024-01-24</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444356396</id>
            <number>Н20231229-21</number>
            <startTime>2023-12-29</startTime>
            <endTime>2024-01-27</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444357029</id>
            <number>Н20240109-246</number>
            <startTime>2024-01-09</startTime>
            <endTime>2024-02-07</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAssignmentsInfo" id="45180d23-0275-485b-acbf-03e6d7c132c6"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>&lt;soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   &lt;soap:Body>
      &lt;ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/"/>
   &lt;/soap:Body>
&lt;/soap:Envelope></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAppointmentReceptionsByPatient" id="cd80faea-8217-4483-99dc-45404702d57c"><con:description>1). Изменить значения startTime и endTime первой записи на сегодняшнюю дату и будущее время
2). Изменить значения startTime и endTime второй записи на сегодняшнюю дату и будущее время +1 секунда
3). Проверить, что значение receptionTypeId есть в таблице d_reception_type_tmk_code, иначе взять существующее значение</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930045467</id>
            <number>С20240110-3</number>
            <lpuId>10266728</lpuId>
            <typeLpu>Онкологический диспансер</typeLpu>
            <nameLpu>ЦАОП ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</nameLpu>
            <lpuAddress>Москва, Верхняя Первомайская улица, д. 48, стр. 1</lpuAddress>
            <startTime>2024-01-11T07:00:00+03:00</startTime>
            <endTime>2024-01-11T07:10:00+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918952</availableResourceId>
            <complexResourceId>243952538</complexResourceId>
            <roomId>31156323</roomId>
            <roomNumber>109 ТМК</roomNumber>
            <addressPointId>2115592</addressPointId>
            <toDoctor>
               <specialityId>26</specialityId>
               <specialityName>Врач-онколог</specialityName>
               <doctorFio>Агарков Артём Михайлович</doctorFio>
               <receptionTypeId>1699</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="jdbc" name="Изменить запись в таблице d_reception_type_tmk_code" id="1787274f-3e7f-4d92-b683-ef10c79a1359"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_reception_type_tmk_code
set archived_reception_type = true, is_deleted = true
where code_reception_type = 1699;</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="e22e6c26-b1b4-4c98-a7a4-5a4487573a34"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d07ece27-9309-4df5-af28-13f872c7cdd4" name="Contains activeAppointment"><con:configuration><token>activeAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89ca98ca-c4a6-400b-81fd-0515926cfc6a" name="Contains activeReferrals"><con:configuration><token>activeReferrals</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="ee1873e7-d151-47f0-b4fb-2b937c5e47b2" name="Not Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="Mock-saOrchestrator" value="https://1e984a1b-d2b3-488a-889f-552f47eabcb7.mock.pstmn.io/385256"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Вернуть на исходную запись в таблице d_reception_type_tmk_code" id="f2d060b6-7ab4-47df-bb13-9e1c0edf9c98"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_reception_type_tmk_code
set archived_reception_type = false, is_deleted = false
where code_reception_type = 1699;</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>0556130838000530</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1968-03-11</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-01-11T07:00:00+03:00</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930045467</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач-онколог</con:value></con:property></con:properties></con:testCase><con:testCase id="7edb25a3-c4dc-4fba-b9e6-953ac131f35d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Нет записи в d_reception_type_tmk_code_385375" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Создать мок с ответом от getReferralsInfo" id="2f438d2a-4b0f-4a05-a224-5b0a0233a51b"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74444353435</id>
            <number>Н20231218-48</number>
            <startTime>2023-12-18</startTime>
            <endTime>2024-01-18</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353752</id>
            <number>Н20231219-56</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353753</id>
            <number>Н20231219-57</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353754</id>
            <number>Н20231219-58</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354195</id>
            <number>Н20231221-200</number>
            <startTime>2023-12-21</startTime>
            <endTime>2024-01-21</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20716996033</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354883</id>
            <number>Н20231226-131</number>
            <startTime>2023-12-26</startTime>
            <endTime>2024-01-24</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444356396</id>
            <number>Н20231229-21</number>
            <startTime>2023-12-29</startTime>
            <endTime>2024-01-27</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444357029</id>
            <number>Н20240109-246</number>
            <startTime>2024-01-09</startTime>
            <endTime>2024-02-07</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAssignmentsInfo" id="3626bf32-fec1-4455-b033-b0c8eb006722"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>&lt;soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   &lt;soap:Body>
      &lt;ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/"/>
   &lt;/soap:Body>
&lt;/soap:Envelope></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAppointmentReceptionsByPatient" id="3ba8c908-0a78-483f-b22d-a0fb3b9b490a"><con:description>1). Изменить значения startTime и endTime первой записи на сегодняшнюю дату и будущее время
2). Изменить значения startTime и endTime второй записи на сегодняшнюю дату и будущее время +1 секунда
3). Проверить, что значение receptionTypeId отсутствует в таблице d_reception_type_tmk_code, иначе взять несуществующее значение</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930045467</id>
            <number>С20240110-3</number>
            <lpuId>10266728</lpuId>
            <typeLpu>Онкологический диспансер</typeLpu>
            <nameLpu>ЦАОП ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</nameLpu>
            <lpuAddress>Москва, Верхняя Первомайская улица, д. 48, стр. 1</lpuAddress>
            <startTime>2024-01-11T07:00:00+03:00</startTime>
            <endTime>2024-01-11T07:10:00+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918952</availableResourceId>
            <complexResourceId>243952538</complexResourceId>
            <roomId>31156323</roomId>
            <roomNumber>109 ТМК</roomNumber>
            <addressPointId>2115592</addressPointId>
            <toDoctor>
               <specialityId>26</specialityId>
               <specialityName>Врач-онколог</specialityName>
               <doctorFio>Агарков Артём Михайлович</doctorFio>
               <receptionTypeId>1111</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="0de313d4-0b9c-4e6f-9a31-6a7ee5e16e3f"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d07ece27-9309-4df5-af28-13f872c7cdd4" name="Contains activeAppointment"><con:configuration><token>activeAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89ca98ca-c4a6-400b-81fd-0515926cfc6a" name="Contains activeReferrals"><con:configuration><token>activeReferrals</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="ee1873e7-d151-47f0-b4fb-2b937c5e47b2" name="Not Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="Mock-saOrchestrator" value="https://1e984a1b-d2b3-488a-889f-552f47eabcb7.mock.pstmn.io/385256"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>0556130838000530</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1968-03-11</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-01-11T07:00:00+03:00</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930045467</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач-онколог</con:value></con:property></con:properties></con:testCase><con:testCase id="65d524e8-dcb8-4d09-9424-6bbed4358f5b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Запись по ТМК. appointment.startTime - 24ч = текущее дата и время_385634" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Создать мок с ответом от getReferralsInfo" id="1aa5e54a-93ef-48e0-939b-95f071ab7756"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74444353435</id>
            <number>Н20231218-48</number>
            <startTime>2023-12-18</startTime>
            <endTime>2024-01-18</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353752</id>
            <number>Н20231219-56</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353753</id>
            <number>Н20231219-57</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353754</id>
            <number>Н20231219-58</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354195</id>
            <number>Н20231221-200</number>
            <startTime>2023-12-21</startTime>
            <endTime>2024-01-21</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20716996033</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354883</id>
            <number>Н20231226-131</number>
            <startTime>2023-12-26</startTime>
            <endTime>2024-01-24</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444356396</id>
            <number>Н20231229-21</number>
            <startTime>2023-12-29</startTime>
            <endTime>2024-01-27</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444357029</id>
            <number>Н20240109-246</number>
            <startTime>2024-01-09</startTime>
            <endTime>2024-02-07</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAssignmentsInfo" id="297cdd31-6da3-40d2-883c-5f771e3f35d5"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>&lt;soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   &lt;soap:Body>
      &lt;ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/"/>
   &lt;/soap:Body>
&lt;/soap:Envelope></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAppointmentReceptionsByPatient" id="e95fd059-446d-4e5e-b339-a81d3fb75b97"><con:description>1). Изменить значение startTime записи на текущую дату и время - 24 часа, записать в пропертис тест-кейса
2). Изменить значение endTime записи на текущую дату и время - 24 часа + 10 минут
3). Проверить, что значение receptionTypeId есть в таблице d_reception_type_tmk_code и выполнены условия:
archived_reception_type = false
is_deleted = false
</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930045467</id>
            <number>С20240110-3</number>
            <lpuId>10266728</lpuId>
            <typeLpu>Онкологический диспансер</typeLpu>
            <nameLpu>ЦАОП ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</nameLpu>
            <lpuAddress>Москва, Верхняя Первомайская улица, д. 48, стр. 1</lpuAddress>
            <startTime>2024-01-11T12:00:00+03:00</startTime>
            <endTime>2024-01-11T12:10:00+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918952</availableResourceId>
            <complexResourceId>243952538</complexResourceId>
            <roomId>31156323</roomId>
            <roomNumber>109 ТМК</roomNumber>
            <addressPointId>2115592</addressPointId>
            <toDoctor>
               <specialityId>26</specialityId>
               <specialityName>Врач-онколог</specialityName>
               <doctorFio>Агарков Артём Михайлович</doctorFio>
               <receptionTypeId>1699</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="73798072-b27c-4eaa-a75b-e7daa81bb610"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d07ece27-9309-4df5-af28-13f872c7cdd4" name="Contains activeAppointment"><con:configuration><token>activeAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89ca98ca-c4a6-400b-81fd-0515926cfc6a" name="Contains activeReferrals"><con:configuration><token>activeReferrals</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c3ab377c-fc1d-4676-aafb-e542a2b11bbd" name="Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="Mock-saOrchestrator" value="https://1e984a1b-d2b3-488a-889f-552f47eabcb7.mock.pstmn.io/385256"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить маппинг activeTmk" id="f2d5b5a4-cb69-47ed-9e24-b68d581d0010"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.time.format.DateTimeFormatter

def restResponse = context.expand('${getSaCount#Response}')
def saCount =  new JsonSlurper().parseText(restResponse)
def activeTmk = saCount.payload.activeTmk
def appointmentId = testRunner.testCase.getPropertyValue("appointmentId").toLong()
def eventName = testRunner.testCase.getPropertyValue("spacialityName")
def startTime = testRunner.testCase.getPropertyValue("startTime")

assert activeTmk.appointmentId == appointmentId // проверяем appointmentId
assert activeTmk.eventName == eventName // проверяем eventName
assert activeTmk.startTime == startTime // проверяем eventName
</script></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>0556130838000530</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1968-03-11</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-01-11T12:00:00+03:00</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930045467</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач-онколог</con:value></con:property></con:properties></con:testCase><con:testCase id="95ff27b6-be04-43a3-a3f3-72ac989db311" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Запись по ТМК. appointment.startTime - 24ч > текущее дата и время_385639" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Создать мок с ответом от getReferralsInfo" id="18a6e47b-4980-451d-bb2f-ec35b8a9a70c"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74444353435</id>
            <number>Н20231218-48</number>
            <startTime>2023-12-18</startTime>
            <endTime>2024-01-18</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353752</id>
            <number>Н20231219-56</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353753</id>
            <number>Н20231219-57</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353754</id>
            <number>Н20231219-58</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354195</id>
            <number>Н20231221-200</number>
            <startTime>2023-12-21</startTime>
            <endTime>2024-01-21</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20716996033</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354883</id>
            <number>Н20231226-131</number>
            <startTime>2023-12-26</startTime>
            <endTime>2024-01-24</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444356396</id>
            <number>Н20231229-21</number>
            <startTime>2023-12-29</startTime>
            <endTime>2024-01-27</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444357029</id>
            <number>Н20240109-246</number>
            <startTime>2024-01-09</startTime>
            <endTime>2024-02-07</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAssignmentsInfo" id="b0a87fce-8c88-40ed-a89b-4398c235a01d"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>&lt;soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   &lt;soap:Body>
      &lt;ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/"/>
   &lt;/soap:Body>
&lt;/soap:Envelope></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAppointmentReceptionsByPatient" id="2d1553fd-bcfb-4c33-9f1c-9e01c681dff5"><con:description>1). Изменить значение startTime записи на текущую дату и время - 24 часа + 1 минута, записать в пропертис тест-кейса
2). Изменить значение endTime записи на текущую дату и время - 24 часа + 11 минут
3). Проверить, что значение receptionTypeId есть в таблице d_reception_type_tmk_code и выполнены условия:
archived_reception_type = false
is_deleted = false
</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930045467</id>
            <number>С20240110-3</number>
            <lpuId>10266728</lpuId>
            <typeLpu>Онкологический диспансер</typeLpu>
            <nameLpu>ЦАОП ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</nameLpu>
            <lpuAddress>Москва, Верхняя Первомайская улица, д. 48, стр. 1</lpuAddress>
            <startTime>2024-01-11T12:00:00+03:00</startTime>
            <endTime>2024-01-11T12:10:00+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918952</availableResourceId>
            <complexResourceId>243952538</complexResourceId>
            <roomId>31156323</roomId>
            <roomNumber>109 ТМК</roomNumber>
            <addressPointId>2115592</addressPointId>
            <toDoctor>
               <specialityId>26</specialityId>
               <specialityName>Врач-онколог</specialityName>
               <doctorFio>Агарков Артём Михайлович</doctorFio>
               <receptionTypeId>1699</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="857e10dc-9e04-4899-b552-2d72e071c62c"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d07ece27-9309-4df5-af28-13f872c7cdd4" name="Contains activeAppointment"><con:configuration><token>activeAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89ca98ca-c4a6-400b-81fd-0515926cfc6a" name="Contains activeReferrals"><con:configuration><token>activeReferrals</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="fb780ebb-5c11-4e4a-b702-8d145e49c67f" name="Not Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="Mock-saOrchestrator" value="${#Project#Mock-saOrchestrator}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>0556130838000530</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1968-03-11</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-01-11T12:00:00+03:00</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930045467</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач-онколог</con:value></con:property></con:properties></con:testCase><con:testCase id="345de3f1-419c-4e6f-8817-b1ddfe2dfaf9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Запись по ТМК. appointment.endTime > текущее дата и время_385689" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Создать мок с ответом от getReferralsInfo" id="46211850-29de-4e2d-b8ea-9a8fb412ce5e"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74444353435</id>
            <number>Н20231218-48</number>
            <startTime>2023-12-18</startTime>
            <endTime>2024-01-18</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353752</id>
            <number>Н20231219-56</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353753</id>
            <number>Н20231219-57</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353754</id>
            <number>Н20231219-58</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354195</id>
            <number>Н20231221-200</number>
            <startTime>2023-12-21</startTime>
            <endTime>2024-01-21</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20716996033</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354883</id>
            <number>Н20231226-131</number>
            <startTime>2023-12-26</startTime>
            <endTime>2024-01-24</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444356396</id>
            <number>Н20231229-21</number>
            <startTime>2023-12-29</startTime>
            <endTime>2024-01-27</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444357029</id>
            <number>Н20240109-246</number>
            <startTime>2024-01-09</startTime>
            <endTime>2024-02-07</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAssignmentsInfo" id="974a6e45-25f4-4237-9576-dca426c9bcc5"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>&lt;soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   &lt;soap:Body>
      &lt;ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/"/>
   &lt;/soap:Body>
&lt;/soap:Envelope></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAppointmentReceptionsByPatient" id="df3438ab-99e0-4d68-950c-b3f9a5860346"><con:description>1). Изменить значение startTime записи на текущую дату и время - 24 часа + 1 минута, записать в пропертис тест-кейса
2). Изменить значение endTime записи на текущую дату и время - 1 минута
3). Проверить, что значение receptionTypeId есть в таблице d_reception_type_tmk_code и выполнены условия:
archived_reception_type = false
is_deleted = false
</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930045467</id>
            <number>С20240110-3</number>
            <lpuId>10266728</lpuId>
            <typeLpu>Онкологический диспансер</typeLpu>
            <nameLpu>ЦАОП ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</nameLpu>
            <lpuAddress>Москва, Верхняя Первомайская улица, д. 48, стр. 1</lpuAddress>
            <startTime>2024-01-11T12:00:00+03:00</startTime>
            <endTime>2024-01-11T12:10:00+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918952</availableResourceId>
            <complexResourceId>243952538</complexResourceId>
            <roomId>31156323</roomId>
            <roomNumber>109 ТМК</roomNumber>
            <addressPointId>2115592</addressPointId>
            <toDoctor>
               <specialityId>26</specialityId>
               <specialityName>Врач-онколог</specialityName>
               <doctorFio>Агарков Артём Михайлович</doctorFio>
               <receptionTypeId>1699</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="restrequest" name="getSaCount" id="440dfdd9-4ead-4d9b-81f9-e9b21cf4372f"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v5/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getSaCount" id="63edd6a7-2d23-401f-8a61-2bef826a167b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a8e9d40-3bf2-46e1-bc8a-f7c5adf38935" name="HTTP Status Code - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d07ece27-9309-4df5-af28-13f872c7cdd4" name="Contains activeAppointment"><con:configuration><token>activeAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89ca98ca-c4a6-400b-81fd-0515926cfc6a" name="Contains activeReferrals"><con:configuration><token>activeReferrals</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="fb780ebb-5c11-4e4a-b702-8d145e49c67f" name="Not Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="Mock-saOrchestrator" value="${#Project#Mock-saOrchestrator}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="EI-token" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="birthDate" value="${#TestCase#birthDate}"/>
</con:parameters><con:parameterOrder><con:entry>omsNumber</con:entry><con:entry>birthDate</con:entry><con:entry>EI-token</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>ehrId</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-saOrchestrator</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>0556130838000530</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1968-03-11</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-01-11T12:00:00+03:00</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930045467</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач-онколог</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="ed8de5f8-45e3-4411-a0f8-d13ae5259e31" name="GET getCountForServicesForYou"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="0b6b3052-5b32-431d-bc8f-4a0bec487b81" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Подбор данных. Работает 10+ минут" searchProperties="true" disabled="true"><con:settings/><con:testStep type="restrequest" name="profile LK" id="feff2a5d-784e-4441-a738-e9f2f3daf19b"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/2/profile" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="profile LK" id="8a10705d-a3da-47f4-98b1-b1712bfe4374" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjQ3NTkwMjY4NDIsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiJiYjVlYjg1OC1lZjc2LTQyOTUtOTg1OS1jOWQ2YTI1MWIzNTAiLCJzaWQiOiJmMzI3NTUyNy1jZTkyLTQ4MGMtODljYy1kMjQ4M2RmMWM4MjEiLCJwaG9uZSI6Ijc5MTU5Njc5MjMwIiwic3NvX2lkIjoiSFlrbGU2WFc3aWZybFQ3d0N1dUswaVo5Um9lUFhtMk5HOTJiVGFMb3dmTUE4UC95dzg1TWkvV3JWSG84OVdEaFdGZ1J0NjZFVTNNQnRRM1NFaGhrcndPT0xqTkZpamNSZVZGMnhlZ1I0RSt3eGdCUzJKUnQzQ1NQNG1RZnc0WUVFSkNQcHJVVUMyS1BCVytja2tIeXQ5d09hUnE0VFFqWjIvd1R0ZEhERXlSczJzWUlNMVdVWlBnYzM5dlJScGZLR012NGtlYWMvZWlycTlQbFRmUFFhdVFkeG5HSjlaRHpRYkFzVU1VTFZiRlcwbTc4S0tSNUp6QUZwbDdZRkV4MW85ZVVUNzBYZEJaRGhmZFZsbGpBK1QreVJJT3BXMlNPWk9FcFZoWUFaOHFUVk90S2NKazA2MGJEbmRZZFVkMWdRMHg2Y2tUMStDZ094UUViZWZpL1l3PT0iLCJlbWFpbCI6Inlhci5wcm9tby56YXBvdi5hQGdtYWlsLmNvbSIsImZpcnN0X25hbWUiOiJcdTA0MjFcdTA0MzVcdTA0NDBcdTA0MzNcdTA0MzVcdTA0MzkiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxMi4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxMlx1MDQ0Zlx1MDQ0N1x1MDQzNVx1MDQ0MVx1MDQzYlx1MDQzMFx1MDQzMlx1MDQzZVx1MDQzMlx1MDQzOFx1MDQ0NyIsImJpcnRoX2RhdGUiOiIxOTc4LTAzLTIxIn0.dErz7ETQCxAJUOECLgysHVZZPZDQDJvvTQOi8_glDkqiWNaU1QTPKao0eueTw5_ydAE1KuGcGmI1yqeUhYDfp9ZMj97xKv4SYyE3lhdpgaiSALyoiuYcdxUEYj7cJiwZ0Bzjce8GOF__wI76cYKn-mVbZkuxPzRtn1SIvStR-zkiok3kW_Qg6HJFTP7mF1T_Z4p7OILvPYtErbJJHWJ-pVOLMjQYfk2RCjWJesIEuWs2sLr953xhQeodp-bBIYZCjCvxUSEgsHXNMkCvoRkujm9kpJFVHMgKYuwqmiHbZ6B7_3DuOiRsRRWrPJwn2dXZUwhlhzsutwCfIBE13SbfJqO9w14ud_GWrPsofO8T4j7UiGwTvzxXVycJZMMU6XElz35aQRGRVNV53NUQWCc2DqBlmsWHjW8Lg__A5NEjkgDPiRYKWp_Gdz9_I4YQY3x0ZFPIToUNFx2Lt8ei5zcLGL5hzvSdelUzmz0QirECbejcDJdXS8HxEe-XsCDLSh51hwweEpJILfdG4AlWhHFh9_NuKI-zoFx_48wB4d0-miMaxtiscQR1_0IwQFO0kujoMyIn432fPU2waJOjj41_SgX3AQsMPn3FQk4gV8MrHU9vfAoROXrBSbMS7ty5rwWczYdaijFYrNpsUprBRtL7EFSWgRnvFOU7ekNoy_AzpfA" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/2/profile</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8935e6f8-ef26-4d61-a64e-2d73cf7654f2" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="8d075820-b3cb-4fbe-9666-3106776652d2" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="covid LK" id="5bcf3a85-6d5f-4cab-97f8-ab75a7ffcde0" disabled="true"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/documents/covid-certificates" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="covid LK" id="a1501ac1-d8ca-471a-8e67-89caeaff5891" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/documents/covid-certificates</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="cd10cbcf-b040-4e67-ab9b-10cf51f40158" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="request" name="PIList LLO" id="40fe0513-e388-473f-bc0c-ab5918a77ff2" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PrescriptionInfoServiceV4SoapBinding</con:interface><con:operation>piList</con:operation><con:request name="PIList LLO" id="ba9e8ed6-9e09-46bc-b81d-c2748e326de8"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">
   <soapenv:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM/4c2f03d5-5c41-4c79-acd0-fe36faa92104</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"/>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>
      <typ:piListRequest>
         <typ:getForm>false</typ:getForm>
         <typ:ident>EMIASINFO</typ:ident>
         <typ:oms>${#TestCase#oms}</typ:oms>
      </typ:piListRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a7bf4ebb-07ad-425e-bbce-6a954e3108c3"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getPlan LK" id="f71fb972-9592-4f30-81cb-427db25bf95b" disabled="true"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/dispensary-observation/plan" methodName="Plan 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getPlan LK" id="ad6b7800-2a84-479e-8abf-1136af141c79" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/dispensary-observation/plan</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>X-Access-JWT</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getOnco LK" id="a5ceb622-49dc-4c5b-83ca-ad1b21ef5fa7" disabled="true"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/onco" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getOnco LK" id="f4b91470-d4fd-4c8f-b2be-390557c2ebcc" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/onco</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="request" name="PIGetDrugOrders LLO" id="32da057f-c98b-4304-90f8-7bfa1e6382e9" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PrescriptionInfoServiceV4SoapBinding</con:interface><con:operation>piGetDrugOrders</con:operation><con:request name="PIGetDrugOrders LLO" id="8286d987-f561-4566-a14b-67a9786de16c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">
<soapenv:Header>
  <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM/4c2f03d5-5c41-4c79-acd0-fe36faa92104</wsse:Username>
      <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"/>
    </wsse:UsernameToken>
  </wsse:Security>
</soapenv:Header>
   <soapenv:Body>
      <typ:piGetDrugOrdersRequest>
         <typ:ident>EMIASINFO</typ:ident>
         <!--Optional:-->
         <typ:oms>${#TestCase#oms}</typ:oms>
      </typ:piGetDrugOrdersRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="10f464d2-24c4-4f5f-9bce-92562b286259"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Подобрать данные (описание внутри)" id="341e35fd-2292-40c0-9a20-1961e71b13ad"><con:settings/><con:config><script><![CDATA[/*
 * Метод profile LK возвращает данные о пациенте с ЭМК и всех привязанных к нему пациентов (детей, родственников). 
Из этого запроса мы можем узнать EHR Id пациента. Далее с универсальным токеном вызываются все методы, которые вызываются внутри 
getCountForServicesForYou, и создаются массивы, в которых хранятся EHR-Id и oms пациентов с разными данными - с covid серификатом, с заказами, с онкологией и т.д.
Для более удобного дальнейшего использования подобранные данные записываются в файл. Для этого укажите путь к файту в переменной path.
*/
import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList
import java.util.Random
import groovy.time.TimeCategory 
import groovy.time.TimeDuration
Date start = new Date()
def getPlanResponse = context.expand('${profile LK#Response}')
def slurperJson = new JsonSlurper()
def all = slurperJson.parseText(getPlanResponse)

//Путь к файлу
path = "C:/Users/dkuznetsov/Desktop/data.txt"
def f = new File(path)
f.write("")
ehr=all.relatives.profileId //Получаем все ehrId
omsNumber=all.relatives.policyNum //Получаем все oms
ehrId_covid=[]; ehrId_receipt=[]; ehrId_dispensary=[]; ehrId_oncology=[]; ehrId_oncologyDate=[]; ehrId_drugOrdersCount=[]; ehrId_qrCode=[];
oms_covid=[]; oms_receipt=[]; oms_dispensary=[]; oms_oncology=[]; oms_oncologyDate=[]; oms_drugOrdersCount=[]; oms_qrCode=[];

for (int i =0; i<ehr.size();i++){ //перебор всех ehrId
	testRunner.TestCase.setPropertyValue("ehrId",ehr[i].toString())
	oms = omsNumber[i].toString()
	testRunner.TestCase.setPropertyValue("oms",oms.replaceAll("\\s",""))

	//Запускаем все шаги для проверки
	testRunner.runTestStepByName( "covid LK")
	testRunner.runTestStepByName( "PIList LLO")
	sleep 100
	testRunner.runTestStepByName( "getPlan LK")
	sleep 100
	testRunner.runTestStepByName( "getOnco LK")
	testRunner.runTestStepByName( "PIGetDrugOrders LLO")

	//Проверка наличия covid сертификата
	getCovidResponse = context.expand('${covid LK#Response}')
	slurperJson = new JsonSlurper()
	covid = slurperJson.parseText(getCovidResponse)
	if (covid.gotCertificate==true){
		ehrId_covid<<ehr[i].toString()
		oms_covid<<omsNumber[i].toString()
	}

	//Проверка наличия рецетов
	piListResponse = context.expand('${PIList LLO#Response}')
	PIList = new XmlSlurper().parseText(piListResponse)
	prescriptionLists = PIList.Body.piListResponse.prescriptionList ? PIList.Body.piListResponse.prescriptionList : null
	if (prescriptionLists.size()>0 && prescriptionLists!=null){
		ehrId_receipt<<ehr[i].toString()
		oms_receipt<<omsNumber[i].toString()
	}

	//Проверка наличия диспансерного наблюдения
	getPlanResponse = context.expand('${getPlan LK#Response}')
	getPlan = slurperJson.parseText(getPlanResponse)
	if(getPlan.code==null){
		ehrId_dispensary<<ehr[i].toString()
		oms_dispensary<<omsNumber[i].toString()
	}

	//Проверка наличия онкологии и даты снятия с учета по онкологии
	getOncoResponse = context.expand('${getOnco LK#Response}')
	getOnco = slurperJson.parseText(getOncoResponse)
	onco=getOnco.gotOncoPassport
	diagnoses = getOnco.diagnoses
	if (diagnoses!=null){
		check = true
		for (int j=0; j<diagnoses.size();j++){
			if (diagnoses[j].unregistrationDate == null){
				check = false
			}
		}
		//Запись онкологии с датой выписки
		if (onco==true && check==true){
			ehrId_oncologyDate<<ehr[i].toString()
			oms_oncologyDate<<omsNumber[i].toString()
		}
		//Запись онкологии без даты выписки
		if (onco==true && check==false){
			ehrId_oncology<<ehr[i].toString()
			oms_oncology<<omsNumber[i].toString()
		}
	}
	//Проверка наличия заказов в аптеках
	PIGetDrugOrdersResponse = context.expand('${PIGetDrugOrders LLO#Response}')
	PIGetDrugOrders = new XmlSlurper().parseText(PIGetDrugOrdersResponse)
	orders=PIGetDrugOrders.Body.piGetDrugOrdersResponse.order ? PIGetDrugOrders.Body.piGetDrugOrdersResponse.order : null
	if (orders!=null && orders!=""){
		ehrId_drugOrdersCount<<ehr[i].toString()
		oms_drugOrdersCount<<omsNumber[i].toString()
	}
	

	
}
mass=[]
log.info "covid" + ehrId_covid; mass<<"covid" + ehrId_covid.toString()
log.info "covid" + oms_covid; mass<<"covid" + oms_covid.toString()
log.info "receipt" + ehrId_receipt; mass<<"receipt" + ehrId_receipt.toString()
log.info "receipt" + oms_receipt; mass<<"receipt" + oms_receipt.toString()
log.info "dispensary" + ehrId_dispensary; mass<<"dispensary" + ehrId_dispensary.toString()
log.info "dispensary" + oms_dispensary; mass<<"dispensary" + oms_dispensary.toString()
log.info "oncologyDate" + ehrId_oncologyDate; mass<<"oncologyDate" + ehrId_oncologyDate.toString()
log.info "oncologyDate" + oms_oncologyDate; mass<< "oncologyDate" + oms_oncologyDate.toString()
log.info "oncology" + ehrId_oncology; mass<< "oncology" + ehrId_oncology.toString()
log.info "oncology" + oms_oncology; mass<<"oncology" + oms_oncology.toString()
log.info "drugOrdersCount" + ehrId_drugOrdersCount; mass<<"drugOrdersCount" + ehrId_drugOrdersCount.toString()
log.info "drugOrdersCount" + oms_drugOrdersCount;mass<<"drugOrdersCount" + oms_drugOrdersCount.toString()

for (int i =0; i<mass.size(); i++){
	f.append(mass[i])
	f.append("\n")
}

//Запись случайной пары ehrId и oms в каждый кейс
Random rnd = new Random()
n = rnd.nextInt(ehrId_receipt.size())
def testCase1 = testRunner.testCase.testSuite.testCases["Получение сведений о рецептах пользователя"]
testCase1.setPropertyValue("ehrId",ehrId_receipt[n].toString())
testCase1.setPropertyValue("omsNumber",oms_receipt[n].toString())

n = rnd.nextInt(ehrId_dispensary.size())
def testCase2 = testRunner.testCase.testSuite.testCases["Получение сведений о диспансерном наблюдении"] 
testCase2.setPropertyValue("ehrId",ehrId_dispensary[n].toString())
testCase2.setPropertyValue("omsNumber",oms_dispensary[n].toString())

n = rnd.nextInt(ehrId_oncologyDate.size())
def testCase3 = testRunner.testCase.testSuite.testCases["Получение сведений об онкопаспорте"] 
testCase3.setPropertyValue("ehrId",ehrId_oncologyDate[n].toString())
testCase3.setPropertyValue("omsNumber",oms_oncologyDate[n].toString())

n = rnd.nextInt(ehrId_oncology.size())
def testCase4 = testRunner.testCase.testSuite.testCases["Получение сведений об онкопаспорте (без oncologyUnregistrationDate)"] 
testCase4.setPropertyValue("ehrId",ehrId_oncology[n].toString())
testCase4.setPropertyValue("omsNumber",oms_oncology[n].toString())

n = rnd.nextInt(ehrId_drugOrdersCount.size())
def testCase5 = testRunner.testCase.testSuite.testCases["Получение данных о заказах пользователя"] 
testCase5.setPropertyValue("ehrId",ehrId_drugOrdersCount[n].toString())
testCase5.setPropertyValue("omsNumber",oms_drugOrdersCount[n].toString())

n = rnd.nextInt(ehrId_covid.size())
def testCase6 = testRunner.testCase.testSuite.testCases["Получение сведений о covid сертификате"] 
testCase6.setPropertyValue("ehrId",ehrId_covid[n].toString())
testCase6.setPropertyValue("omsNumber",oms_covid[n].toString())

def testCase7 = testRunner.testCase.testSuite.testCases["Получение сведений о covid сертификате. isCovidQR - false"] 
testCase7.setPropertyValue("ehrId",ehrId_covid[n].toString())
testCase7.setPropertyValue("omsNumber",oms_covid[n].toString())

log.info "end"
Date stop = new Date()
TimeDuration td = TimeCategory.minus( stop, start)
log.info td]]></script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>cd6379c8-fa52-4707-9af0-7555fb7d02e9</con:value></con:property><con:property><con:name>oms</con:name><con:value>7794589728001873</con:value></con:property></con:properties></con:testCase><con:testCase id="11d6c79f-494b-4aad-9f55-64ba5b4f47c5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений о рецептах пользователя_215756" searchProperties="true"><con:settings/><con:testStep type="request" name="PIList" id="9d5af939-235d-433f-b5a9-122dfb1e2c72"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PrescriptionInfoServiceV4SoapBinding</con:interface><con:operation>piList</con:operation><con:request name="PIList" id="94f270c6-4bd2-4868-b6ee-c3e448780ead"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#LLOEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">
   <soapenv:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM/4c2f03d5-5c41-4c79-acd0-fe36faa92104</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"/>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>
      <typ:piListRequest>
         <typ:getForm>false</typ:getForm>
         <typ:ident>EMIASINFO</typ:ident>
         <typ:oms>${#TestCase#omsNumber}</typ:oms>
      </typ:piListRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="cae073cd-d3de-4ed0-9e01-b0d37c8c3850"/><con:assertion type="SOAP Fault Assertion" id="c5af278b-0564-46aa-9612-a91b35adcee7" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Посчитать рецепты" id="fd240af5-a48e-419b-ac31-4c79e272326f"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper

def piListResponse = context.expand('${PIList#Response}')
PIList = new XmlSlurper().parseText(piListResponse)

prescriptionLists = PIList.Body.piListResponse.prescriptionList
count=0
for (int i = 0;i&lt;prescriptionLists.size();i++){
	if(prescriptionLists[i].state!= "expired" &amp;&amp; prescriptionLists[i].state!= "completed"){
		count+=1
	}
}
testRunner.testCase.setPropertyValue("count",count.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="825c22b3-7108-4be1-acd0-922bfa53e9eb"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="74a7bee1-17be-470b-a1bd-f735fca57555" name="Проверка рецептов"><con:configuration><path>$.payload.receiptCount</path><content>${#TestCase#count}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>51</con:value></con:property></con:properties></con:testCase><con:testCase id="ba257760-3517-44be-97e0-fa1cc0b2f202" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений о диспансерном наблюдении" searchProperties="true"><con:settings/><con:testStep type="request" name="getPlanShort" id="a6b826f0-1e1c-47ba-afb5-6cd7b564ad4b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>planServiceBinding</con:interface><con:operation>GetPlanShort</con:operation><con:request name="getPlanShort" id="49efced3-9eaa-48b0-9f3a-87f76139a2f8"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#planServiceEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/dnpdn/planService/v2/types/">\r
   <soap:Header>
      <wsse:Security soap:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-9d130c8c-53c1-4cf0-94af-d0da7dd509fa" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
      <ns3:userContext xmlns:ns3="http://emias.mos.ru/system/v1/userContext/" xmlns:ns4="http://emias.mos.ru/system/v1/faults/" xmlns:ns2="http://emias.mos.ru/dnpdn/core/v2/" xmlns="http://emias.mos.ru/dnpdn/planService/v2/types/">
         <ns3:systemName>EIM</ns3:systemName>
<ns3:userName>HYkle6XW7ifrlT7wCuuK0iZ9RoePXm2NG92bTaLowfMA8P/yw85Mi/WrVHo89WDhWFgRt66EU3MBtQ3SEhhkrwOOLjNFijcReVF2xegR4E+wxgBS2JRt3CSP4mQfw4YEEJCPprUUC2KPBW+ckkHyt9wOaRq4TQjZ2/wTtdHDEyRs2sYIM1WUZPgc39vRRpfKGMv4keac/eirq9PlTfPQauQdxnGJ9ZDzQbAsUMULVbFW0m78KKR5JzAFpl7YFEx1o9eUT70XdBZDhfdVlljA+T+yRIOpW2SOZOEpVhYAZ8qTVOtKcJk060bDndYdUd1gQ0x6ckT1+CgOxQEbefi/Yw==</ns3:userName>
         <ns3:userRoleId>7187</ns3:userRoleId>
         <ns3:isUserRoleSystemWide>true</ns3:isUserRoleSystemWide>
         <ns3:userRights>
            <ns3:userRightId>5150002</ns3:userRightId>
            <ns3:userRightId>333001</ns3:userRightId>
         </ns3:userRights>
         <ns3:jobExecutionId>1</ns3:jobExecutionId>
      </ns3:userContext>
   </soap:Header>
   <soap:Body>\r
      <typ:GetPlanShortRequest>
               <typ:patientId>${#TestCase#patientId}</typ:patientId>
      </typ:GetPlanShortRequest>
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="d27927c1-6b8c-459c-9111-6d855d6caf30"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="1995afed-b9ae-4304-a2da-2321c9b06a42"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка dispensary" id="1a55f67a-bae2-49cb-ac15-0d128a275aac"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper

def getPlanShort = context.expand('${getPlanShort#Response}')
getPlanShortSOAP = new XmlSlurper().parseText(getPlanShort)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse)

if (getPlanShortSOAP.Body.GetPlanShortResponse.result.archived == false){
	assert getCountForServicesForYou.payload.dispensary == true
}else{
	assert getCountForServicesForYou.payload.dispensary == false
}
</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property></con:properties></con:testCase><con:testCase id="b070b96d-7f4d-4ede-88b1-e44f3d32751d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений об онкопаспорте" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getOnco" id="d278c0a0-a238-4a12-af06-55eb48124544"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/onco" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getOnco" id="f4b91470-d4fd-4c8f-b2be-390557c2ebcc" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/onco</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2a5ca391-7179-434b-90ef-ec2aa2bd29ad" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="8b7b6f3f-196f-4dbf-90cb-7286b61d505b"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#sudirToken}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка oncology + UnregistrationDate" id="956806ed-592b-49ab-9901-95d22219d587"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList

def getOncoResponse = context.expand('${getOnco#Response}')
def slurperJson = new JsonSlurper()
def getOnco = slurperJson.parseText(getOncoResponse)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

onco=getOnco.gotOncoPassport
CountServicesOnco = getCountForServicesForYou.payload.oncology
assert onco==CountServicesOnco

check=true
diagnoses = getOnco.diagnoses
DateArray=[]
for (int i=0; i&lt;diagnoses.size();i++){
	if (diagnoses[i].unregistrationDate==null){
		check = false
	}
	else{
		DateArray&lt;&lt;diagnoses[i].unregistrationDate
	}
}
DateArray.sort().reverse()
CountServicesUnregistrationDate = getCountForServicesForYou.payload.oncologyUnregistrationDate

assert CountServicesUnregistrationDate==DateArray[0]

</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>f712a004-0537-4907-8cf4-37066a919dc6</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7758010875002485</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property></con:properties></con:testCase><con:testCase id="ac833bea-7496-43ce-a50a-2ab2168d6880" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений об онкопаспорте (без oncologyUnregistrationDate)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getOnco" id="cf76cf7a-ad2b-4485-aee0-bc7675cc95cb"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/onco" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getOnco" id="f4b91470-d4fd-4c8f-b2be-390557c2ebcc" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/onco</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2a5ca391-7179-434b-90ef-ec2aa2bd29ad" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="8b8f2f87-c41b-49fd-91b3-40ae60fb5067"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка oncology" id="e3cecc9e-9a1d-49c6-9ccd-72fd9529dab2"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList

def getOncoResponse = context.expand('${getOnco#Response}')
def slurperJson = new JsonSlurper()
def getOnco = slurperJson.parseText(getOncoResponse)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

onco=getOnco.gotOncoPassport
CountServicesOnco = getCountForServicesForYou.payload.oncology
assert onco==CountServicesOnco
</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78f95e67-9a67-4c37-979d-77da8bbbd64c</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7748540872003006</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property></con:properties></con:testCase><con:testCase id="bf241020-b4c0-4716-a463-a216d9967fdb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение данных о заказах пользователя" searchProperties="true"><con:settings/><con:testStep type="request" name="PIGetDrugOrders" id="0b59f2bd-df3f-4852-a0c1-8c04898a612b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PrescriptionInfoServiceV4SoapBinding</con:interface><con:operation>piGetDrugOrders</con:operation><con:request name="PIGetDrugOrders" id="7c2421ca-9705-4d3d-9402-c97c81183730"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#LLOEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">
<soapenv:Header>
  <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM/4c2f03d5-5c41-4c79-acd0-fe36faa92104</wsse:Username>
      <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"/>
    </wsse:UsernameToken>
  </wsse:Security>
</soapenv:Header>
   <soapenv:Body>
      <typ:piGetDrugOrdersRequest>
         <typ:ident>EMIASINFO</typ:ident>
         <!--Optional:-->
         <typ:oms>${#TestCase#omsNumber}</typ:oms>
      </typ:piGetDrugOrdersRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="5d28c2f5-0981-41db-a161-6977473672dc"/><con:assertion type="SOAP Fault Assertion" id="97720b9d-a3aa-4dca-b775-c1d307564c38" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="fe645d34-d6d1-4e93-91d5-c190a0ff3224"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка количества заказов" id="0f073633-ae08-467d-b5b3-b5d41e89dec5"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
PIGetDrugOrdersResponse = context.expand('${PIGetDrugOrders#Response}')
PIGetDrugOrders = new XmlSlurper().parseText(PIGetDrugOrdersResponse)

orders=PIGetDrugOrders.Body.piGetDrugOrdersResponse.order ? PIGetDrugOrders.Body.piGetDrugOrdersResponse.order : null
log.info orders

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse)

drugOrdersCount = getCountForServicesForYou.payload.drugOrdersCount

count=0
for (int i=0; i&lt;orders.size();i++){
	if (orders[i].statusCode=="executed"){
		count+=1
	}
}
assert drugOrdersCount == count</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>d314fabc-2209-40fe-ab24-a9d5c63ba093</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003097180466</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property></con:properties></con:testCase><con:testCase id="70f7a736-f9e4-47a5-bc26-0ba6b91c41c2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений о covid сертификате" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="covid-certificates" id="05dfac95-00eb-4057-86d6-f964eeda5232"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/documents/covid-certificates" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="covid-certificates" id="a1501ac1-d8ca-471a-8e67-89caeaff5891" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/documents/covid-certificates</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dea76118-be73-40f7-96a6-373e588a8542" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="32999486-54fb-4c30-a5bc-24bc546e38af"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка qrCode" id="7d0ef0ab-397d-4177-b8f1-bd7e0122150e"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList

def getCovidResponse = context.expand('${covid-certificates#Response}')
def slurperJson = new JsonSlurper()
def getCovid = slurperJson.parseText(getCovidResponse)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

Covid=getCovid.gotCertificate
CountServicesCovid = getCountForServicesForYou.payload.qrCode
assert Covid==CountServicesCovid

</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7755220898002957</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property></con:properties></con:testCase><con:testCase id="2361e571-a916-4e86-a2d0-fbd40f96730e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений о covid сертификате. isCovidQR - false" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="GET covid-certificates" id="2f6197c8-c320-466f-8939-d8027a67870c"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/documents/covid-certificates" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GET covid-certificates" id="a1501ac1-d8ca-471a-8e67-89caeaff5891" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/documents/covid-certificates</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dea76118-be73-40f7-96a6-373e588a8542" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="b4afaeef-cafa-4301-a519-827c81d28a7a"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка qrCode" id="4714cce2-3152-41e6-bf4f-a0021d565c86"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList

def getCovidResponse = context.expand('${GET covid-certificates#Response}')
def slurperJson = new JsonSlurper()
def getCovid = slurperJson.parseText(getCovidResponse)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

Covid=getCovid.gotCertificate
CountServicesCovid = getCountForServicesForYou.payload.qrCode
assert null==CountServicesCovid

</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7755220898002957</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property></con:properties></con:testCase><con:testCase id="b952db21-7fe8-4258-a57f-8cad67a9cfb8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений об актуальной госпитализации_378940" searchProperties="true"><con:settings/><con:testStep type="request" name="SOAP getHospitalizationInfoByPatient" id="f0a1208f-d89e-47c7-a2a8-3789a65ed27e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>hospitalServiceBinding</con:interface><con:operation>getHospitalizationInfoByPatient</con:operation><con:request name="SOAP getHospitalizationInfoByPatient" id="9f7cb18f-5800-4a1a-8203-cb939ae20e41"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/hospitalization/hospitalService/v2/types/" xmlns:v2="http://emias.mos.ru/hospitalization/core/v2/">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>af3e4ac5-96dd-4167-afb3-244eb7187aba</user:userName>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>570001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
      <wsse:Security soap:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM/EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:getHospitalizationInfoByPatientRequest>
         <typ:patientId>${#TestCase#patientId}</typ:patientId>
         <typ:options>
            <v2:entry key="hospitalizationForLK">true</v2:entry>
            <v2:entry key="actualHospital">true</v2:entry>
            <v2:entry key="restrictionsHemodialysis">true</v2:entry>
         </typ:options>
         <typ:pagingOptions pageNumber="0" pageSize="20">
            <v2:sortingOptions>
               <v2:sortOrder>
                  <v2:attributeName>hospitalizationhospitalDate</v2:attributeName>
                  <v2:descending>true</v2:descending>
               </v2:sortOrder>
            </v2:sortingOptions>
         </typ:pagingOptions>
      </typ:getHospitalizationInfoByPatientRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="93e7b5ea-df71-44f8-af32-ef3800fb33f0"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="75dd2cda-afbb-4105-a3e6-5aed67d3d700"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>hospitalDate</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SOAP getHospitalizationInfoByPatient</con:sourceStep><con:sourcePath>//*:hospitalDate</con:sourcePath><con:targetType>hospitalDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>moName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SOAP getHospitalizationInfoByPatient</con:sourceStep><con:sourcePath>//*:MOName</con:sourcePath><con:targetType>MOName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="3b242c58-49b8-473f-9623-b6b8aaf85387"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="74a7bee1-17be-470b-a1bd-f735fca57555" name="Проверка activeHospitalization.text"><con:configuration><path>$.payload.activeHospitalization.text</path><content>${#TestCase#MOName}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="74a7bee1-17be-470b-a1bd-f735fca57555" name="Проверка activeHospitalization.moName"><con:configuration><path>$.payload.activeHospitalization.moName</path><content>${#TestCase#MOName}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="74a7bee1-17be-470b-a1bd-f735fca57555" name="Проверка activeHospitalization.hospitalDate"><con:configuration><path>$.payload.activeHospitalization.hospitalDate</path><content>${#TestCase#hospitalDate}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка activeHospitalization.title" id="c718febc-174c-4b23-990f-3993378be4aa"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.time.format.DateTimeFormatter
import java.text.SimpleDateFormat

def getHospitalizationInfoByPatientResponse = context.expand('${SOAP getHospitalizationInfoByPatient#Response}')
getHospitalizationInfoSOAP = new XmlSlurper().parseText(getHospitalizationInfoByPatientResponse)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

hospitalDate = getHospitalizationInfoSOAP.Body.getHospitalizationInfoByPatientResponse.hospitalizations.hospitalDate.toString()
titleInfo = getCountForServicesForYou.payload.activeHospitalization.title

Date date = Date.parse( "yyyy-MM-dd'T'hh:mm:ss", hospitalDate ) // Парсим дату из соап-ответа
String formattedDate = date.format( 'd MMMM' ) // Приводим ее к необходимому формату

String title = 'Вы госпитализированы ' + formattedDate

assert title == titleInfo</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>da2ad6df-e6cb-4b91-a12e-4067ac27f564</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700006052630898</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>19882077</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2024-03-19T09:14:28</con:value></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">НИИ скорой помощи им. Н.В. Склифосовского1</con:value></con:property></con:properties></con:testCase><con:testCase id="81b5ee2f-2b9f-4c83-8068-f5994db014a5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений о рецептах пользователя" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Посчитать рецепты в моке" id="adfdc53d-b6aa-473c-890c-eb271b840f3e"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response

PIList = new XmlSlurper().parseText(response)


prescriptionLists = PIList.Body.piListResponse.prescriptionList
count=0
for (int i = 0;i&lt;prescriptionLists.size();i++){
	if(prescriptionLists[i].state!= "expired" &amp;&amp; prescriptionLists[i].state!= "completed"){
		count+=1
	}
}
testRunner.testCase.setPropertyValue("count",count.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="6543856c-72e4-4285-895b-b0641d4be831"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="74a7bee1-17be-470b-a1bd-f735fca57555" name="Проверка рецептов"><con:configuration><path>$.payload.receiptCount</path><content>${#TestCase#count}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>128</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395328/PIList</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/395328</con:value></con:property></con:properties></con:testCase><con:testCase id="d7bf0065-661f-45bc-8c6b-436363be6888" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений о диспансерном наблюдении. В ответе ПДН - archived = true" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="0bd9ff93-4b97-45fa-ada8-99e34e0615ed"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка dispensary" id="96a704e9-67ad-449e-8b15-8e733211d45d"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response

getPlanShortSOAP = new XmlSlurper().parseText(response)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse)

if (getPlanShortSOAP.Body.GetPlanShortResponse.result.archived == false){
	assert getCountForServicesForYou.payload.dispensary == true
}else{
	assert getCountForServicesForYou.payload.dispensary == false
}
</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395329</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395329/getPlanShort</con:value></con:property></con:properties></con:testCase><con:testCase id="0badeccf-9a8a-4822-a064-71e5a4a71c83" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений о диспансерном наблюдении. В ответе ПДН - archived = false" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="3a81a496-74d0-46a2-96e2-18537d34961e"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка dispensary" id="53dde583-5d39-44b7-92b6-d0c5c2b94790"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response

getPlanShortSOAP = new XmlSlurper().parseText(response)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse)

if (getPlanShortSOAP.Body.GetPlanShortResponse.result.archived == false){
	assert getCountForServicesForYou.payload.dispensary == true
}else{
	assert getCountForServicesForYou.payload.dispensary == false
}
</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395330</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395330/getPlanShort</con:value></con:property></con:properties></con:testCase><con:testCase id="ac12aa40-dd9f-42c9-b911-918cf41fb78e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений о диспансерном наблюдении. У пациента permissionType = CHILD" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="3d686f83-8a16-466c-bbb4-1b6fc54a0d61"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="f6e94f56-ded3-4441-b0d0-12a81d4283bb" name="dispencary = false"><con:configuration><path>$.payload.dispensary</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>0b31f977-39df-4446-bd78-af2ff077caaf</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395457</con:value></con:property></con:properties></con:testCase><con:testCase id="1475d0c9-70d8-4a96-ac08-5c6b8561aae6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений о диспансерном наблюдении. Возраст пациента &lt; 18 лет" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="aa384bfb-a71d-4f19-a6c6-25bd6e3e91db"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="f6e94f56-ded3-4441-b0d0-12a81d4283bb" name="dispencary = false"><con:configuration><path>$.payload.dispensary</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>bb8fbbbb-b6c7-4300-89fa-6d81a72ececd</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395458</con:value></con:property></con:properties></con:testCase><con:testCase id="70116f27-1e75-48be-a8a3-fb84707a8ba9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений об онкопаспорте" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="e82b12da-c9dc-4d2d-9e3e-725f6c838038"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка oncology + UnregistrationDate" id="866bc9f9-217b-43fc-82e3-925683c2d58e"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response


def slurperJson = new JsonSlurper()
def getOnco = slurperJson.parseText(response)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

onco=getOnco.gotOncoPassport
CountServicesOnco = getCountForServicesForYou.payload.oncology
assert onco==CountServicesOnco

check=true
diagnoses = getOnco.diagnoses
DateArray=[]
for (int i=0; i&lt;diagnoses.size();i++){
	if (diagnoses[i].unregistrationDate==null){
		check = false
	}
	else{
		DateArray&lt;&lt;diagnoses[i].unregistrationDate
	}
}
DateArray.sort().reverse()
CountServicesUnregistrationDate = getCountForServicesForYou.payload.oncologyUnregistrationDate

assert CountServicesUnregistrationDate==DateArray[DateArray.size - 1]

</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395331</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395331/1/onco?ehrId=e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property></con:properties></con:testCase><con:testCase id="82705ee7-1d2f-4a08-95ab-09c31846e616" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений об онкопаспорте (без oncologyUnregistrationDate)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="ca61633d-d0ba-48a1-9acd-ad4ea7d826e7"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка oncology" id="b6c7992a-5dc0-4cd4-8967-8952c25faa07"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response

def slurperJson = new JsonSlurper()
def getOnco = slurperJson.parseText(response)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

onco=getOnco.gotOncoPassport
CountServicesOnco = getCountForServicesForYou.payload.oncology
assert onco==CountServicesOnco

</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395332</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395332/1/onco?ehrId=e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property></con:properties></con:testCase><con:testCase id="6eaa4c36-7cb4-4f9a-8115-3c79310d350a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение данных о заказах пользователя (drugOrdersCount + drugOrdersShow), где содержатся значения с statusCode = executed" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="4530e48c-b419-4f19-8f39-d93c695075de"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка количества заказов" id="5d97e650-0582-4fe2-8b5c-722ca4ba3f48"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response

PIGetDrugOrders = new XmlSlurper().parseText(response)

orders=PIGetDrugOrders.Body.piGetDrugOrdersResponse.order ? PIGetDrugOrders.Body.piGetDrugOrdersResponse.order : null
log.info orders

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse)

drugOrdersCount = getCountForServicesForYou.payload.drugOrdersCount
drugOrdersShow  = getCountForServicesForYou.payload.drugOrdersShow

count=0
for (int i=0; i&lt;orders.size();i++){
	if (orders[i].statusCode=="executed"){
		count+=1
	}
}
assert drugOrdersCount == count
assert drugOrdersShow == true</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>d314fabc-2209-40fe-ab24-a9d5c63ba093</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003097180466</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/395333</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395333/piGetDrugOrders</con:value></con:property></con:properties></con:testCase><con:testCase id="0b0217f5-5e64-4253-bd23-bc158916cf21" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение данных о заказах пользователя (drugOrdersCount + drugOrdersShow), где содержатся значения с statusCode = completed/cancelled и от даты createDate до текущей даты прошло не более 30 дней" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Изменить дату в моке" id="40250503-a7f0-43cd-afe6-29c1e5b692e1"><con:settings/><con:config><script><![CDATA[import groovy.sql.Sql
import java.text.SimpleDateFormat

// Записать в переменную дату в формате yyyy-MM-dd
def DateForMock = new Date()-29
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS")
def DateForMock_format = sdf.format(DateForMock)

//получить из свойств кейса данные мока
path = testRunner.testCase.getPropertyValue("path")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

// Сформировать тело ответа от getPlanExtension, заменив даты
response="""<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <piGetDrugOrdersResponse xmlns="http://emias2.gov.ru/business/llo/v4/types">
         <order>
            <agregatorID>782846208</agregatorID>
            <agregatorName>LLOTest33</agregatorName>
            <createDate>""" + DateForMock_format + """</createDate>
            <delivering>false</delivering>
            <externalID>001942316</externalID>
            <orderID>8765</orderID>
            <pharmacyID>747807015</pharmacyID>
            <prescription>
               <drug>
                  <amount>13500</amount>
                  <qty>1</qty>
                  <storageCondition>Препарат следует хранить в недоступном для детей месте при температуре от 15° до 25°C.</storageCondition>
                  <title>Флюкостат капс. 150мг №1</title>
               </drug>
               <prescriptionNumber>00Д4519357964</prescriptionNumber>
               <type>commercial</type>
            </prescription>
            <QRCode>DO:000000008765ABAD967B8BC51A5F41CBF2D8DA2BF319</QRCode>
            <statusCode>completed</statusCode>
            <statusDetail>Отменен заказчиком</statusDetail>
         </order>
         <order>
            <agregatorID>782846208</agregatorID>
            <agregatorName>LLOTest33</agregatorName>
            <createDate>""" + DateForMock_format + """</createDate>
            <delivering>true</delivering>
            <externalID>41541541</externalID>
            <orderID>7716</orderID>
            <pharmacyID>790751047</pharmacyID>
            <prescription>
               <drug>
                  <amount>99999</amount>
                  <qty>10</qty>
                  <title>Наком таб 250мг+25мг бл №10х10 Лек Словения</title>
               </drug>
               <prescriptionNumber>01Э4519351211</prescriptionNumber>
               <type>benefit</type>
            </prescription>
            <QRCode>DO:000000007716A6C6F1FDE4CB3740FF5CD2049690D1A9</QRCode>
            <statusCode>cancelled</statusCode>
         </order>
         <order>
            <agregatorID>782846208</agregatorID>
            <agregatorName>LLOTest33</agregatorName>
            <createDate>2022-01-12T17:27:03+03:00</createDate>
            <delivering>true</delivering>
            <externalID>41541541</externalID>
            <orderID>7728</orderID>
            <pharmacyID>790751047</pharmacyID>
            <prescription>
               <drug>
                  <amount>85600</amount>
                  <qty>4</qty>
                  <title>Тамоксифен Гексал табл. п/пл/об. 10 мг бл N 10x3 Салютас Фарма ГмбХ Германия</title>
               </drug>
               <prescriptionNumber>01Э4519350976</prescriptionNumber>
               <type>benefit</type>
            </prescription>
            <QRCode>DO:000000007728734F7086AAF179EA24FFB3102E1AAEAF</QRCode>
            <statusCode>cancelled</statusCode>
         </order>
         <result>
            <resultCode>0</resultCode>
            <resultDescription>Запрос выполнен</resultDescription>
            <resultDetails>1705993725391,4807:ca19d4101d8a,llo-5546f85fb8-txjws,11717</resultDetails>
         </result>
      </piGetDrugOrdersResponse>
   </soap:Body>
</soap:Envelope>"""

//изменить запись
query="update template_response set response=' "+response+"' where \"path\"= '"+path+"'"
log.info query
sql.execute(query)

]]></script></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="40604768-e1b8-450f-8b56-2139a8cd7bd5"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="754d1960-585b-4662-98cf-3f9e68ff04a7" name="drugOrdersShow = true"><con:configuration><path>$.payload.drugOrdersShow</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="53c21978-bb43-409b-8191-11a3ca377db0" name="drugOrdersCount = 0"><con:configuration><path>$.payload.drugOrdersCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>d314fabc-2209-40fe-ab24-a9d5c63ba093</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003097180466</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/395334</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395334/piGetDrugOrders</con:value></con:property></con:properties></con:testCase><con:testCase id="7a293f93-8752-4e04-8e4e-f0ce623c2444" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение данных о заказах пользователя (drugOrdersCount + drugOrdersShow), где содержатся значения с statusCode = completed/cancelled, и нет недавно созданных заказов (более 30 дней)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Изменить дату в моке" id="dcd914d4-8228-488f-ae3a-2fcdeed5a6ea"><con:settings/><con:config><script><![CDATA[import groovy.sql.Sql
import java.text.SimpleDateFormat

// Записать в переменную дату в формате yyyy-MM-dd
def DateForMock = new Date()-30
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS")
def DateForMock_format = sdf.format(DateForMock)

//получить из свойств кейса данные мока
path = testRunner.testCase.getPropertyValue("path")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

// Сформировать тело ответа от getPlanExtension, заменив даты
response="""<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <piGetDrugOrdersResponse xmlns="http://emias2.gov.ru/business/llo/v4/types">
         <order>
            <agregatorID>782846208</agregatorID>
            <agregatorName>LLOTest33</agregatorName>
            <createDate>""" + DateForMock_format + """</createDate>
            <delivering>false</delivering>
            <externalID>001942316</externalID>
            <orderID>8765</orderID>
            <pharmacyID>747807015</pharmacyID>
            <prescription>
               <drug>
                  <amount>13500</amount>
                  <qty>1</qty>
                  <storageCondition>Препарат следует хранить в недоступном для детей месте при температуре от 15° до 25°C.</storageCondition>
                  <title>Флюкостат капс. 150мг №1</title>
               </drug>
               <prescriptionNumber>00Д4519357964</prescriptionNumber>
               <type>commercial</type>
            </prescription>
            <QRCode>DO:000000008765ABAD967B8BC51A5F41CBF2D8DA2BF319</QRCode>
            <statusCode>completed</statusCode>
            <statusDetail>Отменен заказчиком</statusDetail>
         </order>
         <order>
            <agregatorID>782846208</agregatorID>
            <agregatorName>LLOTest33</agregatorName>
            <createDate>""" + DateForMock_format + """</createDate>
            <delivering>true</delivering>
            <externalID>41541541</externalID>
            <orderID>7716</orderID>
            <pharmacyID>790751047</pharmacyID>
            <prescription>
               <drug>
                  <amount>99999</amount>
                  <qty>10</qty>
                  <title>Наком таб 250мг+25мг бл №10х10 Лек Словения</title>
               </drug>
               <prescriptionNumber>01Э4519351211</prescriptionNumber>
               <type>benefit</type>
            </prescription>
            <QRCode>DO:000000007716A6C6F1FDE4CB3740FF5CD2049690D1A9</QRCode>
            <statusCode>cancelled</statusCode>
         </order>
         <order>
            <agregatorID>782846208</agregatorID>
            <agregatorName>LLOTest33</agregatorName>
            <createDate>2022-01-12T17:27:03+03:00</createDate>
            <delivering>true</delivering>
            <externalID>41541541</externalID>
            <orderID>7728</orderID>
            <pharmacyID>790751047</pharmacyID>
            <prescription>
               <drug>
                  <amount>85600</amount>
                  <qty>4</qty>
                  <title>Тамоксифен Гексал табл. п/пл/об. 10 мг бл N 10x3 Салютас Фарма ГмбХ Германия</title>
               </drug>
               <prescriptionNumber>01Э4519350976</prescriptionNumber>
               <type>benefit</type>
            </prescription>
            <QRCode>DO:000000007728734F7086AAF179EA24FFB3102E1AAEAF</QRCode>
            <statusCode>cancelled</statusCode>
         </order>
         <result>
            <resultCode>0</resultCode>
            <resultDescription>Запрос выполнен</resultDescription>
            <resultDetails>1705993725391,4807:ca19d4101d8a,llo-5546f85fb8-txjws,11717</resultDetails>
         </result>
      </piGetDrugOrdersResponse>
   </soap:Body>
</soap:Envelope>"""

//изменить запись
query="update template_response set response=' "+response+"' where \"path\"= '"+path+"'"
log.info query
sql.execute(query)

]]></script></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="7e5ef255-82c8-49fe-bdf2-1ae1cdff4776"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="754d1960-585b-4662-98cf-3f9e68ff04a7" name="drugOrdersShow = false"><con:configuration><path>$.payload.drugOrdersShow</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="53c21978-bb43-409b-8191-11a3ca377db0" name="drugOrdersCount = 0"><con:configuration><path>$.payload.drugOrdersCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>d314fabc-2209-40fe-ab24-a9d5c63ba093</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003097180466</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/395335</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395335/piGetDrugOrders</con:value></con:property></con:properties></con:testCase><con:testCase id="70e7c5a0-4ce2-4cc1-aeb6-85e15a4c5958" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений о covid сертификате" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="063f9fd1-3d37-4acc-a6fc-30467d5ec2b0"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка qrCode" id="6c5e3a22-8b4f-459b-a185-7bc73f19fe70"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList

import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response


def slurperJson = new JsonSlurper()
def getCovid = slurperJson.parseText(response)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

Covid=getCovid.gotCertificate
CountServicesCovid = getCountForServicesForYou.payload.qrCode
assert Covid==CountServicesCovid

</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7755220898002957</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395337</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395337/1/documents/covid-certificates?ehrId=5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property></con:properties></con:testCase><con:testCase id="a52ad73c-2d33-4e4e-b44c-c0d4d85ab768" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ошибка Е001 от сервиса Госпитализация_378977" searchProperties="true"><con:settings/><con:testStep type="request" name="SOAP getHospitalizationInfoByPatient" id="085d7fb5-5011-4d3b-b5da-8e3d329cd835"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>hospitalServiceBinding</con:interface><con:operation>getHospitalizationInfoByPatient</con:operation><con:request name="SOAP getHospitalizationInfoByPatient" id="9f7cb18f-5800-4a1a-8203-cb939ae20e41"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/hospitalization/hospitalService/v2/types/" xmlns:v2="http://emias.mos.ru/hospitalization/core/v2/">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>af3e4ac5-96dd-4167-afb3-244eb7187aba</user:userName>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>570001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
      <wsse:Security soap:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM/EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:getHospitalizationInfoByPatientRequest>
         <typ:patientId>${#TestCase#patientId}</typ:patientId>
         <typ:options>
            <v2:entry key="hospitalizationForLK">true</v2:entry>
            <v2:entry key="actualHospital">true</v2:entry>
            <v2:entry key="restrictionsHemodialysis">true</v2:entry>
         </typ:options>
         <typ:pagingOptions pageNumber="0" pageSize="20">
            <v2:sortingOptions>
               <v2:sortOrder>
                  <v2:attributeName>hospitalizationhospitalDate</v2:attributeName>
                  <v2:descending>true</v2:descending>
               </v2:sortOrder>
            </v2:sortingOptions>
         </typ:pagingOptions>
      </typ:getHospitalizationInfoByPatientRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="93e7b5ea-df71-44f8-af32-ef3800fb33f0"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="87470864-a0a7-4d14-88d0-325663c6ec3b"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="2f7eb7da-4df1-4216-b353-05a52e8293cc" name="Not Contains activeHospitalization"><con:configuration><token>activeHospitalization</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="2eacc0f3-0246-4692-bda3-de6aa349eb3f" name="Contains 1 receiptCount"><con:configuration><path>$.payload.receiptCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="2eacc0f3-0246-4692-bda3-de6aa349eb3f" name="Contains 1 dispensary"><con:configuration><path>$.payload.dispensary</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="2eacc0f3-0246-4692-bda3-de6aa349eb3f" name="Contains 1 oncology"><con:configuration><path>$.payload.oncology</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="2eacc0f3-0246-4692-bda3-de6aa349eb3f" name="Contains 1 drugOrdersCount"><con:configuration><path>$.payload.drugOrdersCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>a1ca1017-1db1-43de-9810-20c8d2430bad</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7789789727001182</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>19838903</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="330bac6a-d346-4dc5-b1e8-87cfaf2a8f35" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получен пустой список от сервиса Госпитализация_379236" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="ad6dbeba-7650-4467-807f-c710f7192081"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="2f7eb7da-4df1-4216-b353-05a52e8293cc" name="Not Contains activeHospitalization"><con:configuration><token>activeHospitalization</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="2eacc0f3-0246-4692-bda3-de6aa349eb3f" name="Contains 1 receiptCount"><con:configuration><path>$.payload.receiptCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="2eacc0f3-0246-4692-bda3-de6aa349eb3f" name="Contains 1 dispensary"><con:configuration><path>$.payload.dispensary</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="2eacc0f3-0246-4692-bda3-de6aa349eb3f" name="Contains 1 oncology"><con:configuration><path>$.payload.oncology</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="2eacc0f3-0246-4692-bda3-de6aa349eb3f" name="Contains 1 drugOrdersCount"><con:configuration><path>$.payload.drugOrdersCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="2eacc0f3-0246-4692-bda3-de6aa349eb3f" name="Contains 1 qrCode"><con:configuration><path>$.payload.qrCode</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value="${#TestCase#Mock-hospitalization}"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>a1ca1017-1db1-43de-9810-20c8d2430bad</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7789789727001182</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>20948239</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">st mo name</con:value></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value>st mo name</con:value></con:property><con:property><con:name>Mock-hospitalization</con:name><con:value>${#Project#Mock-url}/395342</con:value></con:property></con:properties></con:testCase><con:testCase id="cac69505-7f7f-478a-840e-08a1d3b00f97" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Есть ПДН с актуальным диагнозом, доступным для голосового ввода_379811" searchProperties="true"><con:settings/><con:testStep type="request" name="getPlanShort" id="f1d2da13-5865-4f64-8819-8928b289cbda"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>planServiceBinding</con:interface><con:operation>GetPlanShort</con:operation><con:request name="getPlanShort" id="49efced3-9eaa-48b0-9f3a-87f76139a2f8"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#planServiceEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/dnpdn/planService/v2/types/">\r
   <soap:Header>
      <wsse:Security soap:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-9d130c8c-53c1-4cf0-94af-d0da7dd509fa" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
      <ns3:userContext xmlns:ns3="http://emias.mos.ru/system/v1/userContext/" xmlns:ns4="http://emias.mos.ru/system/v1/faults/" xmlns:ns2="http://emias.mos.ru/dnpdn/core/v2/" xmlns="http://emias.mos.ru/dnpdn/planService/v2/types/">
         <ns3:systemName>EIM</ns3:systemName>
<ns3:userName>HYkle6XW7ifrlT7wCuuK0iZ9RoePXm2NG92bTaLowfMA8P/yw85Mi/WrVHo89WDhWFgRt66EU3MBtQ3SEhhkrwOOLjNFijcReVF2xegR4E+wxgBS2JRt3CSP4mQfw4YEEJCPprUUC2KPBW+ckkHyt9wOaRq4TQjZ2/wTtdHDEyRs2sYIM1WUZPgc39vRRpfKGMv4keac/eirq9PlTfPQauQdxnGJ9ZDzQbAsUMULVbFW0m78KKR5JzAFpl7YFEx1o9eUT70XdBZDhfdVlljA+T+yRIOpW2SOZOEpVhYAZ8qTVOtKcJk060bDndYdUd1gQ0x6ckT1+CgOxQEbefi/Yw==</ns3:userName>
         <ns3:userRoleId>7187</ns3:userRoleId>
         <ns3:isUserRoleSystemWide>true</ns3:isUserRoleSystemWide>
         <ns3:userRights>
            <ns3:userRightId>5150002</ns3:userRightId>
            <ns3:userRightId>333001</ns3:userRightId>
         </ns3:userRights>
         <ns3:jobExecutionId>1</ns3:jobExecutionId>
      </ns3:userContext>
   </soap:Header>
   <soap:Body>\r
      <typ:GetPlanShortRequest>
               <typ:patientId>${#TestCase#patientId}</typ:patientId>
      </typ:GetPlanShortRequest>
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="d27927c1-6b8c-459c-9111-6d855d6caf30"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="67436462-35e1-4f35-93da-03b7a1cf284a"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="957fd571-8d30-4d6f-9ab1-e786630cb8d1" name="Count aiMeasurementInput = 1"><con:configuration><path>$.payload.aiMeasurementInput</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка диагнозов на актуальность и наличие в маппинге" id="e1eb3d90-9190-4d21-9edb-6adbbff14c78"><con:settings/><con:config><script><![CDATA[import groovy.sql.Sql
import com.eviware.soapui.support.XmlHolder
import groovy.json.JsonSlurper
import static org.junit.Assert.assertThat;
import static org.hamcrest.CoreMatchers.containsString;

// Получаем список диагнозов из SOAP-ответа
def soapResponse = context.expand('${getPlanShort#Response}') // получаем из соап запроса ответ
def onlyTextSoap =  new XmlSlurper().parseText(soapResponse) // создаем объект xml
def diagnosisCodes = onlyTextSoap.Body.GetPlanShortResponse.result.diagnosis.diagnosisCode //получаем все diagnosisCode из getPlanShort

// Парсим REST-ответ
def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

def login = testRunner.testCase.testSuite.project.getPropertyValue("emiasInfoDbLogin")
def password = testRunner.testCase.testSuite.project.getPropertyValue("emiasInfoDbPassword")
def dbconstring = testRunner.testCase.testSuite.project.getPropertyValue("emiasInfoDbConnection")

sql = Sql.newInstance("jdbc:postgresql://" + dbconstring + "?user=" + login + "&password=" + password, "org.postgresql.Driver")
context.dbConnection = sql

def bloodPressure = // массив всех диагнозов с возможностью голосового ввода
["I10", "I11", "I11.0", "I11.9", "I12", "I12.0", "I12.9", "I13", "I13.0", "I13.1", "I13.2", "I13.9", "I15", "I15.0", "I15.1", "I15.2", "I15.8", "I15.9",
"I20.1", "I20.8", "I20.9", "I25", "I25.0", "I25.1", "I25.2", "I25.3", "I25.4", "I25.5", "I25.6", "I25.8", "I25.9",
"I20.0", "I21", "I21.0", "I21.1", "I21.2", "I21.3", "I21.4", "I21.9", "I22", "I22.1", "I22.8", "I22.9", "I24", "I24.0", "I24.8", "I24.9",
"E78", "E78.0", "E78.2",
"I50", "I50.0", "I50.1", "I50.9",
"E11", "E11.2", "E11.3", "E11.4", "E11.5", "E11.6", "E11.7", "E11.8", "E11.9",
"I60", "I60.0", "I60.1", "I60.2", "I60.3", "I60.4", "I60.5", "I60.6", "I60.7", "I60.8", "I60.9", "I61", "I61.0", "I61.1", "I61.2", "I61.3", "I61.4", "I61.5", "I61.6", "I61.8", "I61.9", "I62", "I62.0", "I62.1", "I62.9", "I63", "I63.0", "I63.1", "I63.2", "I63.3", "I63.4", "I63.5", "I63.6", "I63.8", "I63.9", "I64",
"I69", "I69.0", "I69.1", "I69.2", "I69.3", "I69.4", "I69.8", "G45", "G45.0", "G45.1", "G45.2", "G45.3", "G45.4", "G45.8", "G45.9", "G46", "G46.0", "G46.1", "G46.2", "G46.3", "G46.4", "G46.5", "G46.6", "G46.7", "G46.8"]

// Выбрать из таблицы d_diagnosis_mkb10_pdn диагнозы из ответа getPlanShort и проверить их на актуальность

diagnosisDB = [] // массив для всех диагнозов из БД, которые есть в соап-ответе
actualDiagnosis = [] // массив для актуальных диагнозов из ответа getPlanShort
actualDiagnosisForVoice = [] // массив для актуальных диагнозов, доступных для голосового ввода

for (i=0; i<diagnosisCodes.size(); i++){
	def diagnosisDB = sql.rows("select * from d_diagnosis_mkb10_pdn where code_mkb10 = ?", [diagnosisCodes[i].toString()])
	if(diagnosisDB.actual_mkb10.get(0) == true &&
	diagnosisDB.archived_dispensary_observation_diagnosis.get(0) == false &&
	diagnosisDB.archived_dispensary_observation_program.get(0) == false) {
		actualDiagnosis << diagnosisDB.code_mkb10.get(0).toString()
		log.info "Диагноз " + diagnosisDB.code_mkb10 + " является актуальным"
		assert getCountForServicesForYou.payload.aiMeasurementInput.title[0].toString() == 'Артериальное давление'
		assert getCountForServicesForYou.payload.aiMeasurementInput.code[0].toString() == 'bloodPressure'
	}
}

// Проверить актуальные диагнозы на возможность голосового ввода
for (i=0; i<actualDiagnosis.size(); i++){
	if(bloodPressure.contains(actualDiagnosis[i])){
		actualDiagnosisForVoice << actualDiagnosis[i]
		log.info "Диагноз " + actualDiagnosisForVoice + " доступен для голосового ввода"
		}
}
]]></script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="be3ff830-3d85-4073-9518-335ceb4d18c2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Есть ПДН с актуальным диагнозом, не доступным для голосового ввода_380285" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="ac381780-6d9c-4bf7-b3af-ebb599e455e0"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="37579395-8861-4883-a723-2bf20c19cecd" name="Not Contains aiMeasurementInput "><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395353</con:value></con:property></con:properties></con:testCase><con:testCase id="6ca92157-b669-4f46-9d87-7273ca8fd8de" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Есть ПДН с 2 актуальнымы диагнозами, доступными для голосового ввода_380286" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="9aad40be-1fcd-480f-98aa-4eb204b97e88"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5c29cd69-dcc6-43b9-b604-da6f7ad0c903" name="Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="b637070b-9f1f-4fcd-a9e3-eb75acaf998f" name="Count aiMeasurementInput = 1"><con:configuration><path>$.payload.aiMeasurementInput</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d20224bc-c084-4319-896e-00da0bfab2d3" name="aiMeasurementInput.title = Артериальное давление"><con:configuration><path>$.payload.aiMeasurementInput[0].title</path><content>Артериальное давление</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="24895803-4c73-4f9c-ae6d-bb2d3c4efd16" name="aiMeasurementInput.code = bloodPressure"><con:configuration><path>$.payload.aiMeasurementInput[0].code</path><content>bloodPressure</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395354</con:value></con:property></con:properties></con:testCase><con:testCase id="1dcc76c0-bf88-431d-85eb-277f9133b7e8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = true, archived_disp_obs_diagnosis = false, archived_disp_obs_program = true_380356" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="7ba169bd-bdd2-4d16-ae0a-53e7ddc4ffdc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = true
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="c8869184-67ad-430d-bf81-26f6bb6a277f"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="bc05d438-4d4b-4e5c-9500-b7d758b31123"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="a88d66c2-5073-4d5b-a97c-916fa536aeb9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = true, archived_disp_obs_diagnosis = true, archived_disp_obs_program = true_380372" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="d3726fd5-98fd-4846-bbc1-8907b5bff3df"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = true, archived_dispensary_observation_program = true
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="3c8daed3-8b47-401e-8e54-31aae8e1d377"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="f7c59504-198d-46e8-a5d4-e3db99f19eba"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="2d78f4e5-ad4d-40ae-8294-b04c77d6f09c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = true, archived_disp_obs_diagnosis = true, archived_disp_obs_program = false_380486" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="47aaf039-aa6b-4a03-94f3-e161dd583972"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = true, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="56878384-cc93-4685-9c9a-0168ce828cc5"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="662713ed-5c76-47e4-8832-a70a0d00797a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="f5b32083-5367-4b42-a5a2-a4f4628c560f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = false, archived_disp_obs_diagnosis = true, archived_disp_obs_program = true_380487" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="f6b1cfe3-dc88-481b-8b14-eb9dab595e78"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = false, archived_dispensary_observation_diagnosis = true, archived_dispensary_observation_program = true
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="77dc4bc2-3842-410d-be82-a57f95a5b258"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="ce251640-0a25-4867-8544-d34802d29a1d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="f83ce9d1-7629-4e54-88e6-96928055ecef" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = false, archived_disp_obs_diagnosis = true, archived_disp_obs_program = false_380488" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="76ca95ec-2693-4deb-840e-29825032fdb1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = false, archived_dispensary_observation_diagnosis = true, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="c8e47f16-3e68-4af5-8823-20a1700ec0b3"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="27a48744-d160-48e7-b17f-564ed3affbb5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="4117cad3-e037-4102-b813-517dcf0bb754" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = false, archived_disp_obs_diagnosis = false, archived_disp_obs_program = true_380490" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="e16d7012-9d33-4025-ac35-2e07b3eaf7a8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = false, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = true
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="e3cd0914-af1d-41f1-8013-fda2fe05d2a3"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="6e6de546-2f57-41b0-b124-950f17b0d24f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="d50397e3-41f7-482b-b3b5-d65cfa45140a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = false, archived_disp_obs_diagnosis = false, archived_disp_obs_program = false_380492" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="248a14d8-d9db-4226-a459-e2b6ee0f3bc9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = false, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="cfd82efd-c170-4bef-82bd-ca5b7c39c3a4"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="8202be53-3a2c-4df9-b2d2-93d55005d3d1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="d5db7e38-416c-4c14-913d-f46a4fd343cd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="hospitalDate = 2023-01-01T00:00:00_378940" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="426558bd-2ca5-474a-845f-d0e3f3cfaf11"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="91b926af-2081-4f01-a77e-223d12319633" name="activeHospitalization.title = Вы госпитализированы с 1 января"><con:configuration><path>$.payload.activeHospitalization</path><content>{"title":"Вы госпитализированы 1 января","text":"st mo name","hospitalDate":"2023-01-01T00:00:00","moName":"st mo name"}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value="${#TestCase#Mock-hospitalization}"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>30000008931357</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value>2023-01-01T00:00:00</con:value></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value>st mo name</con:value></con:property><con:property><con:name>Mock-hospitalization</con:name><con:value>${#Project#Mock-url}/395338</con:value></con:property></con:properties></con:testCase><con:testCase id="99f8b0ed-ac59-4512-9cce-18ff6cb5a128" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="hospitalDate = 2023-01-09T00:00:00_378973" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="372962d6-a119-4b4d-b83f-eef66c3046e9"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="91b926af-2081-4f01-a77e-223d12319633" name="activeHospitalization.title = Вы госпитализированы с 1 января"><con:configuration><path>$.payload.activeHospitalization</path><content>{"title":"Вы госпитализированы 9 января","text":"st mo name","hospitalDate":"2023-01-09T00:00:00","moName":"st mo name"}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value="${#TestCase#Mock-hospitalization}"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>30000008931357</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value>2023-01-01T00:00:00</con:value></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value>st mo name</con:value></con:property><con:property><con:name>Mock-hospitalization</con:name><con:value>${#Project#Mock-url}/395339</con:value></con:property></con:properties></con:testCase><con:testCase id="dd85f7c8-10cd-4d7e-aaf9-dad9915e5e1b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="hospitalDate = 2023-01-10T00:00:00_378974" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="b9f3fea4-45ae-495a-b126-f2adf12fdbba"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="91b926af-2081-4f01-a77e-223d12319633" name="activeHospitalization.title = Вы госпитализированы с 1 января"><con:configuration><path>$.payload.activeHospitalization</path><content>{"title":"Вы госпитализированы 10 января","text":"st mo name","hospitalDate":"2023-01-10T00:00:00","moName":"st mo name"}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value="${#TestCase#Mock-hospitalization}"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>30000008931357</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value>2023-01-01T00:00:00</con:value></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value>st mo name</con:value></con:property><con:property><con:name>Mock-hospitalization</con:name><con:value>${#Project#Mock-url}/395340</con:value></con:property></con:properties></con:testCase><con:testCase id="806097e1-7fd5-4309-8bc1-218c742e275d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ошибка E002 от getPlanShort_380974" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="1e50ee30-d45d-42d3-b508-52fed2b2bda7"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="867594f6-873d-44b2-9a5f-85a3757ca6bf" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="50751ab3-d12e-4d16-9fc0-570da0c61562" name="payload.dispensary = false"><con:configuration><path>$.payload.dispensary</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395362</con:value></con:property></con:properties></con:testCase><con:testCase id="47b51175-80e6-45de-b475-935bad5ada3c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ошибка E003 от getPlanShort_380987" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="16adec16-04f1-42bc-bdc2-4bc47980efb8"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="867594f6-873d-44b2-9a5f-85a3757ca6bf" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="50751ab3-d12e-4d16-9fc0-570da0c61562" name="payload.dispensary = false"><con:configuration><path>$.payload.dispensary</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395363</con:value></con:property></con:properties></con:testCase><con:testCase id="340974c7-f339-45af-bebb-c7176140a804" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ошибка E005 от getPlanShort_380987" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="df726a5f-4ec9-4c22-ac20-b3b98c74690e"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="867594f6-873d-44b2-9a5f-85a3757ca6bf" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="50751ab3-d12e-4d16-9fc0-570da0c61562" name="payload.dispensary = false"><con:configuration><path>$.payload.dispensary</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395364</con:value></con:property></con:properties></con:testCase><con:testCase id="93023276-82cd-4eaf-86d7-d3f66573baf9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС1. Ошибка метода piList (LLO_PI_LIST_ERROR)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="4fa0fa38-7616-44b9-b1d3-a086aca349b7"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="801c03b6-d8bf-44cd-9133-ed0494b7c54b" name="error.code = LLO_PI_LIST_ERROR"><con:configuration><path>$.error.code</path><content>LLO_PI_LIST_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1531d92a-5536-4ab7-9535-9f6c37cccca9" name="error.description = Не удалось получить часть данных"><con:configuration><path>$.error.description</path><content>Не удалось получить часть данных</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d412d40e-724e-4553-a118-cd39d6828693" name="error.type = BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/395343</con:value></con:property></con:properties></con:testCase><con:testCase id="0109f9d6-5f03-4273-9255-20d1b0c16fcc" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС2. Невалидный X-Access-JWT (Unauthorized)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="covid-certificates" id="6c4ca808-0367-4f4e-ae5c-d4211812600b"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/documents/covid-certificates" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="covid-certificates" id="a1501ac1-d8ca-471a-8e67-89caeaff5891" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}+123" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/documents/covid-certificates</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dea76118-be73-40f7-96a6-373e588a8542" name="Valid HTTP Status Codes"><con:configuration><codes>401</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="680ad335-382e-4b28-8a57-426ad76f8526" name="code = &quot;Unauthorized&quot;"><con:configuration><path>$.code</path><content>Unauthorized</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="d9467370-6080-4367-a896-2e494225c936"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}+123" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>401</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="630258f4-c83f-4313-a663-4a31ec6705a4" name="Проверка error"><con:configuration><path>$.error.code</path><content>UNAUTHORIZED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ac7e6124-52c0-427b-9705-45d3e7d67f82" name="Проверка description"><con:configuration><path>$.error.description</path><content>Пользователь не авторизован</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT} +123"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>f4a1abfa-98c6-4be9-a1d7-68d92f93c9b4</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7751300873000442</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property></con:properties></con:testCase><con:testCase id="2d2800eb-6551-41f3-9bbb-60c8d2c803ce" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС3. Ошибка метода covid-certificates (LK_COVID_CERTIFICATES_ERROR)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="93b1da6e-a2a6-4702-9596-5795dd41de09"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="801c03b6-d8bf-44cd-9133-ed0494b7c54b" name="error.code = LK_COVID_CERTIFICATES_ERROR"><con:configuration><path>$.error.code</path><content>LK_COVID_CERTIFICATES_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1531d92a-5536-4ab7-9535-9f6c37cccca9" name="error.description = Не удалось получить часть данных"><con:configuration><path>$.error.description</path><content>Не удалось получить часть данных</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d412d40e-724e-4553-a118-cd39d6828693" name="error.type = BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7755220898002957</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>patientId</con:name><con:value>17840361</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395345</con:value></con:property></con:properties></con:testCase><con:testCase id="555c2324-10b9-46f3-801d-b9c29340ca3c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС5. Ошибка метода onco (LK_ONCO_ERROR)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="b54e8835-b397-4169-97cd-07b0c5c1ea60"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="630258f4-c83f-4313-a663-4a31ec6705a4" name="Проверка error"><con:configuration><path>$.error.code</path><content>LK_ONCO_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ac7e6124-52c0-427b-9705-45d3e7d67f82" name="Проверка description"><con:configuration><path>$.error.description</path><content>Не удалось получить часть данных</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395346</con:value></con:property></con:properties></con:testCase><con:testCase id="1519dc1c-50e4-457c-80af-02d57a8f1bb7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС6. Метод piGetDrugOrders вернул ошибку (LLO_PI_GET_DRUG_ORDERS_ERROR)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="1d4d40ac-048e-4058-9769-02cb1d4c3848"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="630258f4-c83f-4313-a663-4a31ec6705a4" name="Проверка error"><con:configuration><path>$.error.code</path><content>LLO_PI_GET_DRUG_ORDERS_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ac7e6124-52c0-427b-9705-45d3e7d67f82" name="Проверка description"><con:configuration><path>$.error.description</path><content>Не удалось получить часть данных</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
  <con:entry key="Mock-lk" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090481</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/395347</con:value></con:property></con:properties></con:testCase><con:testCase id="ab76b960-ea9a-4f0b-843f-cdba0a5eb185" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС8. PDN_ERROR__380988" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="14c78f90-14bf-4959-bb39-35fa27214056"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="867594f6-873d-44b2-9a5f-85a3757ca6bf" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="801c03b6-d8bf-44cd-9133-ed0494b7c54b" name="error.code = PDN_ERROR"><con:configuration><path>$.error.code</path><content>PDN_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1531d92a-5536-4ab7-9535-9f6c37cccca9" name="error.description = Ошибка получения программы диспансерного наблюдения"><con:configuration><path>$.error.description</path><content>Ошибка получения программы диспансерного наблюдения</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d412d40e-724e-4553-a118-cd39d6828693" name="error.type = TECHNICAL"><con:configuration><path>$.error.type</path><content>TECHNICAL</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395366</con:value></con:property></con:properties></con:testCase><con:testCase id="bbee43b9-44db-4164-9bb6-90208b48945d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС9. HOSP_SERVER_ERROR_378978" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="b7fb9d0b-ec87-44ac-9179-5659b5c36847"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="2f7eb7da-4df1-4216-b353-05a52e8293cc" name="Not Contains activeHospitalization"><con:configuration><token>activeHospitalization</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="911a0a6d-8ba4-4f30-aa84-6ec2f03dfe26" name="code = HOSP_SERVER_ERROR"><con:configuration><path>$.error.code</path><content>HOSP_SERVER_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="911a0a6d-8ba4-4f30-aa84-6ec2f03dfe26" name="description = Сервис ЕМИАС.Госпитализация не отвечает"><con:configuration><path>$.error.description</path><content>Сервис ЕМИАС.Госпитализация не отвечает</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="911a0a6d-8ba4-4f30-aa84-6ec2f03dfe26" name="type = TECHNICAL"><con:configuration><path>$.error.type</path><content>TECHNICAL</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value="${#TestCase#Mock-hospitalization}"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>a1ca1017-1db1-43de-9810-20c8d2430bad</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7789789727001182</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>19838903</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value>2023-01-01T00:00:00</con:value></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value>st mo name</con:value></con:property><con:property><con:name>Mock-hospitalization</con:name><con:value>${#Project#Mock-url}/395349</con:value></con:property></con:properties></con:testCase><con:testCase id="1c5c93c9-2fda-4287-abd9-b3b204d53204" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="388380_Метод piGetDrugOrders вернул ошибку 2740" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="8831864f-3baa-4a1a-bf4c-2ca06d39026d"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="67eef03f-c22e-4b31-aa15-ffcefae0587b" name="drugOrdersCount = 0"><con:configuration><path>$.payload.drugOrdersCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value=""/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090481</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/388380</con:value></con:property></con:properties></con:testCase><con:testCase id="2b621d57-6b2b-4ec2-9d2d-c0c047d60632" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="388424_На моках - Получение сведений о диспансерном наблюдении. Пустой ответ от ПДН" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="21ae7413-29b7-4eeb-9b98-806f1a268b8a"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="f6e94f56-ded3-4441-b0d0-12a81d4283bb" name="dispencary = false"><con:configuration><path>$.payload.dispensary</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>bb8fbbbb-b6c7-4300-89fa-6d81a72ececd</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/388424</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="aa262a7e-7cc6-4531-bf74-877bd458598b" name="POST getCountForServicesForYou"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="2ec674de-0d85-4d91-bfb7-8397dff99487" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Подбор данных. Работает 10+ минут" searchProperties="true" disabled="true"><con:settings/><con:testStep type="restrequest" name="profile LK" id="3a061153-1df0-490d-b13b-10956758bcd6"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/2/profile" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="profile LK" id="8a10705d-a3da-47f4-98b1-b1712bfe4374" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjQ3NTkwMjY4NDIsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiJiYjVlYjg1OC1lZjc2LTQyOTUtOTg1OS1jOWQ2YTI1MWIzNTAiLCJzaWQiOiJmMzI3NTUyNy1jZTkyLTQ4MGMtODljYy1kMjQ4M2RmMWM4MjEiLCJwaG9uZSI6Ijc5MTU5Njc5MjMwIiwic3NvX2lkIjoiSFlrbGU2WFc3aWZybFQ3d0N1dUswaVo5Um9lUFhtMk5HOTJiVGFMb3dmTUE4UC95dzg1TWkvV3JWSG84OVdEaFdGZ1J0NjZFVTNNQnRRM1NFaGhrcndPT0xqTkZpamNSZVZGMnhlZ1I0RSt3eGdCUzJKUnQzQ1NQNG1RZnc0WUVFSkNQcHJVVUMyS1BCVytja2tIeXQ5d09hUnE0VFFqWjIvd1R0ZEhERXlSczJzWUlNMVdVWlBnYzM5dlJScGZLR012NGtlYWMvZWlycTlQbFRmUFFhdVFkeG5HSjlaRHpRYkFzVU1VTFZiRlcwbTc4S0tSNUp6QUZwbDdZRkV4MW85ZVVUNzBYZEJaRGhmZFZsbGpBK1QreVJJT3BXMlNPWk9FcFZoWUFaOHFUVk90S2NKazA2MGJEbmRZZFVkMWdRMHg2Y2tUMStDZ094UUViZWZpL1l3PT0iLCJlbWFpbCI6Inlhci5wcm9tby56YXBvdi5hQGdtYWlsLmNvbSIsImZpcnN0X25hbWUiOiJcdTA0MjFcdTA0MzVcdTA0NDBcdTA0MzNcdTA0MzVcdTA0MzkiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxMi4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxMlx1MDQ0Zlx1MDQ0N1x1MDQzNVx1MDQ0MVx1MDQzYlx1MDQzMFx1MDQzMlx1MDQzZVx1MDQzMlx1MDQzOFx1MDQ0NyIsImJpcnRoX2RhdGUiOiIxOTc4LTAzLTIxIn0.dErz7ETQCxAJUOECLgysHVZZPZDQDJvvTQOi8_glDkqiWNaU1QTPKao0eueTw5_ydAE1KuGcGmI1yqeUhYDfp9ZMj97xKv4SYyE3lhdpgaiSALyoiuYcdxUEYj7cJiwZ0Bzjce8GOF__wI76cYKn-mVbZkuxPzRtn1SIvStR-zkiok3kW_Qg6HJFTP7mF1T_Z4p7OILvPYtErbJJHWJ-pVOLMjQYfk2RCjWJesIEuWs2sLr953xhQeodp-bBIYZCjCvxUSEgsHXNMkCvoRkujm9kpJFVHMgKYuwqmiHbZ6B7_3DuOiRsRRWrPJwn2dXZUwhlhzsutwCfIBE13SbfJqO9w14ud_GWrPsofO8T4j7UiGwTvzxXVycJZMMU6XElz35aQRGRVNV53NUQWCc2DqBlmsWHjW8Lg__A5NEjkgDPiRYKWp_Gdz9_I4YQY3x0ZFPIToUNFx2Lt8ei5zcLGL5hzvSdelUzmz0QirECbejcDJdXS8HxEe-XsCDLSh51hwweEpJILfdG4AlWhHFh9_NuKI-zoFx_48wB4d0-miMaxtiscQR1_0IwQFO0kujoMyIn432fPU2waJOjj41_SgX3AQsMPn3FQk4gV8MrHU9vfAoROXrBSbMS7ty5rwWczYdaijFYrNpsUprBRtL7EFSWgRnvFOU7ekNoy_AzpfA" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/2/profile</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8935e6f8-ef26-4d61-a64e-2d73cf7654f2" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="8d075820-b3cb-4fbe-9666-3106776652d2" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="covid LK" id="4ed2759a-ed97-444b-813f-137f2f056ebd" disabled="true"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/documents/covid-certificates" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="covid LK" id="a1501ac1-d8ca-471a-8e67-89caeaff5891" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/documents/covid-certificates</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="cd10cbcf-b040-4e67-ab9b-10cf51f40158" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="request" name="PIList LLO" id="5035842c-9e64-482d-9dfc-a39b3d6b49af" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PrescriptionInfoServiceV4SoapBinding</con:interface><con:operation>piList</con:operation><con:request name="PIList LLO" id="ba9e8ed6-9e09-46bc-b81d-c2748e326de8"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">
   <soapenv:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM/4c2f03d5-5c41-4c79-acd0-fe36faa92104</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"/>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>
      <typ:piListRequest>
         <typ:getForm>false</typ:getForm>
         <typ:ident>EMIASINFO</typ:ident>
         <typ:oms>${#TestCase#oms}</typ:oms>
      </typ:piListRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a7bf4ebb-07ad-425e-bbce-6a954e3108c3"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getPlan LK" id="3e3f159f-9257-4d42-8a8e-48e33d0091a9" disabled="true"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/dispensary-observation/plan" methodName="Plan 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getPlan LK" id="ad6b7800-2a84-479e-8abf-1136af141c79" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/dispensary-observation/plan</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value=""/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>X-Access-JWT</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getOnco LK" id="9eef86d5-9368-4278-9a49-c36f21003e94" disabled="true"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/onco" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getOnco LK" id="f4b91470-d4fd-4c8f-b2be-390557c2ebcc" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/onco</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="request" name="PIGetDrugOrders LLO" id="bbaa49dc-7982-46c4-ad23-cd99df2ee064" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PrescriptionInfoServiceV4SoapBinding</con:interface><con:operation>piGetDrugOrders</con:operation><con:request name="PIGetDrugOrders LLO" id="8286d987-f561-4566-a14b-67a9786de16c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">
<soapenv:Header>
  <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM/4c2f03d5-5c41-4c79-acd0-fe36faa92104</wsse:Username>
      <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"/>
    </wsse:UsernameToken>
  </wsse:Security>
</soapenv:Header>
   <soapenv:Body>
      <typ:piGetDrugOrdersRequest>
         <typ:ident>EMIASINFO</typ:ident>
         <!--Optional:-->
         <typ:oms>${#TestCase#oms}</typ:oms>
      </typ:piGetDrugOrdersRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="10f464d2-24c4-4f5f-9bce-92562b286259"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Подобрать данные (описание внутри)" id="cb7c028a-8ffe-4f5d-8467-9e2216af5a94"><con:settings/><con:config><script><![CDATA[/*
 * Метод profile LK возвращает данные о пациенте с ЭМК и всех привязанных к нему пациентов (детей, родственников). 
Из этого запроса мы можем узнать EHR Id пациента. Далее с универсальным токеном вызываются все методы, которые вызываются внутри 
getCountForServicesForYou, и создаются массивы, в которых хранятся EHR-Id и oms пациентов с разными данными - с covid серификатом, с заказами, с онкологией и т.д.
Для более удобного дальнейшего использования подобранные данные записываются в файл. Для этого укажите путь к файту в переменной path.
*/
import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList
import java.util.Random
import groovy.time.TimeCategory 
import groovy.time.TimeDuration
Date start = new Date()
def getPlanResponse = context.expand('${profile LK#Response}')
def slurperJson = new JsonSlurper()
def all = slurperJson.parseText(getPlanResponse)

//Путь к файлу
path = "C:/Users/dkuznetsov/Desktop/data.txt"
def f = new File(path)
f.write("")
ehr=all.relatives.profileId //Получаем все ehrId
omsNumber=all.relatives.policyNum //Получаем все oms
ehrId_covid=[]; ehrId_receipt=[]; ehrId_dispensary=[]; ehrId_oncology=[]; ehrId_oncologyDate=[]; ehrId_drugOrdersCount=[]; ehrId_qrCode=[];
oms_covid=[]; oms_receipt=[]; oms_dispensary=[]; oms_oncology=[]; oms_oncologyDate=[]; oms_drugOrdersCount=[]; oms_qrCode=[];

for (int i =0; i<ehr.size();i++){ //перебор всех ehrId
	testRunner.TestCase.setPropertyValue("ehrId",ehr[i].toString())
	oms = omsNumber[i].toString()
	testRunner.TestCase.setPropertyValue("oms",oms.replaceAll("\\s",""))

	//Запускаем все шаги для проверки
	testRunner.runTestStepByName( "covid LK")
	testRunner.runTestStepByName( "PIList LLO")
	sleep 100
	testRunner.runTestStepByName( "getPlan LK")
	sleep 100
	testRunner.runTestStepByName( "getOnco LK")
	testRunner.runTestStepByName( "PIGetDrugOrders LLO")

	//Проверка наличия covid сертификата
	getCovidResponse = context.expand('${covid LK#Response}')
	slurperJson = new JsonSlurper()
	covid = slurperJson.parseText(getCovidResponse)
	if (covid.gotCertificate==true){
		ehrId_covid<<ehr[i].toString()
		oms_covid<<omsNumber[i].toString()
	}

	//Проверка наличия рецетов
	piListResponse = context.expand('${PIList LLO#Response}')
	PIList = new XmlSlurper().parseText(piListResponse)
	prescriptionLists = PIList.Body.piListResponse.prescriptionList ? PIList.Body.piListResponse.prescriptionList : null
	if (prescriptionLists.size()>0 && prescriptionLists!=null){
		ehrId_receipt<<ehr[i].toString()
		oms_receipt<<omsNumber[i].toString()
	}

	//Проверка наличия диспансерного наблюдения
	getPlanResponse = context.expand('${getPlan LK#Response}')
	getPlan = slurperJson.parseText(getPlanResponse)
	if(getPlan.code==null){
		ehrId_dispensary<<ehr[i].toString()
		oms_dispensary<<omsNumber[i].toString()
	}

	//Проверка наличия онкологии и даты снятия с учета по онкологии
	getOncoResponse = context.expand('${getOnco LK#Response}')
	getOnco = slurperJson.parseText(getOncoResponse)
	onco=getOnco.gotOncoPassport
	diagnoses = getOnco.diagnoses
	if (diagnoses!=null){
		check = true
		for (int j=0; j<diagnoses.size();j++){
			if (diagnoses[j].unregistrationDate == null){
				check = false
			}
		}
		//Запись онкологии с датой выписки
		if (onco==true && check==true){
			ehrId_oncologyDate<<ehr[i].toString()
			oms_oncologyDate<<omsNumber[i].toString()
		}
		//Запись онкологии без даты выписки
		if (onco==true && check==false){
			ehrId_oncology<<ehr[i].toString()
			oms_oncology<<omsNumber[i].toString()
		}
	}
	//Проверка наличия заказов в аптеках
	PIGetDrugOrdersResponse = context.expand('${PIGetDrugOrders LLO#Response}')
	PIGetDrugOrders = new XmlSlurper().parseText(PIGetDrugOrdersResponse)
	orders=PIGetDrugOrders.Body.piGetDrugOrdersResponse.order ? PIGetDrugOrders.Body.piGetDrugOrdersResponse.order : null
	if (orders!=null && orders!=""){
		ehrId_drugOrdersCount<<ehr[i].toString()
		oms_drugOrdersCount<<omsNumber[i].toString()
	}
	

	
}
mass=[]
log.info "covid" + ehrId_covid; mass<<"covid" + ehrId_covid.toString()
log.info "covid" + oms_covid; mass<<"covid" + oms_covid.toString()
log.info "receipt" + ehrId_receipt; mass<<"receipt" + ehrId_receipt.toString()
log.info "receipt" + oms_receipt; mass<<"receipt" + oms_receipt.toString()
log.info "dispensary" + ehrId_dispensary; mass<<"dispensary" + ehrId_dispensary.toString()
log.info "dispensary" + oms_dispensary; mass<<"dispensary" + oms_dispensary.toString()
log.info "oncologyDate" + ehrId_oncologyDate; mass<<"oncologyDate" + ehrId_oncologyDate.toString()
log.info "oncologyDate" + oms_oncologyDate; mass<< "oncologyDate" + oms_oncologyDate.toString()
log.info "oncology" + ehrId_oncology; mass<< "oncology" + ehrId_oncology.toString()
log.info "oncology" + oms_oncology; mass<<"oncology" + oms_oncology.toString()
log.info "drugOrdersCount" + ehrId_drugOrdersCount; mass<<"drugOrdersCount" + ehrId_drugOrdersCount.toString()
log.info "drugOrdersCount" + oms_drugOrdersCount;mass<<"drugOrdersCount" + oms_drugOrdersCount.toString()

for (int i =0; i<mass.size(); i++){
	f.append(mass[i])
	f.append("\n")
}

//Запись случайной пары ehrId и oms в каждый кейс
Random rnd = new Random()
n = rnd.nextInt(ehrId_receipt.size())
def testCase1 = testRunner.testCase.testSuite.testCases["Получение сведений о рецептах пользователя"]
testCase1.setPropertyValue("ehrId",ehrId_receipt[n].toString())
testCase1.setPropertyValue("omsNumber",oms_receipt[n].toString())

n = rnd.nextInt(ehrId_dispensary.size())
def testCase2 = testRunner.testCase.testSuite.testCases["Получение сведений о диспансерном наблюдении"] 
testCase2.setPropertyValue("ehrId",ehrId_dispensary[n].toString())
testCase2.setPropertyValue("omsNumber",oms_dispensary[n].toString())

n = rnd.nextInt(ehrId_oncologyDate.size())
def testCase3 = testRunner.testCase.testSuite.testCases["Получение сведений об онкопаспорте"] 
testCase3.setPropertyValue("ehrId",ehrId_oncologyDate[n].toString())
testCase3.setPropertyValue("omsNumber",oms_oncologyDate[n].toString())

n = rnd.nextInt(ehrId_oncology.size())
def testCase4 = testRunner.testCase.testSuite.testCases["Получение сведений об онкопаспорте (без oncologyUnregistrationDate)"] 
testCase4.setPropertyValue("ehrId",ehrId_oncology[n].toString())
testCase4.setPropertyValue("omsNumber",oms_oncology[n].toString())

n = rnd.nextInt(ehrId_drugOrdersCount.size())
def testCase5 = testRunner.testCase.testSuite.testCases["Получение данных о заказах пользователя"] 
testCase5.setPropertyValue("ehrId",ehrId_drugOrdersCount[n].toString())
testCase5.setPropertyValue("omsNumber",oms_drugOrdersCount[n].toString())

n = rnd.nextInt(ehrId_covid.size())
def testCase6 = testRunner.testCase.testSuite.testCases["Получение сведений о covid сертификате"] 
testCase6.setPropertyValue("ehrId",ehrId_covid[n].toString())
testCase6.setPropertyValue("omsNumber",oms_covid[n].toString())

def testCase7 = testRunner.testCase.testSuite.testCases["Получение сведений о covid сертификате. isCovidQR - false"] 
testCase7.setPropertyValue("ehrId",ehrId_covid[n].toString())
testCase7.setPropertyValue("omsNumber",oms_covid[n].toString())

log.info "end"
Date stop = new Date()
TimeDuration td = TimeCategory.minus( stop, start)
log.info td]]></script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>cd6379c8-fa52-4707-9af0-7555fb7d02e9</con:value></con:property><con:property><con:name>oms</con:name><con:value>7794589728001873</con:value></con:property></con:properties></con:testCase><con:testCase id="ef3e7e37-59a4-4af4-8fcd-39563c99070b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений о рецептах пользователя_395328" searchProperties="true"><con:settings/><con:testStep type="request" name="PIList" id="e1d7fa01-8313-40c9-a1d1-6ac0c98a453b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PrescriptionInfoServiceV4SoapBinding</con:interface><con:operation>piList</con:operation><con:request name="PIList" id="94f270c6-4bd2-4868-b6ee-c3e448780ead"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#LLOEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">
   <soapenv:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM/4c2f03d5-5c41-4c79-acd0-fe36faa92104</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"/>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>
      <typ:piListRequest>
         <typ:getForm>false</typ:getForm>
         <typ:ident>EMIASINFO</typ:ident>
         <typ:oms>${#TestCase#omsNumber}</typ:oms>
      </typ:piListRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="cae073cd-d3de-4ed0-9e01-b0d37c8c3850"/><con:assertion type="SOAP Fault Assertion" id="c5af278b-0564-46aa-9612-a91b35adcee7" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Посчитать рецепты" id="2629ae3e-a932-49ff-b3d3-d4f782773b62"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper

def piListResponse = context.expand('${PIList#Response}')
PIList = new XmlSlurper().parseText(piListResponse)

prescriptionLists = PIList.Body.piListResponse.prescriptionList
count=0
for (int i = 0;i&lt;prescriptionLists.size();i++){
	if(prescriptionLists[i].state!= "expired" &amp;&amp; prescriptionLists[i].state!= "completed"){
		count+=1
	}
}
testRunner.testCase.setPropertyValue("count",count.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="ea13ebe9-5529-46b4-a97e-f910ce29a01f"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="JsonPath Match" id="7abe250b-6ae7-4e48-bf79-1ffdfce5ae6d" name=" Количество рецептов = count из переменных тест кейса"><con:configuration><path>$.payload.receiptCount</path><content>${#TestCase#count}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>51</con:value></con:property></con:properties></con:testCase><con:testCase id="e20b54ad-679a-46c9-8cab-569211f8ad19" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений о диспансерном наблюдении_395329" searchProperties="true"><con:settings/><con:testStep type="request" name="getPlanShort" id="bb2635ed-ab79-47eb-848a-3e7b7dadb281"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>planServiceBinding</con:interface><con:operation>GetPlanShort</con:operation><con:request name="getPlanShort" id="49efced3-9eaa-48b0-9f3a-87f76139a2f8"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#planServiceEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/dnpdn/planService/v2/types/">\r
   <soap:Header>
      <wsse:Security soap:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-9d130c8c-53c1-4cf0-94af-d0da7dd509fa" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
      <ns3:userContext xmlns:ns3="http://emias.mos.ru/system/v1/userContext/" xmlns:ns4="http://emias.mos.ru/system/v1/faults/" xmlns:ns2="http://emias.mos.ru/dnpdn/core/v2/" xmlns="http://emias.mos.ru/dnpdn/planService/v2/types/">
         <ns3:systemName>EIM</ns3:systemName>
<ns3:userName>HYkle6XW7ifrlT7wCuuK0iZ9RoePXm2NG92bTaLowfMA8P/yw85Mi/WrVHo89WDhWFgRt66EU3MBtQ3SEhhkrwOOLjNFijcReVF2xegR4E+wxgBS2JRt3CSP4mQfw4YEEJCPprUUC2KPBW+ckkHyt9wOaRq4TQjZ2/wTtdHDEyRs2sYIM1WUZPgc39vRRpfKGMv4keac/eirq9PlTfPQauQdxnGJ9ZDzQbAsUMULVbFW0m78KKR5JzAFpl7YFEx1o9eUT70XdBZDhfdVlljA+T+yRIOpW2SOZOEpVhYAZ8qTVOtKcJk060bDndYdUd1gQ0x6ckT1+CgOxQEbefi/Yw==</ns3:userName>
         <ns3:userRoleId>7187</ns3:userRoleId>
         <ns3:isUserRoleSystemWide>true</ns3:isUserRoleSystemWide>
         <ns3:userRights>
            <ns3:userRightId>5150002</ns3:userRightId>
            <ns3:userRightId>333001</ns3:userRightId>
         </ns3:userRights>
         <ns3:jobExecutionId>1</ns3:jobExecutionId>
      </ns3:userContext>
   </soap:Header>
   <soap:Body>\r
      <typ:GetPlanShortRequest>
               <typ:patientId>${#TestCase#patientId}</typ:patientId>
      </typ:GetPlanShortRequest>
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="d27927c1-6b8c-459c-9111-6d855d6caf30"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="1f254442-73d5-4b5c-abd1-4843a560871c"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка dispensary" id="1659c806-f6fc-47af-8770-8d6c97cacef1"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper

def getPlanShort = context.expand('${getPlanShort#Response}')
getPlanShortSOAP = new XmlSlurper().parseText(getPlanShort)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse)

if (getPlanShortSOAP.Body.GetPlanShortResponse.result.archived == false){
	assert getCountForServicesForYou.payload.dispensary == true
}else{
	assert getCountForServicesForYou.payload.dispensary == false
}
</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property></con:properties></con:testCase><con:testCase id="f39d7c5e-a40c-4505-af8c-51b0e61f4533" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений об онкопаспорте_395331" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getOnco" id="d9bc0f2a-eb87-4c47-835f-e452271116a6"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/onco" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getOnco" id="f4b91470-d4fd-4c8f-b2be-390557c2ebcc" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/onco</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2a5ca391-7179-434b-90ef-ec2aa2bd29ad" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="312f3cbf-4461-4438-be32-6b9b89f4ad44"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка oncology + UnregistrationDate" id="a55aa30e-4541-4c88-86b7-ffe9bc8a76f0"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList

def getOncoResponse = context.expand('${getOnco#Response}')
def slurperJson = new JsonSlurper()
def getOnco = slurperJson.parseText(getOncoResponse)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

onco=getOnco.gotOncoPassport
CountServicesOnco = getCountForServicesForYou.payload.oncology
assert onco==CountServicesOnco

check=true
diagnoses = getOnco.diagnoses
DateArray=[]
for (int i=0; i&lt;diagnoses.size();i++){
	if (diagnoses[i].unregistrationDate==null){
		check = false
	}
	else{
		DateArray&lt;&lt;diagnoses[i].unregistrationDate
	}
}
DateArray.sort().reverse()
CountServicesUnregistrationDate = getCountForServicesForYou.payload.oncologyUnregistrationDate

assert CountServicesUnregistrationDate==DateArray[0]

</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property></con:properties></con:testCase><con:testCase id="d61cab18-e987-4427-acd2-5ab64ad22e71" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений об онкопаспорте (без oncologyUnregistrationDate)_395332" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getOnco" id="93bef784-7173-447b-8919-305c8e6d29ea"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/onco" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getOnco" id="f4b91470-d4fd-4c8f-b2be-390557c2ebcc" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/onco</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2a5ca391-7179-434b-90ef-ec2aa2bd29ad" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="b4e48d53-583a-498c-9c57-71e63295f610"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка oncology" id="0bc42589-614d-4720-988a-1acb816802cc"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList

def getOncoResponse = context.expand('${getOnco#Response}')
def slurperJson = new JsonSlurper()
def getOnco = slurperJson.parseText(getOncoResponse)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

onco=getOnco.gotOncoPassport
CountServicesOnco = getCountForServicesForYou.payload.oncology
assert onco==CountServicesOnco
</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property></con:properties></con:testCase><con:testCase id="6cc8d25b-552c-4f1d-b536-59c213186b18" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение данных о заказах пользователя_395333" searchProperties="true"><con:settings/><con:testStep type="request" name="PIGetDrugOrders" id="9abf4c00-2af9-4adc-a17a-e74d450c3cff"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PrescriptionInfoServiceV4SoapBinding</con:interface><con:operation>piGetDrugOrders</con:operation><con:request name="PIGetDrugOrders" id="7c2421ca-9705-4d3d-9402-c97c81183730"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#LLOEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v4/types">
<soapenv:Header>
  <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <wsse:UsernameToken>
      <wsse:Username>EIM/4c2f03d5-5c41-4c79-acd0-fe36faa92104</wsse:Username>
      <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"/>
    </wsse:UsernameToken>
  </wsse:Security>
</soapenv:Header>
   <soapenv:Body>
      <typ:piGetDrugOrdersRequest>
         <typ:ident>EMIASINFO</typ:ident>
         <!--Optional:-->
         <typ:oms>${#TestCase#omsNumber}</typ:oms>
      </typ:piGetDrugOrdersRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="5d28c2f5-0981-41db-a161-6977473672dc"/><con:assertion type="SOAP Fault Assertion" id="97720b9d-a3aa-4dca-b775-c1d307564c38" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="fe5f08d0-362a-4d44-98fd-faea1d5f1f92"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка количества заказов" id="fee8c776-adfb-4b12-85e5-156f7a3ca57f"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
PIGetDrugOrdersResponse = context.expand('${PIGetDrugOrders#Response}')
PIGetDrugOrders = new XmlSlurper().parseText(PIGetDrugOrdersResponse)

orders=PIGetDrugOrders.Body.piGetDrugOrdersResponse.order ? PIGetDrugOrders.Body.piGetDrugOrdersResponse.order : null
log.info orders

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse)

drugOrdersCount = getCountForServicesForYou.payload.drugOrdersCount

count=0
for (int i=0; i&lt;orders.size();i++){
	if (orders[i].statusCode=="executed"){
		count+=1
	}
}
assert drugOrdersCount == count</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>d314fabc-2209-40fe-ab24-a9d5c63ba093</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003097180466</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property></con:properties></con:testCase><con:testCase id="7f5e1903-e39b-4839-b6b0-febd43c9511a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений о covid сертификате_395337" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="covid-certificates" id="91831025-fd23-453a-a537-1dcf5435d210"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/documents/covid-certificates" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="covid-certificates" id="a1501ac1-d8ca-471a-8e67-89caeaff5891" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/documents/covid-certificates</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dea76118-be73-40f7-96a6-373e588a8542" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="3ac35d3f-3be6-409c-99c9-f02057c30733"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка qrCode" id="2d8a7e6e-1923-489a-ab64-8ba3ab7e5eb1"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList

def getCovidResponse = context.expand('${covid-certificates#Response}')
def slurperJson = new JsonSlurper()
def getCovid = slurperJson.parseText(getCovidResponse)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

Covid=getCovid.gotCertificate
CountServicesCovid = getCountForServicesForYou.payload.qrCode
assert Covid==CountServicesCovid

</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7755220898002957</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property></con:properties></con:testCase><con:testCase id="d1ce00e3-1642-46b9-929f-e4bf0f4a5a52" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений о covid сертификате. isCovidQR - false_395350" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="GET covid-certificates" id="f2ea265e-6db8-4bed-a292-17de06f9c94e"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/documents/covid-certificates" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GET covid-certificates" id="a1501ac1-d8ca-471a-8e67-89caeaff5891" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/documents/covid-certificates</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dea76118-be73-40f7-96a6-373e588a8542" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="bbb5e494-555b-4310-8d62-815504bc17ef"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка qrCode" id="dc7db9cd-d9a7-4d2c-babc-942cf3785ba6"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList

def getCovidResponse = context.expand('${GET covid-certificates#Response}')
def slurperJson = new JsonSlurper()
def getCovid = slurperJson.parseText(getCovidResponse)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

Covid=getCovid.gotCertificate
CountServicesCovid = getCountForServicesForYou.payload.qrCode
assert null==CountServicesCovid

</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7755220898002957</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property></con:properties></con:testCase><con:testCase id="7009643d-a1ba-466f-9805-ae82637b70ab" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений об актуальной госпитализации_395338" searchProperties="true"><con:settings/><con:testStep type="request" name="SOAP getHospitalizationInfoByPatient" id="b919082c-1f70-4ce8-bcbb-bce7464c82d1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>hospitalServiceBinding</con:interface><con:operation>getHospitalizationInfoByPatient</con:operation><con:request name="SOAP getHospitalizationInfoByPatient" id="9f7cb18f-5800-4a1a-8203-cb939ae20e41"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/hospitalization/hospitalService/v2/types/" xmlns:v2="http://emias.mos.ru/hospitalization/core/v2/">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>af3e4ac5-96dd-4167-afb3-244eb7187aba</user:userName>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>570001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
      <wsse:Security soap:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM/EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:getHospitalizationInfoByPatientRequest>
         <typ:patientId>${#TestCase#patientId}</typ:patientId>
         <typ:options>
            <v2:entry key="hospitalizationForLK">true</v2:entry>
            <v2:entry key="actualHospital">true</v2:entry>
            <v2:entry key="restrictionsHemodialysis">true</v2:entry>
         </typ:options>
         <typ:pagingOptions pageNumber="0" pageSize="20">
            <v2:sortingOptions>
               <v2:sortOrder>
                  <v2:attributeName>hospitalizationhospitalDate</v2:attributeName>
                  <v2:descending>true</v2:descending>
               </v2:sortOrder>
            </v2:sortingOptions>
         </typ:pagingOptions>
      </typ:getHospitalizationInfoByPatientRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="93e7b5ea-df71-44f8-af32-ef3800fb33f0"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="596c8e56-612a-4486-a25b-646aeb44fc48"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>hospitalDate</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SOAP getHospitalizationInfoByPatient</con:sourceStep><con:sourcePath>//*:hospitalDate</con:sourcePath><con:targetType>hospitalDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>moName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SOAP getHospitalizationInfoByPatient</con:sourceStep><con:sourcePath>//*:MOName</con:sourcePath><con:targetType>MOName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="d1dc7cac-f888-4a58-97f7-01d3c72b96cb"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка activeHospitalization.title" id="fbaef32f-2140-4db6-a0c5-1dc95f9cbea8"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.time.format.DateTimeFormatter
import java.text.SimpleDateFormat

def getHospitalizationInfoByPatientResponse = context.expand('${SOAP getHospitalizationInfoByPatient#Response}')
getHospitalizationInfoSOAP = new XmlSlurper().parseText(getHospitalizationInfoByPatientResponse)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

hospitalDate = getHospitalizationInfoSOAP.Body.getHospitalizationInfoByPatientResponse.hospitalizations.hospitalDate.toString()
titleInfo = getCountForServicesForYou.payload.activeHospitalization.title

Date date = Date.parse( "yyyy-MM-dd'T'hh:mm:ss", hospitalDate ) // Парсим дату из соап-ответа
String formattedDate = date.format( 'd MMMM' ) // Приводим ее к необходимому формату

String title = 'Вы госпитализированы ' + formattedDate

assert title == titleInfo</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>da2ad6df-e6cb-4b91-a12e-4067ac27f564</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700006052630898</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>19882077</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2024-03-19T09:14:28</con:value></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">НИИ скорой помощи им. Н.В. Склифосовского1</con:value></con:property></con:properties></con:testCase><con:testCase id="fa6cdc97-fd6b-4ca2-a859-6bb8bfe6af2b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений о льготах пациента на бесплатное питание (dairyKitchen) (normBenefit.normBenefitType = food)_401165" searchProperties="true"><con:settings/><con:testStep type="request" name="Получить информацию о льготах" id="98b9e0bf-b51c-45da-a526-64602166cfe2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BenefitsRegistryServiceV3SoapBinding</con:interface><con:operation>getPatientInfo</con:operation><con:request name="Получить информацию о льготах" id="3d2cc303-34bc-42b5-8530-3ed6a67a69a2"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#lloenefitsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">
   <soapenv:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>
      <typ:getPatientInfoRequest>
         <typ:benefitType>food</typ:benefitType>
         <typ:details>status</typ:details>
         <typ:options>
            <typ:entry key="norm_benefit">true</typ:entry>
         </typ:options>
         <typ:patientId>${#TestCase#patientId}</typ:patientId>
         <typ:queryType>check</typ:queryType>
      </typ:getPatientInfoRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="ac238cce-9663-42e2-9f00-122b87e51160"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="f55fa106-3be7-48c9-8e8b-4b7388380f14"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить значение dairyKitchen" id="03a96062-b8c3-43bf-aefd-2bff6432e686"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper

def patientInfoResponse = context.expand('${Получить информацию о льготах#Response}')
def patientInfo = new XmlSlurper().parseText(patientInfoResponse)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)
dairyKitchen = getCountForServicesForYou.payload.dairyKitchen
benefitType = patientInfo.Body.getPatientInfoResponse.normBenefit.normBenefitType.toString()
if(benefitType == 'food'){
	assert dairyKitchen == true
}
else {
	assert dairyKitchen == false
}
</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>ed91c02a-7355-4ee4-ae61-c8b3b95ac373</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7787589724000449</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>123</con:value></con:property><con:property><con:name>patientId</con:name><con:value>31434483</con:value></con:property></con:properties></con:testCase><con:testCase id="fb362b0b-f4c7-4f3f-a3e3-e9acb2a7d5a6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение сведений о льготах пациента на бесплатное питание (dairyKitchen) (normBenefit.normBenefitType = null)_401173" searchProperties="true"><con:settings/><con:testStep type="request" name="Получить информацию о льготах" id="75621cc3-48fd-486b-821b-90bbad24a693"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BenefitsRegistryServiceV3SoapBinding</con:interface><con:operation>getPatientInfo</con:operation><con:request name="Получить информацию о льготах" id="3d2cc303-34bc-42b5-8530-3ed6a67a69a2"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#lloenefitsEndpoint}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://emias2.gov.ru/business/llo/v3/types">
   <soapenv:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>
      <typ:getPatientInfoRequest>
         <typ:benefitType>food</typ:benefitType>
         <typ:details>status</typ:details>
         <typ:options>
            <typ:entry key="norm_benefit">true</typ:entry>
         </typ:options>
         <typ:patientId>${#TestCase#patientId}</typ:patientId>
         <typ:queryType>check</typ:queryType>
      </typ:getPatientInfoRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="ac238cce-9663-42e2-9f00-122b87e51160"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="6f9dcf3a-bac9-409d-827c-b8320ec67df2"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить значение dairyKitchen" id="0aec9ea6-7c86-451a-be54-6dc107cd4a70"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper

def patientInfoResponse = context.expand('${Получить информацию о льготах#Response}')
def patientInfo = new XmlSlurper().parseText(patientInfoResponse)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)
dairyKitchen = getCountForServicesForYou.payload.dairyKitchen
benefitType = patientInfo.Body.getPatientInfoResponse.normBenefit.normBenefitType.toString()
if(benefitType == 'food'){
	assert dairyKitchen == true
}
else {
	assert dairyKitchen == false
}
</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>70f00032-bf17-47e6-9d8a-406d92d7286b</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7751900891000355</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>123</con:value></con:property><con:property><con:name>patientId</con:name><con:value>19841778</con:value></con:property></con:properties></con:testCase><con:testCase id="dcacdba0-4954-4315-b210-1477d1c9c3eb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений о рецептах пользователя_395328" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Посчитать рецепты в моке" id="ba8b4f62-c0b5-4e1f-92af-12a9567d3fba"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response

PIList = new XmlSlurper().parseText(response)


prescriptionLists = PIList.Body.piListResponse.prescriptionList
count=0
for (int i = 0;i&lt;prescriptionLists.size();i++){
	if(prescriptionLists[i].state!= "expired" &amp;&amp; prescriptionLists[i].state!= "completed"){
		count+=1
	}
}
testRunner.testCase.setPropertyValue("count",count.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="ec184a52-a29c-41ca-bca3-b61f70dd7256"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="JsonPath Match" id="7abe250b-6ae7-4e48-bf79-1ffdfce5ae6d" name=" Количество рецептов = count из переменных тест кейса"><con:configuration><path>$.payload.receiptCount</path><content>${#TestCase#count}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>128</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395328/PIList</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/395328</con:value></con:property></con:properties></con:testCase><con:testCase id="0180c377-c0ae-4d83-a1db-f01e2558192b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений о диспансерном наблюдении. В ответе ПДН - archived = true_395329" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="ffd6b4c1-7962-4803-8d7e-79dd5d455c60"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка dispensary" id="caa18f39-40a7-4462-ae14-4107565da00e"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response

getPlanShortSOAP = new XmlSlurper().parseText(response)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse)

if (getPlanShortSOAP.Body.GetPlanShortResponse.result.archived == false){
	assert getCountForServicesForYou.payload.dispensary == true
}else{
	assert getCountForServicesForYou.payload.dispensary == false
}
</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395329</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395329/getPlanShort</con:value></con:property></con:properties></con:testCase><con:testCase id="9090b791-2ab3-4438-b565-66a593f1b26c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений о диспансерном наблюдении. В ответе ПДН - archived = false_395330" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="19900897-7f82-4615-97f4-d9d11dbc369a"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка dispensary" id="8fd199b7-975c-4d0d-b6fc-fca126091857"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response

getPlanShortSOAP = new XmlSlurper().parseText(response)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse)

if (getPlanShortSOAP.Body.GetPlanShortResponse.result.archived == false){
	assert getCountForServicesForYou.payload.dispensary == true
}else{
	assert getCountForServicesForYou.payload.dispensary == false
}
</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395330</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395330/getPlanShort</con:value></con:property></con:properties></con:testCase><con:testCase id="2fda2c9d-4813-4ac5-af66-49d17059bceb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений о диспансерном наблюдении. У пациента permissionType = CHILD_395457" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="ba1545c0-ccad-4b95-8364-c93acd43a5b9"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="5eeb4c02-4b76-450a-b7e9-74ba64f4c864" name="dispensary = false"><con:configuration><path>$.payload.dispensary</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>0b31f977-39df-4446-bd78-af2ff077caaf</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395457</con:value></con:property></con:properties></con:testCase><con:testCase id="bfed9903-32cc-4d4e-907f-eb5453f22332" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений о диспансерном наблюдении. Возраст пациента &lt; 18 лет_395458" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="717ee862-18a3-4b49-aa4d-35d1274ef30c"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="5eeb4c02-4b76-450a-b7e9-74ba64f4c864" name="dispensary = false"><con:configuration><path>$.payload.dispensary</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>bb8fbbbb-b6c7-4300-89fa-6d81a72ececd</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395458</con:value></con:property></con:properties></con:testCase><con:testCase id="d124adc8-2405-4e19-bb29-874e25002e8d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений об онкопаспорте_395331" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="60a9033b-026e-4728-9d89-39cc64784859"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка oncology + UnregistrationDate" id="7077a325-fccb-42f6-b521-b26866750981"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response


def slurperJson = new JsonSlurper()
def getOnco = slurperJson.parseText(response)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

onco=getOnco.gotOncoPassport
CountServicesOnco = getCountForServicesForYou.payload.oncology
assert onco==CountServicesOnco

check=true
diagnoses = getOnco.diagnoses
DateArray=[]
for (int i=0; i&lt;diagnoses.size();i++){
	if (diagnoses[i].unregistrationDate==null){
		check = false
	}
	else{
		DateArray&lt;&lt;diagnoses[i].unregistrationDate
	}
}
DateArray.sort().reverse()
CountServicesUnregistrationDate = getCountForServicesForYou.payload.oncologyUnregistrationDate

assert CountServicesUnregistrationDate==DateArray[DateArray.size - 1]

</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395331</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395331/1/onco?ehrId=e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property></con:properties></con:testCase><con:testCase id="0d4f6fde-2b67-4cfa-95a9-1095b7e69053" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений об онкопаспорте (без oncologyUnregistrationDate)_395332" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="582c6f28-c798-42ce-901f-ac9bab55f28f"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка oncology" id="b2302cad-92e6-42df-89ce-3f5b3981803e"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response

def slurperJson = new JsonSlurper()
def getOnco = slurperJson.parseText(response)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

onco=getOnco.gotOncoPassport
CountServicesOnco = getCountForServicesForYou.payload.oncology
assert onco==CountServicesOnco

</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395332</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395332/1/onco?ehrId=e3aee028-1688-4432-b638-200f4c6497a0</con:value></con:property></con:properties></con:testCase><con:testCase id="5be81c09-757c-4efb-b7bb-7a6397f0514a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение данных о заказах пользователя (drugOrdersCount + drugOrdersShow), где содержатся значения с statusCode = executed_395333" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="09b02780-fc5d-4bc8-a715-28f8ed623998"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка количества заказов" id="b488846a-ff4b-4053-9995-dfd7bfa21481"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response

PIGetDrugOrders = new XmlSlurper().parseText(response)

orders=PIGetDrugOrders.Body.piGetDrugOrdersResponse.order ? PIGetDrugOrders.Body.piGetDrugOrdersResponse.order : null
log.info orders

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse)

drugOrdersCount = getCountForServicesForYou.payload.drugOrdersCount
drugOrdersShow  = getCountForServicesForYou.payload.drugOrdersShow

count=0
for (int i=0; i&lt;orders.size();i++){
	if (orders[i].statusCode=="executed"){
		count+=1
	}
}
assert drugOrdersCount == count
assert drugOrdersShow == true</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>d314fabc-2209-40fe-ab24-a9d5c63ba093</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003097180466</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/395333</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395333/piGetDrugOrders</con:value></con:property></con:properties></con:testCase><con:testCase id="f226e08d-7439-4755-882f-4a26e4ea5d1b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение данных о заказах пользователя (drugOrdersCount + drugOrdersShow), где содержатся значения с statusCode = completed/cancelled и от даты createDate до текущей даты прошло не более 30 дней_395334" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Изменить дату в моке" id="a12ccc0d-e01e-41c4-b513-0a803f2ccd33"><con:settings/><con:config><script><![CDATA[import groovy.sql.Sql
import java.text.SimpleDateFormat

// Записать в переменную дату в формате yyyy-MM-dd
def DateForMock = new Date()-29
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS")
def DateForMock_format = sdf.format(DateForMock)

//получить из свойств кейса данные мока
path = testRunner.testCase.getPropertyValue("path")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

// Сформировать тело ответа от getPlanExtension, заменив даты
response="""<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <piGetDrugOrdersResponse xmlns="http://emias2.gov.ru/business/llo/v4/types">
         <order>
            <agregatorID>782846208</agregatorID>
            <agregatorName>LLOTest33</agregatorName>
            <createDate>""" + DateForMock_format + """</createDate>
            <delivering>false</delivering>
            <externalID>001942316</externalID>
            <orderID>8765</orderID>
            <pharmacyID>747807015</pharmacyID>
            <prescription>
               <drug>
                  <amount>13500</amount>
                  <qty>1</qty>
                  <storageCondition>Препарат следует хранить в недоступном для детей месте при температуре от 15° до 25°C.</storageCondition>
                  <title>Флюкостат капс. 150мг №1</title>
               </drug>
               <prescriptionNumber>00Д4519357964</prescriptionNumber>
               <type>commercial</type>
            </prescription>
            <QRCode>DO:000000008765ABAD967B8BC51A5F41CBF2D8DA2BF319</QRCode>
            <statusCode>completed</statusCode>
            <statusDetail>Отменен заказчиком</statusDetail>
         </order>
         <order>
            <agregatorID>782846208</agregatorID>
            <agregatorName>LLOTest33</agregatorName>
            <createDate>""" + DateForMock_format + """</createDate>
            <delivering>true</delivering>
            <externalID>41541541</externalID>
            <orderID>7716</orderID>
            <pharmacyID>790751047</pharmacyID>
            <prescription>
               <drug>
                  <amount>99999</amount>
                  <qty>10</qty>
                  <title>Наком таб 250мг+25мг бл №10х10 Лек Словения</title>
               </drug>
               <prescriptionNumber>01Э4519351211</prescriptionNumber>
               <type>benefit</type>
            </prescription>
            <QRCode>DO:000000007716A6C6F1FDE4CB3740FF5CD2049690D1A9</QRCode>
            <statusCode>cancelled</statusCode>
         </order>
         <order>
            <agregatorID>782846208</agregatorID>
            <agregatorName>LLOTest33</agregatorName>
            <createDate>2022-01-12T17:27:03+03:00</createDate>
            <delivering>true</delivering>
            <externalID>41541541</externalID>
            <orderID>7728</orderID>
            <pharmacyID>790751047</pharmacyID>
            <prescription>
               <drug>
                  <amount>85600</amount>
                  <qty>4</qty>
                  <title>Тамоксифен Гексал табл. п/пл/об. 10 мг бл N 10x3 Салютас Фарма ГмбХ Германия</title>
               </drug>
               <prescriptionNumber>01Э4519350976</prescriptionNumber>
               <type>benefit</type>
            </prescription>
            <QRCode>DO:000000007728734F7086AAF179EA24FFB3102E1AAEAF</QRCode>
            <statusCode>cancelled</statusCode>
         </order>
         <result>
            <resultCode>0</resultCode>
            <resultDescription>Запрос выполнен</resultDescription>
            <resultDetails>1705993725391,4807:ca19d4101d8a,llo-5546f85fb8-txjws,11717</resultDetails>
         </result>
      </piGetDrugOrdersResponse>
   </soap:Body>
</soap:Envelope>"""

//изменить запись
query="update template_response set response=' "+response+"' where \"path\"= '"+path+"'"
log.info query
sql.execute(query)

]]></script></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="efe7269d-491f-455c-a018-40d3d7c0df01"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="5dd3070a-3255-4d83-9fd3-1d968859b08c" name="drugOrdersShow = true"><con:configuration><path>$.payload.drugOrdersShow</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="5dd3070a-3255-4d83-9fd3-1d968859b08c" name="drugOrdersCount = 0"><con:configuration><path>$.payload.drugOrdersCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>d314fabc-2209-40fe-ab24-a9d5c63ba093</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003097180466</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/395334</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395334/piGetDrugOrders</con:value></con:property></con:properties></con:testCase><con:testCase id="e856e558-af79-4091-b502-932212fefd01" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение данных о заказах пользователя (drugOrdersCount + drugOrdersShow), где содержатся значения с statusCode = completed/cancelled, и нет недавно созданных заказов (более 30 дней)_395335" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Изменить дату в моке" id="5fc8ae19-84ac-4cdb-8fc5-61b8cf23db39"><con:settings/><con:config><script><![CDATA[import groovy.sql.Sql
import java.text.SimpleDateFormat

// Записать в переменную дату в формате yyyy-MM-dd
def DateForMock = new Date()-30
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS")
def DateForMock_format = sdf.format(DateForMock)

//получить из свойств кейса данные мока
path = testRunner.testCase.getPropertyValue("path")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

// Сформировать тело ответа от getPlanExtension, заменив даты
response="""<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <piGetDrugOrdersResponse xmlns="http://emias2.gov.ru/business/llo/v4/types">
         <order>
            <agregatorID>782846208</agregatorID>
            <agregatorName>LLOTest33</agregatorName>
            <createDate>""" + DateForMock_format + """</createDate>
            <delivering>false</delivering>
            <externalID>001942316</externalID>
            <orderID>8765</orderID>
            <pharmacyID>747807015</pharmacyID>
            <prescription>
               <drug>
                  <amount>13500</amount>
                  <qty>1</qty>
                  <storageCondition>Препарат следует хранить в недоступном для детей месте при температуре от 15° до 25°C.</storageCondition>
                  <title>Флюкостат капс. 150мг №1</title>
               </drug>
               <prescriptionNumber>00Д4519357964</prescriptionNumber>
               <type>commercial</type>
            </prescription>
            <QRCode>DO:000000008765ABAD967B8BC51A5F41CBF2D8DA2BF319</QRCode>
            <statusCode>completed</statusCode>
            <statusDetail>Отменен заказчиком</statusDetail>
         </order>
         <order>
            <agregatorID>782846208</agregatorID>
            <agregatorName>LLOTest33</agregatorName>
            <createDate>""" + DateForMock_format + """</createDate>
            <delivering>true</delivering>
            <externalID>41541541</externalID>
            <orderID>7716</orderID>
            <pharmacyID>790751047</pharmacyID>
            <prescription>
               <drug>
                  <amount>99999</amount>
                  <qty>10</qty>
                  <title>Наком таб 250мг+25мг бл №10х10 Лек Словения</title>
               </drug>
               <prescriptionNumber>01Э4519351211</prescriptionNumber>
               <type>benefit</type>
            </prescription>
            <QRCode>DO:000000007716A6C6F1FDE4CB3740FF5CD2049690D1A9</QRCode>
            <statusCode>cancelled</statusCode>
         </order>
         <order>
            <agregatorID>782846208</agregatorID>
            <agregatorName>LLOTest33</agregatorName>
            <createDate>2022-01-12T17:27:03+03:00</createDate>
            <delivering>true</delivering>
            <externalID>41541541</externalID>
            <orderID>7728</orderID>
            <pharmacyID>790751047</pharmacyID>
            <prescription>
               <drug>
                  <amount>85600</amount>
                  <qty>4</qty>
                  <title>Тамоксифен Гексал табл. п/пл/об. 10 мг бл N 10x3 Салютас Фарма ГмбХ Германия</title>
               </drug>
               <prescriptionNumber>01Э4519350976</prescriptionNumber>
               <type>benefit</type>
            </prescription>
            <QRCode>DO:000000007728734F7086AAF179EA24FFB3102E1AAEAF</QRCode>
            <statusCode>cancelled</statusCode>
         </order>
         <result>
            <resultCode>0</resultCode>
            <resultDescription>Запрос выполнен</resultDescription>
            <resultDetails>1705993725391,4807:ca19d4101d8a,llo-5546f85fb8-txjws,11717</resultDetails>
         </result>
      </piGetDrugOrdersResponse>
   </soap:Body>
</soap:Envelope>"""

//изменить запись
query="update template_response set response=' "+response+"' where \"path\"= '"+path+"'"
log.info query
sql.execute(query)

]]></script></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="9f9610f2-782b-4bba-9a2e-b944be632a57"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="5dd3070a-3255-4d83-9fd3-1d968859b08c" name="drugOrdersShow = false"><con:configuration><path>$.payload.drugOrdersShow</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="5dd3070a-3255-4d83-9fd3-1d968859b08c" name="drugOrdersCount = 0"><con:configuration><path>$.payload.drugOrdersCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>d314fabc-2209-40fe-ab24-a9d5c63ba093</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003097180466</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/395335</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395335/piGetDrugOrders</con:value></con:property></con:properties></con:testCase><con:testCase id="7fe574a1-330f-4f49-a3b6-da2c378b52b5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений о covid сертификате_395337" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="7b0f0aa7-2856-437b-8ee4-ee6d70e52e64"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка qrCode" id="ad15c16b-43ef-416b-bc80-d8b7fc4d13e2"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.util.ArrayList

import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("path")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response


def slurperJson = new JsonSlurper()
def getCovid = slurperJson.parseText(response)

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

Covid=getCovid.gotCertificate
CountServicesCovid = getCountForServicesForYou.payload.qrCode
assert Covid==CountServicesCovid

</script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7755220898002957</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395337</con:value></con:property><con:property><con:name>path</con:name><con:value>/mock/395337/1/documents/covid-certificates?ehrId=5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property></con:properties></con:testCase><con:testCase id="f95d06db-47fb-4aca-8249-ba319bc037b2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений об актуальной госпитализации hospitalDate = 2023-01-01T00:00:00_395338" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="25901256-e043-43ff-a277-63022e83995b"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="51c55c4c-92d0-4656-aea4-9c0e40d2adb8" name="activeHospitalization.title = Вы госпитализированы 1 января"><con:configuration><path>$.payload.activeHospitalization.title</path><content>Вы госпитализированы 1 января</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="51c55c4c-92d0-4656-aea4-9c0e40d2adb8" name="activeHospitalization.text = st mo name"><con:configuration><path>$.payload.activeHospitalization.text</path><content>st mo name</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="51c55c4c-92d0-4656-aea4-9c0e40d2adb8" name="activeHospitalization.hospitalDate = 2023-01-01T00:00:00"><con:configuration><path>$.payload.activeHospitalization.hospitalDate</path><content>2023-01-01T00:00:00</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="51c55c4c-92d0-4656-aea4-9c0e40d2adb8" name="activeHospitalization.moName = st mo name"><con:configuration><path>$.payload.activeHospitalization.moName</path><content>st mo name</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-hospitalization" value="${#TestCase#Mock-hospitalization}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>5541984121623250</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>30000008931357</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value>2023-01-01T00:00:00</con:value></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value>st mo name</con:value></con:property><con:property><con:name>Mock-hospitalization</con:name><con:value>${#Project#Mock-url}/395338</con:value></con:property></con:properties></con:testCase><con:testCase id="6bf20585-5d3d-494c-8b96-a99164050aa2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений об актуальной госпитализации hospitalDate = 2023-01-09T00:00:00_395339" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="7d2ae9f3-f554-4331-92c0-b1561bd2d3f0"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="51c55c4c-92d0-4656-aea4-9c0e40d2adb8" name="activeHospitalization.title = Вы госпитализированы 9 января"><con:configuration><path>$.payload.activeHospitalization.title</path><content>Вы госпитализированы 9 января</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="51c55c4c-92d0-4656-aea4-9c0e40d2adb8" name="text = st mo name"><con:configuration><path>$.payload.activeHospitalization.text</path><content>st mo name</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="51c55c4c-92d0-4656-aea4-9c0e40d2adb8" name="hospitalDate = 2023-01-09T00:00:00"><con:configuration><path>$.payload.activeHospitalization.hospitalDate</path><content>2023-01-09T00:00:00</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="51c55c4c-92d0-4656-aea4-9c0e40d2adb8" name="moName = st mo name"><con:configuration><path>$.payload.activeHospitalization.moName</path><content>st mo name</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-hospitalization" value="${#TestCase#Mock-hospitalization}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>a1ca1017-1db1-43de-9810-20c8d2430bad</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7789789727001182</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>20948239</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value>2023-01-01T00:00:00</con:value></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value>st mo name</con:value></con:property><con:property><con:name>Mock-hospitalization</con:name><con:value>${#Project#Mock-url}/395339</con:value></con:property></con:properties></con:testCase><con:testCase id="a1531253-8456-497e-a5a3-2992f8788782" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получение сведений об актуальной госпитализации hospitalDate = 2023-01-10T00:00:00_395340" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="bee45755-b720-4f79-9237-ad175118abec"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="51c55c4c-92d0-4656-aea4-9c0e40d2adb8" name="activeHospitalization.title = Вы госпитализированы 10 января"><con:configuration><path>$.payload.activeHospitalization.title</path><content>Вы госпитализированы 10 января</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="51c55c4c-92d0-4656-aea4-9c0e40d2adb8" name="text = st mo name"><con:configuration><path>$.payload.activeHospitalization.text</path><content>st mo name</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="51c55c4c-92d0-4656-aea4-9c0e40d2adb8" name="hospitalDate = 2023-01-10T00:00:00"><con:configuration><path>$.payload.activeHospitalization.hospitalDate</path><content>2023-01-10T00:00:00</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="51c55c4c-92d0-4656-aea4-9c0e40d2adb8" name="moName = st mo name"><con:configuration><path>$.payload.activeHospitalization.moName</path><content>st mo name</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-hospitalization" value="${#TestCase#Mock-hospitalization}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>a1ca1017-1db1-43de-9810-20c8d2430bad</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7789789727001182</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>20948239</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value>2023-01-01T00:00:00</con:value></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value>st mo name</con:value></con:property><con:property><con:name>Mock-hospitalization</con:name><con:value>${#Project#Mock-url}/395340</con:value></con:property></con:properties></con:testCase><con:testCase id="df0b3c28-1074-4885-a2de-6ea279106e12" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ошибка Е001 от сервиса Госпитализация_395341" searchProperties="true"><con:settings/><con:testStep type="request" name="SOAP getHospitalizationInfoByPatient" id="50b52b73-c2af-4dc1-9458-22310126ed2d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>hospitalServiceBinding</con:interface><con:operation>getHospitalizationInfoByPatient</con:operation><con:request name="SOAP getHospitalizationInfoByPatient" id="9f7cb18f-5800-4a1a-8203-cb939ae20e41"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamelvv.test.emias.mos.ru/proxy/hospitalization/hospitalService/v2/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/hospitalization/hospitalService/v2/types/" xmlns:v2="http://emias.mos.ru/hospitalization/core/v2/">
   <soap:Header>
      <user:userContext>
         <user:systemName>EIM</user:systemName>
         <user:userName>af3e4ac5-96dd-4167-afb3-244eb7187aba</user:userName>
         <user:isUserRoleSystemWide>true</user:isUserRoleSystemWide>
         <user:userRights>
            <user:userRightId>570001</user:userRightId>
         </user:userRights>
         <user:jobExecutionId>0</user:jobExecutionId>
      </user:userContext>
      <wsse:Security soap:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM/EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:getHospitalizationInfoByPatientRequest>
         <typ:patientId>${#TestCase#patientId}</typ:patientId>
         <typ:options>
            <v2:entry key="hospitalizationForLK">true</v2:entry>
            <v2:entry key="actualHospital">true</v2:entry>
            <v2:entry key="restrictionsHemodialysis">true</v2:entry>
         </typ:options>
         <typ:pagingOptions pageNumber="0" pageSize="20">
            <v2:sortingOptions>
               <v2:sortOrder>
                  <v2:attributeName>hospitalizationhospitalDate</v2:attributeName>
                  <v2:descending>true</v2:descending>
               </v2:sortOrder>
            </v2:sortingOptions>
         </typ:pagingOptions>
      </typ:getHospitalizationInfoByPatientRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="93e7b5ea-df71-44f8-af32-ef3800fb33f0"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="29467da6-3c17-4716-9662-9b24a5e238a8"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="891f76f9-1872-4104-8763-48d00cf4f9a2" name="Not Contains activeHospitalization"><con:configuration><token>activeHospitalization</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="e8361839-b94e-4480-8b96-501f10a2d4d3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Получен пустой список от сервиса Госпитализация_395342" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="ce98b89c-09fc-4992-915c-f21d55832e41"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="00ee1076-25de-48ad-8fbb-08f2e2f4b9a2" name="Not Contains activeHospitalization"><con:configuration><token>activeHospitalization</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-hospitalization" value="${#TestCase#Mock-hospitalization}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>a1ca1017-1db1-43de-9810-20c8d2430bad</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7789789727001182</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>count</con:name><con:value>4</con:value></con:property><con:property><con:name>patientId</con:name><con:value>20948239</con:value></con:property><con:property><con:name>hospitalDate</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">st mo name</con:value></con:property><con:property><con:name>admissionsDate</con:name><con:value/></con:property><con:property><con:name>MOName</con:name><con:value>st mo name</con:value></con:property><con:property><con:name>Mock-hospitalization</con:name><con:value>${#Project#Mock-url}/395342</con:value></con:property></con:properties></con:testCase><con:testCase id="066fe4c2-d836-43df-9a74-9e9863dc7553" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Есть ПДН с актуальным диагнозом, доступным для голосового ввода_395352" searchProperties="true"><con:settings/><con:testStep type="request" name="getPlanShort" id="dd5a3dd1-0d1a-4213-a15d-54258ea128d6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>planServiceBinding</con:interface><con:operation>GetPlanShort</con:operation><con:request name="getPlanShort" id="49efced3-9eaa-48b0-9f3a-87f76139a2f8"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#planServiceEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/dnpdn/planService/v2/types/">\r
   <soap:Header>
      <wsse:Security soap:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-9d130c8c-53c1-4cf0-94af-d0da7dd509fa" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
      <ns3:userContext xmlns:ns3="http://emias.mos.ru/system/v1/userContext/" xmlns:ns4="http://emias.mos.ru/system/v1/faults/" xmlns:ns2="http://emias.mos.ru/dnpdn/core/v2/" xmlns="http://emias.mos.ru/dnpdn/planService/v2/types/">
         <ns3:systemName>EIM</ns3:systemName>
<ns3:userName>HYkle6XW7ifrlT7wCuuK0iZ9RoePXm2NG92bTaLowfMA8P/yw85Mi/WrVHo89WDhWFgRt66EU3MBtQ3SEhhkrwOOLjNFijcReVF2xegR4E+wxgBS2JRt3CSP4mQfw4YEEJCPprUUC2KPBW+ckkHyt9wOaRq4TQjZ2/wTtdHDEyRs2sYIM1WUZPgc39vRRpfKGMv4keac/eirq9PlTfPQauQdxnGJ9ZDzQbAsUMULVbFW0m78KKR5JzAFpl7YFEx1o9eUT70XdBZDhfdVlljA+T+yRIOpW2SOZOEpVhYAZ8qTVOtKcJk060bDndYdUd1gQ0x6ckT1+CgOxQEbefi/Yw==</ns3:userName>
         <ns3:userRoleId>7187</ns3:userRoleId>
         <ns3:isUserRoleSystemWide>true</ns3:isUserRoleSystemWide>
         <ns3:userRights>
            <ns3:userRightId>5150002</ns3:userRightId>
            <ns3:userRightId>333001</ns3:userRightId>
         </ns3:userRights>
         <ns3:jobExecutionId>1</ns3:jobExecutionId>
      </ns3:userContext>
   </soap:Header>
   <soap:Body>\r
      <typ:GetPlanShortRequest>
               <typ:patientId>${#TestCase#patientId}</typ:patientId>
      </typ:GetPlanShortRequest>
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="d27927c1-6b8c-459c-9111-6d855d6caf30"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="ab113a7b-2466-4709-b87a-f0531f5175b4"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="6a51ce1c-c9f2-4ea8-af19-7e6a36ee1a5e" name="JsonPath Count"><con:configuration><path>$.payload.aiMeasurementInput</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка диагнозов на актуальность и наличие в маппинге" id="255568df-3965-47c6-8068-5f27c03dea58"><con:settings/><con:config><script><![CDATA[import groovy.sql.Sql
import com.eviware.soapui.support.XmlHolder
import groovy.json.JsonSlurper
import static org.junit.Assert.assertThat;
import static org.hamcrest.CoreMatchers.containsString;

// Получаем список диагнозов из SOAP-ответа
def soapResponse = context.expand('${getPlanShort#Response}') // получаем из соап запроса ответ
def onlyTextSoap =  new XmlSlurper().parseText(soapResponse) // создаем объект xml
def diagnosisCodes = onlyTextSoap.Body.GetPlanShortResponse.result.diagnosis.diagnosisCode //получаем все diagnosisCode из getPlanShort

// Парсим REST-ответ
def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurper2Json = new JsonSlurper()
def getCountForServicesForYou = slurper2Json.parseText(getCountForServicesForYouResponse)

def login = testRunner.testCase.testSuite.project.getPropertyValue("emiasInfoDbLogin")
def password = testRunner.testCase.testSuite.project.getPropertyValue("emiasInfoDbPassword")
def dbconstring = testRunner.testCase.testSuite.project.getPropertyValue("emiasInfoDbConnection")

sql = Sql.newInstance("jdbc:postgresql://" + dbconstring + "?user=" + login + "&password=" + password, "org.postgresql.Driver")
context.dbConnection = sql

def bloodPressure = // массив всех диагнозов с возможностью голосового ввода
["I10", "I11", "I11.0", "I11.9", "I12", "I12.0", "I12.9", "I13", "I13.0", "I13.1", "I13.2", "I13.9", "I15", "I15.0", "I15.1", "I15.2", "I15.8", "I15.9",
"I20.1", "I20.8", "I20.9", "I25", "I25.0", "I25.1", "I25.2", "I25.3", "I25.4", "I25.5", "I25.6", "I25.8", "I25.9",
"I20.0", "I21", "I21.0", "I21.1", "I21.2", "I21.3", "I21.4", "I21.9", "I22", "I22.1", "I22.8", "I22.9", "I24", "I24.0", "I24.8", "I24.9",
"E78", "E78.0", "E78.2",
"I50", "I50.0", "I50.1", "I50.9",
"E11", "E11.2", "E11.3", "E11.4", "E11.5", "E11.6", "E11.7", "E11.8", "E11.9",
"I60", "I60.0", "I60.1", "I60.2", "I60.3", "I60.4", "I60.5", "I60.6", "I60.7", "I60.8", "I60.9", "I61", "I61.0", "I61.1", "I61.2", "I61.3", "I61.4", "I61.5", "I61.6", "I61.8", "I61.9", "I62", "I62.0", "I62.1", "I62.9", "I63", "I63.0", "I63.1", "I63.2", "I63.3", "I63.4", "I63.5", "I63.6", "I63.8", "I63.9", "I64",
"I69", "I69.0", "I69.1", "I69.2", "I69.3", "I69.4", "I69.8", "G45", "G45.0", "G45.1", "G45.2", "G45.3", "G45.4", "G45.8", "G45.9", "G46", "G46.0", "G46.1", "G46.2", "G46.3", "G46.4", "G46.5", "G46.6", "G46.7", "G46.8"]

// Выбрать из таблицы d_diagnosis_mkb10_pdn диагнозы из ответа getPlanShort и проверить их на актуальность

diagnosisDB = [] // массив для всех диагнозов из БД, которые есть в соап-ответе
actualDiagnosis = [] // массив для актуальных диагнозов из ответа getPlanShort
actualDiagnosisForVoice = [] // массив для актуальных диагнозов, доступных для голосового ввода

for (i=0; i<diagnosisCodes.size(); i++){
	def diagnosisDB = sql.rows("select * from d_diagnosis_mkb10_pdn where code_mkb10 = ?", [diagnosisCodes[i].toString()])
	if(diagnosisDB.actual_mkb10.get(0) == true &&
	diagnosisDB.archived_dispensary_observation_diagnosis.get(0) == false &&
	diagnosisDB.archived_dispensary_observation_program.get(0) == false) {
		actualDiagnosis << diagnosisDB.code_mkb10.get(0).toString()
		log.info "Диагноз " + diagnosisDB.code_mkb10 + " является актуальным"
		assert getCountForServicesForYou.payload.aiMeasurementInput.title[0].toString() == 'Артериальное давление'
		assert getCountForServicesForYou.payload.aiMeasurementInput.code[0].toString() == 'bloodPressure'
	}
}

// Проверить актуальные диагнозы на возможность голосового ввода
for (i=0; i<actualDiagnosis.size(); i++){
	if(bloodPressure.contains(actualDiagnosis[i])){
		actualDiagnosisForVoice << actualDiagnosis[i]
		log.info "Диагноз " + actualDiagnosisForVoice + " доступен для голосового ввода"
		}
}
]]></script></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="bdad2cab-228f-4b7b-98ca-6ee6512fbd32" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Есть ПДН с актуальным диагнозом, не доступным для голосового ввода_395353" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="16a6009b-8146-4457-8b51-802311919533"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="07e36f77-1dd3-4982-9a11-0a3d0ae45d14" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395353</con:value></con:property></con:properties></con:testCase><con:testCase id="ead381cd-beed-4810-a0d3-9d6757da4551" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Есть ПДН с актуальным диагнозом, 2 актуальных диагноза из одной группы доступны для голосового ввода_395354" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="de8c46f0-1d68-4834-a3a5-e1c4401acf1b"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4a288bc7-a322-4c16-ad9c-0bf2c7a49881" name="aiMeasurementInput = [{&quot;title&quot;:&quot;Артериальное давление&quot;,&quot;code&quot;:&quot;bloodPressure&quot;}]"><con:configuration><path>$.payload.aiMeasurementInput</path><content>[{"title":"Артериальное давление","code":"bloodPressure"}]</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395354</con:value></con:property></con:properties></con:testCase><con:testCase id="e3215207-e923-4e6e-a048-e14056d5bf15" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = true, archived_disp_obs_diagnosis = false, archived_disp_obs_program = true_395355" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="95bffc45-76d7-4deb-9c02-aea2c6acec21"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = true
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="9fd0f1eb-a840-4e44-8215-8576ecd15802"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="0f432306-3018-40d8-bb59-2cfce3aac21f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="a2e18556-e23a-4c09-90b7-b3ad285aa0cb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = true, archived_disp_obs_diagnosis = true, archived_disp_obs_program = true_395356" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="7acee19e-9532-4acf-8c99-e401ff6e1b5e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = true, archived_dispensary_observation_program = true
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="67058522-4de0-423c-b700-4a1706d52bd4"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="f6a6fe67-b876-4aeb-9264-702da18bbfcb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="afbb6458-04ad-4fe2-b541-382b3edb6c9a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = true, archived_disp_obs_diagnosis = true, archived_disp_obs_program = false_395357" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="7660a037-c6a2-4279-a31a-570c88e6e15e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = true, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="5ccc18ea-8079-45a5-87e1-e0675b1110b1"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="2b888bc6-1392-4d33-9fa9-39be51a6b121"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="eb3d898f-92e2-4860-87d4-ab6aaed68be9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = false, archived_disp_obs_diagnosis = true, archived_disp_obs_program = true_395358" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="1ba2e71f-79aa-46c6-bd13-7db0da0a5c0e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = false, archived_dispensary_observation_diagnosis = true, archived_dispensary_observation_program = true
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="2e3e4488-ecff-471c-be43-bb982e4a4719"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="00bec598-0046-4ec9-be40-5ef7e002dff3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="8d02aa97-fd84-4f28-b774-a4c08e77ef9c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = false, archived_disp_obs_diagnosis = true, archived_disp_obs_program = false_395359" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="002bfdca-3705-49f6-a453-766a7cc66b80"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = false, archived_dispensary_observation_diagnosis = true, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="06d3dffa-7a76-43ed-84c3-8a3cd51b3f9b"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="01a9433f-ca31-4a5c-b9fd-cd05dffae7a4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="914af425-f3a9-4bb6-84cd-af53a5207f9c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = false, archived_disp_obs_diagnosis = false, archived_disp_obs_program = true_395360" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="e02ca34e-f236-4419-add7-4a142127b2d7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = false, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = true
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="39945351-6490-4528-b4a9-8f9a8221a6db"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="2f4ebbe5-bc85-4f7e-ba90-e8d49e006f82"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="581b9cd0-f0ec-4f87-b7ce-18f6275106c8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="actual_mkb10 = false, archived_disp_obs_diagnosis = false, archived_disp_obs_program = false_395361" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Изменить актуальность диагноза в таблице d_diagnosis_mkb10_pdn" id="0c098aeb-85e3-470b-8372-69ae1d392692"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = false, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="2db097b9-faf4-4fc1-aead-a84c40cba776"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v4/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="f84afc87-ef54-4c56-ba41-cc26a994e185" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f504574-8bad-4eb4-8e3c-ef986db0a3c3" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e9ca114e-bbe6-4a86-8bb0-68b388e76590" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="omsNumber" value="${#TestCase#omsNumber}"/>
  <con:entry key="isCovidQR" value="${#TestCase#isCovidQR}"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="Mock-llo" value=""/>
  <con:entry key="Mock-lk" value=""/>
  <con:entry key="Mock-hospitalization" value=""/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>omsNumber</con:entry><con:entry>isCovidQR</con:entry><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-hospitalization</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-lk</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Изменить на исходную актуальность диагноза" id="2912c853-98e1-4946-9434-11c4219df268"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>update d_diagnosis_mkb10_pdn
set actual_mkb10 = true, archived_dispensary_observation_diagnosis = false, archived_dispensary_observation_program = false
where code_mkb10 = 'E11.9'</con:query><con:assertion type="JDBC Status" id="e4afc071-68ac-4ff6-a4a9-a27b22a43639" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="1b504e34-aecc-45ea-93c1-25dafec156f9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Ошибка E002 от getPlanShort_395362" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="d151da1e-db1a-4737-99e5-18f4d6844731"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="07e36f77-1dd3-4982-9a11-0a3d0ae45d14" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="15394ae3-83ee-432f-a9b1-c0deaa05f9ac" name="payload.dispensary = false"><con:configuration><path>$.payload.dispensary</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395362</con:value></con:property></con:properties></con:testCase><con:testCase id="2a091a2b-dfb3-4d0b-9ac4-a35587a8d2b8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Ошибка E003 от getPlanShort_395363" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="49dd4060-8f5f-4761-aa1c-232e5bc86e6d"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="07e36f77-1dd3-4982-9a11-0a3d0ae45d14" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="15394ae3-83ee-432f-a9b1-c0deaa05f9ac" name="payload.dispensary = false"><con:configuration><path>$.payload.dispensary</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395363</con:value></con:property></con:properties></con:testCase><con:testCase id="ea257ffa-1262-4ec5-a61c-974d7ff248b3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Ошибка E005 от getPlanShort_395364" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="36af42c9-33c2-4612-b322-88f7952272f6"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="07e36f77-1dd3-4982-9a11-0a3d0ae45d14" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="15394ae3-83ee-432f-a9b1-c0deaa05f9ac" name="payload.dispensary = false"><con:configuration><path>$.payload.dispensary</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395364</con:value></con:property></con:properties></con:testCase><con:testCase id="3b257720-d4c1-468c-ba1b-224f2dc4aaea" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="На моках - Пустой ответ от getPlanShort_395365" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="ea36dec9-9fd1-4dd7-9712-c77fd326d54c"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="07e36f77-1dd3-4982-9a11-0a3d0ae45d14" name="Not Contains aiMeasurementInput"><con:configuration><token>aiMeasurementInput</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="15394ae3-83ee-432f-a9b1-c0deaa05f9ac" name="payload.dispensary = false"><con:configuration><path>$.payload.dispensary</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>codeMkb</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395365</con:value></con:property></con:properties></con:testCase><con:testCase id="420e8905-6f29-4441-9b4f-96b15e4a8a9d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС1. Ошибка метода piList (LLO_PI_LIST_ERROR)_395343" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="48396265-302b-4246-9b00-4b1306aaf9bc"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.code = LLO_PI_LIST_ERROR"><con:configuration><path>$.error.code</path><content>LLO_PI_LIST_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.description = Не удалось получить часть данных"><con:configuration><path>$.error.description</path><content>Не удалось получить часть данных</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.type = BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/395343</con:value></con:property></con:properties></con:testCase><con:testCase id="a67798d0-324b-4b04-84cd-8ec8e3099a35" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС2. Невалидный X-Access-JWT (Unauthorized)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="covid-certificates" id="475232b0-2735-4335-8dd7-9aa2e592cf4f"><con:settings/><con:config service="https://lkservice.test.emias.ru" resourcePath="/api/1/documents/covid-certificates" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="covid-certificates" id="a1501ac1-d8ca-471a-8e67-89caeaff5891" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#Project#token}+123" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#LkEndpoint}</con:endpoint><con:request/><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/1/documents/covid-certificates</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dea76118-be73-40f7-96a6-373e588a8542" name="Valid HTTP Status Codes"><con:configuration><codes>401</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="680ad335-382e-4b28-8a57-426ad76f8526" name="code = &quot;Unauthorized&quot;"><con:configuration><path>$.code</path><content>Unauthorized</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="a590f56e-9de0-4b9e-858e-1b51c4d7c991"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 401"><con:configuration><codes>401</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="9c14144a-7867-4e82-9c1f-03898f7b9ca3" name="code = UNAUTHORIZED"><con:configuration><path>$.error.code</path><content>UNAUTHORIZED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d738ddc9-1010-4166-ac4b-70372bfc4f30" name="description = Пользователь не авторизован"><con:configuration><path>$.error.description</path><content>Пользователь не авторизован</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT} +123"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>f4a1abfa-98c6-4be9-a1d7-68d92f93c9b4</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7751300873000442</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property></con:properties></con:testCase><con:testCase id="0abe926d-aa26-439b-a0ba-e26aaa3e6708" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС2. Отсуствует доступ к мед.карте (ACCESS_DENIED)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="a62a1208-f01c-4c06-aca6-7978837b5521"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 401"><con:configuration><codes>403</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="9c14144a-7867-4e82-9c1f-03898f7b9ca3" name="code = ACCESS_DENIED"><con:configuration><path>$.error.code</path><content>ACCESS_DENIED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d738ddc9-1010-4166-ac4b-70372bfc4f30" name="description = Доступ к запрошенной медкарте отсутствует"><con:configuration><path>$.error.description</path><content>Доступ к запрошенной медкарте отсутствует</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d738ddc9-1010-4166-ac4b-70372bfc4f30" name="type = BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT} +123"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>f4a1abfa-98c6-4be9-a1d7-68d92f93c9b</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7751300873000442</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property></con:properties></con:testCase><con:testCase id="ca8eecf8-c4cd-49ac-a3ab-f79968b69c18" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС3. Ошибка метода covid-certificates (LK_COVID_CERTIFICATES_ERROR)_395345" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="62898884-7ecd-4561-8b4e-1b382f58efe6"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.code = LK_COVID_CERTIFICATES_ERROR"><con:configuration><path>$.error.code</path><content>LK_COVID_CERTIFICATES_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.description = Не удалось получить часть данных"><con:configuration><path>$.error.description</path><content>Не удалось получить часть данных</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.type = BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395345</con:value></con:property></con:properties></con:testCase><con:testCase id="972d754c-6d2a-4e9e-aa19-802329ec56c5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС5. Ошибка метода onco (LK_ONCO_ERROR)_395347" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="efaf578c-8c07-427b-83a0-8e04de0b6903"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.code = LK_ONCO_ERROR"><con:configuration><path>$.error.code</path><content>LK_ONCO_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.description = Не удалось получить часть данных"><con:configuration><path>$.error.description</path><content>Не удалось получить часть данных</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.type = BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-lk" value="${#TestCase#Mock-lk}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-lk</con:name><con:value>${#Project#Mock-url}/395346</con:value></con:property></con:properties></con:testCase><con:testCase id="e56b5f89-5995-4656-964a-7b47eb8c0aac" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС6. Метод piGetDrugOrders вернул ошибку (LLO_PI_GET_DRUG_ORDERS_ERROR)_395348" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="c9071d90-3ca5-4e85-be1c-74d8bce658d7"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.code = LLO_PI_GET_DRUG_ORDERS_ERROR"><con:configuration><path>$.error.code</path><content>LLO_PI_GET_DRUG_ORDERS_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.description = Не удалось получить часть данных"><con:configuration><path>$.error.description</path><content>Не удалось получить часть данных</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.type = BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/395347</con:value></con:property></con:properties></con:testCase><con:testCase id="c8f8a6b5-fc41-41b0-997e-ad2fa012e133" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС8. PDN_ERROR_395366" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="cd467c9f-1e70-4610-a344-9e856359eb9f"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.code = PDN_ERROR"><con:configuration><path>$.error.code</path><content>PDN_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.description = Ошибка получения программы диспансерного наблюдения"><con:configuration><path>$.error.description</path><content>Ошибка получения программы диспансерного наблюдения</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.type = TECHNICAL"><con:configuration><path>$.error.type</path><content>TECHNICAL</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Mock-pdn" value="${#TestCase#Mock-pdn}"/>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-pdn</con:name><con:value>${#Project#Mock-url}/395366</con:value></con:property></con:properties></con:testCase><con:testCase id="16fb5030-4daa-4f04-b824-15979f954591" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС9. HOSP_SERVER_ERROR_395349" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="35c5c1f8-1702-41f2-aca9-e633b63a96f0"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.code = HOSP_SERVER_ERROR"><con:configuration><path>$.error.code</path><content>HOSP_SERVER_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.description = Сервис ЕМИАС.Госпитализация не отвечает"><con:configuration><path>$.error.description</path><content>Сервис ЕМИАС.Госпитализация не отвечает</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.type = TECHNICAL"><con:configuration><path>$.error.type</path><content>TECHNICAL</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-hospitalization" value="${#TestCase#Mock-hospitalization}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>5a6b84b7-b5e9-445c-82e7-1f4c489fc07f</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-hospitalization</con:name><con:value>${#Project#Mock-url}/395349</con:value></con:property></con:properties></con:testCase><con:testCase id="79d999d2-cb90-4cf8-b619-64a31ed469d7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС10. LLO_BAD_REQUEST_401016" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="c1275f0e-0802-4cb7-b2e1-e7be0a4c415c"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.code = LLO_BAD_REQUEST"><con:configuration><path>$.error.code</path><content>LLO_BAD_REQUEST</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="Указаны неверные форматы входных параметров или переданы не все обязательные поля "><con:configuration><path>$.error.description</path><content>Указаны неверные форматы входных параметров или переданы не все обязательные поля</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.type = BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>9964403e-d645-421d-9404-58e7ee9a89b0</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/401016</con:value></con:property></con:properties></con:testCase><con:testCase id="a913e622-8835-41fd-a74f-03ae64a7f6cf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС11. LLO_ERROR_401164" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="ad78102c-e4eb-4528-87ae-5269e4fcc8e8"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.code = LLO_ERROR"><con:configuration><path>$.error.code</path><content>LLO_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="Сервис ЕМИАС.ЛЛО не отвечает"><con:configuration><path>$.error.description</path><content>Сервис ЕМИАС.ЛЛО не отвечает</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cb2bae44-3441-46a4-a7c0-4e63df319ab0" name="error.type = TECHNICAL"><con:configuration><path>$.error.type</path><content>TECHNICAL</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>9964403e-d645-421d-9404-58e7ee9a89b0</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090482</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>false</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/401164</con:value></con:property></con:properties></con:testCase><con:testCase id="37686b74-b9e2-4726-9cef-28b3663c27b9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395336_Метод piGetDrugOrders вернул ошибку 2740" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getCountForServicesForYou" id="38e92eaa-b03b-403e-9feb-c3200c14bb6f"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": ${#TestCase#isCovidQR}
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="7c9f0460-364b-4a80-8d2e-d2e7f743e350" name="drugOrdersShow = false"><con:configuration><path>$.payload.drugOrdersShow</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
  <con:entry key="Mock-llo" value="${#TestCase#Mock-llo}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>omsNumber</con:name><con:value>7700003027090481</con:value></con:property><con:property><con:name>isCovidQR</con:name><con:value>true</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>${#Project#Mock-url}/388380</con:value></con:property></con:properties></con:testCase><con:testCase id="604a38c6-a60a-4257-a0b6-a8cadb2c4a54" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="411954_Получение сведений о записях в КДО (event_type=created, event_date>текущей даты)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Записать дату в пропертис" id="f404da3d-7d2c-4815-a9ff-6660ceb7d5f0"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd")
def nowPlusOneDayNewFormat = sdf.format(nowPlusOneDay)
testRunner.testCase.setPropertyValue("eventDate", nowPlusOneDayNewFormat.toString())
log.info nowPlusOneDay</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись в f_hospitalizations_appointment" id="c31fc064-9a5a-4c0f-bc72-53d93a666f99"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality, resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate}', '18:00:00', 'терапевт', 'Беда О.Ю.', 'ЭКГ', 'Кабинет №1', 'г. Москва, ул. Ленина, д.45', 'МО №100');</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="d7038ffc-3585-433b-8688-b55b1d42c3a0"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": false
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="83dc5a5c-3bd4-4f1f-affd-3193f2be144a" name="Contains hospAppointment"><con:configuration><token>hospAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка маппинга hospAppointment" id="7b286a1f-4f23-4c3d-9b54-e6baf84fbfe0"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.util.ArrayList

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse) //парсим json

connection = testRunner.testCase.testSuite.project.getPropertyValue("emiasInfoFullDbConnection")
sql = Sql.newInstance(connection)

appointmentId = testRunner.testCase.getPropertyValue("appointmentId")

hospAppBD = sql.rows("select * from f_hospitalizations_appointment where appointment_id= '"+appointmentId+"'")

hospApp = getCountForServicesForYou.payload.hospAppointment

hospAppCount = hospApp.size()
for(i=0; i&lt;hospAppCount; i++){
	if(hospApp[i].appointmentId==appointmentId){
		assert hospApp[i].appointmentId == hospAppBD[0].appointment_id.toString()
		assert hospApp[i].eventDate == hospAppBD[0].event_date.toString()
		assert hospApp[i].eventTime == hospAppBD[0].event_time
		assert hospApp[i].resourceSpeciality == hospAppBD[0].resource_speciality
		assert hospApp[i].resourceName == hospAppBD[0].resource_name
		assert hospApp[i].resourceProcedure == hospAppBD[0].resource_procedure
		assert hospApp[i].resourceOffice == hospAppBD[0].resource_office
		assert hospApp[i].resourceAddress == hospAppBD[0].resource_address
		assert hospApp[i].resourceMo == hospAppBD[0].resource_mo
		}
	}</script></con:config></con:testStep><con:testStep type="jdbc" name="Удалить запись в f_hospitalizations_appointment" id="ad945dee-3195-4ee1-b64e-d753ec56945c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId}'</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>eventDate</con:name><con:value>2024-05-08</con:value></con:property><con:property><con:name>eventType</con:name><con:value>created</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>411954</con:value></con:property><con:property><con:name>id</con:name><con:value>3</con:value></con:property></con:properties></con:testCase><con:testCase id="bf053843-2e7c-4a90-abef-50bbc2822e58" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="411955_Получение сведений о записях в КДО (event_type=created, event_date=текущей дате)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Записать дату в пропертис" id="3c7ea0b4-b6cf-4799-b57c-3d19620346be"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

Date now = new Date()

sdf = new SimpleDateFormat("yyyy-MM-dd")
def nowNewFormat = sdf.format(now)
testRunner.testCase.setPropertyValue("eventDate", nowNewFormat.toString())
log.info nowNewFormat</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись в f_hospitalizations_appointment" id="da064080-c363-4298-8e1f-d14e28cd7763"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality, resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate}', '18:00:00', 'терапевт', 'Беда О.Ю.', 'ЭКГ', 'Кабинет №1', 'г. Москва, ул. Ленина, д.45', 'МО №100');</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="fa614e8a-af5a-4e2d-bc96-12ba552117b8"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": false
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="83dc5a5c-3bd4-4f1f-affd-3193f2be144a" name="Contains hospAppointment"><con:configuration><token>hospAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка маппинга hospAppointment" id="4790b055-0531-4bfd-af1b-af8b3079204b"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.util.ArrayList

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse) //парсим json

connection = testRunner.testCase.testSuite.project.getPropertyValue("emiasInfoFullDbConnection")
sql = Sql.newInstance(connection)

appointmentId = testRunner.testCase.getPropertyValue("appointmentId")

hospAppBD = sql.rows("select * from f_hospitalizations_appointment where appointment_id= '"+appointmentId+"'")

hospApp = getCountForServicesForYou.payload.hospAppointment

hospAppCount = hospApp.size()
for(i=0; i&lt;hospAppCount; i++){
	if(hospApp[i].appointmentId==appointmentId){
		assert hospApp[i].appointmentId == hospAppBD[0].appointment_id.toString()
		assert hospApp[i].eventDate == hospAppBD[0].event_date.toString()
		assert hospApp[i].eventTime == hospAppBD[0].event_time
		assert hospApp[i].resourceSpeciality == hospAppBD[0].resource_speciality
		assert hospApp[i].resourceName == hospAppBD[0].resource_name
		assert hospApp[i].resourceProcedure == hospAppBD[0].resource_procedure
		assert hospApp[i].resourceOffice == hospAppBD[0].resource_office
		assert hospApp[i].resourceAddress == hospAppBD[0].resource_address
		assert hospApp[i].resourceMo == hospAppBD[0].resource_mo
		}
	}</script></con:config></con:testStep><con:testStep type="jdbc" name="Удалить запись в f_hospitalizations_appointment" id="0fdd0bcd-0aeb-4808-87c7-062220889883"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId}'</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>eventDate</con:name><con:value>2024-05-07</con:value></con:property><con:property><con:name>eventType</con:name><con:value>created</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>411955</con:value></con:property><con:property><con:name>id</con:name><con:value>3</con:value></con:property></con:properties></con:testCase><con:testCase id="7db5ad78-051e-4ea4-a213-7b5db2551dbc" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="411956_Получение сведений о записях в КДО (event_type=edited, event_date>текущей даты)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Записать дату в пропертис" id="3837f65b-63ec-49fa-b89b-8e1256e2e576"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd")
def nowPlusOneDayNewFormat = sdf.format(nowPlusOneDay)
testRunner.testCase.setPropertyValue("eventDate", nowPlusOneDayNewFormat.toString())
log.info nowPlusOneDay</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись в f_hospitalizations_appointment" id="3653ef00-ac11-4524-96af-cf4d76bf8e2e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality, resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate}', '18:00:00', 'терапевт', 'Беда О.Ю.', 'ЭКГ', 'Кабинет №1', 'г. Москва, ул. Ленина, д.45', 'МО №100');</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="57ef3988-c0d5-4a78-bd91-a50604f7301e"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": false
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="83dc5a5c-3bd4-4f1f-affd-3193f2be144a" name="Contains hospAppointment"><con:configuration><token>hospAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка маппинга hospAppointment" id="74e2a570-a6b4-461a-850d-34a8b6cbae28"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.util.ArrayList

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse) //парсим json

connection = testRunner.testCase.testSuite.project.getPropertyValue("emiasInfoFullDbConnection")
sql = Sql.newInstance(connection)

appointmentId = testRunner.testCase.getPropertyValue("appointmentId")

hospAppBD = sql.rows("select * from f_hospitalizations_appointment where appointment_id= '"+appointmentId+"'")

hospApp = getCountForServicesForYou.payload.hospAppointment

hospAppCount = hospApp.size()
for(i=0; i&lt;hospAppCount; i++){
	if(hospApp[i].appointmentId==appointmentId){
		assert hospApp[i].appointmentId == hospAppBD[0].appointment_id.toString()
		assert hospApp[i].eventDate == hospAppBD[0].event_date.toString()
		assert hospApp[i].eventTime == hospAppBD[0].event_time
		assert hospApp[i].resourceSpeciality == hospAppBD[0].resource_speciality
		assert hospApp[i].resourceName == hospAppBD[0].resource_name
		assert hospApp[i].resourceProcedure == hospAppBD[0].resource_procedure
		assert hospApp[i].resourceOffice == hospAppBD[0].resource_office
		assert hospApp[i].resourceAddress == hospAppBD[0].resource_address
		assert hospApp[i].resourceMo == hospAppBD[0].resource_mo
		}
	}</script></con:config></con:testStep><con:testStep type="jdbc" name="Удалить запись в f_hospitalizations_appointment" id="83d94b9d-e4a8-4fd8-96df-2b67f3759c7d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId}'</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>eventDate</con:name><con:value>2024-05-08</con:value></con:property><con:property><con:name>eventType</con:name><con:value>edited</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>411956</con:value></con:property><con:property><con:name>id</con:name><con:value>4</con:value></con:property></con:properties></con:testCase><con:testCase id="2d597fea-692a-424f-9002-2423e9d45a9c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="411957_Получение сведений о записях в КДО (event_type=edited, event_date=текущей дате)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Записать дату в пропертис" id="acbe9325-37ee-4f5c-9288-5b3167897cd7"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

Date now = new Date()

sdf = new SimpleDateFormat("yyyy-MM-dd")
def nowNewFormat = sdf.format(now)
testRunner.testCase.setPropertyValue("eventDate", nowNewFormat.toString())
log.info nowNewFormat</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись в f_hospitalizations_appointment" id="090d6aff-6c4f-4d7f-b1d4-e8621c201582"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality, resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate}', '18:00:00', 'терапевт', 'Беда О.Ю.', 'ЭКГ', 'Кабинет №1', 'г. Москва, ул. Ленина, д.45', 'МО №100');</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="f346c6ab-cba0-4769-aaf0-b9e862ea5a03"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": false
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="83dc5a5c-3bd4-4f1f-affd-3193f2be144a" name="Contains hospAppointment"><con:configuration><token>hospAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка маппинга hospAppointment" id="937dd665-3828-4b55-bea9-1304a83452a5"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.util.ArrayList

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse) //парсим json

connection = testRunner.testCase.testSuite.project.getPropertyValue("emiasInfoFullDbConnection")
sql = Sql.newInstance(connection)

appointmentId = testRunner.testCase.getPropertyValue("appointmentId")

hospAppBD = sql.rows("select * from f_hospitalizations_appointment where appointment_id= '"+appointmentId+"'")

hospApp = getCountForServicesForYou.payload.hospAppointment

hospAppCount = hospApp.size()
for(i=0; i&lt;hospAppCount; i++){
	if(hospApp[i].appointmentId==appointmentId){
		assert hospApp[i].appointmentId == hospAppBD[0].appointment_id.toString()
		assert hospApp[i].eventDate == hospAppBD[0].event_date.toString()
		assert hospApp[i].eventTime == hospAppBD[0].event_time
		assert hospApp[i].resourceSpeciality == hospAppBD[0].resource_speciality
		assert hospApp[i].resourceName == hospAppBD[0].resource_name
		assert hospApp[i].resourceProcedure == hospAppBD[0].resource_procedure
		assert hospApp[i].resourceOffice == hospAppBD[0].resource_office
		assert hospApp[i].resourceAddress == hospAppBD[0].resource_address
		assert hospApp[i].resourceMo == hospAppBD[0].resource_mo
		}
	}</script></con:config></con:testStep><con:testStep type="jdbc" name="Удалить запись в f_hospitalizations_appointment" id="dbf8ebb6-8685-4620-b4d9-27ee41b30b87"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId}'</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>eventDate</con:name><con:value>2024-05-07</con:value></con:property><con:property><con:name>eventType</con:name><con:value>edited</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>411957</con:value></con:property><con:property><con:name>id</con:name><con:value>3</con:value></con:property></con:properties></con:testCase><con:testCase id="3e85eed8-68f9-48e7-a842-1db5b6553340" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="411959_Получение сведений о записях в КДО (event_type=created, event_date&lt;текущей даты)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Записать дату в пропертис" id="9ac095a6-4f98-4ce3-8ae5-a51dcf022216"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

Date now = new Date()
Date nowMinusOneDay = LocalDateTime.now().plusDays(-1).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd")
def nowMinusOneDayNewFormat = sdf.format(nowMinusOneDay)
testRunner.testCase.setPropertyValue("eventDate", nowMinusOneDayNewFormat.toString())
log.info nowMinusOneDayNewFormat</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись в f_hospitalizations_appointment" id="2a3742ba-74d4-4938-8dcf-92df34bbb2ae"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality, resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate}', '18:00:00', 'терапевт', 'Беда О.Ю.', 'ЭКГ', 'Кабинет №1', 'г. Москва, ул. Ленина, д.45', 'МО №100');</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="130e4bd4-316d-4fed-889f-9a9e40b03ca4"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": false
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="fedf9f15-3312-42d0-9e58-8e100b3ffe19" name="Not Contains hospAppointment"><con:configuration><token>hospAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Удалить запись в f_hospitalizations_appointment" id="1c154610-f6a5-44a9-b35f-7c7562161db6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId}'</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>eventDate</con:name><con:value>2024-05-06</con:value></con:property><con:property><con:name>eventType</con:name><con:value>created</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>411959</con:value></con:property><con:property><con:name>id</con:name><con:value>3</con:value></con:property></con:properties></con:testCase><con:testCase id="85145c5b-439f-4046-8fa2-136a8b682ef1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="411962_Получение сведений о записях в КДО (event_type=edited, event_date&lt;текущей даты)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Записать дату в пропертис" id="8fe68446-b89f-4eac-b649-fb3766aef8a8"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

Date now = new Date()
Date nowMinusOneDay = LocalDateTime.now().plusDays(-1).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd")
def nowMinusOneDayNewFormat = sdf.format(nowMinusOneDay)
testRunner.testCase.setPropertyValue("eventDate", nowMinusOneDayNewFormat.toString())
log.info nowMinusOneDayNewFormat</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись в f_hospitalizations_appointment" id="ee7b3355-0ab4-4ac3-b39b-1728a0feed63"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality, resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate}', '18:00:00', 'терапевт', 'Беда О.Ю.', 'ЭКГ', 'Кабинет №1', 'г. Москва, ул. Ленина, д.45', 'МО №100');</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="9efe6ac9-aeb1-48ae-a27f-2ffd4e0d1417"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": false
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="fedf9f15-3312-42d0-9e58-8e100b3ffe19" name="Not Contains hospAppointment"><con:configuration><token>hospAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Удалить запись в f_hospitalizations_appointment" id="07118d2c-443b-484e-80e5-52e99e44f521"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId}'</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>eventDate</con:name><con:value>2024-05-06</con:value></con:property><con:property><con:name>eventType</con:name><con:value>edited</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>411962</con:value></con:property><con:property><con:name>id</con:name><con:value>3</con:value></con:property></con:properties></con:testCase><con:testCase id="448ba04e-fe2e-443a-b481-8eb3900913fa" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="411964_Получение сведений о записях в КДО (event_type=cancelled, event_date>текущей даты)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Записать дату в пропертис" id="80c59d8b-dccb-4df3-acc2-15cde5491db8"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd")
def nowPlusOneDayNewFormat = sdf.format(nowPlusOneDay)
testRunner.testCase.setPropertyValue("eventDate", nowPlusOneDayNewFormat.toString())
log.info nowPlusOneDay</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись в f_hospitalizations_appointment" id="827a7efe-a9a0-4d41-b5fe-0b38673f20b1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality, resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate}', '18:00:00', 'терапевт', 'Беда О.Ю.', 'ЭКГ', 'Кабинет №1', 'г. Москва, ул. Ленина, д.45', 'МО №100');</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="fcf89aba-80b3-4289-8189-02b0ec7f4f5c"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": false
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="fedf9f15-3312-42d0-9e58-8e100b3ffe19" name="Not Contains hospAppointment"><con:configuration><token>hospAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Удалить запись в f_hospitalizations_appointment" id="916ee68a-2e05-4100-978b-685a7fbe3ec8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId}'</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>eventDate</con:name><con:value>2024-05-08</con:value></con:property><con:property><con:name>eventType</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>411962</con:value></con:property><con:property><con:name>id</con:name><con:value>3</con:value></con:property></con:properties></con:testCase><con:testCase id="7a46b40d-b029-4216-9286-248ed619cf37" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="411965_Получение сведений о записях в КДО (event_type=cancelled, event_date&lt;текущей даты)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Записать дату в пропертис" id="4c19b3ec-ab49-4b7a-9113-774b03c9ddc8"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

Date now = new Date()
Date nowMinusOneDay = LocalDateTime.now().plusDays(-1).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd")
def nowMinusOneDayNewFormat = sdf.format(nowMinusOneDay)
testRunner.testCase.setPropertyValue("eventDate", nowMinusOneDayNewFormat.toString())
log.info nowMinusOneDayNewFormat</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись в f_hospitalizations_appointment" id="cccd0ee0-b122-4107-bade-63cd6baff733"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality, resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate}', '18:00:00', 'терапевт', 'Беда О.Ю.', 'ЭКГ', 'Кабинет №1', 'г. Москва, ул. Ленина, д.45', 'МО №100');</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="b429ae22-4ccd-40d9-a245-b6065df67fa8"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": false
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="fedf9f15-3312-42d0-9e58-8e100b3ffe19" name="Not Contains hospAppointment"><con:configuration><token>hospAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Удалить запись в f_hospitalizations_appointment" id="78316bfd-b276-4f34-9a50-533a1eecd6a4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId}'</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>eventDate</con:name><con:value>2024-05-06</con:value></con:property><con:property><con:name>eventType</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>411965</con:value></con:property><con:property><con:name>id</con:name><con:value>3</con:value></con:property></con:properties></con:testCase><con:testCase id="51acd413-742a-47bf-9f0a-63401dece745" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="411966_Получение сведений о записях в КДО (event_type=cancelled, event_date=текущей дате)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Записать дату в пропертис" id="dc21b2a5-e9e4-48c4-8369-90041d3ca225"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

Date now = new Date()

sdf = new SimpleDateFormat("yyyy-MM-dd")
def nowNewFormat = sdf.format(now)
testRunner.testCase.setPropertyValue("eventDate", nowNewFormat.toString())
log.info nowNewFormat</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись в f_hospitalizations_appointment" id="6e15eab4-b245-4877-aba9-5c58e2c1c565"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality, resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate}', '18:00:00', 'терапевт', 'Беда О.Ю.', 'ЭКГ', 'Кабинет №1', 'г. Москва, ул. Ленина, д.45', 'МО №100');</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="c59e3386-a7bf-4f93-ae44-fad475e3aada"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": false
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="fedf9f15-3312-42d0-9e58-8e100b3ffe19" name="Not Contains hospAppointment"><con:configuration><token>hospAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Удалить запись в f_hospitalizations_appointment" id="1751690c-bab6-4487-8a26-34bf8739ae93"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId}'</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>eventDate</con:name><con:value>2024-05-07</con:value></con:property><con:property><con:name>eventType</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>411966</con:value></con:property><con:property><con:name>id</con:name><con:value>3</con:value></con:property></con:properties></con:testCase><con:testCase id="8b61f38f-1ca9-4807-9c32-9ba62ff5d966" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="412050_Получение сведений о записях в КДО (сортировка)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Записать даты в пропертис" id="3409cb27-c977-4a60-8360-9a0ff7d171a8"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd")

def nowNewFormat = sdf.format(now)
testRunner.testCase.setPropertyValue("eventDate1", nowNewFormat.toString())

def nowPlusOneDayNewFormat = sdf.format(nowPlusOneDay)
testRunner.testCase.setPropertyValue("eventDate2", nowPlusOneDayNewFormat.toString())

Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
def nowPlusTwoDaysNewFormat = sdf.format(nowPlusTwoDays)
testRunner.testCase.setPropertyValue("eventDate3", nowPlusTwoDaysNewFormat.toString())</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать записи в f_hospitalizations_appointment" id="0ae8795e-14a3-4131-b9ec-1bf02417818c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality, resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId1}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate1}', '18:00:00', 'терапевт', 'Беда О.Ю.', 'ЭКГ', 'Кабинет', 'г. Москва, ул. Ленина, д.45', 'МО №100');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality, resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId2}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate2}', '18:00:00', 'терапевт', 'Беда О.Ю.', 'ЭКГ', 'Кабинет', 'г. Москва, ул. Ленина, д.45', 'МО №100');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality, resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId3}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate3}', '18:00:00', 'терапевт', 'Беда О.Ю.', 'ЭКГ', 'Кабинет', 'г. Москва, ул. Ленина, д.45', 'МО №100');</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="ea3edfa1-6405-46d1-9730-849cce33ff1f"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": false
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="83dc5a5c-3bd4-4f1f-affd-3193f2be144a" name="Contains hospAppointment"><con:configuration><token>hospAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка сортировки hospAppointment" id="e855b1a4-3740-46de-aaa9-2e892e10cccc"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.util.ArrayList
import java.text.SimpleDateFormat
import java.time.LocalDateTime

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse) //парсим json

connection = testRunner.testCase.testSuite.project.getPropertyValue("emiasInfoFullDbConnection")
sql = Sql.newInstance(connection)

appointmentId = testRunner.testCase.getPropertyValue("appointmentId")

hospAppBD = sql.rows("select * from f_hospitalizations_appointment where appointment_id= '"+appointmentId+"'")
//log.info getCountForServicesForYou

hospApp = getCountForServicesForYou.payload.hospAppointment

sdf = new SimpleDateFormat("yyyy-MM-dd")
eventDateFormattedArr = []

hospAppCount = hospApp.size()
for (int i=0; i&lt;hospAppCount; i++){
	def eventDate = Date.parse("yyyy-MM-dd", hospApp[i].eventDate)
	def eventDateNewFormat = sdf.format(eventDate)
	eventDateFormattedArr &lt;&lt; eventDateNewFormat;
}

for(int i=0; i&lt;eventDateFormattedArr.size()-1; i++){
	if(eventDateFormattedArr[i]> eventDateFormattedArr[i+1]){
		testRunner.fail("Сортировка не работает")
	}
}</script></con:config></con:testStep><con:testStep type="jdbc" name="Удалить записи в f_hospitalizations_appointment" id="34b77fc4-42da-476b-859f-838826f14fa8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId1}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId2}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId3}';</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>eventType</con:name><con:value>created</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>appointmentId1</con:name><con:value>4120501</con:value></con:property><con:property><con:name>id</con:name><con:value>3</con:value></con:property><con:property><con:name>eventDate1</con:name><con:value>2024-05-07</con:value></con:property><con:property><con:name>eventDate2</con:name><con:value>2024-05-08</con:value></con:property><con:property><con:name>eventDate3</con:name><con:value>2024-05-09</con:value></con:property><con:property><con:name>appointmentId2</con:name><con:value>4120502</con:value></con:property><con:property><con:name>appointmentId3</con:name><con:value>4120503</con:value></con:property></con:properties></con:testCase><con:testCase id="cf8d1a2d-e9c0-4e70-afd4-7dc1b004efd5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="412249_Получение сведений о записях в КДО (заполнены только обязательные поля)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Записать дату в пропертис" id="10178063-0a7b-4680-8f62-9cab51d32d3c"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd")
def nowPlusOneDayNewFormat = sdf.format(nowPlusOneDay)
testRunner.testCase.setPropertyValue("eventDate", nowPlusOneDayNewFormat.toString())
log.info nowPlusOneDay</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать запись в f_hospitalizations_appointment" id="44277589-4096-452d-9b90-71d018d1cbb0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_address, resource_mo)
VALUES((SELECT MAX(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId}', ${#TestCase#patientId}, '${#TestCase#eventType}', '${#TestCase#eventDate}', '18:00:00', 'г. Москва, ул. Ленина, д.45', 'МО №100');</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="getCountForServicesForYou" id="9fe90c86-a195-4255-8439-04927cd5d84e"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/getCountForServicesForYou" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCountForServicesForYou" id="b35530d9-a86e-4c88-b88e-78d994fbac23" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "ehrId": "${#TestCase#ehrId}",
  "isCovidQR": false
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/getCountForServicesForYou</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d560e8c-d846-4f28-a668-4262909a59ab" name="Код ответа = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="83dc5a5c-3bd4-4f1f-affd-3193f2be144a" name="Contains hospAppointment"><con:configuration><token>hospAppointment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="f9266eaf-17ae-4bc7-bd24-a21f576591f3" name="Not Contains resourceSpeciality"><con:configuration><token>resourceSpeciality</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="071b7688-f468-43c5-a3b6-d95a85d44edf" name="Not Contains resourceName"><con:configuration><token>resourceName</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="1fddef2c-cc99-41b8-80d0-c3efce85fbb4" name="Not Contains resourceProcedure"><con:configuration><token>resourceProcedure</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="7c681f66-c62e-42a0-824e-5e5fa1cd24ef" name="Not Contains resourceOffice"><con:configuration><token>resourceOffice</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry><con:entry>Mock-lk</con:entry><con:entry>Mock-pdn</con:entry><con:entry>Mock-llo</con:entry><con:entry>Mock-hospitalization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверка маппинга hospAppointment" id="98d80ac2-812c-4c5a-a7e6-267dd19d9b69"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.util.ArrayList

def getCountForServicesForYouResponse = context.expand('${getCountForServicesForYou#Response}')
def slurperJson = new JsonSlurper()
def getCountForServicesForYou = slurperJson.parseText(getCountForServicesForYouResponse) //парсим json

connection = testRunner.testCase.testSuite.project.getPropertyValue("emiasInfoFullDbConnection")
sql = Sql.newInstance(connection)

appointmentId = testRunner.testCase.getPropertyValue("appointmentId")

hospAppBD = sql.rows("select * from f_hospitalizations_appointment where appointment_id= '"+appointmentId+"'")

hospApp = getCountForServicesForYou.payload.hospAppointment

hospAppCount = hospApp.size()
for(i=0; i&lt;hospAppCount; i++){
	if(hospApp[i].appointmentId==appointmentId){
		assert hospApp[i].appointmentId == hospAppBD[0].appointment_id.toString()
		assert hospApp[i].eventDate == hospAppBD[0].event_date.toString()
		assert hospApp[i].eventTime == hospAppBD[0].event_time
		assert hospApp[i].resourceSpeciality == hospAppBD[0].resource_speciality
		assert hospApp[i].resourceName == hospAppBD[0].resource_name
		assert hospApp[i].resourceProcedure == hospAppBD[0].resource_procedure
		assert hospApp[i].resourceOffice == hospAppBD[0].resource_office
		assert hospApp[i].resourceAddress == hospAppBD[0].resource_address
		assert hospApp[i].resourceMo == hospAppBD[0].resource_mo
		}
	}</script></con:config></con:testStep><con:testStep type="jdbc" name="Удалить запись в f_hospitalizations_appointment" id="42000330-a0b9-4062-a753-32468d282730"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId}'</con:query><con:assertion type="XPath Match" id="51764ed5-d276-4ade-9394-8087a9b9c37b" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>eventDate</con:name><con:value>2024-05-08</con:value></con:property><con:property><con:name>eventType</con:name><con:value>created</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25517322</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>78c3f6ee-e387-4b98-abe8-8f9332fe2401</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>412249</con:value></con:property><con:property><con:name>id</con:name><con:value>3</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="3259274a-1380-42f3-8065-b411085dfa49" name="POST saCount v1"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="caa73b69-676d-4928-bde9-07ae160f76ba" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395181_ОС. Получение записей по пациенту &lt; 18 лет без активных записей" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="e9e6e03c-6e8d-4425-81c8-5b0299dbb678"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="Отсутствует closeDate"><con:configuration><path>$.payload.activeAppointment[?(!@.closeDate)]</path><content>[0]</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7790689773000533</con:value></con:property><con:property><con:name>bd</con:name><con:value>2013-09-26</con:value></con:property></con:properties></con:testCase><con:testCase id="2f2fc9ef-14e5-4e80-aee1-d46f52dd9b13" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395182_АС2. Получение записей по пациенту >= 18 лет без активных записей" searchProperties="true"><con:settings/><con:testStep type="request" name="getAppointmentReceptionsByPatient" id="b4ef87b8-71bc-4fff-aee9-655ed4c9bbfd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatient" id="65a23d5b-a4ae-4697-a272-9ef34851f027"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>\r
      <v5:getAppointmentReceptionsByPatient>\r
         <omsNumber>${#TestCase#oms}</omsNumber>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
         <externalSystemId>EIM</externalSystemId>\r
      </v5:getAppointmentReceptionsByPatient>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6f8b13e5-9886-4cdb-9b51-e720a31e3aa5" disabled="true"/><con:assertion type="Simple NotContains" id="21f6e5eb-8934-4c2e-851f-c8a22bd9e614" name="В ответе отсутствуют id записей"><con:configuration><token>id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAppointmentReceptionsByPatientGIBDD" id="1a880c58-4fe3-4f40-bf66-e8dec2f8fbee"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EmiasGibddAppointmentBinding</con:interface><con:operation>GetAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatientGIBDD" id="70f5beb2-b9e1-4ec6-9a77-b4bb6699ea87"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasGibddEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
<soap:Header>
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
  <wsse:UsernameToken>
   <wsse:Username>EIP</wsse:Username>
  </wsse:UsernameToken>
 </wsse:Security>
</soap:Header>
   <soap:Body>\r
      <v1:GetAppointmentReceptionsByPatientRequest>\r
         <oms>${#TestCase#oms}</oms>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
      </v1:GetAppointmentReceptionsByPatientRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3d17e2ea-c198-4292-9824-0262de5be5fb" disabled="true"/><con:assertion type="Simple NotContains" id="f5c9ffd4-f798-43dd-8d69-d6cac70dd188" name="В ответе отсутствуют appointments"><con:configuration><token>appointments</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="42398996-6ea8-4253-8fd9-a89b4fa8805a"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="c686343b-da17-44bb-b78b-853175e8ae77" name="Отсутствует closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7755530870001052</con:value></con:property><con:property><con:name>bd</con:name><con:value>1964-04-29</con:value></con:property></con:properties></con:testCase><con:testCase id="9f0325ff-1fc0-4499-a8c4-91ceaf4ee495" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395184_АС4. Получение записей по пациенту с отсутствующими направлениями и назначениями" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="4f1845e9-1a53-4ae6-8cf5-7d66487beeb2"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="b90dc65a-0db1-403d-a961-5170b11d948a" name="Отсутствует closeCount"><con:configuration><token>closeCount</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="9f053a10-ab69-4630-88d2-388e1f1e91de" name="Отсутствует closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7755530870001052</con:value></con:property><con:property><con:name>bd</con:name><con:value>1964-04-29</con:value></con:property></con:properties></con:testCase><con:testCase id="2d08753c-c591-494b-88ae-27c8f69df4e3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395211_ОС. Получение записей по пациенту с активными направлениями и назначениями" searchProperties="true"><con:settings/><con:testStep type="request" name="getAssignmentsInfo" id="3df1bad6-fc9b-4c24-98ec-68a2c81aca79"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAssignmentsInfo</con:operation><con:request name="getAssignmentsInfo" id="a612036d-ed27-4231-a620-07542ad2c77c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>EIM</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <v5:getAssignmentsInfo>\r
         <omsNumber>${#TestCase#oms}</omsNumber>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
         <returnExtended>true</returnExtended>\r
         <externalSystemId>EIM</externalSystemId>\r
      </v5:getAssignmentsInfo>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="f3a5f3d9-4535-4cec-a3c5-3e596d26e560"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getReferralsInfo" id="6dc484c8-555f-4310-93d9-923e4760cfcc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getReferralsInfo</con:operation><con:request name="getReferralsInfo" id="674323b3-ef4d-47b0-bf9d-3be1d47be36d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>\r
      <v5:getReferralsInfo>\r
         <omsNumber>${#TestCase#oms}</omsNumber>
         <birthDate>${#TestCase#bd}</birthDate>
         <returnExtended>true</returnExtended>
         <externalSystemId>EIM</externalSystemId>
      </v5:getReferralsInfo>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a6b7692f-8dd3-45bb-88c6-97366499cc31"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="4ac2146c-e136-4a87-ba73-59836fdf0e00"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="92fbda63-92e9-471a-b5ef-4841046be778" name="Код ответа 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Посчитать записи и сравнить ответ" id="29594db8-b69e-4a12-9fd8-85881417de8f"><con:settings/><con:config><script><![CDATA[import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем ответ из json
def saCountResponse = context.expand('${POST saCount#Response}')
def slurperJson = new JsonSlurper()
def saCount = slurperJson.parseText(saCountResponse)
def saCountNFO = saCount.payload

//получаем ответ из xml getAssignmentsInfo
def getAssignmentsInfoResponse = context.expand('${getAssignmentsInfo#Response}')
getAssignmentsInfo = new XmlSlurper().parseText(getAssignmentsInfoResponse)
getAssignmentsInfoBody = getAssignmentsInfo.Body.getAssignmentsInfoResponse.assignment
getAssignmentsInfoSize = getAssignmentsInfo.Body.getAssignmentsInfoResponse.assignment.size()

//получаем ответ из xml getReferralsInfo
def getReferralsInfoResponse = context.expand('${getReferralsInfo#Response}')
getReferralsInfo = new XmlSlurper().parseText(getReferralsInfoResponse)
getReferralsInfoSize = getReferralsInfo.Body.getReferralsInfoResponse.referral.size()
getReferralsInfoBody = getReferralsInfo.Body.getReferralsInfoResponse.referral

closeCount = 0
closeDateCount = 0
closeDateReferralsCount = []

//Получаем количество подходящих из getReferralsInfo записей и заполняем даты для выбора наименьшей
if (getReferralsInfoSize != 0){
	for (i=0; i<getReferralsInfoSize; i++){
		date = new Date()
		String dateToday = date.format("yyyy-MM-dd")
		String dateEndParse = Date.parse("yyyy-MM-dd", getReferralsInfoBody[i].endTime.text())
		dateEnd = Date.parse("yyyy-MM-dd", getReferralsInfoBody[i].endTime.text())
		if (getReferralsInfoBody[i].appointmentOpenDate == "" && dateToday <= dateEndParse){
			closeCount++
			closeDateReferralsCount << dateEnd
		}
	}
}

//Получаем количество подходящих из getAssignmentsInfo записей и заполняем даты для выбора наименьшей
if (getAssignmentsInfoSize != 0){
	for (i=0; i<getAssignmentsInfoSize; i++){
		date = new Date()
		String dateToday = date.format("yyyy-MM-dd")
		String dateFromParse = Date.parse("yyyy-MM-dd", getAssignmentsInfoBody[i].period.dateFrom.text())
		String dateToParse = Date.parse("yyyy-MM-dd", getAssignmentsInfoBody[i].period.dateTo.text())
		dateTo = Date.parse("yyyy-MM-dd", getAssignmentsInfoBody[i].period.dateTo.text())
		dateFrom = Date.parse("yyyy-MM-dd", getAssignmentsInfoBody[i].period.dateFrom.text())
		if (getAssignmentsInfoBody[i].appointmentId == ""){
			if (getAssignmentsInfoBody[i].toBM.self == false && getAssignmentsInfoBody[i].appointmentOpenDate == "" && dateToday <= dateToParse){
				log.info getAssignmentsInfoBody[i].registryEntry.entryId
				closeCount++
				closeDateReferralsCount << dateTo
			}
			if (getAssignmentsInfoBody[i].toBM.self == true && getAssignmentsInfoBody[i].appointmentOpenDate == "" && dateToday <= dateFromParse && dateToday >= dateToParse){
				closeCount++
				closeDateReferralsCount << dateTo
			}
		}
	}
}

//Определяем минимальную дату и сравниваем closeDate
if (closeDateReferralsCount != 0){
	Date minCloseDate = Collections.min(closeDateReferralsCount)
	log.info minCloseDate
	Date datePlus7= LocalDateTime.now().plusDays(7).toDate()
	if(minCloseDate <= datePlus7){
		closeDate = minCloseDate.format("yyyy-MM-dd")
		assert closeDate == saCountNFO.activeReferrals.closeDate
	}
	else {
		assert saCountNFO.activeReferrals.closeDate == ""
	}
}

//Определяем количество совпадений дат с closeDate  и сравниваем с loseDateCount
if (saCountNFO.activeReferrals.closeDate != ""){
	closeDateForCount = 0
	for(i=0; i< closeDateReferralsCount.size(); i++){
		String dateParse = closeDateReferralsCount[i].format("yyyy-MM-dd")
		if(dateParse == saCountNFO.activeReferrals.closeDate){
			closeDateForCount++
		}
	}
	assert closeDateForCount == saCountNFO.activeReferrals.closeCount
}
else {
	assert saCountNFO.activeReferrals.closeDate == ""
}
]]></script></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7700007178231039</con:value></con:property><con:property><con:name>bd</con:name><con:value>1939-10-23</con:value></con:property></con:properties></con:testCase><con:testCase id="49312f00-6060-437f-847c-fb9b8ceb2ed0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395212_ОС. Получение записей по пациенту  &lt; 18 лет c активными записями" searchProperties="true"><con:settings/><con:testStep type="request" name="getAppointmentReceptionsByPatient" id="9ad31a16-d02e-401c-86a5-a8f403cf92c6" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatient" id="65a23d5b-a4ae-4697-a272-9ef34851f027"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>\r
      <v5:getAppointmentReceptionsByPatient>\r
         <omsNumber>${#TestCase#oms}</omsNumber>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
         <externalSystemId>EIM</externalSystemId>
         <signActiveArchive>0</signActiveArchive>\r
      </v5:getAppointmentReceptionsByPatient>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="bf956d8e-4240-49b0-98f5-4556c3be6cd1" name="Вернулся id"><con:configuration><token>id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAppointmentReceptionsByPatientGIBDD" id="4a43520d-ead2-481c-9a8c-897ebdd62387" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EmiasGibddAppointmentBinding</con:interface><con:operation>GetAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatientGIBDD" id="70f5beb2-b9e1-4ec6-9a77-b4bb6699ea87"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasGibddEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
<soap:Header>
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
  <wsse:UsernameToken>
   <wsse:Username>EIP</wsse:Username>
  </wsse:UsernameToken>
 </wsse:Security>
</soap:Header>
   <soap:Body>\r
      <v1:GetAppointmentReceptionsByPatientRequest>\r
         <upcoming>true</upcoming>
         <oms>${#TestCase#oms}</oms>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
      </v1:GetAppointmentReceptionsByPatientRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="8a0920b6-420c-42e0-a256-d3b664da6914" name="Вернулись appointments"><con:configuration><token>appointments</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="c4dd94f5-b57f-4f29-9437-5a2acb1933b3"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395212" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="92fbda63-92e9-471a-b5ef-4841046be778" name="Код ответа 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Посчитать записи и сравнить ответ" id="ea8ee280-01e3-4a22-985e-9871019b657c"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date
import groovy.sql.Sql

pathGetAppointmentReceptionsByPatient = testRunner.testCase.getPropertyValue("pathGetAppointmentReceptionsByPatient")
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query1="select response from template_response where \"path\"= '"+pathGetAppointmentReceptionsByPatient+"'"
def responseGetAppointmentReceptionsByPatient = sql.firstRow(query1).response


//получаем ответ из json
def saCountResponse = context.expand('${POST saCount#Response}')
def slurperJson = new JsonSlurper()
def saCount = slurperJson.parseText(saCountResponse)
def saCountNFO = saCount.payload

//получаем ответ из xml getAppointmentReceptionsByPatient
//def garbpSaResponse = context.expand('${getAppointmentReceptionsByPatient#Response}')
garbpSa = new XmlSlurper().parseText(responseGetAppointmentReceptionsByPatient)
garbpSaBody = garbpSa.Body.getAppointmentReceptionsByPatientResponse.appointment
garbpSaSize = garbpSa.Body.getAppointmentReceptionsByPatientResponse.appointment.size()

//Сравниваем количество
assert saCountNFO.activeAppointment.count == garbpSaSize
closeDateAppointmentCount = []

//Получаем все даты из ответа getAppointmentReceptionsByPatient
if (garbpSaSize != 0){
	for (i=0; i&lt;garbpSaSize; i++){
	dateParse = Date.parse("yyyy-MM-dd'T'hh:mm:ss+03:00", garbpSaBody[i].startTime.text())
	closeDateAppointmentCount &lt;&lt; dateParse
	}
}

//Выбираем минимальную дату и сравниваем с closeDate
if (closeDateAppointmentCount!=0){
	minCloseDate = Collections.min(closeDateAppointmentCount)
	Date datePlus7= LocalDateTime.now().plusDays(7).toDate()
	if(minCloseDate &lt;= datePlus7){
		closeDate = minCloseDate.format("yyyy-MM-dd")
		log.info closeDate
		assert closeDate == saCountNFO.activeAppointment.closeDate
	}
	else {
		assert saCountNFO.activeAppointment.closeDate == ""
	}
}</script></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>bd</con:name><con:value>2018-07-12</con:value></con:property><con:property><con:name>pathGetAppointmentReceptionsByPatient</con:name><con:value>/mock/395212/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395212/getReferralsInfo</con:value></con:property><con:property><con:name>pathGetAssignmentsInfo</con:name><con:value>/mock/395212/getAssignmentsInfo</con:value></con:property></con:properties></con:testCase><con:testCase id="18b41674-68d5-4573-af35-4c96f005c6bd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395213_ОС. Получение записей по пациенту >= 18 лет c активными записями" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить дату для записи" id="d43e874a-d1df-4851-aaa6-1887817c9302"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date
Date start = LocalDateTime.now().plusDays(0).toDate()
def startDate = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").format(start)
Date end = LocalDateTime.now().plusDays(7).toDate()
def endDate = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").format(end)
testRunner.testCase.setPropertyValue("startDate", startDate.toString())
testRunner.testCase.setPropertyValue("endDate", endDate.toString())</script></con:config></con:testStep><con:testStep type="request" name="Получить список ДР" id="3d046a4c-6bf8-4c50-97ae-ab0149a90585"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EmiasGibddAppointmentBinding</con:interface><con:operation>GetAvailableResourceScheduleInfo</con:operation><con:request name="Получить список ДР" id="2a69dd34-11e4-4b12-acfa-6bf509814b4f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasGibddEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">
<soap:Header>
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
  <wsse:UsernameToken>
   <wsse:Username>EIP</wsse:Username>
  </wsse:UsernameToken>
 </wsse:Security>
</soap:Header>
   <soap:Body>\r
      <v1:GetAvailableResourceScheduleInfoRequest>\r
         <lpuId>${#TestCase#lpu}</lpuId>\r
         <referenceId>${#TestCase#reference}</referenceId>\r
         <startDate>${#TestCase#startDate}</startDate>\r
         <endDate>${#TestCase#endDate}</endDate>\r
         <actual>true</actual>
      </v1:GetAvailableResourceScheduleInfoRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="c7b91197-0172-4d92-b5b6-ad2d378f6dc1" name="Вернулись слоты"><con:configuration><token>startTime</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="4ddb23d1-7c93-41fd-a814-2fa0b24b0f60" name="Код ответа 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Записать время" id="7f87283d-44f8-45f1-be6a-fce457e6ed46"><con:settings/><con:config><script>import groovy.xml.XmlSlurper

def response = context.expand('${Получить список ДР#Response}')
AR = new XmlSlurper().parseText(response)
startSlot = AR.Body.GetAvailableResourceScheduleInfoResponse.slot[1].startTime
endSlot = AR.Body.GetAvailableResourceScheduleInfoResponse.slot[1].endTime
arId = AR.Body.GetAvailableResourceScheduleInfoResponse.slot[1].arId
testRunner.testCase.setPropertyValue("arId", arId.toString())
testRunner.testCase.setPropertyValue("startSlot", startSlot.toString())
testRunner.testCase.setPropertyValue("endSlot", endSlot.toString())</script></con:config></con:testStep><con:testStep type="request" name="Создать запись ПИН" id="8f6752d5-dc34-4ae1-8682-e4f9217a9400"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EmiasGibddAppointmentBinding</con:interface><con:operation>CreateAppointment</con:operation><con:request name="Создать запись ПИН" id="11ad71d3-ff65-4cdc-a7d2-11b456be4fe5"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasGibddEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">
<soap:Header>
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
  <wsse:UsernameToken>
   <wsse:Username>EIP</wsse:Username>
  </wsse:UsernameToken>
 </wsse:Security>
</soap:Header>
   <soap:Body>\r
      <v1:CreateAppointmentRequest>\r
         <oms>${#TestCase#oms}</oms>\r
         <birthday>${#TestCase#bd}</birthday>\r
         <availableResourceId>${#TestCase#arId}</availableResourceId>\r
         <startDate>${#TestCase#startSlot}</startDate>\r
         <referenceId>${#TestCase#reference}</referenceId>\r
      </v1:CreateAppointmentRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="25b26a1d-0ace-425f-b2cb-a8a9202268d7"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Записать id" id="896e51a8-6eb0-450c-81f4-bd7d83b31ac5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>appointmentId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Создать запись ПИН</con:sourceStep><con:sourcePath>//id</con:sourcePath><con:targetType>appointmentId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="getAppointmentReceptionsByPatient" id="0ebeebf8-8c1e-4cde-bac8-cd33396c426a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatient" id="65a23d5b-a4ae-4697-a272-9ef34851f027"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>\r
      <v5:getAppointmentReceptionsByPatient>\r
         <omsNumber>${#TestCase#oms}</omsNumber>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
         <externalSystemId>EIM</externalSystemId>
         <signActiveArchive>0</signActiveArchive>\r
      </v5:getAppointmentReceptionsByPatient>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="bf956d8e-4240-49b0-98f5-4556c3be6cd1" name="Вернулся id"><con:configuration><token>id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAppointmentReceptionsByPatientGIBDD" id="5ec6f968-7f5c-45d2-b391-7cd0799c9806"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EmiasGibddAppointmentBinding</con:interface><con:operation>GetAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatientGIBDD" id="70f5beb2-b9e1-4ec6-9a77-b4bb6699ea87"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasGibddEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
<soap:Header>
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
  <wsse:UsernameToken>
   <wsse:Username>EIP</wsse:Username>
  </wsse:UsernameToken>
 </wsse:Security>
</soap:Header>
   <soap:Body>\r
      <v1:GetAppointmentReceptionsByPatientRequest>\r
         <upcoming>true</upcoming>
         <oms>${#TestCase#oms}</oms>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
      </v1:GetAppointmentReceptionsByPatientRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="8a0920b6-420c-42e0-a256-d3b664da6914" name="Вернулись appointments"><con:configuration><token>appointments</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="37d73db2-a1df-4d07-8645-a63fbc7353b6"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="92fbda63-92e9-471a-b5ef-4841046be778" name="Код ответа 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Посчитать записи и сравнить ответ" id="94ebeed2-6cd9-465f-9b52-3f3588d5cee7"><con:settings/><con:config><script><![CDATA[import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем ответ из json
def saCountResponse = context.expand('${POST saCount#Response}')
def slurperJson = new JsonSlurper()
def saCount = slurperJson.parseText(saCountResponse)
def saCountNFO = saCount.payload

//получаем ответ из xml getAppointmentReceptionsByPatient - saOrchestrator
def garbpSaResponse = context.expand('${getAppointmentReceptionsByPatient#Response}')
garbpSa = new XmlSlurper().parseText(garbpSaResponse)
garbpSaBody = garbpSa.Body.getAppointmentReceptionsByPatientResponse.appointment
garbpSaSize = garbpSa.Body.getAppointmentReceptionsByPatientResponse.appointment.size()

//получаем ответ из xml getAppointmentReceptionsByPatient - Gibdd
def garbpGibddResponse = context.expand('${getAppointmentReceptionsByPatientGIBDD#Response}')
garbpGibdd = new XmlSlurper().parseText(garbpGibddResponse)
garbpGibddSize = garbpGibdd.Body.GetAppointmentReceptionsByPatientResponse.appointments.size()
garbpGibddBody = garbpGibdd.Body.GetAppointmentReceptionsByPatientResponse.appointments

//Сравниваем количество
assert saCountNFO.activeAppointment.count == garbpSaSize + garbpGibddSize
closeDateAppointmentCount = []

//Получаем все даты из ответа getAppointmentReceptionsByPatient - saOrchestrator
if (garbpSaSize != 0){
	for (i=0; i<garbpSaSize; i++){
	dateParse = Date.parse("yyyy-MM-dd'T'hh:mm:ss+03:00", garbpSaBody[i].startTime.text())
	closeDateAppointmentCount << dateParse
	}
}

//Получаем все даты из ответа getAppointmentReceptionsByPatient - gibdd
if (garbpGibddSize != 0){
	for (i=0; i<garbpGibddSize; i++){
	dateParse = Date.parse("yyyy-MM-dd'T'hh:mm:ss", garbpGibddBody[i].startDate.text())
	closeDateAppointmentCount << dateParse
	}
}

//Выбираем минимальную дату и сравниваем с closeDate
if (closeDateAppointmentCount!=0){
	minCloseDate = Collections.min(closeDateAppointmentCount)
	Date datePlus7= LocalDateTime.now().plusDays(7).toDate()
	if(minCloseDate <= datePlus7){
		closeDate = minCloseDate.format("yyyy-MM-dd")
		assert closeDate == saCountNFO.activeAppointment.closeDate
	}
	else {
		assert saCountNFO.activeAppointment.closeDate == ""
	}
}]]></script></con:config></con:testStep><con:testStep type="request" name="Удалить запись" id="fbdb7d68-c646-4e18-b78c-38cc88a5b518"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EmiasGibddAppointmentBinding</con:interface><con:operation>CancelAppointment</con:operation><con:request name="Удалить запись" id="975d0e4f-e90b-4271-8f2b-b868df0a88e8"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasGibddEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">
<soap:Header>
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
  <wsse:UsernameToken>
   <wsse:Username>EIP</wsse:Username>
  </wsse:UsernameToken>
 </wsse:Security>
</soap:Header>
   <soap:Body>\r
      <v1:CancelAppointmentRequest>\r
         <appointmentId>${#TestCase#appointmentId}</appointmentId>\r
      </v1:CancelAppointmentRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="8741f052-98b1-44eb-ad12-b3874c25cc91" name="Запись успешно отменена"><con:configuration><token>Запись успешно отменена</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="9a1e23f1-e080-4401-b343-ccca0557e327" name="Код ответа 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7700007178231039</con:value></con:property><con:property><con:name>bd</con:name><con:value>1939-10-23</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>454239</con:value></con:property><con:property><con:name>startDate</con:name><con:value>2024-05-28T08:45:46</con:value></con:property><con:property><con:name>endDate</con:name><con:value>2024-06-04T08:45:46</con:value></con:property><con:property><con:name>reference</con:name><con:value>21</con:value></con:property><con:property><con:name>lpu</con:name><con:value>32</con:value></con:property><con:property><con:name>arId</con:name><con:value>5601</con:value></con:property><con:property><con:name>startSlot</con:name><con:value>2024-05-28T09:15:00</con:value></con:property><con:property><con:name>endSlot</con:name><con:value>2024-05-28T09:30:00</con:value></con:property></con:properties></con:testCase><con:testCase id="6b3dd6dc-8ff4-4509-82b7-d4d1f9261fee" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395214_ОС. Проверка необязательных параметров и корректности отбора записей для пациента = 17 лет" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="ae891e74-3eb0-41b6-855e-53c4dbc58749"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(1).toDate()
Date dateMinus =  LocalDateTime.now().plusDays(-1).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def dateTomorrow = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
def dateYesterday = new SimpleDateFormat("yyyy-MM-dd").format(dateMinus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("dateTomorrow", dateTomorrow)
testRunner.testCase.setPropertyValue("dateYesterday", dateYesterday)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAssignmentsInfo" id="6659cd03-7bbc-4451-821e-8b8339d3d483"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
log.info dateYesterday.getClass()
pathGetAssignmentsInfo = testRunner.testCase.getPropertyValue("pathGetAssignemtnsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAssignmentsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/">
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>1</id>
               <name>Взятие венозной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <appointmentId>391921600473</appointmentId>
            <registryEntry>
               <entryId>152043139</entryId>
               <laboratoryId>47</laboratoryId>
               <laboratoryName>Билирубин общий</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>J44.8</code>
                  <name>Другая уточненная хроническая обструктивная легочная болезнь</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>10000290</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentOpenDate>2025-01-01</appointmentOpenDate>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152035252</entryId>
               <laboratoryId>2726</laboratoryId>
               <laboratoryName>Обнаружение гельминтов в кале</laboratoryName>
               <biomaterialId>4</biomaterialId>
               <biomaterialName>Кал</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A04.5</code>
                  <name>Энтерит, вызванный Campylobacter</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>13024536040</jobExecutionId>
                  <fio>Мармеладова Софья Семёновна</fio>
                  <snils>44806166895</snils>
                  <specialityId>788</specialityId>
                  <specialityName>Медицинская сестра (медбрат) врача общей практики (семейного врача)</specialityName>
               </issuedDoctor>
            </registryEntry>
            <registryEntry>
               <entryId>152035251</entryId>
               <laboratoryId>2911</laboratoryId>
               <laboratoryName>Общий клинический анализ мочи</laboratoryName>
               <biomaterialId>3</biomaterialId>
               <biomaterialName>Моча</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A04.5</code>
                  <name>Энтерит, вызванный Campylobacter</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>13024536040</jobExecutionId>
                  <fio>Мармеладова Софья Семёновна</fio>
                  <snils>44806166895</snils>
                  <specialityId>788</specialityId>
                  <specialityName>Медицинская сестра (медбрат) врача общей практики (семейного врача)</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>2</id>
               <name>Взятие капиллярной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateYesterday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152040226</entryId>
               <laboratoryId>2909</laboratoryId>
               <laboratoryName>Общий клинический анализ крови (общий анализ + СОЭ); микроскопическое исследование мазка крови при выявлении патологии + подсчет ретикулоцитов</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A00.0</code>
                  <name>Холера, вызванная холерным вибрионом 01, биовар cholerae</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>11312193</jobExecutionId>
                  <fio>Бабенкова Лариса Борисовна</fio>
                  <snils>01558018738</snils>
                  <specialityId>602</specialityId>
                  <specialityName>Врач-терапевт участковый</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>6</id>
               <name>Биоматериал, взятый на приеме у специалиста</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateTomorrow+"""</dateFrom>
               <dateTo>"""+dateTomorrow+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152042975</entryId>
               <laboratoryId>2535</laboratoryId>
               <laboratoryName>Посев на коринебактерии дифтерии (Corynebacterium diphtheriae)</laboratoryName>
               <biomaterialId>26</biomaterialId>
               <biomaterialName>Мазок слизистой носа</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.1</code>
                  <name>Паратиф A</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>12039022543</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>1</specialityId>
                  <specialityName>Врач-терапевт</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>1</id>
               <name>Взятие венозной крови</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateYesterday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152025083</entryId>
               <laboratoryId>3009</laboratoryId>
               <laboratoryName>Билирубин и фракции (комплекс)</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.0</code>
                  <name>Брюшной тиф</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10005181</jobExecutionId>
                  <fio>Панова Ольга Альбертовна</fio>
                  <snils>01566726963</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>2</id>
               <name>Взятие капиллярной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>true</appointmentAvailable>
            <registryEntry>
               <entryId>152037414</entryId>
               <laboratoryId>3669</laboratoryId>
               <laboratoryName>Глюкоза (капиллярная кровь), дети</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A00.0</code>
                  <name>Холера, вызванная холерным вибрионом 01, биовар cholerae</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>120390225430001</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>11</specialityId>
                  <specialityName>Врач-гастроэнтеролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+dateTomorrow+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152043146</entryId>
               <laboratoryId>20</laboratoryId>
               <laboratoryName>Микроальбумин</laboratoryName>
               <biomaterialId>18</biomaterialId>
               <biomaterialName>Моча первая порция</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>I48.3</code>
                  <name>Типичная форма трепетания предсердий</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152043456</entryId>
               <laboratoryId>20</laboratoryId>
               <laboratoryName>Микроальбумин</laboratoryName>
               <biomaterialId>18</biomaterialId>
               <biomaterialName>Моча первая порция</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>I48.3</code>
                  <name>Типичная форма трепетания предсердий</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>6</id>
               <name>Биоматериал, взятый на приеме у специалиста</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateTomorrow+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152042485</entryId>
               <laboratoryId>2535</laboratoryId>
               <laboratoryName>Посев на коринебактерии дифтерии (Corynebacterium diphtheriae)</laboratoryName>
               <biomaterialId>26</biomaterialId>
               <biomaterialName>Мазок слизистой носа</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.1</code>
                  <name>Паратиф A</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>12039022543</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>1</specialityId>
                  <specialityName>Врач-терапевт</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>6</id>
               <name>Биоматериал, взятый на приеме у специалиста</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentOpenDate>2025-01-01</appointmentOpenDate>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152042675</entryId>
               <laboratoryId>2535</laboratoryId>
               <laboratoryName>Посев на коринебактерии дифтерии (Corynebacterium diphtheriae)</laboratoryName>
               <biomaterialId>26</biomaterialId>
               <biomaterialName>Мазок слизистой носа</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.1</code>
                  <name>Паратиф A</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>12039022543</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>1</specialityId>
                  <specialityName>Врач-терапевт</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
      </ns2:getAssignmentsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAssignmentsInfo="update template_response set response='"+getAssignmentsInfoResponse+"' where \"path\"= '"+pathGetAssignmentsInfo+"'"
sql.execute(queryGetAssignmentsInfo)]]></script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getReferralsInfo" id="5b3e7957-8204-4536-994e-38928ddb784b"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathGetReferralsInfo = testRunner.testCase.getPropertyValue("pathGetReferralsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getReferralsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74404724464</id>
            <number>Н20230424-351</number>
            <comment>Постановка диагноза;</comment>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateToday+"""</endTime>
            <type>REF_TO_LDP</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toLdp>
               <ldpTypeId>600020</ldpTypeId>
               <ldpTypeName>ЭКГ</ldpTypeName>
               <countAssignmentProcedures>1</countAssignmentProcedures>
            </toLdp>
            <diagnosis>
               <code>A01.0</code>
               <name>Брюшной тиф</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>11354096</jobExecutionId>
               <fio>Габдулина Альбина Яковлевна</fio>
               <snils>07126017324</snils>
               <specialityId>602</specialityId>
               <specialityName>Врач-терапевт участковый</specialityName>
            </issuedDoctor>
            <appointmentOpenDate>2025-01-01</appointmentOpenDate>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74416336689</id>
            <number>Н20230627-69</number>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateYesterday+"""</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>10478903</lpuId>
            <lpuType>Городская больница</lpuType>
            <lpuName>ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</lpuName>
            <toDoctor>
               <specialityId>72</specialityId>
               <specialityName>Акушер(-ка)</specialityName>
               <receptionTypeId>1942</receptionTypeId>
            </toDoctor>
            <diagnosis>
               <code>Z00.0</code>
               <name>Общий медицинский осмотр</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>190589687</jobExecutionId>
               <fio>Багаева Татьяна Вячеславовна</fio>
               <snils>09544242983</snils>
               <specialityId>4</specialityId>
               <specialityName>Врач-акушер-гинеколог</specialityName>
            </issuedDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74395753664</id>
            <number>Н20230302-199</number>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateToday+"""</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>70</specialityId>
               <specialityName>Медицинская сестра (медбрат)</specialityName>
               <receptionTypeId>777</receptionTypeId>
            </toDoctor>
            <diagnosis>
               <code>Z00.0</code>
               <name>Общий медицинский осмотр</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>10005163</jobExecutionId>
               <fio>Мишеева Вера Анатольевна</fio>
               <snils>01717644647</snils>
               <specialityId>602</specialityId>
               <specialityName>Врач-терапевт участковый</specialityName>
            </issuedDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetReferralsInfo="update template_response set response='"+getReferralsInfoResponse+"' where \"path\"= '"+pathGetReferralsInfo+"'"
sql.execute(queryGetReferralsInfo)]]></script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentSaOrchestrator" id="3bf5ec16-b5cc-41a0-84b5-05d1a53d04fb"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathSaAppointment = testRunner.testCase.getPropertyValue("pathSaAppointment")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391921178173</id>
            <number>И20230926-111</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+dateToday+"""T18:30:00+03:00</startTime>
            <endTime>"""+dateToday+"""T19:00:00+03:00</endTime>
            <type>LDP</type>
            <enableCancel>true</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20455900839</availableResourceId>
            <complexResourceId>240926738</complexResourceId>
            <roomId>30510573</roomId>
            <roomNumber>1602</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toLdp>
               <ldpTypeId>51501</ldpTypeId>
               <ldpTypeName>Удаление каловых камней, инородных тел прямой кишки</ldpTypeName>
            </toLdp>
            <statusId>10</statusId>
            <referral>
               <referralId>74431024939</referralId>
               <startTime>2023-09-26</startTime>
               <endTime>2024-10-25</endTime>
               <lpuId>204</lpuId>
            </referral>
         </appointment>
         <appointment>
            <id>391921177148</id>
            <number>И20230926-110</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+dateTomorrow+"""T18:30:00+03:00</startTime>
            <endTime>"""+dateTomorrow+"""T19:00:00+03:00</endTime>
            <type>LDP</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20455900839</availableResourceId>
            <complexResourceId>240926738</complexResourceId>
            <roomId>30510573</roomId>
            <roomNumber>1602</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toLdp>
               <ldpTypeId>51501</ldpTypeId>
               <ldpTypeName>Удаление каловых камней, инородных тел прямой кишки</ldpTypeName>
            </toLdp>
            <statusId>10</statusId>
            <referral>
               <referralId>74431024939</referralId>
               <startTime>2023-09-26</startTime>
               <endTime>2024-10-25</endTime>
               <lpuId>204</lpuId>
            </referral>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointment="update template_response set response='"+getAppointmentResponse+"' where \"path\"= '"+pathSaAppointment+"'"
sql.execute(queryGetAppointment)]]></script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentGibdd" id="7944be30-d33f-4603-bdde-126b5f3befd6"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathGibddAppointment = testRunner.testCase.getPropertyValue("pathGibddAppointment")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:GetAppointmentReceptionsByPatientResponse xmlns:ns2="http://emias2.gov.ru/emias/appointment/v1/" xmlns:ns3="http://emias2.gov.ru/universal/v1/types/exceptions/" xmlns:ns4="http://emias2.gov.ru/emias/appointment/v1/types/" xmlns:ns5="http://emias2.gov.ru/emias/gibdd/v1/types/">
         <appointments>
            <ns4:id>452159</ns4:id>
            <ns4:patient>
               <ns4:birthday>1989-01-24T00:00:00</ns4:birthday>
               <ns4:oms>7758010875002485</ns4:oms>
               <ns4:mobilePhone>9859095400</ns4:mobilePhone>
            </ns4:patient>
            <ns4:appointmentNum>СП20230928-13</ns4:appointmentNum>
            <ns4:startDate>"""+dateToday+"""T18:30:00</ns4:startDate>
            <ns4:endDate>"""+dateToday+"""T18:45:00</ns4:endDate>
            <ns4:actual>true</ns4:actual>
            <ns4:availableResource>
               <ns4:availableResourceId>5486</ns4:availableResourceId>
               <ns4:availableResourceTitle>Алипова Ольга Андреевна</ns4:availableResourceTitle>
               <ns4:roomCode></ns4:roomCode>
            </ns4:availableResource>
            <ns4:lpu>
               <ns5:id>1</ns5:id>
               <ns5:name>ГБУЗ г. Москвы "Городская поликлиника № 180 ДЗМ"</ns5:name>
               <ns5:shortName>ГБУ ГП 180 ДЗМ</ns5:shortName>
               <ns5:lpuAddress>г. Москва, Уваровский переулок, д.4</ns5:lpuAddress>
               <ns5:moId>145</ns5:moId>
            </ns4:lpu>
            <ns4:referenceType>
               <ns4:referenceTypeId>21</ns4:referenceTypeId>
               <ns4:referenceTypeName>Справка на Оружие</ns4:referenceTypeName>
            </ns4:referenceType>
            <ns4:createDate>2023-09-28T15:58:29.849</ns4:createDate>
         </appointments>
         <appointments>
            <ns4:id>452159</ns4:id>
            <ns4:patient>
               <ns4:birthday>1989-01-24T00:00:00</ns4:birthday>
               <ns4:oms>7758010875002485</ns4:oms>
               <ns4:mobilePhone>9859095400</ns4:mobilePhone>
            </ns4:patient>
            <ns4:appointmentNum>СП20230928-13</ns4:appointmentNum>
            <ns4:startDate>"""+dateTomorrow+"""T18:30:00</ns4:startDate>
            <ns4:endDate>"""+dateTomorrow+"""T18:45:00</ns4:endDate>
            <ns4:actual>true</ns4:actual>
            <ns4:availableResource>
               <ns4:availableResourceId>5486</ns4:availableResourceId>
               <ns4:availableResourceTitle>Алипова Ольга Андреевна</ns4:availableResourceTitle>
               <ns4:roomCode></ns4:roomCode>
            </ns4:availableResource>
            <ns4:lpu>
               <ns5:id>1</ns5:id>
               <ns5:name>ГБУЗ г. Москвы "Городская поликлиника № 180 ДЗМ"</ns5:name>
               <ns5:shortName>ГБУ ГП 180 ДЗМ</ns5:shortName>
               <ns5:lpuAddress>г. Москва, Уваровский переулок, д.4</ns5:lpuAddress>
               <ns5:moId>145</ns5:moId>
            </ns4:lpu>
            <ns4:referenceType>
               <ns4:referenceTypeId>21</ns4:referenceTypeId>
               <ns4:referenceTypeName>Справка на Оружие</ns4:referenceTypeName>
            </ns4:referenceType>
            <ns4:createDate>2023-09-28T15:58:29.849</ns4:createDate>
         </appointments>
      </ns2:GetAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointment="update template_response set response='"+getAppointmentResponse+"' where \"path\"= '"+pathGibddAppointment+"'"
sql.execute(queryGetAppointment)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="e9083792-0c5a-47f3-8e80-23bca7c981e9"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395214_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395214"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDateAppointment = текущая дата"><con:configuration><path>$.payload.activeAppointment.closeDate</path><content>${#TestCase#dateToday}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countAppointment = 2"><con:configuration><path>$.payload.activeAppointment.count</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countReferrals = 6"><con:configuration><path>$.payload.activeReferrals.count</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDateReferrals = текущая дата"><con:configuration><path>$.payload.activeReferrals.closeDate</path><content>${#TestCase#dateToday}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="closeCountReferrals = 4"><con:configuration><path>$.payload.activeReferrals.closeCount</path><content>4</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7790689773000533</con:value></con:property><con:property><con:name>bd</con:name><con:value>2013-09-26</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-05-29</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-05-27</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395214/getAssignmentsInfo</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395214/getReferralsInfo</con:value></con:property><con:property><con:name>pathSaAppointment</con:name><con:value>/mock/395214/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGibddAppointment</con:name><con:value>/mock/395214_1/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-28</con:value></con:property></con:properties></con:testCase><con:testCase id="919aae6a-be62-4f38-a4ec-e61182adc500" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395215_ОС. Проверка необязательных параметров и корректности отбора записей для пациента = 18 лет" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="98fa4c21-67b7-4dc9-8373-ebb6d68cd9c4"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(1).toDate()
Date dateMinus =  LocalDateTime.now().plusDays(-1).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def dateTomorrow = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
def dateYesterday = new SimpleDateFormat("yyyy-MM-dd").format(dateMinus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("dateTomorrow", dateTomorrow)
testRunner.testCase.setPropertyValue("dateYesterday", dateYesterday)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAssignmentsInfo" id="87aba368-eb31-44e0-a8fe-f47e8c61601a"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
log.info dateYesterday.getClass()
pathGetAssignmentsInfo = testRunner.testCase.getPropertyValue("pathGetAssignemtnsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAssignmentsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/">
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>1</id>
               <name>Взятие венозной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <appointmentId>391921600473</appointmentId>
            <registryEntry>
               <entryId>152043139</entryId>
               <laboratoryId>47</laboratoryId>
               <laboratoryName>Билирубин общий</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>J44.8</code>
                  <name>Другая уточненная хроническая обструктивная легочная болезнь</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>10000290</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentOpenDate>2025-01-01</appointmentOpenDate>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152035252</entryId>
               <laboratoryId>2726</laboratoryId>
               <laboratoryName>Обнаружение гельминтов в кале</laboratoryName>
               <biomaterialId>4</biomaterialId>
               <biomaterialName>Кал</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A04.5</code>
                  <name>Энтерит, вызванный Campylobacter</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>13024536040</jobExecutionId>
                  <fio>Мармеладова Софья Семёновна</fio>
                  <snils>44806166895</snils>
                  <specialityId>788</specialityId>
                  <specialityName>Медицинская сестра (медбрат) врача общей практики (семейного врача)</specialityName>
               </issuedDoctor>
            </registryEntry>
            <registryEntry>
               <entryId>152035251</entryId>
               <laboratoryId>2911</laboratoryId>
               <laboratoryName>Общий клинический анализ мочи</laboratoryName>
               <biomaterialId>3</biomaterialId>
               <biomaterialName>Моча</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A04.5</code>
                  <name>Энтерит, вызванный Campylobacter</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>13024536040</jobExecutionId>
                  <fio>Мармеладова Софья Семёновна</fio>
                  <snils>44806166895</snils>
                  <specialityId>788</specialityId>
                  <specialityName>Медицинская сестра (медбрат) врача общей практики (семейного врача)</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>2</id>
               <name>Взятие капиллярной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateYesterday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152040226</entryId>
               <laboratoryId>2909</laboratoryId>
               <laboratoryName>Общий клинический анализ крови (общий анализ + СОЭ); микроскопическое исследование мазка крови при выявлении патологии + подсчет ретикулоцитов</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A00.0</code>
                  <name>Холера, вызванная холерным вибрионом 01, биовар cholerae</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>11312193</jobExecutionId>
                  <fio>Бабенкова Лариса Борисовна</fio>
                  <snils>01558018738</snils>
                  <specialityId>602</specialityId>
                  <specialityName>Врач-терапевт участковый</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>6</id>
               <name>Биоматериал, взятый на приеме у специалиста</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateTomorrow+"""</dateFrom>
               <dateTo>"""+dateTomorrow+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152042975</entryId>
               <laboratoryId>2535</laboratoryId>
               <laboratoryName>Посев на коринебактерии дифтерии (Corynebacterium diphtheriae)</laboratoryName>
               <biomaterialId>26</biomaterialId>
               <biomaterialName>Мазок слизистой носа</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.1</code>
                  <name>Паратиф A</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>12039022543</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>1</specialityId>
                  <specialityName>Врач-терапевт</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>1</id>
               <name>Взятие венозной крови</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateYesterday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152025083</entryId>
               <laboratoryId>3009</laboratoryId>
               <laboratoryName>Билирубин и фракции (комплекс)</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.0</code>
                  <name>Брюшной тиф</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10005181</jobExecutionId>
                  <fio>Панова Ольга Альбертовна</fio>
                  <snils>01566726963</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>2</id>
               <name>Взятие капиллярной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>true</appointmentAvailable>
            <registryEntry>
               <entryId>152037414</entryId>
               <laboratoryId>3669</laboratoryId>
               <laboratoryName>Глюкоза (капиллярная кровь), дети</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A00.0</code>
                  <name>Холера, вызванная холерным вибрионом 01, биовар cholerae</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>120390225430001</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>11</specialityId>
                  <specialityName>Врач-гастроэнтеролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+dateTomorrow+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152043146</entryId>
               <laboratoryId>20</laboratoryId>
               <laboratoryName>Микроальбумин</laboratoryName>
               <biomaterialId>18</biomaterialId>
               <biomaterialName>Моча первая порция</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>I48.3</code>
                  <name>Типичная форма трепетания предсердий</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152043456</entryId>
               <laboratoryId>20</laboratoryId>
               <laboratoryName>Микроальбумин</laboratoryName>
               <biomaterialId>18</biomaterialId>
               <biomaterialName>Моча первая порция</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>I48.3</code>
                  <name>Типичная форма трепетания предсердий</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>6</id>
               <name>Биоматериал, взятый на приеме у специалиста</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateTomorrow+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152042485</entryId>
               <laboratoryId>2535</laboratoryId>
               <laboratoryName>Посев на коринебактерии дифтерии (Corynebacterium diphtheriae)</laboratoryName>
               <biomaterialId>26</biomaterialId>
               <biomaterialName>Мазок слизистой носа</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.1</code>
                  <name>Паратиф A</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>12039022543</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>1</specialityId>
                  <specialityName>Врач-терапевт</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>6</id>
               <name>Биоматериал, взятый на приеме у специалиста</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentOpenDate>2025-01-01</appointmentOpenDate>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152042675</entryId>
               <laboratoryId>2535</laboratoryId>
               <laboratoryName>Посев на коринебактерии дифтерии (Corynebacterium diphtheriae)</laboratoryName>
               <biomaterialId>26</biomaterialId>
               <biomaterialName>Мазок слизистой носа</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.1</code>
                  <name>Паратиф A</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>12039022543</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>1</specialityId>
                  <specialityName>Врач-терапевт</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
      </ns2:getAssignmentsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAssignmentsInfo="update template_response set response='"+getAssignmentsInfoResponse+"' where \"path\"= '"+pathGetAssignmentsInfo+"'"
sql.execute(queryGetAssignmentsInfo)]]></script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getReferralsInfo" id="8ea9c5f4-dbb7-46ac-94c3-3bd53d37864b"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathGetReferralsInfo = testRunner.testCase.getPropertyValue("pathGetReferralsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getReferralsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74404724464</id>
            <number>Н20230424-351</number>
            <comment>Постановка диагноза;</comment>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateToday+"""</endTime>
            <type>REF_TO_LDP</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toLdp>
               <ldpTypeId>600020</ldpTypeId>
               <ldpTypeName>ЭКГ</ldpTypeName>
               <countAssignmentProcedures>1</countAssignmentProcedures>
            </toLdp>
            <diagnosis>
               <code>A01.0</code>
               <name>Брюшной тиф</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>11354096</jobExecutionId>
               <fio>Габдулина Альбина Яковлевна</fio>
               <snils>07126017324</snils>
               <specialityId>602</specialityId>
               <specialityName>Врач-терапевт участковый</specialityName>
            </issuedDoctor>
            <appointmentOpenDate>2025-01-01</appointmentOpenDate>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74416336689</id>
            <number>Н20230627-69</number>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateYesterday+"""</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>10478903</lpuId>
            <lpuType>Городская больница</lpuType>
            <lpuName>ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</lpuName>
            <toDoctor>
               <specialityId>72</specialityId>
               <specialityName>Акушер(-ка)</specialityName>
               <receptionTypeId>1942</receptionTypeId>
            </toDoctor>
            <diagnosis>
               <code>Z00.0</code>
               <name>Общий медицинский осмотр</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>190589687</jobExecutionId>
               <fio>Багаева Татьяна Вячеславовна</fio>
               <snils>09544242983</snils>
               <specialityId>4</specialityId>
               <specialityName>Врач-акушер-гинеколог</specialityName>
            </issuedDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74395753664</id>
            <number>Н20230302-199</number>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateToday+"""</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>70</specialityId>
               <specialityName>Медицинская сестра (медбрат)</specialityName>
               <receptionTypeId>777</receptionTypeId>
            </toDoctor>
            <diagnosis>
               <code>Z00.0</code>
               <name>Общий медицинский осмотр</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>10005163</jobExecutionId>
               <fio>Мишеева Вера Анатольевна</fio>
               <snils>01717644647</snils>
               <specialityId>602</specialityId>
               <specialityName>Врач-терапевт участковый</specialityName>
            </issuedDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetReferralsInfo="update template_response set response='"+getReferralsInfoResponse+"' where \"path\"= '"+pathGetReferralsInfo+"'"
sql.execute(queryGetReferralsInfo)]]></script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentSaOrchestrator" id="7ad5ddd0-3894-4108-a163-9e3c6464c9b2"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathSaAppointment = testRunner.testCase.getPropertyValue("pathSaAppointment")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391921177148</id>
            <number>И20230926-110</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+dateTomorrow+"""T18:30:00+03:00</startTime>
            <endTime>"""+dateTomorrow+"""T19:00:00+03:00</endTime>
            <type>LDP</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20455900839</availableResourceId>
            <complexResourceId>240926738</complexResourceId>
            <roomId>30510573</roomId>
            <roomNumber>1602</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toLdp>
               <ldpTypeId>51501</ldpTypeId>
               <ldpTypeName>Удаление каловых камней, инородных тел прямой кишки</ldpTypeName>
            </toLdp>
            <statusId>10</statusId>
            <referral>
               <referralId>74431024939</referralId>
               <startTime>2023-09-26</startTime>
               <endTime>2024-10-25</endTime>
               <lpuId>204</lpuId>
            </referral>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointment="update template_response set response='"+getAppointmentResponse+"' where \"path\"= '"+pathSaAppointment+"'"
sql.execute(queryGetAppointment)]]></script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentGibdd" id="d8c6c976-a2b3-4116-9582-6ecb5dedc6e1"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathGibddAppointment = testRunner.testCase.getPropertyValue("pathGibddAppointment")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:GetAppointmentReceptionsByPatientResponse xmlns:ns2="http://emias2.gov.ru/emias/appointment/v1/" xmlns:ns3="http://emias2.gov.ru/universal/v1/types/exceptions/" xmlns:ns4="http://emias2.gov.ru/emias/appointment/v1/types/" xmlns:ns5="http://emias2.gov.ru/emias/gibdd/v1/types/">
         <appointments>
            <ns4:id>452159</ns4:id>
            <ns4:patient>
               <ns4:birthday>1989-01-24T00:00:00</ns4:birthday>
               <ns4:oms>7758010875002485</ns4:oms>
               <ns4:mobilePhone>9859095400</ns4:mobilePhone>
            </ns4:patient>
            <ns4:appointmentNum>СП20230928-13</ns4:appointmentNum>
            <ns4:startDate>"""+dateToday+"""T18:30:00</ns4:startDate>
            <ns4:endDate>"""+dateToday+"""T18:45:00</ns4:endDate>
            <ns4:actual>true</ns4:actual>
            <ns4:availableResource>
               <ns4:availableResourceId>5486</ns4:availableResourceId>
               <ns4:availableResourceTitle>Алипова Ольга Андреевна</ns4:availableResourceTitle>
               <ns4:roomCode></ns4:roomCode>
            </ns4:availableResource>
            <ns4:lpu>
               <ns5:id>1</ns5:id>
               <ns5:name>ГБУЗ г. Москвы "Городская поликлиника № 180 ДЗМ"</ns5:name>
               <ns5:shortName>ГБУ ГП 180 ДЗМ</ns5:shortName>
               <ns5:lpuAddress>г. Москва, Уваровский переулок, д.4</ns5:lpuAddress>
               <ns5:moId>145</ns5:moId>
            </ns4:lpu>
            <ns4:referenceType>
               <ns4:referenceTypeId>21</ns4:referenceTypeId>
               <ns4:referenceTypeName>Справка на Оружие</ns4:referenceTypeName>
            </ns4:referenceType>
            <ns4:createDate>2023-09-28T15:58:29.849</ns4:createDate>
         </appointments>
         <appointments>
            <ns4:id>452159</ns4:id>
            <ns4:patient>
               <ns4:birthday>1989-01-24T00:00:00</ns4:birthday>
               <ns4:oms>7758010875002485</ns4:oms>
               <ns4:mobilePhone>9859095400</ns4:mobilePhone>
            </ns4:patient>
            <ns4:appointmentNum>СП20230928-13</ns4:appointmentNum>
            <ns4:startDate>"""+dateTomorrow+"""T18:30:00</ns4:startDate>
            <ns4:endDate>"""+dateTomorrow+"""T18:45:00</ns4:endDate>
            <ns4:actual>true</ns4:actual>
            <ns4:availableResource>
               <ns4:availableResourceId>5486</ns4:availableResourceId>
               <ns4:availableResourceTitle>Алипова Ольга Андреевна</ns4:availableResourceTitle>
               <ns4:roomCode></ns4:roomCode>
            </ns4:availableResource>
            <ns4:lpu>
               <ns5:id>1</ns5:id>
               <ns5:name>ГБУЗ г. Москвы "Городская поликлиника № 180 ДЗМ"</ns5:name>
               <ns5:shortName>ГБУ ГП 180 ДЗМ</ns5:shortName>
               <ns5:lpuAddress>г. Москва, Уваровский переулок, д.4</ns5:lpuAddress>
               <ns5:moId>145</ns5:moId>
            </ns4:lpu>
            <ns4:referenceType>
               <ns4:referenceTypeId>21</ns4:referenceTypeId>
               <ns4:referenceTypeName>Справка на Оружие</ns4:referenceTypeName>
            </ns4:referenceType>
            <ns4:createDate>2023-09-28T15:58:29.849</ns4:createDate>
         </appointments>
      </ns2:GetAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointment="update template_response set response='"+getAppointmentResponse+"' where \"path\"= '"+pathGibddAppointment+"'"
sql.execute(queryGetAppointment)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="3f477a9a-98b8-4aee-bbff-e7fa8fdd36ff"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395215_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395215"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDateAppointment = текущая дата"><con:configuration><path>$.payload.activeAppointment.closeDate</path><content>${#TestCase#dateToday}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countAppointment = 2"><con:configuration><path>$.payload.activeAppointment.count</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countReferrals = 6"><con:configuration><path>$.payload.activeReferrals.count</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDateReferrals = текущая дата"><con:configuration><path>$.payload.activeReferrals.closeDate</path><content>${#TestCase#dateToday}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="closeCountReferrals = 4"><con:configuration><path>$.payload.activeReferrals.closeCount</path><content>4</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>0000000000044446</con:value></con:property><con:property><con:name>bd</con:name><con:value>2005-01-18</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-05-29</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-05-27</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395215/getAssignmentsInfo</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395215/getReferralsInfo</con:value></con:property><con:property><con:name>pathSaAppointment</con:name><con:value>/mock/395215/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGibddAppointment</con:name><con:value>/mock/395215_1/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-28</con:value></con:property></con:properties></con:testCase><con:testCase id="ab60f1fb-d598-4527-be90-9377a53528d7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395218_ОС. Проверка отбора assignment.closeDate по дате отличной от текущей на 7 дней" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="ebce3f1f-4159-4f8a-aecb-26f2da2babbf"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(7).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def closeDate = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("closeDate", closeDate)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAssignmentsInfo" id="c5b360fd-116d-4faf-a0d9-d8fa17250560"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
closeDate = testRunner.testCase.getPropertyValue("closeDate")
pathGetAssignmentsInfo = testRunner.testCase.getPropertyValue("pathGetAssignemtnsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAssignmentsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/">
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>1</id>
               <name>Взятие венозной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+closeDate+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152043139</entryId>
               <laboratoryId>47</laboratoryId>
               <laboratoryName>Билирубин общий</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>J44.8</code>
                  <name>Другая уточненная хроническая обструктивная легочная болезнь</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
      </ns2:getAssignmentsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAssignmentsInfo="update template_response set response='"+getAssignmentsInfoResponse+"' where \"path\"= '"+pathGetAssignmentsInfo+"'"
sql.execute(queryGetAssignmentsInfo)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="a32fd4d6-9b22-45f1-a1ba-76ab1f8bcc88"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395218"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countReferrals = 1"><con:configuration><path>$.payload.activeReferrals.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDateReferrals = текущая дата + 7 дней"><con:configuration><path>$.payload.activeReferrals.closeDate</path><content>${#TestCase#closeDate}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="closeCountReferrals = 1"><con:configuration><path>$.payload.activeReferrals.closeCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>0000000000044446</con:value></con:property><con:property><con:name>bd</con:name><con:value>2005-01-18</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-03-01</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-02-28</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395218/getAssignmentsInfo</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395218/getReferralsInfo</con:value></con:property><con:property><con:name>pathSaAppointment</con:name><con:value>/mock/395218/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGibddAppointment</con:name><con:value>/mock/395215_1/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-28</con:value></con:property><con:property><con:name>closeDate</con:name><con:value>2024-06-04</con:value></con:property></con:properties></con:testCase><con:testCase id="1a2d79be-eec0-47d2-8614-eab779b85d13" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395219_ОС. Проверка отбора assignment.closeDate по дате отличной от текущей на 8 дней" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="3185ce0b-b6d4-4c14-b01e-13f21986e7c5"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(8).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def closeDate = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("closeDate", closeDate)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAssignmentsInfo" id="8613bca9-93c3-4806-8986-0e22061cfa8c"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
closeDate = testRunner.testCase.getPropertyValue("closeDate")
pathGetAssignmentsInfo = testRunner.testCase.getPropertyValue("pathGetAssignemtnsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAssignmentsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/">
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>1</id>
               <name>Взятие венозной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+closeDate+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152043139</entryId>
               <laboratoryId>47</laboratoryId>
               <laboratoryName>Билирубин общий</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>J44.8</code>
                  <name>Другая уточненная хроническая обструктивная легочная болезнь</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
      </ns2:getAssignmentsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAssignmentsInfo="update template_response set response='"+getAssignmentsInfoResponse+"' where \"path\"= '"+pathGetAssignmentsInfo+"'"
sql.execute(queryGetAssignmentsInfo)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="5cf0caef-9ade-41d8-af66-9027da42ab0b"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395218"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countReferrals = 1"><con:configuration><path>$.payload.activeReferrals.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="36c2244b-81b5-4d75-85ea-89b155b69872" name="Отсутствует closeDateReferrals"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="fcb9fb25-3fbc-43da-a937-ec15ddbe2d94" name="Отсутствует closeCountReferrals"><con:configuration><token>closeCount</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>0000000000044446</con:value></con:property><con:property><con:name>bd</con:name><con:value>2005-01-18</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-03-01</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-02-28</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395218/getAssignmentsInfo</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395218/getReferralsInfo</con:value></con:property><con:property><con:name>pathSaAppointment</con:name><con:value>/mock/395218/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGibddAppointment</con:name><con:value>/mock/395215_1/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-28</con:value></con:property><con:property><con:name>closeDate</con:name><con:value>2024-06-05</con:value></con:property></con:properties></con:testCase><con:testCase id="757443d8-62d5-456b-ac7c-d82b6d85372a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395220_ОС. Проверка отбора appointment.closeDate по дате отличной от текущей на 7 дней" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="bb5bcbef-2d83-4828-b4e1-bca289ff9c18"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(7).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def closeDate = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("closeDate", closeDate)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentGibdd" id="37d9fb75-da10-49cd-ac24-aea814076c84"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
closeDate = testRunner.testCase.getPropertyValue("closeDate")
pathGibddAppointment = testRunner.testCase.getPropertyValue("pathGibddAppointment")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:GetAppointmentReceptionsByPatientResponse xmlns:ns2="http://emias2.gov.ru/emias/appointment/v1/" xmlns:ns3="http://emias2.gov.ru/universal/v1/types/exceptions/" xmlns:ns4="http://emias2.gov.ru/emias/appointment/v1/types/" xmlns:ns5="http://emias2.gov.ru/emias/gibdd/v1/types/">
         <appointments>
            <ns4:id>453853</ns4:id>
            <ns4:patient>
               <ns4:birthday>1989-01-24T00:00:00</ns4:birthday>
               <ns4:oms>7758010875002485</ns4:oms>
               <ns4:mobilePhone>9859095400</ns4:mobilePhone>
            </ns4:patient>
            <ns4:appointmentNum>СП20240226-4</ns4:appointmentNum>
            <ns4:startDate>"""+closeDate+"""T18:45:00</ns4:startDate>
            <ns4:endDate>"""+closeDate+"""T19:00:00</ns4:endDate>
            <ns4:actual>true</ns4:actual>
            <ns4:availableResource>
               <ns4:availableResourceId>5601</ns4:availableResourceId>
               <ns4:availableResourceTitle>Аверочкина Ирина Ивановна</ns4:availableResourceTitle>
               <ns4:roomCode>404</ns4:roomCode>
            </ns4:availableResource>
            <ns4:lpu>
               <ns5:id>32</ns5:id>
               <ns5:name>ГБУЗ г. Москвы "Городская поликлиника № 219 ДЗМ"</ns5:name>
               <ns5:shortName>ГБУЗ ГП 219 ДЗМ</ns5:shortName>
               <ns5:lpuAddress>г. Москва, бульвар Яна Райниса, д. 47</ns5:lpuAddress>
               <ns5:moId>10000370</ns5:moId>
            </ns4:lpu>
            <ns4:referenceType>
               <ns4:referenceTypeId>21</ns4:referenceTypeId>
               <ns4:referenceTypeName>Справка на Оружие</ns4:referenceTypeName>
            </ns4:referenceType>
            <ns4:createDate>2024-02-26T16:27:08.578</ns4:createDate>
         </appointments>
      </ns2:GetAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointment="update template_response set response='"+getAppointmentResponse+"' where \"path\"= '"+pathGibddAppointment+"'"
sql.execute(queryGetAppointment)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="846327d2-e7f2-4baa-a31e-bdebf7e9f7f9"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395220"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDateAppointment = текущая дата + 7 lytq"><con:configuration><path>$.payload.activeAppointment.closeDate</path><content>${#TestCase#closeDate}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countAppointment = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>0000000000044446</con:value></con:property><con:property><con:name>bd</con:name><con:value>2005-01-18</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-03-01</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-02-28</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395215/getAssignmentsInfo</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395215/getReferralsInfo</con:value></con:property><con:property><con:name>pathSaAppointment</con:name><con:value>/mock/395215/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGibddAppointment</con:name><con:value>/mock/395220/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-28</con:value></con:property><con:property><con:name>closeDate</con:name><con:value>2024-06-04</con:value></con:property></con:properties></con:testCase><con:testCase id="6b8499bb-1b88-4f3c-b66a-04fa29ba6c2e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395221_ОС. Проверка отбора appointment.closeDate по дате отличной от текущей на 8 дней" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="ec263655-7ee0-4a39-a3d1-d17fa92e037f"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(8).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def closeDate = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("closeDate", closeDate)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentGibdd" id="9c13fb37-8a6b-44b2-b1d6-dc4f72d9f753"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
closeDate = testRunner.testCase.getPropertyValue("closeDate")
pathGibddAppointment = testRunner.testCase.getPropertyValue("pathGibddAppointment")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:GetAppointmentReceptionsByPatientResponse xmlns:ns2="http://emias2.gov.ru/emias/appointment/v1/" xmlns:ns3="http://emias2.gov.ru/universal/v1/types/exceptions/" xmlns:ns4="http://emias2.gov.ru/emias/appointment/v1/types/" xmlns:ns5="http://emias2.gov.ru/emias/gibdd/v1/types/">
         <appointments>
            <ns4:id>453853</ns4:id>
            <ns4:patient>
               <ns4:birthday>1989-01-24T00:00:00</ns4:birthday>
               <ns4:oms>7758010875002485</ns4:oms>
               <ns4:mobilePhone>9859095400</ns4:mobilePhone>
            </ns4:patient>
            <ns4:appointmentNum>СП20240226-4</ns4:appointmentNum>
            <ns4:startDate>"""+closeDate+"""T18:45:00</ns4:startDate>
            <ns4:endDate>"""+closeDate+"""T19:00:00</ns4:endDate>
            <ns4:actual>true</ns4:actual>
            <ns4:availableResource>
               <ns4:availableResourceId>5601</ns4:availableResourceId>
               <ns4:availableResourceTitle>Аверочкина Ирина Ивановна</ns4:availableResourceTitle>
               <ns4:roomCode>404</ns4:roomCode>
            </ns4:availableResource>
            <ns4:lpu>
               <ns5:id>32</ns5:id>
               <ns5:name>ГБУЗ г. Москвы "Городская поликлиника № 219 ДЗМ"</ns5:name>
               <ns5:shortName>ГБУЗ ГП 219 ДЗМ</ns5:shortName>
               <ns5:lpuAddress>г. Москва, бульвар Яна Райниса, д. 47</ns5:lpuAddress>
               <ns5:moId>10000370</ns5:moId>
            </ns4:lpu>
            <ns4:referenceType>
               <ns4:referenceTypeId>21</ns4:referenceTypeId>
               <ns4:referenceTypeName>Справка на Оружие</ns4:referenceTypeName>
            </ns4:referenceType>
            <ns4:createDate>2024-02-26T16:27:08.578</ns4:createDate>
         </appointments>
      </ns2:GetAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointment="update template_response set response='"+getAppointmentResponse+"' where \"path\"= '"+pathGibddAppointment+"'"
sql.execute(queryGetAppointment)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="c4b20c0b-8702-4ece-a7d1-35881fea7553"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395220"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countAppointment = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="0e4d6c98-d86f-4393-b943-af3c8193ba42" name="Not Contains"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>0000000000044446</con:value></con:property><con:property><con:name>bd</con:name><con:value>2005-01-18</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-03-01</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-02-28</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395215/getAssignmentsInfo</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395215/getReferralsInfo</con:value></con:property><con:property><con:name>pathSaAppointment</con:name><con:value>/mock/395215/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGibddAppointment</con:name><con:value>/mock/395220/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-28</con:value></con:property><con:property><con:name>closeDate</con:name><con:value>2024-06-05</con:value></con:property></con:properties></con:testCase><con:testCase id="601c59b9-c523-416a-ad7c-5916af732379" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395242_Получение записей по ТМК (есть неархивная неудаленная запись в d_reception_type_tmk_code)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId неархивный неудаленный" id="532386c8-6e3b-446c-9ab8-b2c4258b0529"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = false and is_deleted = false</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="d752387d-d10d-4f67-8c80-e35ef0ccb3b9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId неархивный неудаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="4835c1c1-d020-46c7-9d9e-02d8036f2cc5"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="f5a429b8-9f39-4814-8e2b-37f9a9c8dc58"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a47ae1ce-fc1b-4219-86ff-96db976beffc" name="Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить маппинг activeTmk" id="1739ff05-7ad5-4684-89d8-94381e0241bc"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient") // В переменной path записан путь до мока "/mock/305855/getDoctorsInfo"
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response
getAppointmentReceptionByPatientMock = new XmlSlurper().parseText(response)

def restResponse = context.expand('${saCount#Response}')
def saCount =  new JsonSlurper().parseText(restResponse)
def activeTmk = saCount.payload.activeTmk

def appointmentId = getAppointmentReceptionByPatientMock.Body.getAppointmentReceptionsByPatientResponse.appointment.id
def eventName = getAppointmentReceptionByPatientMock.Body.getAppointmentReceptionsByPatientResponse.appointment.toDoctor.specialityName
def startTime = testRunner.testCase.getPropertyValue("startTime")

assert activeTmk.appointmentId.toString() == appointmentId.toString() // проверяем appointmentId
assert activeTmk.eventName.toString() == eventName.toString() // проверяем eventName
assert activeTmk.startTime.toString() == startTime.toString() // проверяем eventName
</script></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700007178231039</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1939-10-23</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-29T09:03:37</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>1632</con:value></con:property></con:properties></con:testCase><con:testCase id="005ec257-d959-47bd-8bac-c2089a06b95c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395243_Получение записей по ТМК (есть архивная неудаленная запись в d_reception_type_tmk_code)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId архивный неудаленный" id="4cdf383c-21b4-49b7-92ec-68d193e7315a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = true and is_deleted = false</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="a67f63a4-01e8-47a6-bfa6-db39613ce396"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId архивный неудаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="fd64d582-7fd0-443f-8c82-88fb2bf76365"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="deb68c4c-f277-41ac-9ffc-da19980f0659"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6db30336-1ed4-479f-818f-2816bac2f218" name="Not Contains"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700007170240172</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1972-01-24</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T10:05:51</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>2324</con:value></con:property></con:properties></con:testCase><con:testCase id="29afb856-9b02-444c-9c72-cf87773d93f8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395244_Получение записей по ТМК (есть неархивная удаленная запись в d_reception_type_tmk_code)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId неархивный удаленный" id="7ea6406a-e849-4f5c-91e8-8a18eab1a133"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = false and is_deleted = true</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="5a584360-cf05-4517-912d-3bcd09227610"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId неархивный удаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="413b5a7d-4861-407a-9faf-c3972480a1ee"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="61ada00c-3f80-49df-8eec-c1d7b83abb16"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6db30336-1ed4-479f-818f-2816bac2f218" name="Not Contains"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>3258830879000241</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1961-01-20</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T09:13:38</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>1213</con:value></con:property></con:properties></con:testCase><con:testCase id="17172ab3-05c4-4568-9b6c-a348a79c2f42" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395245_Получение записей по ТМК (есть архивная удаленная запись в d_reception_type_tmk_code)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId архивный удаленный" id="60e025ad-57bb-47eb-ad07-ba025deb2192"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = true and is_deleted = true</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="19f359c1-2df0-4538-b4d5-07bed7c87776"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId архивный удаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="a1ab819a-f9c7-4375-9bf9-2a52e459d7f5"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="142c3536-6c5a-4a42-9f63-09d92d80be57"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6db30336-1ed4-479f-818f-2816bac2f218" name="Not Contains"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>770000215111077</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1977-10-07</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T09:14:13</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>1213</con:value></con:property></con:properties></con:testCase><con:testCase id="0eb1aa3d-c65b-4389-9a24-bee3c4e0618f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395246_Получение записей по ТМК (отсутствует запись в d_reception_type_tmk_code)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Проверить, что receptionTypeId отсутствует в reception_type_tmk_code" id="b878eed4-e378-411b-acad-23335d5bc25e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where code_reception_type = ${#TestCase#receptionTypeId}</con:query><con:assertion type="XPath Match" id="ed8709c2-43c4-44a7-bf89-110a23522edc" name="ResultSet fetchSize=&quot;0&quot;"><con:configuration><path>//ResultSet</path><content>&lt;ResultSet fetchSize="0"/></content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="35bf764a-d70b-4dda-bd4a-7b872fa7ef5e"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="6a190c9b-51d3-4f55-86f0-dea8effb9cf2"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6db30336-1ed4-479f-818f-2816bac2f218" name="Not Contains"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700002332170839</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1939-08-17</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T09:25:23</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>666666</con:value></con:property></con:properties></con:testCase><con:testCase id="f588ea85-22e1-408b-bf74-a3a8bef84c4b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395247_Получение записей по ТМК (appointment.startTime - 24ч = текущее дата и время)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId неархивный неудаленный" id="ef69af48-fcaa-448f-868f-5dacd143127b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = false and is_deleted = false</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="3af55f10-5c77-4c92-8a54-ccd7c004eeb0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId неархивный неудаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="b20dbb52-180c-47b5-adf6-a3746f0e5212"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="2899b81b-0fc7-4683-8b6c-b33436300e70"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a47ae1ce-fc1b-4219-86ff-96db976beffc" name="Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить маппинг activeTmk" id="85eac1ef-ced1-42ac-a396-483dbafafa63"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient") // В переменной path записан путь до мока "/mock/305855/getDoctorsInfo"
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response
getAppointmentReceptionByPatientMock = new XmlSlurper().parseText(response)

def restResponse = context.expand('${saCount#Response}')
def saCount =  new JsonSlurper().parseText(restResponse)
def activeTmk = saCount.payload.activeTmk

def appointmentId = getAppointmentReceptionByPatientMock.Body.getAppointmentReceptionsByPatientResponse.appointment.id
def eventName = getAppointmentReceptionByPatientMock.Body.getAppointmentReceptionsByPatientResponse.appointment.toDoctor.specialityName
def startTime = testRunner.testCase.getPropertyValue("startTime")

assert activeTmk.appointmentId.toString() == appointmentId.toString() // проверяем appointmentId
assert activeTmk.eventName.toString() == eventName.toString() // проверяем eventName
assert activeTmk.startTime.toString() == startTime.toString() // проверяем eventName
</script></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700003297070739</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1939-07-07</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T09:32:47</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>1629</con:value></con:property></con:properties></con:testCase><con:testCase id="9621784a-7fd8-4fbf-8d23-8ee0df54051d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395248_Получение записей по ТМК (appointment.startTime - 24ч > текущее дата и время)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId неархивный неудаленный" id="9417a6bc-dfa0-4d0c-b954-37a4ab6c3b67"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = false and is_deleted = false</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="04b695c1-6694-4ca5-9c76-148735b7e201"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId неархивный неудаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="3f345b8e-f226-4433-96bd-95a14d64ffb3"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).plusMinutes(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="25727d99-a236-48dd-bedf-b91de67e9769"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bdcfe067-82a3-4aee-8647-3cf39e5570da" name="Not Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700009122740757</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1957-07-24</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T09:57:05</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>1629</con:value></con:property></con:properties></con:testCase><con:testCase id="4fdfba95-c83e-4c7a-83c8-ee3976c19629" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395249_Получение записей по ТМК (appointment.endTime &lt; текущее дата и время)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId неархивный неудаленный" id="5a81647b-b554-4780-9ce5-99dc474eb496"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = false and is_deleted = false</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="a496087e-5d3d-4178-b33c-0d3e5ba410ad"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId неархивный неудаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="3f67fed9-71c3-4ffa-90b8-7d067276fb40"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(-1).toDate()
Date nowMinusOneMinute = LocalDateTime.now().plusMinutes(-1).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowMinusOneMinute)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="f7ee6814-c234-4cba-88f4-5c770cef15d6"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bdcfe067-82a3-4aee-8647-3cf39e5570da" name="Not Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>3693599735000025</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>2004-06-14</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-26T10:10:57</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>1629</con:value></con:property></con:properties></con:testCase><con:testCase id="134ea578-3204-4f17-9e30-d21b2e7c9431" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395316_АС1. Ошибка &quot;SA_APPOINTMENT_ERROR&quot; для пациента = 18 лет" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="761266b8-cf0a-4c50-924a-0e7fd0469da2"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395316_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395316"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="code = SA_APPOINTMENT_ERROR"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>SA_APPOINTMENT_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="description = Не удалось найти записи пациента"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Не удалось получить записи пациента</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>bd</con:name><con:value>2006-01-01</con:value></con:property></con:properties></con:testCase><con:testCase id="36de93cb-d3be-4f7f-be74-750a69888973" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395317_АС1. Ошибка &quot;SA_APPOINTMENT_ERROR&quot; для пациента &lt; 18 лет" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="e4f4bf9c-3270-4b9e-a4c9-d9af4bf73f8b"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395316_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395316"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="code = SA_APPOINTMENT_ERROR"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>SA_APPOINTMENT_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="description = Не удалось найти записи пациента"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Не удалось получить записи пациента</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>bd</con:name><con:value>2007-01-01</con:value></con:property></con:properties></con:testCase><con:testCase id="a0398f8d-8a3b-4c94-b640-db286f956c0e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395319_АС3. Ошибка &quot;SA_REFERRAL_ERROR&quot; для пациента &lt; 18 лет" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="0409b347-fb07-453a-8957-d1bf484470c2"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(1).toDate()
Date dateMinus =  LocalDateTime.now().plusDays(-1).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def dateTomorrow = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
def dateYesterday = new SimpleDateFormat("yyyy-MM-dd").format(dateMinus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("dateTomorrow", dateTomorrow)
testRunner.testCase.setPropertyValue("dateYesterday", dateYesterday)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAssignmentsInfo" id="ae35cf53-e646-4a60-a4e8-75fe996c8b5c"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
log.info dateYesterday.getClass()
pathGetAssignmentsInfo = testRunner.testCase.getPropertyValue("pathGetAssignemtnsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAssignmentsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/">
         <assignment>
            <moId>10000290</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152035252</entryId>
               <laboratoryId>2726</laboratoryId>
               <laboratoryName>Обнаружение гельминтов в кале</laboratoryName>
               <biomaterialId>4</biomaterialId>
               <biomaterialName>Кал</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A04.5</code>
                  <name>Энтерит, вызванный Campylobacter</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>13024536040</jobExecutionId>
                  <fio>Мармеладова Софья Семёновна</fio>
                  <snils>44806166895</snils>
                  <specialityId>788</specialityId>
                  <specialityName>Медицинская сестра (медбрат) врача общей практики (семейного врача)</specialityName>
               </issuedDoctor>
            </registryEntry>
            <registryEntry>
               <entryId>152035251</entryId>
               <laboratoryId>2911</laboratoryId>
               <laboratoryName>Общий клинический анализ мочи</laboratoryName>
               <biomaterialId>3</biomaterialId>
               <biomaterialName>Моча</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A04.5</code>
                  <name>Энтерит, вызванный Campylobacter</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>13024536040</jobExecutionId>
                  <fio>Мармеладова Софья Семёновна</fio>
                  <snils>44806166895</snils>
                  <specialityId>788</specialityId>
                  <specialityName>Медицинская сестра (медбрат) врача общей практики (семейного врача)</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>2</id>
               <name>Взятие капиллярной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>2024-07-07</dateFrom>
               <dateTo>2024-08-06</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <appointmentOpenDate>2024-07-07</appointmentOpenDate>
            <registryEntry>
               <entryId>152040226</entryId>
               <laboratoryId>2909</laboratoryId>
               <laboratoryName>Общий клинический анализ крови (общий анализ + СОЭ); микроскопическое исследование мазка крови при выявлении патологии + подсчет ретикулоцитов</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A00.0</code>
                  <name>Холера, вызванная холерным вибрионом 01, биовар cholerae</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>11312193</jobExecutionId>
                  <fio>Бабенкова Лариса Борисовна</fio>
                  <snils>01558018738</snils>
                  <specialityId>602</specialityId>
                  <specialityName>Врач-терапевт участковый</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
      </ns2:getAssignmentsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAssignmentsInfo="update template_response set response='"+getAssignmentsInfoResponse+"' where \"path\"= '"+pathGetAssignmentsInfo+"'"
sql.execute(queryGetAssignmentsInfo)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="9834ac43-7efa-4f98-ac7e-7ad6a7dfa56d"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395319"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 1"><con:configuration><path>$.payload.activeReferrals.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="code = SA_REFERRAL_ERROR"><con:configuration><path>$.payload.activeReferrals.error.code</path><content>SA_REFERRAL_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="description = Не удалось получить часть данных"><con:configuration><path>$.payload.activeReferrals.error.description</path><content>Не удалось получить часть данных</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="type = BUSINESS"><con:configuration><path>$.payload.activeReferrals.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>bd</con:name><con:value>2007-01-01</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395319/getAssignmentsInfo</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-23</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-05-24</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-05-22</con:value></con:property></con:properties></con:testCase><con:testCase id="664f9720-d62f-48f7-a780-7d97303bae24" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395321_АС5. Ошибка &quot;SA_ASSIGNMENT_ERROR&quot;" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="56784db0-79d1-4add-a9b1-4c74215bb195"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(1).toDate()
Date dateMinus =  LocalDateTime.now().plusDays(-1).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def dateTomorrow = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
def dateYesterday = new SimpleDateFormat("yyyy-MM-dd").format(dateMinus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("dateTomorrow", dateTomorrow)
testRunner.testCase.setPropertyValue("dateYesterday", dateYesterday)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getReferralsInfo" id="3e070ab6-00e5-4b6a-8bcc-e66089cdfa1f"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathGetReferralsInfo = testRunner.testCase.getPropertyValue("pathGetReferralsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getReferralsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74389757414</id>
            <number>Н20230125-102</number>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateToday+"""</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>8</specialityId>
               <specialityName>Врач-кардиолог</specialityName>
               <receptionTypeId>1879</receptionTypeId>
            </toDoctor>
            <diagnosis>
               <code>A00.9</code>
               <name>Холера неуточненная</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>12972616957</jobExecutionId>
               <fio>Романенкова Евгения Алексеевна</fio>
               <snils>15422824953</snils>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
            </issuedDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74431024939</id>
            <number>Н20230926-23</number>
            <startTime>2024-02-25</startTime>
            <endTime>2024-02-25</endTime>
            <type>REF_TO_LDP</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toLdp>
               <ldpTypeId>51501</ldpTypeId>
               <ldpTypeName>Удаление каловых камней, инородных тел прямой кишки</ldpTypeName>
               <countAssignmentProcedures>7</countAssignmentProcedures>
            </toLdp>
            <diagnosis>
               <code>M00.8</code>
               <name>Артриты и полиартриты, вызванные другими уточненными бактериальными возбудителями</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>11312193</jobExecutionId>
               <fio>Бабенкова Лариса Борисовна</fio>
               <snils>01558018738</snils>
               <specialityId>602</specialityId>
               <specialityName>Врач-терапевт участковый</specialityName>
            </issuedDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetReferralsInfo="update template_response set response='"+getReferralsInfoResponse+"' where \"path\"= '"+pathGetReferralsInfo+"'"
sql.execute(queryGetReferralsInfo)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="24b5b768-5464-4aea-a632-c86b16811581"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395321"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 1"><con:configuration><path>$.payload.activeReferrals.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="code = SA_ASSIGNMENT_ERROR"><con:configuration><path>$.payload.activeReferrals.error.code</path><content>SA_ASSIGNMENT_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="description = Не удалось получить часть данных"><con:configuration><path>$.payload.activeReferrals.error.description</path><content>Не удалось получить часть данных</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="type = BUSINESS"><con:configuration><path>$.payload.activeReferrals.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>bd</con:name><con:value>2006-01-01</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395321/getReferralsInfo</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-23</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-05-24</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-05-22</con:value></con:property></con:properties></con:testCase><con:testCase id="7b664025-c976-4141-9fa7-edb717f8b33e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395374_АС6. Ошибка &quot;PIN_GET_APPOINTMENT_ERROR&quot;. В ответе getAppointmentReceptionsByPatient вернулись данные" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="e83a10fe-c2bf-4132-9a37-6596a1d7edf1"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395374_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395374"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="code = PIN_GET_APPOINTMENT_ERROR"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>PIN_GET_APPOINTMENT_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="description = Не удалось получить список записей на освидетельствование"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Не удалось получить список записей на освидетельствование</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>bd</con:name><con:value>2006-01-01</con:value></con:property></con:properties></con:testCase><con:testCase id="a2196950-0db7-4a56-bdfa-7b482250a4ce" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395375_АС6. Ошибка &quot;PIN_GET_APPOINTMENT_ERROR&quot;. В ответе getAppointmentReceptionsByPatient вернулись данные" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="fe630fd5-41f6-4031-91fc-01eb90619b82"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395375_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395375"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="code = PIN_GET_APPOINTMENT_ERROR"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>PIN_GET_APPOINTMENT_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="description = Не удалось получить список записей на освидетельствование"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Не удалось получить список записей на освидетельствование</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>bd</con:name><con:value>2006-01-01</con:value></con:property></con:properties></con:testCase><con:testCase id="0bcce41d-eaf9-407c-a0ea-b85e8bb37055" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="413671_Получение информации о записях в КДО (есть записи в f_hospitalizations_appointment с event_type = created, edited, cancelled)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать данные для создания записей" id="6cf58c27-30d2-492e-a472-a6fdab22bd1e"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

eventType1 = "created" // текущая дата
eventType2 = "created" // текущая дата - 1 день - исключается из подсчет
eventType3 = "edited" // текущая дата + 1 день
eventType4 = "cancelled" // текущая дата - исключается из подсчета

Date now = new Date()
sdf = new SimpleDateFormat("yyyy-MM-dd")
def eventDate1 = sdf.format(now)
def eventDate4 = sdf.format(now)
Date nowMinusOneDay = LocalDateTime.now().plusDays(-1).toDate()
def eventDate2 = sdf.format(nowMinusOneDay)
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
def eventDate3 = sdf.format(nowPlusOneDay)

testRunner.testCase.setPropertyValue("eventDate1", eventDate1)
testRunner.testCase.setPropertyValue("eventDate2", eventDate2)
testRunner.testCase.setPropertyValue("eventDate3", eventDate3)
testRunner.testCase.setPropertyValue("eventDate4", eventDate4)

testRunner.testCase.setPropertyValue("eventType1", eventType1)
testRunner.testCase.setPropertyValue("eventType2", eventType2)
testRunner.testCase.setPropertyValue("eventType3", eventType3)
testRunner.testCase.setPropertyValue("eventType4", eventType4)

appointmentId1=UUID.randomUUID().toString()
appointmentId2=UUID.randomUUID().toString()
appointmentId3=UUID.randomUUID().toString()
appointmentId4=UUID.randomUUID().toString()

testRunner.testCase.setPropertyValue("appointmentId1", appointmentId1)
testRunner.testCase.setPropertyValue("appointmentId2", appointmentId2)
testRunner.testCase.setPropertyValue("appointmentId3", appointmentId3)
testRunner.testCase.setPropertyValue("appointmentId4", appointmentId4)

</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать записи в f_hospitalizations_appointment" id="c89eacad-1366-4f29-8a47-fe76fc1c7d42"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId1}', ${#TestCase#patientId}, '${#TestCase#eventType1}', '${#TestCase#eventDate1}', '10:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId2}', ${#TestCase#patientId}, '${#TestCase#eventType2}', '${#TestCase#eventDate2}', '10:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId3}', ${#TestCase#patientId}, '${#TestCase#eventType3}', '${#TestCase#eventDate3}', '11:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId4}', ${#TestCase#patientId}, '${#TestCase#eventType4}', '${#TestCase#eventDate4}', '09:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');</con:query><con:assertion type="XPath Match" id="aa2444e5-e6df-46d3-abd9-905128c529e3" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="43eabdf7-ad9e-4c50-aebd-7d09148674f0"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/413671/1"/>
  <con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/413671"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDate = текущей дате"><con:configuration><path>$.payload.activeAppointment.closeDate</path><content>${#TestCase#eventDate1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 2"><con:configuration><path>$.payload.activeAppointment.count</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Удалить записи в f_hospitalizations_appointment" id="57d4bee0-7448-48db-bf91-1b15e2c8001f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId1}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId2}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId3}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId4}';</con:query><con:assertion type="XPath Match" id="aa2444e5-e6df-46d3-abd9-905128c529e3" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7756210886001128</con:value></con:property><con:property><con:name>bd</con:name><con:value>1987-03-13</con:value></con:property><con:property><con:name>eventDate1</con:name><con:value>2024-05-23</con:value></con:property><con:property><con:name>eventDate2</con:name><con:value>2024-05-22</con:value></con:property><con:property><con:name>eventDate3</con:name><con:value>2024-05-24</con:value></con:property><con:property><con:name>eventDate4</con:name><con:value>2024-05-23</con:value></con:property><con:property><con:name>eventType1</con:name><con:value>created</con:value></con:property><con:property><con:name>eventType2</con:name><con:value>created</con:value></con:property><con:property><con:name>eventType3</con:name><con:value>edited</con:value></con:property><con:property><con:name>eventType4</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>20865397</con:value></con:property><con:property><con:name>appointmentId1</con:name><con:value>2296ccc7-bf03-4c7b-bf6f-816d2a78c70b</con:value></con:property><con:property><con:name>appointmentId2</con:name><con:value>ce9b6869-717f-48e4-b5a9-de5ab8e22fd6</con:value></con:property><con:property><con:name>appointmentId3</con:name><con:value>ee02a68c-c80c-4e00-a067-34bc61b7a7d9</con:value></con:property><con:property><con:name>appointmentId4</con:name><con:value>692e91e5-ea93-4c41-9401-f714c9d580c0</con:value></con:property></con:properties></con:testCase><con:testCase id="25349cfc-ccbc-47f0-8641-480b50a7336b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="413755_АС2. Пустые ответы от Оркестратора и ГИБДД, нет записей в f_hospitalizations_appointment с event_type = created, edited с event_date >= текущей дате" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать данные для создания записей" id="6189df76-1bd7-4523-aae1-a9023dc1b747"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

eventType1 = "edited" // текущая дата - 1 день - исключается из подсчет
eventType2 = "created" // текущая дата - 1 день - исключается из подсчет
eventType3 = "cancelled" // текущая дата - исключается из подсчета

Date now = new Date()
sdf = new SimpleDateFormat("yyyy-MM-dd")
def eventDate3 = sdf.format(now)
Date nowMinusOneDay = LocalDateTime.now().plusDays(-1).toDate()
def eventDate2 = sdf.format(nowMinusOneDay)
def eventDate1 = sdf.format(nowMinusOneDay)

testRunner.testCase.setPropertyValue("eventDate1", eventDate1)
testRunner.testCase.setPropertyValue("eventDate2", eventDate2)
testRunner.testCase.setPropertyValue("eventDate3", eventDate3)

testRunner.testCase.setPropertyValue("eventType1", eventType1)
testRunner.testCase.setPropertyValue("eventType2", eventType2)
testRunner.testCase.setPropertyValue("eventType3", eventType3)

appointmentId1=UUID.randomUUID().toString()
appointmentId2=UUID.randomUUID().toString()
appointmentId3=UUID.randomUUID().toString()

testRunner.testCase.setPropertyValue("appointmentId1", appointmentId1)
testRunner.testCase.setPropertyValue("appointmentId2", appointmentId2)
testRunner.testCase.setPropertyValue("appointmentId3", appointmentId3)

</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать записи в f_hospitalizations_appointment" id="6c54bb9f-fb2b-425f-b7c5-20cc48b19aef"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId1}', ${#TestCase#patientId}, '${#TestCase#eventType1}', '${#TestCase#eventDate1}', '10:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId2}', ${#TestCase#patientId}, '${#TestCase#eventType2}', '${#TestCase#eventDate2}', '10:01',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId3}', ${#TestCase#patientId}, '${#TestCase#eventType3}', '${#TestCase#eventDate3}', '11:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId4}', ${#TestCase#patientId}, '${#TestCase#eventType4}', '${#TestCase#eventDate4}', '09:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');</con:query><con:assertion type="XPath Match" id="aa2444e5-e6df-46d3-abd9-905128c529e3" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="9ad7b04a-0068-4e12-ab2d-315298ac1dd9"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/413755/1"/>
  <con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/413755"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="4cec6367-f26d-44fa-86d0-b9632472d642" name="Not Contains closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Удалить записи в f_hospitalizations_appointment" id="9867503d-84f6-4b24-b9c7-9dacc29df1a0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId1}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId2}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId3}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId4}';</con:query><con:assertion type="XPath Match" id="aa2444e5-e6df-46d3-abd9-905128c529e3" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7756210886001128</con:value></con:property><con:property><con:name>bd</con:name><con:value>1987-03-13</con:value></con:property><con:property><con:name>eventDate1</con:name><con:value>2024-05-22</con:value></con:property><con:property><con:name>eventDate2</con:name><con:value>2024-05-22</con:value></con:property><con:property><con:name>eventDate3</con:name><con:value>2024-05-23</con:value></con:property><con:property><con:name>eventDate4</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventType1</con:name><con:value>edited</con:value></con:property><con:property><con:name>eventType2</con:name><con:value>created</con:value></con:property><con:property><con:name>eventType3</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>eventType4</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>20865397</con:value></con:property><con:property><con:name>appointmentId1</con:name><con:value>a6c1eb0c-fbb0-453a-89b8-051a377e9620</con:value></con:property><con:property><con:name>appointmentId2</con:name><con:value>a0185f0d-d433-481e-967b-37e307c6594e</con:value></con:property><con:property><con:name>appointmentId3</con:name><con:value>219852f9-9c4b-4b21-a60e-e054f07208c5</con:value></con:property><con:property><con:name>appointmentId4</con:name><con:value>6cc34415-92d6-4cb5-a2ef-2023a1f33ae2</con:value></con:property></con:properties></con:testCase><con:testCase id="4233b7ee-e8aa-4848-930e-9a36fc209979" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="413779_АС7. SUDIR_TOKEN_EXPIRED, в ответах от Оркестратора и ГИБДД непустые ответы" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="81687e5a-b988-422c-8ec7-568825b20968"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/413779/1"/>
  <con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/413779"/>
  <con:entry key="EI-Token" value="123132"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 2"><con:configuration><path>$.payload.activeAppointment.count</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="4cec6367-f26d-44fa-86d0-b9632472d642" name="Not Contains closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.code = SUDIR_TOKEN_EXPIRED"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>SUDIR_TOKEN_EXPIRED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.description = Время действия токена в СУДИР истекло"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Время действия токена в СУДИР истекло</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7756210886001128</con:value></con:property><con:property><con:name>bd</con:name><con:value>1987-03-13</con:value></con:property><con:property><con:name>eventDate1</con:name><con:value>2024-05-13</con:value></con:property><con:property><con:name>eventDate2</con:name><con:value>2024-05-13</con:value></con:property><con:property><con:name>eventDate3</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventDate4</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventType1</con:name><con:value>edited</con:value></con:property><con:property><con:name>eventType2</con:name><con:value>created</con:value></con:property><con:property><con:name>eventType3</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>eventType4</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>20865397</con:value></con:property><con:property><con:name>appointmentId1</con:name><con:value>7859d862-6238-4174-9133-b423be252989</con:value></con:property><con:property><con:name>appointmentId2</con:name><con:value>4d0bbb21-a97f-49ed-b463-1e41a29ea644</con:value></con:property><con:property><con:name>appointmentId3</con:name><con:value>d2e42ebe-5f2a-4d9c-970e-a6cf16e7a1d8</con:value></con:property><con:property><con:name>appointmentId4</con:name><con:value>6cc34415-92d6-4cb5-a2ef-2023a1f33ae2</con:value></con:property></con:properties></con:testCase><con:testCase id="749e5ec0-61df-40c7-a0f3-16970e0a1e32" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="413811_АС7. SUDIR_TOKEN_EXPIRED, пустой ответ от Оркестратора и ГИБДД" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="b5a4aa1c-7515-4334-b318-182dfef7ed86"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/413811/1"/>
  <con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/413811"/>
  <con:entry key="EI-Token" value="123132"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="4cec6367-f26d-44fa-86d0-b9632472d642" name="Not Contains closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.code = SUDIR_TOKEN_EXPIRED"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>SUDIR_TOKEN_EXPIRED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.description = Время действия токена в СУДИР истекло"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Время действия токена в СУДИР истекло</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7756210886001128</con:value></con:property><con:property><con:name>bd</con:name><con:value>1987-03-13</con:value></con:property><con:property><con:name>eventDate1</con:name><con:value>2024-05-13</con:value></con:property><con:property><con:name>eventDate2</con:name><con:value>2024-05-13</con:value></con:property><con:property><con:name>eventDate3</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventDate4</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventType1</con:name><con:value>edited</con:value></con:property><con:property><con:name>eventType2</con:name><con:value>created</con:value></con:property><con:property><con:name>eventType3</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>eventType4</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>20865397</con:value></con:property><con:property><con:name>appointmentId1</con:name><con:value>7859d862-6238-4174-9133-b423be252989</con:value></con:property><con:property><con:name>appointmentId2</con:name><con:value>4d0bbb21-a97f-49ed-b463-1e41a29ea644</con:value></con:property><con:property><con:name>appointmentId3</con:name><con:value>d2e42ebe-5f2a-4d9c-970e-a6cf16e7a1d8</con:value></con:property><con:property><con:name>appointmentId4</con:name><con:value>6cc34415-92d6-4cb5-a2ef-2023a1f33ae2</con:value></con:property></con:properties></con:testCase><con:testCase id="c374f80e-c177-42ab-90b1-c17d0b58e99b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="413815_АС7. SUDIR_TOKEN_EXPIRED, ошибка от Оркестратора и ГИБДД" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="78cbddf5-c4c6-467f-85e1-c533c51f4362"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/413815/1"/>
  <con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/413815"/>
  <con:entry key="EI-Token" value="123132"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="4cec6367-f26d-44fa-86d0-b9632472d642" name="Not Contains closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.code = SUDIR_TOKEN_EXPIRED"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>SUDIR_TOKEN_EXPIRED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.description = Время действия токена в СУДИР истекло"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Время действия токена в СУДИР истекло</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7756210886001128</con:value></con:property><con:property><con:name>bd</con:name><con:value>1987-03-13</con:value></con:property><con:property><con:name>eventDate1</con:name><con:value>2024-05-13</con:value></con:property><con:property><con:name>eventDate2</con:name><con:value>2024-05-13</con:value></con:property><con:property><con:name>eventDate3</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventDate4</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventType1</con:name><con:value>edited</con:value></con:property><con:property><con:name>eventType2</con:name><con:value>created</con:value></con:property><con:property><con:name>eventType3</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>eventType4</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>20865397</con:value></con:property><con:property><con:name>appointmentId1</con:name><con:value>7859d862-6238-4174-9133-b423be252989</con:value></con:property><con:property><con:name>appointmentId2</con:name><con:value>4d0bbb21-a97f-49ed-b463-1e41a29ea644</con:value></con:property><con:property><con:name>appointmentId3</con:name><con:value>d2e42ebe-5f2a-4d9c-970e-a6cf16e7a1d8</con:value></con:property><con:property><con:name>appointmentId4</con:name><con:value>6cc34415-92d6-4cb5-a2ef-2023a1f33ae2</con:value></con:property></con:properties></con:testCase><con:testCase id="c1a46977-7372-4351-87e5-bd51d23babab" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="395242_Есть запись в d_reception_type_tmk_code (неархивная неудаленная)--" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Создать мок с ответом от getReferralsInfo" id="5494b191-b6d4-477c-9c1f-05744d013b92"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74444353435</id>
            <number>Н20231218-48</number>
            <startTime>2023-12-18</startTime>
            <endTime>2024-01-18</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353752</id>
            <number>Н20231219-56</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353753</id>
            <number>Н20231219-57</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444353754</id>
            <number>Н20231219-58</number>
            <startTime>2023-12-19</startTime>
            <endTime>2024-01-19</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
               <receptionTypeId>1629</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354195</id>
            <number>Н20231221-200</number>
            <startTime>2023-12-21</startTime>
            <endTime>2024-01-21</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20716996033</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444354883</id>
            <number>Н20231226-131</number>
            <startTime>2023-12-26</startTime>
            <endTime>2024-01-24</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444356396</id>
            <number>Н20231229-21</number>
            <startTime>2023-12-29</startTime>
            <endTime>2024-01-27</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74444357029</id>
            <number>Н20240109-246</number>
            <startTime>2024-01-09</startTime>
            <endTime>2024-02-07</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <availableResourceId>20736918944</availableResourceId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>1626</receptionTypeId>
            </toDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAssignmentsInfo" id="13d9e6ce-01f1-4439-a6d5-87eb365b589c"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>&lt;soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   &lt;soap:Body>
      &lt;ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/"/>
   &lt;/soap:Body>
&lt;/soap:Envelope></con:expectedResult></con:config></con:testStep><con:testStep type="manualTestStep" name="Создать мок с ответом от getAppointmentReceptionsByPatient" id="e2a7c462-ce62-4eb8-9344-40266b40fbbb"><con:description>1). Изменить значения startTime и endTime первой записи на сегодняшнюю дату и будущее время
2). Изменить значения startTime и endTime второй записи на сегодняшнюю дату и будущее время +1 секунда
3). Проверить, что оба значения receptionTypeId есть в таблице d_reception_type_tmk_code и выполнены условия:
archived_reception_type = false
is_deleted = false
4). Записать значение startTime из пункта 1 в пропертис тест-кейса
</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930045467</id>
            <number>С20240110-3</number>
            <lpuId>10266728</lpuId>
            <typeLpu>Онкологический диспансер</typeLpu>
            <nameLpu>ЦАОП ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</nameLpu>
            <lpuAddress>Москва, Верхняя Первомайская улица, д. 48, стр. 1</lpuAddress>
            <startTime>2024-01-11T07:00:00+03:00</startTime>
            <endTime>2024-01-11T07:10:00+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918952</availableResourceId>
            <complexResourceId>243952538</complexResourceId>
            <roomId>31156323</roomId>
            <roomNumber>109 ТМК</roomNumber>
            <addressPointId>2115592</addressPointId>
            <toDoctor>
               <specialityId>26</specialityId>
               <specialityName>Врач-онколог</specialityName>
               <doctorFio>Агарков Артём Михайлович</doctorFio>
               <receptionTypeId>1699</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
         <appointment>
            <id>391930044470</id>
            <number>С20240109-107</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>2024-01-11T07:00:01+03:00</startTime>
            <endTime>2024-01-11T07:10:01+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>true</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20701267441</availableResourceId>
            <complexResourceId>242719463</complexResourceId>
            <roomId>30914423</roomId>
            <roomNumber>1331</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>602</specialityId>
               <specialityName>Врач-терапевт участковый</specialityName>
               <doctorFio>Сивков Всеволод Игорьевич</doctorFio>
               <receptionTypeId>1161</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>]]></con:expectedResult></con:config></con:testStep><con:testStep type="request" name="getAppointmentReceptionsByPatient" id="e63c7f75-46e5-4a80-9553-cbb6ac41c4ca"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatient" id="65a23d5b-a4ae-4697-a272-9ef34851f027"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>\r
      <v5:getAppointmentReceptionsByPatient>\r
         <omsNumber>${#TestCase#omsNumber}</omsNumber>\r
         <birthDate>${#TestCase#birthDate}</birthDate>\r
         <externalSystemId>EIM</externalSystemId>
         <signActiveArchive>0</signActiveArchive>\r
      </v5:getAppointmentReceptionsByPatient>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="bf956d8e-4240-49b0-98f5-4556c3be6cd1" name="Вернулся id"><con:configuration><token>id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="2511e1ca-536e-4c4c-a533-17e111aec510"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить маппинг activeTmk" id="edb0e71a-55c3-4970-8c39-dd7c9d0e2922"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.time.format.DateTimeFormatter

def restResponse = context.expand('${saCount#Response}')
def saCount =  new JsonSlurper().parseText(restResponse)
def activeTmk = saCount.payload.activeTmk
def appointmentId = testRunner.testCase.getPropertyValue("appointmentId").toLong()
def eventName = testRunner.testCase.getPropertyValue("spacialityName")
def startTime = testRunner.testCase.getPropertyValue("startTime")

assert activeTmk.appointmentId == appointmentId // проверяем appointmentId
assert activeTmk.eventName == eventName // проверяем eventName
assert activeTmk.startTime == startTime // проверяем eventName
</script></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700007178231039</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1939-10-23</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-23T16:20:00</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="bc4a0067-9a05-4e41-96c7-da3c0c9aa13d" name="POST saCount v2"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="476e9ca8-5e78-4da4-8d3f-217b2cb15a1d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417880_ОС. Получение записей по пациенту &lt; 18 лет без активных записей" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="14ec8a90-a990-4119-a209-719e3646d625"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="Отсутствует closeDate"><con:configuration><path>$.payload.activeAppointment[?(!@.closeDate)]</path><content>[0]</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="activeAppointment.count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="activeReferrals.count = 0"><con:configuration><path>$.payload.activeReferrals.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7790689773000533</con:value></con:property><con:property><con:name>bd</con:name><con:value>2013-09-26</con:value></con:property></con:properties></con:testCase><con:testCase id="ce639d77-9dd5-4bb2-a2b1-454df262c360" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417881_АС2. Получение записей по пациенту >= 18 лет без активных записей" searchProperties="true"><con:settings/><con:testStep type="request" name="getAppointmentReceptionsByPatient" id="02782e01-10e4-4e0f-a2ed-e9a9c5d15399"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatient" id="65a23d5b-a4ae-4697-a272-9ef34851f027"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>\r
      <v5:getAppointmentReceptionsByPatient>\r
         <omsNumber>${#TestCase#oms}</omsNumber>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
         <externalSystemId>EIM</externalSystemId>\r
      </v5:getAppointmentReceptionsByPatient>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6f8b13e5-9886-4cdb-9b51-e720a31e3aa5" disabled="true"/><con:assertion type="Simple NotContains" id="21f6e5eb-8934-4c2e-851f-c8a22bd9e614" name="В ответе отсутствуют id записей"><con:configuration><token>id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAppointmentReceptionsByPatientGIBDD" id="6311acbe-89c1-4568-9b99-4c70dfa01fb2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EmiasGibddAppointmentBinding</con:interface><con:operation>GetAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatientGIBDD" id="70f5beb2-b9e1-4ec6-9a77-b4bb6699ea87"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasGibddEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
<soap:Header>
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
  <wsse:UsernameToken>
   <wsse:Username>EIP</wsse:Username>
  </wsse:UsernameToken>
 </wsse:Security>
</soap:Header>
   <soap:Body>\r
      <v1:GetAppointmentReceptionsByPatientRequest>\r
         <oms>${#TestCase#oms}</oms>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
      </v1:GetAppointmentReceptionsByPatientRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3d17e2ea-c198-4292-9824-0262de5be5fb" disabled="true"/><con:assertion type="Simple NotContains" id="f5c9ffd4-f798-43dd-8d69-d6cac70dd188" name="В ответе отсутствуют appointments"><con:configuration><token>appointments</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="ae2022ad-a07b-4a0f-ba7b-3e4538428f51"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="activeAppointment.count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="activeReferrals.count = 0"><con:configuration><path>$.payload.activeReferrals.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="c686343b-da17-44bb-b78b-853175e8ae77" name="Отсутствует closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7755530870001052</con:value></con:property><con:property><con:name>bd</con:name><con:value>1964-04-29</con:value></con:property></con:properties></con:testCase><con:testCase id="d0f0eaef-5d5e-4d22-be6a-fef749621fb2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417882_АС4. Получение записей по пациенту с отсутствующими направлениями и назначениями" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="39bb1168-0b45-4aad-b77f-a1b63fa53be9"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="activeAppointment.count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="b90dc65a-0db1-403d-a961-5170b11d948a" name="Отсутствует closeCount"><con:configuration><token>closeCount</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="9f053a10-ab69-4630-88d2-388e1f1e91de" name="Отсутствует closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="activeReferrals.count = 0"><con:configuration><path>$.payload.activeReferrals.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7755530870001052</con:value></con:property><con:property><con:name>bd</con:name><con:value>1964-04-29</con:value></con:property></con:properties></con:testCase><con:testCase id="e460aea9-f2da-48a7-83b4-d518f484002f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417883_Получение записей по пациенту с активными направлениями и назначениями" searchProperties="true"><con:settings/><con:testStep type="request" name="getAssignmentsInfo" id="b0f31c14-095f-4153-ba73-00cc8e87f859"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAssignmentsInfo</con:operation><con:request name="getAssignmentsInfo" id="a612036d-ed27-4231-a620-07542ad2c77c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>EIM</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <v5:getAssignmentsInfo>\r
         <omsNumber>${#TestCase#oms}</omsNumber>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
         <returnExtended>true</returnExtended>\r
         <externalSystemId>EIM</externalSystemId>\r
      </v5:getAssignmentsInfo>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="f3a5f3d9-4535-4cec-a3c5-3e596d26e560"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getReferralsInfo" id="24cc37d2-da0a-4bab-a10b-ad6354ab2557"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getReferralsInfo</con:operation><con:request name="getReferralsInfo" id="674323b3-ef4d-47b0-bf9d-3be1d47be36d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>\r
      <v5:getReferralsInfo>\r
         <omsNumber>${#TestCase#oms}</omsNumber>
         <birthDate>${#TestCase#bd}</birthDate>
         <returnExtended>true</returnExtended>
         <externalSystemId>EIM</externalSystemId>
      </v5:getReferralsInfo>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a6b7692f-8dd3-45bb-88c6-97366499cc31"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="a1f4cd33-c319-4cc9-bfdd-946fb6ed526b"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="92fbda63-92e9-471a-b5ef-4841046be778" name="Код ответа 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Посчитать записи и сравнить ответ" id="3e256fb3-5ca6-48f6-9f00-e244888f265c"><con:settings/><con:config><script><![CDATA[import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем ответ из json
def saCountResponse = context.expand('${POST saCount#Response}')
def slurperJson = new JsonSlurper()
def saCount = slurperJson.parseText(saCountResponse)
def saCountNFO = saCount.payload

//получаем ответ из xml getAssignmentsInfo
def getAssignmentsInfoResponse = context.expand('${getAssignmentsInfo#Response}')
getAssignmentsInfo = new XmlSlurper().parseText(getAssignmentsInfoResponse)
getAssignmentsInfoBody = getAssignmentsInfo.Body.getAssignmentsInfoResponse.assignment
getAssignmentsInfoSize = getAssignmentsInfo.Body.getAssignmentsInfoResponse.assignment.size()

//получаем ответ из xml getReferralsInfo
def getReferralsInfoResponse = context.expand('${getReferralsInfo#Response}')
getReferralsInfo = new XmlSlurper().parseText(getReferralsInfoResponse)
getReferralsInfoSize = getReferralsInfo.Body.getReferralsInfoResponse.referral.size()
getReferralsInfoBody = getReferralsInfo.Body.getReferralsInfoResponse.referral

closeCount = 0
closeDateCount = 0
closeDateReferralsCount = []

//Получаем количество подходящих из getReferralsInfo записей и заполняем даты для выбора наименьшей
if (getReferralsInfoSize != 0){
	for (i=0; i<getReferralsInfoSize; i++){
		date = new Date()
		String dateToday = date.format("yyyy-MM-dd")
		String dateEndParse = Date.parse("yyyy-MM-dd", getReferralsInfoBody[i].endTime.text())
		dateEnd = Date.parse("yyyy-MM-dd", getReferralsInfoBody[i].endTime.text())
		if (getReferralsInfoBody[i].appointmentOpenDate == "" && dateToday <= dateEndParse){
			closeCount++
			closeDateReferralsCount << dateEnd
		}
	}
}

//Получаем количество подходящих из getAssignmentsInfo записей и заполняем даты для выбора наименьшей
if (getAssignmentsInfoSize != 0){
	for (i=0; i<getAssignmentsInfoSize; i++){
		date = new Date()
		String dateToday = date.format("yyyy-MM-dd")
		String dateFromParse = Date.parse("yyyy-MM-dd", getAssignmentsInfoBody[i].period.dateFrom.text())
		String dateToParse = Date.parse("yyyy-MM-dd", getAssignmentsInfoBody[i].period.dateTo.text())
		dateTo = Date.parse("yyyy-MM-dd", getAssignmentsInfoBody[i].period.dateTo.text())
		dateFrom = Date.parse("yyyy-MM-dd", getAssignmentsInfoBody[i].period.dateFrom.text())
		if (getAssignmentsInfoBody[i].appointmentId == ""){
			if (getAssignmentsInfoBody[i].toBM.self == false && getAssignmentsInfoBody[i].appointmentOpenDate == "" && dateToday <= dateToParse){
				log.info getAssignmentsInfoBody[i].registryEntry.entryId
				closeCount++
				closeDateReferralsCount << dateTo
			}
			if (getAssignmentsInfoBody[i].toBM.self == true && getAssignmentsInfoBody[i].appointmentOpenDate == "" && dateToday <= dateFromParse && dateToday >= dateToParse){
				closeCount++
				closeDateReferralsCount << dateTo
			}
		}
	}
}

//Определяем минимальную дату и сравниваем closeDate
if (closeDateReferralsCount != 0){
	Date minCloseDate = Collections.min(closeDateReferralsCount)
	log.info minCloseDate
	Date datePlus7= LocalDateTime.now().plusDays(7).toDate()
	if(minCloseDate <= datePlus7){
		closeDate = minCloseDate.format("yyyy-MM-dd")
		assert closeDate == saCountNFO.activeReferrals.closeDate
	}
	else {
		assert saCountNFO.activeReferrals.closeDate == ""
	}
}

//Определяем количество совпадений дат с closeDate  и сравниваем с loseDateCount
if (saCountNFO.activeReferrals.closeDate != ""){
	closeDateForCount = 0
	for(i=0; i< closeDateReferralsCount.size(); i++){
		String dateParse = closeDateReferralsCount[i].format("yyyy-MM-dd")
		if(dateParse == saCountNFO.activeReferrals.closeDate){
			closeDateForCount++
		}
	}
	assert closeDateForCount == saCountNFO.activeReferrals.closeCount
}
else {
	assert saCountNFO.activeReferrals.closeDate == ""
}
]]></script></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7700007178231039</con:value></con:property><con:property><con:name>bd</con:name><con:value>1939-10-23</con:value></con:property></con:properties></con:testCase><con:testCase id="14c0d1e3-de21-48c1-9adb-c9eda5411462" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417884_Получение записей по пациенту &lt; 18 лет c активными записями" searchProperties="true"><con:settings/><con:testStep type="request" name="getAppointmentReceptionsByPatient" id="4cc703b5-a77b-41b1-bebb-8828189979e8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatient" id="65a23d5b-a4ae-4697-a272-9ef34851f027"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>\r
      <v5:getAppointmentReceptionsByPatient>\r
         <omsNumber>${#TestCase#oms}</omsNumber>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
         <externalSystemId>EIM</externalSystemId>
         <signActiveArchive>0</signActiveArchive>\r
      </v5:getAppointmentReceptionsByPatient>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="bf956d8e-4240-49b0-98f5-4556c3be6cd1" name="Вернулся id"><con:configuration><token>id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAppointmentReceptionsByPatientGIBDD" id="af55f6ed-67aa-412c-bb61-14344a0d22d0" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EmiasGibddAppointmentBinding</con:interface><con:operation>GetAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatientGIBDD" id="70f5beb2-b9e1-4ec6-9a77-b4bb6699ea87"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasGibddEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
<soap:Header>
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
  <wsse:UsernameToken>
   <wsse:Username>EIP</wsse:Username>
  </wsse:UsernameToken>
 </wsse:Security>
</soap:Header>
   <soap:Body>\r
      <v1:GetAppointmentReceptionsByPatientRequest>\r
         <upcoming>true</upcoming>
         <oms>${#TestCase#oms}</oms>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
      </v1:GetAppointmentReceptionsByPatientRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="8a0920b6-420c-42e0-a256-d3b664da6914" name="Вернулись appointments"><con:configuration><token>appointments</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="eb580fe5-ed83-41e2-9d96-aff5c1b6bee4"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="92fbda63-92e9-471a-b5ef-4841046be778" name="Код ответа 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Посчитать записи и сравнить ответ" id="be4b4c15-5eec-4acc-871d-17fff3c42998"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем ответ из json
def saCountResponse = context.expand('${POST saCount#Response}')
def slurperJson = new JsonSlurper()
def saCount = slurperJson.parseText(saCountResponse)
def saCountNFO = saCount.payload

//получаем ответ из xml getAppointmentReceptionsByPatient
def garbpSaResponse = context.expand('${getAppointmentReceptionsByPatient#Response}')
garbpSa = new XmlSlurper().parseText(garbpSaResponse)
garbpSaBody = garbpSa.Body.getAppointmentReceptionsByPatientResponse.appointment
garbpSaSize = garbpSa.Body.getAppointmentReceptionsByPatientResponse.appointment.size()

//Сравниваем количество
assert saCountNFO.activeAppointment.count == garbpSaSize
closeDateAppointmentCount = []

//Получаем все даты из ответа getAppointmentReceptionsByPatient
if (garbpSaSize != 0){
	for (i=0; i&lt;garbpSaSize; i++){
	dateParse = Date.parse("yyyy-MM-dd'T'hh:mm:ss+03:00", garbpSaBody[i].startTime.text())
	closeDateAppointmentCount &lt;&lt; dateParse
	}
}

//Выбираем минимальную дату и сравниваем с closeDate
if (closeDateAppointmentCount!=0){
	minCloseDate = Collections.min(closeDateAppointmentCount)
	Date datePlus7= LocalDateTime.now().plusDays(7).toDate()
	if(minCloseDate &lt;= datePlus7){
		closeDate = minCloseDate.format("yyyy-MM-dd")
		log.info closeDate
		assert closeDate == saCountNFO.activeAppointment.closeDate
	}
	else {
		assert saCountNFO.activeAppointment.closeDate == ""
	}
}</script></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>bd</con:name><con:value>2018-07-12</con:value></con:property></con:properties></con:testCase><con:testCase id="825d3eba-0755-4e79-b152-fea60d7a3c79" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417885_Получение записей по пациенту >= 18 лет c активными записями" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить дату для записи" id="3470a9be-55fc-4c39-8ccf-88ae5844a394"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date
Date start = LocalDateTime.now().plusDays(0).toDate()
def startDate = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").format(start)
Date end = LocalDateTime.now().plusDays(7).toDate()
def endDate = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").format(end)
testRunner.testCase.setPropertyValue("startDate", startDate.toString())
testRunner.testCase.setPropertyValue("endDate", endDate.toString())</script></con:config></con:testStep><con:testStep type="request" name="Получить список ДР" id="75235b64-60c6-4c44-858b-74d8120d1629"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EmiasGibddAppointmentBinding</con:interface><con:operation>GetAvailableResourceScheduleInfo</con:operation><con:request name="Получить список ДР" id="2a69dd34-11e4-4b12-acfa-6bf509814b4f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasGibddEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">
<soap:Header>
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
  <wsse:UsernameToken>
   <wsse:Username>EIP</wsse:Username>
  </wsse:UsernameToken>
 </wsse:Security>
</soap:Header>
   <soap:Body>\r
      <v1:GetAvailableResourceScheduleInfoRequest>\r
         <lpuId>${#TestCase#lpu}</lpuId>\r
         <referenceId>${#TestCase#reference}</referenceId>\r
         <startDate>${#TestCase#startDate}</startDate>\r
         <endDate>${#TestCase#endDate}</endDate>\r
         <actual>true</actual>
      </v1:GetAvailableResourceScheduleInfoRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="c7b91197-0172-4d92-b5b6-ad2d378f6dc1" name="Вернулись слоты"><con:configuration><token>startTime</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="4ddb23d1-7c93-41fd-a814-2fa0b24b0f60" name="Код ответа 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Записать время" id="68a0df84-6598-4950-bd39-259cc0d3cdfe"><con:settings/><con:config><script>import groovy.xml.XmlSlurper

def response = context.expand('${Получить список ДР#Response}')
AR = new XmlSlurper().parseText(response)
startSlot = AR.Body.GetAvailableResourceScheduleInfoResponse.slot[1].startTime
endSlot = AR.Body.GetAvailableResourceScheduleInfoResponse.slot[1].endTime
arId = AR.Body.GetAvailableResourceScheduleInfoResponse.slot[1].arId
testRunner.testCase.setPropertyValue("arId", arId.toString())
testRunner.testCase.setPropertyValue("startSlot", startSlot.toString())
testRunner.testCase.setPropertyValue("endSlot", endSlot.toString())</script></con:config></con:testStep><con:testStep type="request" name="Создать запись ПИН" id="2520a659-b62e-44cc-b038-9b5546e7fa16"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EmiasGibddAppointmentBinding</con:interface><con:operation>CreateAppointment</con:operation><con:request name="Создать запись ПИН" id="11ad71d3-ff65-4cdc-a7d2-11b456be4fe5"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasGibddEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">
<soap:Header>
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
  <wsse:UsernameToken>
   <wsse:Username>EIP</wsse:Username>
  </wsse:UsernameToken>
 </wsse:Security>
</soap:Header>
   <soap:Body>\r
      <v1:CreateAppointmentRequest>\r
         <oms>${#TestCase#oms}</oms>\r
         <birthday>${#TestCase#bd}</birthday>\r
         <availableResourceId>${#TestCase#arId}</availableResourceId>\r
         <startDate>${#TestCase#startSlot}</startDate>\r
         <referenceId>${#TestCase#reference}</referenceId>\r
      </v1:CreateAppointmentRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="25b26a1d-0ace-425f-b2cb-a8a9202268d7"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Записать id" id="d7e00cc8-e3ca-42d8-95ab-6265cf868a65"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>appointmentId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Создать запись ПИН</con:sourceStep><con:sourcePath>//id</con:sourcePath><con:targetType>appointmentId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="getAppointmentReceptionsByPatient" id="4d7b1bc8-74de-48f2-9178-8c31deda6286"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SelfAppointmentServiceV5Binding</con:interface><con:operation>getAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatient" id="65a23d5b-a4ae-4697-a272-9ef34851f027"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#saOrchestratorEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v5="http://api.service.soap.emias.lanit.ru/v5/">\r
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>EIM</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>\r
      <v5:getAppointmentReceptionsByPatient>\r
         <omsNumber>${#TestCase#oms}</omsNumber>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
         <externalSystemId>EIM</externalSystemId>
         <signActiveArchive>0</signActiveArchive>\r
      </v5:getAppointmentReceptionsByPatient>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="bf956d8e-4240-49b0-98f5-4556c3be6cd1" name="Вернулся id"><con:configuration><token>id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="getAppointmentReceptionsByPatientGIBDD" id="b3b1d1eb-b48c-48e9-8da7-f0de45914586"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EmiasGibddAppointmentBinding</con:interface><con:operation>GetAppointmentReceptionsByPatient</con:operation><con:request name="getAppointmentReceptionsByPatientGIBDD" id="70f5beb2-b9e1-4ec6-9a77-b4bb6699ea87"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasGibddEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">\r
<soap:Header>
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
  <wsse:UsernameToken>
   <wsse:Username>EIP</wsse:Username>
  </wsse:UsernameToken>
 </wsse:Security>
</soap:Header>
   <soap:Body>\r
      <v1:GetAppointmentReceptionsByPatientRequest>\r
         <upcoming>true</upcoming>
         <oms>${#TestCase#oms}</oms>\r
         <birthDate>${#TestCase#bd}</birthDate>\r
      </v1:GetAppointmentReceptionsByPatientRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="8a0920b6-420c-42e0-a256-d3b664da6914" name="Вернулись appointments"><con:configuration><token>appointments</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="e5d21849-de84-49d2-af16-d0933f527bc4"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="92fbda63-92e9-471a-b5ef-4841046be778" name="Код ответа 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Посчитать записи и сравнить ответ" id="ff88c7fc-59f2-458b-afc8-102fc27e6019"><con:settings/><con:config><script><![CDATA[import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем ответ из json
def saCountResponse = context.expand('${POST saCount#Response}')
def slurperJson = new JsonSlurper()
def saCount = slurperJson.parseText(saCountResponse)
def saCountNFO = saCount.payload

//получаем ответ из xml getAppointmentReceptionsByPatient - saOrchestrator
def garbpSaResponse = context.expand('${getAppointmentReceptionsByPatient#Response}')
garbpSa = new XmlSlurper().parseText(garbpSaResponse)
garbpSaBody = garbpSa.Body.getAppointmentReceptionsByPatientResponse.appointment
garbpSaSize = garbpSa.Body.getAppointmentReceptionsByPatientResponse.appointment.size()

//получаем ответ из xml getAppointmentReceptionsByPatient - Gibdd
def garbpGibddResponse = context.expand('${getAppointmentReceptionsByPatientGIBDD#Response}')
garbpGibdd = new XmlSlurper().parseText(garbpGibddResponse)
garbpGibddSize = garbpGibdd.Body.GetAppointmentReceptionsByPatientResponse.appointments.size()
garbpGibddBody = garbpGibdd.Body.GetAppointmentReceptionsByPatientResponse.appointments

//Сравниваем количество
assert saCountNFO.activeAppointment.count == garbpSaSize + garbpGibddSize
closeDateAppointmentCount = []

//Получаем все даты из ответа getAppointmentReceptionsByPatient - saOrchestrator
if (garbpSaSize != 0){
	for (i=0; i<garbpSaSize; i++){
	dateParse = Date.parse("yyyy-MM-dd'T'hh:mm:ss+03:00", garbpSaBody[i].startTime.text())
	closeDateAppointmentCount << dateParse
	}
}

//Получаем все даты из ответа getAppointmentReceptionsByPatient - gibdd
if (garbpGibddSize != 0){
	for (i=0; i<garbpGibddSize; i++){
	dateParse = Date.parse("yyyy-MM-dd'T'hh:mm:ss", garbpGibddBody[i].startDate.text())
	closeDateAppointmentCount << dateParse
	}
}

//Выбираем минимальную дату и сравниваем с closeDate
if (closeDateAppointmentCount!=0){
	minCloseDate = Collections.min(closeDateAppointmentCount)
	Date datePlus7= LocalDateTime.now().plusDays(7).toDate()
	if(minCloseDate <= datePlus7){
		closeDate = minCloseDate.format("yyyy-MM-dd")
		assert closeDate == saCountNFO.activeAppointment.closeDate
	}
	else {
		assert saCountNFO.activeAppointment.closeDate == ""
	}
}]]></script></con:config></con:testStep><con:testStep type="request" name="Удалить запись" id="b7d2f2af-9f08-4a05-9cce-653d9695fc21"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EmiasGibddAppointmentBinding</con:interface><con:operation>CancelAppointment</con:operation><con:request name="Удалить запись" id="975d0e4f-e90b-4271-8f2b-b868df0a88e8"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasGibddEndpoint}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://emias2.gov.ru/emias/appointment/v1/">
<soap:Header>
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
  <wsse:UsernameToken>
   <wsse:Username>EIP</wsse:Username>
  </wsse:UsernameToken>
 </wsse:Security>
</soap:Header>
   <soap:Body>\r
      <v1:CancelAppointmentRequest>\r
         <appointmentId>${#TestCase#appointmentId}</appointmentId>\r
      </v1:CancelAppointmentRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Simple Contains" id="8741f052-98b1-44eb-ad12-b3874c25cc91" name="Запись успешно отменена"><con:configuration><token>Запись успешно отменена</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="9a1e23f1-e080-4401-b343-ccca0557e327" name="Код ответа 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7700007178231039</con:value></con:property><con:property><con:name>bd</con:name><con:value>1939-10-23</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>454181</con:value></con:property><con:property><con:name>startDate</con:name><con:value>2024-05-24T16:30:28</con:value></con:property><con:property><con:name>endDate</con:name><con:value>2024-05-31T16:30:28</con:value></con:property><con:property><con:name>reference</con:name><con:value>21</con:value></con:property><con:property><con:name>lpu</con:name><con:value>32</con:value></con:property><con:property><con:name>arId</con:name><con:value>5601</con:value></con:property><con:property><con:name>startSlot</con:name><con:value>2024-05-24T17:00:00</con:value></con:property><con:property><con:name>endSlot</con:name><con:value>2024-05-24T17:15:00</con:value></con:property></con:properties></con:testCase><con:testCase id="c3292dc6-ccf3-43c6-906c-2e0b224cccd7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417886_Проверка необязательных параметров и корректности отбора записей для пациента = 17 лет" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="981c2662-add2-41b9-adc1-16528cecf673"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(1).toDate()
Date dateMinus =  LocalDateTime.now().plusDays(-1).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def dateTomorrow = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
def dateYesterday = new SimpleDateFormat("yyyy-MM-dd").format(dateMinus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("dateTomorrow", dateTomorrow)
testRunner.testCase.setPropertyValue("dateYesterday", dateYesterday)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAssignmentsInfo" id="9c00c225-a5ff-4f0a-86b1-d567588d9270"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
log.info dateYesterday.getClass()
pathGetAssignmentsInfo = testRunner.testCase.getPropertyValue("pathGetAssignemtnsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAssignmentsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/">
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>1</id>
               <name>Взятие венозной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <appointmentId>391921600473</appointmentId>
            <registryEntry>
               <entryId>152043139</entryId>
               <laboratoryId>47</laboratoryId>
               <laboratoryName>Билирубин общий</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>J44.8</code>
                  <name>Другая уточненная хроническая обструктивная легочная болезнь</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>10000290</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentOpenDate>2025-01-01</appointmentOpenDate>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152035252</entryId>
               <laboratoryId>2726</laboratoryId>
               <laboratoryName>Обнаружение гельминтов в кале</laboratoryName>
               <biomaterialId>4</biomaterialId>
               <biomaterialName>Кал</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A04.5</code>
                  <name>Энтерит, вызванный Campylobacter</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>13024536040</jobExecutionId>
                  <fio>Мармеладова Софья Семёновна</fio>
                  <snils>44806166895</snils>
                  <specialityId>788</specialityId>
                  <specialityName>Медицинская сестра (медбрат) врача общей практики (семейного врача)</specialityName>
               </issuedDoctor>
            </registryEntry>
            <registryEntry>
               <entryId>152035251</entryId>
               <laboratoryId>2911</laboratoryId>
               <laboratoryName>Общий клинический анализ мочи</laboratoryName>
               <biomaterialId>3</biomaterialId>
               <biomaterialName>Моча</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A04.5</code>
                  <name>Энтерит, вызванный Campylobacter</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>13024536040</jobExecutionId>
                  <fio>Мармеладова Софья Семёновна</fio>
                  <snils>44806166895</snils>
                  <specialityId>788</specialityId>
                  <specialityName>Медицинская сестра (медбрат) врача общей практики (семейного врача)</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>2</id>
               <name>Взятие капиллярной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateYesterday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152040226</entryId>
               <laboratoryId>2909</laboratoryId>
               <laboratoryName>Общий клинический анализ крови (общий анализ + СОЭ); микроскопическое исследование мазка крови при выявлении патологии + подсчет ретикулоцитов</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A00.0</code>
                  <name>Холера, вызванная холерным вибрионом 01, биовар cholerae</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>11312193</jobExecutionId>
                  <fio>Бабенкова Лариса Борисовна</fio>
                  <snils>01558018738</snils>
                  <specialityId>602</specialityId>
                  <specialityName>Врач-терапевт участковый</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>6</id>
               <name>Биоматериал, взятый на приеме у специалиста</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateTomorrow+"""</dateFrom>
               <dateTo>"""+dateTomorrow+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152042975</entryId>
               <laboratoryId>2535</laboratoryId>
               <laboratoryName>Посев на коринебактерии дифтерии (Corynebacterium diphtheriae)</laboratoryName>
               <biomaterialId>26</biomaterialId>
               <biomaterialName>Мазок слизистой носа</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.1</code>
                  <name>Паратиф A</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>12039022543</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>1</specialityId>
                  <specialityName>Врач-терапевт</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>1</id>
               <name>Взятие венозной крови</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateYesterday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152025083</entryId>
               <laboratoryId>3009</laboratoryId>
               <laboratoryName>Билирубин и фракции (комплекс)</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.0</code>
                  <name>Брюшной тиф</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10005181</jobExecutionId>
                  <fio>Панова Ольга Альбертовна</fio>
                  <snils>01566726963</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>2</id>
               <name>Взятие капиллярной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>true</appointmentAvailable>
            <registryEntry>
               <entryId>152037414</entryId>
               <laboratoryId>3669</laboratoryId>
               <laboratoryName>Глюкоза (капиллярная кровь), дети</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A00.0</code>
                  <name>Холера, вызванная холерным вибрионом 01, биовар cholerae</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>120390225430001</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>11</specialityId>
                  <specialityName>Врач-гастроэнтеролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+dateTomorrow+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152043146</entryId>
               <laboratoryId>20</laboratoryId>
               <laboratoryName>Микроальбумин</laboratoryName>
               <biomaterialId>18</biomaterialId>
               <biomaterialName>Моча первая порция</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>I48.3</code>
                  <name>Типичная форма трепетания предсердий</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152043456</entryId>
               <laboratoryId>20</laboratoryId>
               <laboratoryName>Микроальбумин</laboratoryName>
               <biomaterialId>18</biomaterialId>
               <biomaterialName>Моча первая порция</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>I48.3</code>
                  <name>Типичная форма трепетания предсердий</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>6</id>
               <name>Биоматериал, взятый на приеме у специалиста</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateTomorrow+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152042485</entryId>
               <laboratoryId>2535</laboratoryId>
               <laboratoryName>Посев на коринебактерии дифтерии (Corynebacterium diphtheriae)</laboratoryName>
               <biomaterialId>26</biomaterialId>
               <biomaterialName>Мазок слизистой носа</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.1</code>
                  <name>Паратиф A</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>12039022543</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>1</specialityId>
                  <specialityName>Врач-терапевт</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>6</id>
               <name>Биоматериал, взятый на приеме у специалиста</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentOpenDate>2025-01-01</appointmentOpenDate>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152042675</entryId>
               <laboratoryId>2535</laboratoryId>
               <laboratoryName>Посев на коринебактерии дифтерии (Corynebacterium diphtheriae)</laboratoryName>
               <biomaterialId>26</biomaterialId>
               <biomaterialName>Мазок слизистой носа</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.1</code>
                  <name>Паратиф A</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>12039022543</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>1</specialityId>
                  <specialityName>Врач-терапевт</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
      </ns2:getAssignmentsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAssignmentsInfo="update template_response set response='"+getAssignmentsInfoResponse+"' where \"path\"= '"+pathGetAssignmentsInfo+"'"
sql.execute(queryGetAssignmentsInfo)]]></script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getReferralsInfo" id="71afb2c7-6650-4bff-88a1-18c6d0f88948"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathGetReferralsInfo = testRunner.testCase.getPropertyValue("pathGetReferralsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getReferralsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74404724464</id>
            <number>Н20230424-351</number>
            <comment>Постановка диагноза;</comment>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateToday+"""</endTime>
            <type>REF_TO_LDP</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toLdp>
               <ldpTypeId>600020</ldpTypeId>
               <ldpTypeName>ЭКГ</ldpTypeName>
               <countAssignmentProcedures>1</countAssignmentProcedures>
            </toLdp>
            <diagnosis>
               <code>A01.0</code>
               <name>Брюшной тиф</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>11354096</jobExecutionId>
               <fio>Габдулина Альбина Яковлевна</fio>
               <snils>07126017324</snils>
               <specialityId>602</specialityId>
               <specialityName>Врач-терапевт участковый</specialityName>
            </issuedDoctor>
            <appointmentOpenDate>2025-01-01</appointmentOpenDate>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74416336689</id>
            <number>Н20230627-69</number>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateYesterday+"""</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>10478903</lpuId>
            <lpuType>Городская больница</lpuType>
            <lpuName>ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</lpuName>
            <toDoctor>
               <specialityId>72</specialityId>
               <specialityName>Акушер(-ка)</specialityName>
               <receptionTypeId>1942</receptionTypeId>
            </toDoctor>
            <diagnosis>
               <code>Z00.0</code>
               <name>Общий медицинский осмотр</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>190589687</jobExecutionId>
               <fio>Багаева Татьяна Вячеславовна</fio>
               <snils>09544242983</snils>
               <specialityId>4</specialityId>
               <specialityName>Врач-акушер-гинеколог</specialityName>
            </issuedDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74395753664</id>
            <number>Н20230302-199</number>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateToday+"""</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>70</specialityId>
               <specialityName>Медицинская сестра (медбрат)</specialityName>
               <receptionTypeId>777</receptionTypeId>
            </toDoctor>
            <diagnosis>
               <code>Z00.0</code>
               <name>Общий медицинский осмотр</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>10005163</jobExecutionId>
               <fio>Мишеева Вера Анатольевна</fio>
               <snils>01717644647</snils>
               <specialityId>602</specialityId>
               <specialityName>Врач-терапевт участковый</specialityName>
            </issuedDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetReferralsInfo="update template_response set response='"+getReferralsInfoResponse+"' where \"path\"= '"+pathGetReferralsInfo+"'"
sql.execute(queryGetReferralsInfo)]]></script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentSaOrchestrator" id="0a602f69-0a89-44d3-80bb-ed0665d05db5"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathSaAppointment = testRunner.testCase.getPropertyValue("pathSaAppointment")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391921178173</id>
            <number>И20230926-111</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+dateToday+"""T18:30:00+03:00</startTime>
            <endTime>"""+dateToday+"""T19:00:00+03:00</endTime>
            <type>LDP</type>
            <enableCancel>true</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20455900839</availableResourceId>
            <complexResourceId>240926738</complexResourceId>
            <roomId>30510573</roomId>
            <roomNumber>1602</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toLdp>
               <ldpTypeId>51501</ldpTypeId>
               <ldpTypeName>Удаление каловых камней, инородных тел прямой кишки</ldpTypeName>
            </toLdp>
            <statusId>10</statusId>
            <referral>
               <referralId>74431024939</referralId>
               <startTime>2023-09-26</startTime>
               <endTime>2024-10-25</endTime>
               <lpuId>204</lpuId>
            </referral>
         </appointment>
         <appointment>
            <id>391921177148</id>
            <number>И20230926-110</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+dateTomorrow+"""T18:30:00+03:00</startTime>
            <endTime>"""+dateTomorrow+"""T19:00:00+03:00</endTime>
            <type>LDP</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20455900839</availableResourceId>
            <complexResourceId>240926738</complexResourceId>
            <roomId>30510573</roomId>
            <roomNumber>1602</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toLdp>
               <ldpTypeId>51501</ldpTypeId>
               <ldpTypeName>Удаление каловых камней, инородных тел прямой кишки</ldpTypeName>
            </toLdp>
            <statusId>10</statusId>
            <referral>
               <referralId>74431024939</referralId>
               <startTime>2023-09-26</startTime>
               <endTime>2024-10-25</endTime>
               <lpuId>204</lpuId>
            </referral>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointment="update template_response set response='"+getAppointmentResponse+"' where \"path\"= '"+pathSaAppointment+"'"
sql.execute(queryGetAppointment)]]></script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentGibdd" id="70fe1a3f-2c4c-4134-b3ff-c7f3de952ca4"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathGibddAppointment = testRunner.testCase.getPropertyValue("pathGibddAppointment")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:GetAppointmentReceptionsByPatientResponse xmlns:ns2="http://emias2.gov.ru/emias/appointment/v1/" xmlns:ns3="http://emias2.gov.ru/universal/v1/types/exceptions/" xmlns:ns4="http://emias2.gov.ru/emias/appointment/v1/types/" xmlns:ns5="http://emias2.gov.ru/emias/gibdd/v1/types/">
         <appointments>
            <ns4:id>452159</ns4:id>
            <ns4:patient>
               <ns4:birthday>1989-01-24T00:00:00</ns4:birthday>
               <ns4:oms>7758010875002485</ns4:oms>
               <ns4:mobilePhone>9859095400</ns4:mobilePhone>
            </ns4:patient>
            <ns4:appointmentNum>СП20230928-13</ns4:appointmentNum>
            <ns4:startDate>"""+dateToday+"""T18:30:00</ns4:startDate>
            <ns4:endDate>"""+dateToday+"""T18:45:00</ns4:endDate>
            <ns4:actual>true</ns4:actual>
            <ns4:availableResource>
               <ns4:availableResourceId>5486</ns4:availableResourceId>
               <ns4:availableResourceTitle>Алипова Ольга Андреевна</ns4:availableResourceTitle>
               <ns4:roomCode></ns4:roomCode>
            </ns4:availableResource>
            <ns4:lpu>
               <ns5:id>1</ns5:id>
               <ns5:name>ГБУЗ г. Москвы "Городская поликлиника № 180 ДЗМ"</ns5:name>
               <ns5:shortName>ГБУ ГП 180 ДЗМ</ns5:shortName>
               <ns5:lpuAddress>г. Москва, Уваровский переулок, д.4</ns5:lpuAddress>
               <ns5:moId>145</ns5:moId>
            </ns4:lpu>
            <ns4:referenceType>
               <ns4:referenceTypeId>21</ns4:referenceTypeId>
               <ns4:referenceTypeName>Справка на Оружие</ns4:referenceTypeName>
            </ns4:referenceType>
            <ns4:createDate>2023-09-28T15:58:29.849</ns4:createDate>
         </appointments>
         <appointments>
            <ns4:id>452159</ns4:id>
            <ns4:patient>
               <ns4:birthday>1989-01-24T00:00:00</ns4:birthday>
               <ns4:oms>7758010875002485</ns4:oms>
               <ns4:mobilePhone>9859095400</ns4:mobilePhone>
            </ns4:patient>
            <ns4:appointmentNum>СП20230928-13</ns4:appointmentNum>
            <ns4:startDate>"""+dateTomorrow+"""T18:30:00</ns4:startDate>
            <ns4:endDate>"""+dateTomorrow+"""T18:45:00</ns4:endDate>
            <ns4:actual>true</ns4:actual>
            <ns4:availableResource>
               <ns4:availableResourceId>5486</ns4:availableResourceId>
               <ns4:availableResourceTitle>Алипова Ольга Андреевна</ns4:availableResourceTitle>
               <ns4:roomCode></ns4:roomCode>
            </ns4:availableResource>
            <ns4:lpu>
               <ns5:id>1</ns5:id>
               <ns5:name>ГБУЗ г. Москвы "Городская поликлиника № 180 ДЗМ"</ns5:name>
               <ns5:shortName>ГБУ ГП 180 ДЗМ</ns5:shortName>
               <ns5:lpuAddress>г. Москва, Уваровский переулок, д.4</ns5:lpuAddress>
               <ns5:moId>145</ns5:moId>
            </ns4:lpu>
            <ns4:referenceType>
               <ns4:referenceTypeId>21</ns4:referenceTypeId>
               <ns4:referenceTypeName>Справка на Оружие</ns4:referenceTypeName>
            </ns4:referenceType>
            <ns4:createDate>2023-09-28T15:58:29.849</ns4:createDate>
         </appointments>
      </ns2:GetAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointment="update template_response set response='"+getAppointmentResponse+"' where \"path\"= '"+pathGibddAppointment+"'"
sql.execute(queryGetAppointment)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="3884e6f6-8ce7-4fbc-9f4f-305464ab1b69"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395214_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395214"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDateAppointment = текущая дата"><con:configuration><path>$.payload.activeAppointment.closeDate</path><content>${#TestCase#dateToday}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countAppointment = 2"><con:configuration><path>$.payload.activeAppointment.count</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countReferrals = 6"><con:configuration><path>$.payload.activeReferrals.count</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDateReferrals = текущая дата"><con:configuration><path>$.payload.activeReferrals.closeDate</path><content>${#TestCase#dateToday}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="closeCountReferrals = 4"><con:configuration><path>$.payload.activeReferrals.closeCount</path><content>4</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7790689773000533</con:value></con:property><con:property><con:name>bd</con:name><con:value>2013-09-26</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-05-25</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-05-23</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395214/getAssignmentsInfo</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395214/getReferralsInfo</con:value></con:property><con:property><con:name>pathSaAppointment</con:name><con:value>/mock/395214/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGibddAppointment</con:name><con:value>/mock/395214_1/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-24</con:value></con:property></con:properties></con:testCase><con:testCase id="1dbc1d89-445b-493e-a12c-f7b07dfbb4da" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417887_Проверка необязательных параметров и корректности отбора записей для пациента = 18 лет" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="a98b5c57-68b4-4b23-9e05-8722aa9a259c"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(1).toDate()
Date dateMinus =  LocalDateTime.now().plusDays(-1).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def dateTomorrow = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
def dateYesterday = new SimpleDateFormat("yyyy-MM-dd").format(dateMinus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("dateTomorrow", dateTomorrow)
testRunner.testCase.setPropertyValue("dateYesterday", dateYesterday)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAssignmentsInfo" id="c1333d05-648e-4afd-8050-e1f5e735b837"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
log.info dateYesterday.getClass()
pathGetAssignmentsInfo = testRunner.testCase.getPropertyValue("pathGetAssignemtnsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAssignmentsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/">
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>1</id>
               <name>Взятие венозной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <appointmentId>391921600473</appointmentId>
            <registryEntry>
               <entryId>152043139</entryId>
               <laboratoryId>47</laboratoryId>
               <laboratoryName>Билирубин общий</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>J44.8</code>
                  <name>Другая уточненная хроническая обструктивная легочная болезнь</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>10000290</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentOpenDate>2025-01-01</appointmentOpenDate>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152035252</entryId>
               <laboratoryId>2726</laboratoryId>
               <laboratoryName>Обнаружение гельминтов в кале</laboratoryName>
               <biomaterialId>4</biomaterialId>
               <biomaterialName>Кал</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A04.5</code>
                  <name>Энтерит, вызванный Campylobacter</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>13024536040</jobExecutionId>
                  <fio>Мармеладова Софья Семёновна</fio>
                  <snils>44806166895</snils>
                  <specialityId>788</specialityId>
                  <specialityName>Медицинская сестра (медбрат) врача общей практики (семейного врача)</specialityName>
               </issuedDoctor>
            </registryEntry>
            <registryEntry>
               <entryId>152035251</entryId>
               <laboratoryId>2911</laboratoryId>
               <laboratoryName>Общий клинический анализ мочи</laboratoryName>
               <biomaterialId>3</biomaterialId>
               <biomaterialName>Моча</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A04.5</code>
                  <name>Энтерит, вызванный Campylobacter</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>13024536040</jobExecutionId>
                  <fio>Мармеладова Софья Семёновна</fio>
                  <snils>44806166895</snils>
                  <specialityId>788</specialityId>
                  <specialityName>Медицинская сестра (медбрат) врача общей практики (семейного врача)</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>2</id>
               <name>Взятие капиллярной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateYesterday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152040226</entryId>
               <laboratoryId>2909</laboratoryId>
               <laboratoryName>Общий клинический анализ крови (общий анализ + СОЭ); микроскопическое исследование мазка крови при выявлении патологии + подсчет ретикулоцитов</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A00.0</code>
                  <name>Холера, вызванная холерным вибрионом 01, биовар cholerae</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>11312193</jobExecutionId>
                  <fio>Бабенкова Лариса Борисовна</fio>
                  <snils>01558018738</snils>
                  <specialityId>602</specialityId>
                  <specialityName>Врач-терапевт участковый</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>6</id>
               <name>Биоматериал, взятый на приеме у специалиста</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateTomorrow+"""</dateFrom>
               <dateTo>"""+dateTomorrow+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152042975</entryId>
               <laboratoryId>2535</laboratoryId>
               <laboratoryName>Посев на коринебактерии дифтерии (Corynebacterium diphtheriae)</laboratoryName>
               <biomaterialId>26</biomaterialId>
               <biomaterialName>Мазок слизистой носа</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.1</code>
                  <name>Паратиф A</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>12039022543</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>1</specialityId>
                  <specialityName>Врач-терапевт</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>1</id>
               <name>Взятие венозной крови</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateYesterday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152025083</entryId>
               <laboratoryId>3009</laboratoryId>
               <laboratoryName>Билирубин и фракции (комплекс)</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.0</code>
                  <name>Брюшной тиф</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10005181</jobExecutionId>
                  <fio>Панова Ольга Альбертовна</fio>
                  <snils>01566726963</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>2</id>
               <name>Взятие капиллярной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>true</appointmentAvailable>
            <registryEntry>
               <entryId>152037414</entryId>
               <laboratoryId>3669</laboratoryId>
               <laboratoryName>Глюкоза (капиллярная кровь), дети</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A00.0</code>
                  <name>Холера, вызванная холерным вибрионом 01, биовар cholerae</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>120390225430001</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>11</specialityId>
                  <specialityName>Врач-гастроэнтеролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+dateTomorrow+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152043146</entryId>
               <laboratoryId>20</laboratoryId>
               <laboratoryName>Микроальбумин</laboratoryName>
               <biomaterialId>18</biomaterialId>
               <biomaterialName>Моча первая порция</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>I48.3</code>
                  <name>Типичная форма трепетания предсердий</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152043456</entryId>
               <laboratoryId>20</laboratoryId>
               <laboratoryName>Микроальбумин</laboratoryName>
               <biomaterialId>18</biomaterialId>
               <biomaterialName>Моча первая порция</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>I48.3</code>
                  <name>Типичная форма трепетания предсердий</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>6</id>
               <name>Биоматериал, взятый на приеме у специалиста</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateTomorrow+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152042485</entryId>
               <laboratoryId>2535</laboratoryId>
               <laboratoryName>Посев на коринебактерии дифтерии (Corynebacterium diphtheriae)</laboratoryName>
               <biomaterialId>26</biomaterialId>
               <biomaterialName>Мазок слизистой носа</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.1</code>
                  <name>Паратиф A</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>12039022543</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>1</specialityId>
                  <specialityName>Врач-терапевт</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>6</id>
               <name>Биоматериал, взятый на приеме у специалиста</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentOpenDate>2025-01-01</appointmentOpenDate>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152042675</entryId>
               <laboratoryId>2535</laboratoryId>
               <laboratoryName>Посев на коринебактерии дифтерии (Corynebacterium diphtheriae)</laboratoryName>
               <biomaterialId>26</biomaterialId>
               <biomaterialName>Мазок слизистой носа</biomaterialName>
               <hasMemo>false</hasMemo>
               <diagnosis>
                  <code>A01.1</code>
                  <name>Паратиф A</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>12039022543</jobExecutionId>
                  <fio>Беда Раиса Андреевна</fio>
                  <snils>00540362396</snils>
                  <specialityId>1</specialityId>
                  <specialityName>Врач-терапевт</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
      </ns2:getAssignmentsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAssignmentsInfo="update template_response set response='"+getAssignmentsInfoResponse+"' where \"path\"= '"+pathGetAssignmentsInfo+"'"
sql.execute(queryGetAssignmentsInfo)]]></script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getReferralsInfo" id="1b1779a9-fc16-4c47-a20c-894b81e6e363"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathGetReferralsInfo = testRunner.testCase.getPropertyValue("pathGetReferralsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getReferralsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74404724464</id>
            <number>Н20230424-351</number>
            <comment>Постановка диагноза;</comment>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateToday+"""</endTime>
            <type>REF_TO_LDP</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toLdp>
               <ldpTypeId>600020</ldpTypeId>
               <ldpTypeName>ЭКГ</ldpTypeName>
               <countAssignmentProcedures>1</countAssignmentProcedures>
            </toLdp>
            <diagnosis>
               <code>A01.0</code>
               <name>Брюшной тиф</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>11354096</jobExecutionId>
               <fio>Габдулина Альбина Яковлевна</fio>
               <snils>07126017324</snils>
               <specialityId>602</specialityId>
               <specialityName>Врач-терапевт участковый</specialityName>
            </issuedDoctor>
            <appointmentOpenDate>2025-01-01</appointmentOpenDate>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74416336689</id>
            <number>Н20230627-69</number>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateYesterday+"""</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>10478903</lpuId>
            <lpuType>Городская больница</lpuType>
            <lpuName>ГБУЗ «ГКБ им. Д.Д. Плетнева ДЗМ»</lpuName>
            <toDoctor>
               <specialityId>72</specialityId>
               <specialityName>Акушер(-ка)</specialityName>
               <receptionTypeId>1942</receptionTypeId>
            </toDoctor>
            <diagnosis>
               <code>Z00.0</code>
               <name>Общий медицинский осмотр</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>190589687</jobExecutionId>
               <fio>Багаева Татьяна Вячеславовна</fio>
               <snils>09544242983</snils>
               <specialityId>4</specialityId>
               <specialityName>Врач-акушер-гинеколог</specialityName>
            </issuedDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74395753664</id>
            <number>Н20230302-199</number>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateToday+"""</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>70</specialityId>
               <specialityName>Медицинская сестра (медбрат)</specialityName>
               <receptionTypeId>777</receptionTypeId>
            </toDoctor>
            <diagnosis>
               <code>Z00.0</code>
               <name>Общий медицинский осмотр</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>10005163</jobExecutionId>
               <fio>Мишеева Вера Анатольевна</fio>
               <snils>01717644647</snils>
               <specialityId>602</specialityId>
               <specialityName>Врач-терапевт участковый</specialityName>
            </issuedDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetReferralsInfo="update template_response set response='"+getReferralsInfoResponse+"' where \"path\"= '"+pathGetReferralsInfo+"'"
sql.execute(queryGetReferralsInfo)]]></script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentSaOrchestrator" id="44a1bad3-7488-4a3a-9dad-2ea06c1f2b74"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathSaAppointment = testRunner.testCase.getPropertyValue("pathSaAppointment")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391921177148</id>
            <number>И20230926-110</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+dateTomorrow+"""T18:30:00+03:00</startTime>
            <endTime>"""+dateTomorrow+"""T19:00:00+03:00</endTime>
            <type>LDP</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20455900839</availableResourceId>
            <complexResourceId>240926738</complexResourceId>
            <roomId>30510573</roomId>
            <roomNumber>1602</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toLdp>
               <ldpTypeId>51501</ldpTypeId>
               <ldpTypeName>Удаление каловых камней, инородных тел прямой кишки</ldpTypeName>
            </toLdp>
            <statusId>10</statusId>
            <referral>
               <referralId>74431024939</referralId>
               <startTime>2023-09-26</startTime>
               <endTime>2024-10-25</endTime>
               <lpuId>204</lpuId>
            </referral>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointment="update template_response set response='"+getAppointmentResponse+"' where \"path\"= '"+pathSaAppointment+"'"
sql.execute(queryGetAppointment)]]></script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentGibdd" id="fcd7e231-253e-4c47-b434-e9c40347be76"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathGibddAppointment = testRunner.testCase.getPropertyValue("pathGibddAppointment")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:GetAppointmentReceptionsByPatientResponse xmlns:ns2="http://emias2.gov.ru/emias/appointment/v1/" xmlns:ns3="http://emias2.gov.ru/universal/v1/types/exceptions/" xmlns:ns4="http://emias2.gov.ru/emias/appointment/v1/types/" xmlns:ns5="http://emias2.gov.ru/emias/gibdd/v1/types/">
         <appointments>
            <ns4:id>452159</ns4:id>
            <ns4:patient>
               <ns4:birthday>1989-01-24T00:00:00</ns4:birthday>
               <ns4:oms>7758010875002485</ns4:oms>
               <ns4:mobilePhone>9859095400</ns4:mobilePhone>
            </ns4:patient>
            <ns4:appointmentNum>СП20230928-13</ns4:appointmentNum>
            <ns4:startDate>"""+dateToday+"""T18:30:00</ns4:startDate>
            <ns4:endDate>"""+dateToday+"""T18:45:00</ns4:endDate>
            <ns4:actual>true</ns4:actual>
            <ns4:availableResource>
               <ns4:availableResourceId>5486</ns4:availableResourceId>
               <ns4:availableResourceTitle>Алипова Ольга Андреевна</ns4:availableResourceTitle>
               <ns4:roomCode></ns4:roomCode>
            </ns4:availableResource>
            <ns4:lpu>
               <ns5:id>1</ns5:id>
               <ns5:name>ГБУЗ г. Москвы "Городская поликлиника № 180 ДЗМ"</ns5:name>
               <ns5:shortName>ГБУ ГП 180 ДЗМ</ns5:shortName>
               <ns5:lpuAddress>г. Москва, Уваровский переулок, д.4</ns5:lpuAddress>
               <ns5:moId>145</ns5:moId>
            </ns4:lpu>
            <ns4:referenceType>
               <ns4:referenceTypeId>21</ns4:referenceTypeId>
               <ns4:referenceTypeName>Справка на Оружие</ns4:referenceTypeName>
            </ns4:referenceType>
            <ns4:createDate>2023-09-28T15:58:29.849</ns4:createDate>
         </appointments>
         <appointments>
            <ns4:id>452159</ns4:id>
            <ns4:patient>
               <ns4:birthday>1989-01-24T00:00:00</ns4:birthday>
               <ns4:oms>7758010875002485</ns4:oms>
               <ns4:mobilePhone>9859095400</ns4:mobilePhone>
            </ns4:patient>
            <ns4:appointmentNum>СП20230928-13</ns4:appointmentNum>
            <ns4:startDate>"""+dateTomorrow+"""T18:30:00</ns4:startDate>
            <ns4:endDate>"""+dateTomorrow+"""T18:45:00</ns4:endDate>
            <ns4:actual>true</ns4:actual>
            <ns4:availableResource>
               <ns4:availableResourceId>5486</ns4:availableResourceId>
               <ns4:availableResourceTitle>Алипова Ольга Андреевна</ns4:availableResourceTitle>
               <ns4:roomCode></ns4:roomCode>
            </ns4:availableResource>
            <ns4:lpu>
               <ns5:id>1</ns5:id>
               <ns5:name>ГБУЗ г. Москвы "Городская поликлиника № 180 ДЗМ"</ns5:name>
               <ns5:shortName>ГБУ ГП 180 ДЗМ</ns5:shortName>
               <ns5:lpuAddress>г. Москва, Уваровский переулок, д.4</ns5:lpuAddress>
               <ns5:moId>145</ns5:moId>
            </ns4:lpu>
            <ns4:referenceType>
               <ns4:referenceTypeId>21</ns4:referenceTypeId>
               <ns4:referenceTypeName>Справка на Оружие</ns4:referenceTypeName>
            </ns4:referenceType>
            <ns4:createDate>2023-09-28T15:58:29.849</ns4:createDate>
         </appointments>
      </ns2:GetAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointment="update template_response set response='"+getAppointmentResponse+"' where \"path\"= '"+pathGibddAppointment+"'"
sql.execute(queryGetAppointment)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="73c79d25-acef-4f36-bf38-05a4fd37d3ef"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395215_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395215"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDateAppointment = текущая дата"><con:configuration><path>$.payload.activeAppointment.closeDate</path><content>${#TestCase#dateToday}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countAppointment = 2"><con:configuration><path>$.payload.activeAppointment.count</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countReferrals = 6"><con:configuration><path>$.payload.activeReferrals.count</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDateReferrals = текущая дата"><con:configuration><path>$.payload.activeReferrals.closeDate</path><content>${#TestCase#dateToday}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="closeCountReferrals = 4"><con:configuration><path>$.payload.activeReferrals.closeCount</path><content>4</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>0000000000044446</con:value></con:property><con:property><con:name>bd</con:name><con:value>2005-01-18</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-05-25</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-05-23</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395215/getAssignmentsInfo</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395215/getReferralsInfo</con:value></con:property><con:property><con:name>pathSaAppointment</con:name><con:value>/mock/395215/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGibddAppointment</con:name><con:value>/mock/395215_1/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-24</con:value></con:property></con:properties></con:testCase><con:testCase id="f1414a3e-b712-49c6-bfa0-9f95f6c0043f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417888_Проверка отбора assignment.closeDate по дате отличной от текущей на 7 дней" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="13a71ace-c7d1-492b-861f-dcb50ca6608f"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(7).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def closeDate = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("closeDate", closeDate)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAssignmentsInfo" id="870adab2-0280-415f-a397-d0b63859a188"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
closeDate = testRunner.testCase.getPropertyValue("closeDate")
pathGetAssignmentsInfo = testRunner.testCase.getPropertyValue("pathGetAssignemtnsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAssignmentsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/">
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>1</id>
               <name>Взятие венозной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+closeDate+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152043139</entryId>
               <laboratoryId>47</laboratoryId>
               <laboratoryName>Билирубин общий</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>J44.8</code>
                  <name>Другая уточненная хроническая обструктивная легочная болезнь</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
      </ns2:getAssignmentsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAssignmentsInfo="update template_response set response='"+getAssignmentsInfoResponse+"' where \"path\"= '"+pathGetAssignmentsInfo+"'"
sql.execute(queryGetAssignmentsInfo)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="dc49f736-07e0-4519-896c-ac55deda2b3b"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395218"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countReferrals = 1"><con:configuration><path>$.payload.activeReferrals.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDateReferrals = текущая дата + 7 дней"><con:configuration><path>$.payload.activeReferrals.closeDate</path><content>${#TestCase#closeDate}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="closeCountReferrals = 1"><con:configuration><path>$.payload.activeReferrals.closeCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>0000000000044446</con:value></con:property><con:property><con:name>bd</con:name><con:value>2005-01-18</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-03-01</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-02-28</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395218/getAssignmentsInfo</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395218/getReferralsInfo</con:value></con:property><con:property><con:name>pathSaAppointment</con:name><con:value>/mock/395218/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGibddAppointment</con:name><con:value>/mock/395215_1/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-24</con:value></con:property><con:property><con:name>closeDate</con:name><con:value>2024-05-31</con:value></con:property></con:properties></con:testCase><con:testCase id="60987bac-5f76-4a8a-98c8-9ff1091025aa" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417889_Проверка отбора assignment.closeDate по дате отличной от текущей на 8 дней" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="9d5bbbe5-1bf0-4bd1-99c7-665c418c232b"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(8).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def closeDate = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("closeDate", closeDate)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAssignmentsInfo" id="47aafd05-3ee9-41d8-a89a-e22aac4e3231"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
closeDate = testRunner.testCase.getPropertyValue("closeDate")
pathGetAssignmentsInfo = testRunner.testCase.getPropertyValue("pathGetAssignemtnsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAssignmentsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/">
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>1</id>
               <name>Взятие венозной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>"""+dateToday+"""</dateFrom>
               <dateTo>"""+closeDate+"""</dateTo>
            </period>
            <active>true</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152043139</entryId>
               <laboratoryId>47</laboratoryId>
               <laboratoryName>Билирубин общий</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>J44.8</code>
                  <name>Другая уточненная хроническая обструктивная легочная болезнь</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>10293369</jobExecutionId>
                  <fio>Борисова Оксана Михайловна</fio>
                  <snils>07894490330</snils>
                  <specialityId>9</specialityId>
                  <specialityName>Врач-невролог</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
      </ns2:getAssignmentsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAssignmentsInfo="update template_response set response='"+getAssignmentsInfoResponse+"' where \"path\"= '"+pathGetAssignmentsInfo+"'"
sql.execute(queryGetAssignmentsInfo)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="f45ac59b-8869-40ce-899c-989dc7b3d555"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395218"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countReferrals = 1"><con:configuration><path>$.payload.activeReferrals.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="36c2244b-81b5-4d75-85ea-89b155b69872" name="Отсутствует closeDateReferrals"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="fcb9fb25-3fbc-43da-a937-ec15ddbe2d94" name="Отсутствует closeCountReferrals"><con:configuration><token>closeCount</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7755530870001052</con:value></con:property><con:property><con:name>bd</con:name><con:value>1964-04-29</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-03-01</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-02-28</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395218/getAssignmentsInfo</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395218/getReferralsInfo</con:value></con:property><con:property><con:name>pathSaAppointment</con:name><con:value>/mock/395218/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGibddAppointment</con:name><con:value>/mock/395215_1/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-24</con:value></con:property><con:property><con:name>closeDate</con:name><con:value>2024-06-01</con:value></con:property></con:properties></con:testCase><con:testCase id="92f173b6-396b-4e4e-b89f-a5ae4fef482b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417890_Проверка отбора appointment.closeDate по дате отличной от текущей на 7 дней" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="eb431811-fd8f-4b34-b079-7b669acdc71c"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(7).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def closeDate = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("closeDate", closeDate)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentGibdd" id="da45bdae-d887-4be9-b279-1ea8bd9a4e54"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
closeDate = testRunner.testCase.getPropertyValue("closeDate")
pathGibddAppointment = testRunner.testCase.getPropertyValue("pathGibddAppointment")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:GetAppointmentReceptionsByPatientResponse xmlns:ns2="http://emias2.gov.ru/emias/appointment/v1/" xmlns:ns3="http://emias2.gov.ru/universal/v1/types/exceptions/" xmlns:ns4="http://emias2.gov.ru/emias/appointment/v1/types/" xmlns:ns5="http://emias2.gov.ru/emias/gibdd/v1/types/">
         <appointments>
            <ns4:id>453853</ns4:id>
            <ns4:patient>
               <ns4:birthday>1989-01-24T00:00:00</ns4:birthday>
               <ns4:oms>7758010875002485</ns4:oms>
               <ns4:mobilePhone>9859095400</ns4:mobilePhone>
            </ns4:patient>
            <ns4:appointmentNum>СП20240226-4</ns4:appointmentNum>
            <ns4:startDate>"""+closeDate+"""T18:45:00</ns4:startDate>
            <ns4:endDate>"""+closeDate+"""T19:00:00</ns4:endDate>
            <ns4:actual>true</ns4:actual>
            <ns4:availableResource>
               <ns4:availableResourceId>5601</ns4:availableResourceId>
               <ns4:availableResourceTitle>Аверочкина Ирина Ивановна</ns4:availableResourceTitle>
               <ns4:roomCode>404</ns4:roomCode>
            </ns4:availableResource>
            <ns4:lpu>
               <ns5:id>32</ns5:id>
               <ns5:name>ГБУЗ г. Москвы "Городская поликлиника № 219 ДЗМ"</ns5:name>
               <ns5:shortName>ГБУЗ ГП 219 ДЗМ</ns5:shortName>
               <ns5:lpuAddress>г. Москва, бульвар Яна Райниса, д. 47</ns5:lpuAddress>
               <ns5:moId>10000370</ns5:moId>
            </ns4:lpu>
            <ns4:referenceType>
               <ns4:referenceTypeId>21</ns4:referenceTypeId>
               <ns4:referenceTypeName>Справка на Оружие</ns4:referenceTypeName>
            </ns4:referenceType>
            <ns4:createDate>2024-02-26T16:27:08.578</ns4:createDate>
         </appointments>
      </ns2:GetAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointment="update template_response set response='"+getAppointmentResponse+"' where \"path\"= '"+pathGibddAppointment+"'"
sql.execute(queryGetAppointment)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="f303e384-261a-430d-adc3-df7dfc751493"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395220"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDateAppointment = текущая дата + 7 дней"><con:configuration><path>$.payload.activeAppointment.closeDate</path><content>${#TestCase#closeDate}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countAppointment = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7701009045151296</con:value></con:property><con:property><con:name>bd</con:name><con:value>1996-12-15</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-03-01</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-02-28</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395215/getAssignmentsInfo</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395215/getReferralsInfo</con:value></con:property><con:property><con:name>pathSaAppointment</con:name><con:value>/mock/395215/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGibddAppointment</con:name><con:value>/mock/395220/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-24</con:value></con:property><con:property><con:name>closeDate</con:name><con:value>2024-05-31</con:value></con:property></con:properties></con:testCase><con:testCase id="db2d46a6-e76f-42ea-ae08-14c9fa5fd284" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417891_Проверка отбора appointment.closeDate по дате отличной от текущей на 8 дней" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="a04085c1-9719-4272-9eea-663ac8b75b0c"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(8).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def closeDate = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("closeDate", closeDate)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentGibdd" id="f2ba60f0-2d52-40aa-9d09-97ce1b6c7fe5"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
closeDate = testRunner.testCase.getPropertyValue("closeDate")
pathGibddAppointment = testRunner.testCase.getPropertyValue("pathGibddAppointment")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:GetAppointmentReceptionsByPatientResponse xmlns:ns2="http://emias2.gov.ru/emias/appointment/v1/" xmlns:ns3="http://emias2.gov.ru/universal/v1/types/exceptions/" xmlns:ns4="http://emias2.gov.ru/emias/appointment/v1/types/" xmlns:ns5="http://emias2.gov.ru/emias/gibdd/v1/types/">
         <appointments>
            <ns4:id>453853</ns4:id>
            <ns4:patient>
               <ns4:birthday>1989-01-24T00:00:00</ns4:birthday>
               <ns4:oms>7758010875002485</ns4:oms>
               <ns4:mobilePhone>9859095400</ns4:mobilePhone>
            </ns4:patient>
            <ns4:appointmentNum>СП20240226-4</ns4:appointmentNum>
            <ns4:startDate>"""+closeDate+"""T18:45:00</ns4:startDate>
            <ns4:endDate>"""+closeDate+"""T19:00:00</ns4:endDate>
            <ns4:actual>true</ns4:actual>
            <ns4:availableResource>
               <ns4:availableResourceId>5601</ns4:availableResourceId>
               <ns4:availableResourceTitle>Аверочкина Ирина Ивановна</ns4:availableResourceTitle>
               <ns4:roomCode>404</ns4:roomCode>
            </ns4:availableResource>
            <ns4:lpu>
               <ns5:id>32</ns5:id>
               <ns5:name>ГБУЗ г. Москвы "Городская поликлиника № 219 ДЗМ"</ns5:name>
               <ns5:shortName>ГБУЗ ГП 219 ДЗМ</ns5:shortName>
               <ns5:lpuAddress>г. Москва, бульвар Яна Райниса, д. 47</ns5:lpuAddress>
               <ns5:moId>10000370</ns5:moId>
            </ns4:lpu>
            <ns4:referenceType>
               <ns4:referenceTypeId>21</ns4:referenceTypeId>
               <ns4:referenceTypeName>Справка на Оружие</ns4:referenceTypeName>
            </ns4:referenceType>
            <ns4:createDate>2024-02-26T16:27:08.578</ns4:createDate>
         </appointments>
      </ns2:GetAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointment="update template_response set response='"+getAppointmentResponse+"' where \"path\"= '"+pathGibddAppointment+"'"
sql.execute(queryGetAppointment)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="fc3341c8-37ab-452c-9895-5c70ec244519"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v1/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395220"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="countAppointment = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="0e4d6c98-d86f-4393-b943-af3c8193ba42" name="Not Contains"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7700006072710853</con:value></con:property><con:property><con:name>bd</con:name><con:value>1953-08-21</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-03-01</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-02-28</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395215/getAssignmentsInfo</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395215/getReferralsInfo</con:value></con:property><con:property><con:name>pathSaAppointment</con:name><con:value>/mock/395215/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>pathGibddAppointment</con:name><con:value>/mock/395220/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-24</con:value></con:property><con:property><con:name>closeDate</con:name><con:value>2024-06-01</con:value></con:property></con:properties></con:testCase><con:testCase id="81eb2126-4974-4f04-adf0-294d7b1a0247" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417892_Получение записей по ТМК (есть неархивная неудаленная запись в d_reception_type_tmk_code)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId неархивный неудаленный" id="2d0578d3-1f80-4fec-8b7a-f3142e0b8a31"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = false and is_deleted = false</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="e3e04435-6075-4462-957c-64d7b0ac9ecd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId неархивный неудаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="15d83b08-09be-419a-af35-08e270e60842"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="892ab328-76fe-4ad9-9cd3-9798a9550bf9"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a47ae1ce-fc1b-4219-86ff-96db976beffc" name="Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить маппинг activeTmk" id="e2d9df75-e210-4424-a9e7-06ea382d836e"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient") // В переменной path записан путь до мока "/mock/305855/getDoctorsInfo"
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response
getAppointmentReceptionByPatientMock = new XmlSlurper().parseText(response)

def restResponse = context.expand('${saCount#Response}')
def saCount =  new JsonSlurper().parseText(restResponse)
def activeTmk = saCount.payload.activeTmk

def appointmentId = getAppointmentReceptionByPatientMock.Body.getAppointmentReceptionsByPatientResponse.appointment.id
def eventName = getAppointmentReceptionByPatientMock.Body.getAppointmentReceptionsByPatientResponse.appointment.toDoctor.specialityName
def startTime = testRunner.testCase.getPropertyValue("startTime")

assert activeTmk.appointmentId.toString() == appointmentId.toString() // проверяем appointmentId
assert activeTmk.eventName.toString() == eventName.toString() // проверяем eventName
assert activeTmk.startTime.toString() == startTime.toString() // проверяем eventName
</script></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700007178231039</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1939-10-23</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T08:52:50</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>1629</con:value></con:property></con:properties></con:testCase><con:testCase id="da577677-303b-4514-af2f-e439b02bf939" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417893_Получение записей по ТМК (есть архивная неудаленная запись в d_reception_type_tmk_code)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId архивный неудаленный" id="6ce40a90-dd13-45e6-b68e-839c36e7ce08"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = true and is_deleted = false</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="e07eec28-1f19-4a15-9bbe-e874385803e6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId архивный неудаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="fea3b2b2-0ada-4650-807a-269024213f52"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="df897cc7-1a4c-4fab-b484-6f2078a55c79"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6db30336-1ed4-479f-818f-2816bac2f218" name="Not Contains"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700007170240172</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1972-01-24</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T10:05:51</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>2324</con:value></con:property></con:properties></con:testCase><con:testCase id="8421a119-a889-4e94-82aa-9dc853e1b91b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417894_Получение записей по ТМК (есть неархивная удаленная запись в d_reception_type_tmk_code)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId неархивный удаленный" id="8ebd2868-f8b1-4d40-8067-7abd7aec9671"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = false and is_deleted = true</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="d799bd79-dd9a-41bf-a2e4-c64004588c3f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId неархивный удаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="418bec40-f06e-4121-9386-cb4af1749fec"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="3eff0a19-2ca3-4116-bc4d-20fed8f985e0"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6db30336-1ed4-479f-818f-2816bac2f218" name="Not Contains"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>3258830879000241</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1961-01-20</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T09:13:38</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>1213</con:value></con:property></con:properties></con:testCase><con:testCase id="e89ea949-3a64-4b12-af8b-78c82c6ea6c7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417895_Получение записей по ТМК (есть архивная удаленная запись в d_reception_type_tmk_code)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId архивный удаленный" id="cc46bb01-c818-4345-a49e-5a5b084390c3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = true and is_deleted = true</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="f0116528-a0b2-43f8-a0c5-87f6dbbf36d8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId архивный удаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="9845d88f-93cd-4bbd-ac6a-61872bc420f7"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="9cdc1fe7-8ead-4fa0-9ab1-34e6b82c4bca"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6db30336-1ed4-479f-818f-2816bac2f218" name="Not Contains"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>770000215111077</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1977-10-07</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T09:14:13</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>1213</con:value></con:property></con:properties></con:testCase><con:testCase id="07af841a-c6b9-4f5b-9fcd-43349cac9fda" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417896_Получение записей по ТМК (отсутствует запись в d_reception_type_tmk_code)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Проверить, что receptionTypeId отсутствует в reception_type_tmk_code" id="107e40a9-6dfc-4f55-bc10-50cde83d8d3c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where code_reception_type = ${#TestCase#receptionTypeId}</con:query><con:assertion type="XPath Match" id="ed8709c2-43c4-44a7-bf89-110a23522edc" name="ResultSet fetchSize=&quot;0&quot;"><con:configuration><path>//ResultSet</path><content>&lt;ResultSet fetchSize="0"/></content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="c45ffd0c-6758-4083-b7c2-112b03dfe516"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="16d8e207-aaa1-4185-b2b9-9ceb98fda153"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6db30336-1ed4-479f-818f-2816bac2f218" name="Not Contains"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700002332170839</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1939-08-17</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T09:25:23</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>666666</con:value></con:property></con:properties></con:testCase><con:testCase id="e7dff7aa-b32f-4c67-8c77-b371df502225" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417897_Получение записей по ТМК (appointment.startTime - 24ч = текущее дата и время)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId неархивный неудаленный" id="4d6d718c-2bfd-4d0c-9957-4313d4367667"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = false and is_deleted = false</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="2eb90258-92f6-4571-abbf-77b58bc8c714"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId неархивный неудаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="e0711e32-f95a-43dc-bd95-998990772364"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="5073cf67-8dcc-4a5d-bd05-10248de1c929"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a47ae1ce-fc1b-4219-86ff-96db976beffc" name="Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить маппинг activeTmk" id="68fc3c57-9ca4-410e-8858-d6e33dc84625"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper
import groovy.sql.Sql

path = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient") // В переменной path записан путь до мока "/mock/305855/getDoctorsInfo"
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

query="select response from template_response where \"path\"= '"+path+"'"
def response = sql.firstRow(query).response
getAppointmentReceptionByPatientMock = new XmlSlurper().parseText(response)

def restResponse = context.expand('${saCount#Response}')
def saCount =  new JsonSlurper().parseText(restResponse)
def activeTmk = saCount.payload.activeTmk

def appointmentId = getAppointmentReceptionByPatientMock.Body.getAppointmentReceptionsByPatientResponse.appointment.id
def eventName = getAppointmentReceptionByPatientMock.Body.getAppointmentReceptionsByPatientResponse.appointment.toDoctor.specialityName
def startTime = testRunner.testCase.getPropertyValue("startTime")

assert activeTmk.appointmentId.toString() == appointmentId.toString() // проверяем appointmentId
assert activeTmk.eventName.toString() == eventName.toString() // проверяем eventName
assert activeTmk.startTime.toString() == startTime.toString() // проверяем eventName
</script></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700003297070739</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1939-07-07</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T09:32:47</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>1629</con:value></con:property></con:properties></con:testCase><con:testCase id="c7465ce3-3b98-4f81-92aa-5c75f8503da3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417898_Получение записей по ТМК (appointment.startTime - 24ч > текущее дата и время)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId неархивный неудаленный" id="1739b2e1-2261-4aa4-a187-8ba49a92344c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = false and is_deleted = false</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="39d32cbb-30aa-4f10-9356-c8c834cfc047"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId неархивный неудаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="4688e109-4db1-4c15-b479-f788627ef995"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).plusMinutes(1).toDate()
Date nowPlusTwoDays = LocalDateTime.now().plusDays(2).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowPlusTwoDays)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="94d6c721-8ee7-4e1f-ae5d-4da86201e8e1"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bdcfe067-82a3-4aee-8647-3cf39e5570da" name="Not Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>7700009122740757</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>1957-07-24</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-28T09:57:05</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>1629</con:value></con:property></con:properties></con:testCase><con:testCase id="db9f4214-1361-40de-9bed-477710047d59" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417899_Получение записей по ТМК (appointment.endTime &lt; текущее дата и время)" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Подобрать receptionTypeId неархивный неудаленный" id="2c0225e4-0ca2-453c-9a69-1db302584cc5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>SELECT * from  d_reception_type_tmk_code where archived_reception_type = false and is_deleted = false</con:query><con:assertion type="Simple Contains" id="6cf2da40-de63-4591-8797-8ef5591de6c7" name="Contains D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE"><con:configuration><token>D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Записать receptionTypeId" id="d749842e-471d-4143-8619-c569f3f1c191"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>receptionTypeId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Подобрать receptionTypeId неархивный неудаленный</con:sourceStep><con:sourcePath>//D_RECEPTION_TYPE_TMK_CODE.CODE_RECEPTION_TYPE</con:sourcePath><con:targetType>receptionTypeId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAppointmentReceptionsByPatient" id="740d3f19-211a-4b8d-84bb-0fed4984b599"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql
import java.text.SimpleDateFormat
import java.time.LocalDateTime

receptionTypeId = testRunner.testCase.getPropertyValue("receptionTypeId")

Date now = new Date()
Date nowPlusOneDay = LocalDateTime.now().plusDays(-1).toDate()
Date nowMinusOneMinute = LocalDateTime.now().plusMinutes(-1).toDate()
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
def startTime = sdf.format(nowPlusOneDay)
def endTime = sdf.format(nowMinusOneMinute)

pathAppointmentReceptionByPatient = testRunner.testCase.getPropertyValue("pathAppointmentReceptionByPatient")
//2024-05-24T16:26:00+03:00
//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAppointmentReceptionByPatientResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getAppointmentReceptionsByPatientResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <appointment>
            <id>391930183040</id>
            <number>С20240523-42</number>
            <lpuId>204</lpuId>
            <typeLpu>Городская поликлиника</typeLpu>
            <nameLpu>ГБУЗ ГП 175 ДЗМ</nameLpu>
            <lpuAddress>Москва, внутригородская территория поселение Филимонковское, деревня Верхнее Валуево, 5-я Валуевская улица, д. 20</lpuAddress>
            <startTime>"""+startTime+"""+03:00</startTime>
            <endTime>"""+endTime+"""+03:00</endTime>
            <type>RECEPTION</type>
            <enableCancel>false</enableCancel>
            <enableShift>true</enableShift>
            <availableResourceId>20736918944</availableResourceId>
            <complexResourceId>243940238</complexResourceId>
            <roomId>29802298</roomId>
            <roomNumber>000002</roomNumber>
            <addressPointId>9133131</addressPointId>
            <toDoctor>
               <specialityId>69</specialityId>
               <specialityName>Врач общей практики (семейный врач)</specialityName>
               <doctorFio>Бейшенбиева Гулмайра Темирбековна</doctorFio>
               <receptionTypeId>"""+receptionTypeId+"""</receptionTypeId>
            </toDoctor>
            <statusId>10</statusId>
         </appointment>
      </ns3:getAppointmentReceptionsByPatientResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAppointmentReceptionByPatient="update template_response set response='"+getAppointmentReceptionByPatientResponse+"' where \"path\"= '"+pathAppointmentReceptionByPatient+"'"
sql.execute(queryGetAppointmentReceptionByPatient)

startTime = testRunner.testCase.setPropertyValue("startTime", startTime.toString())]]></script></con:config></con:testStep><con:testStep type="restrequest" name="saCount" id="3e279c2c-1e70-4242-9f75-a2ade6e8d11d"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saCount" id="8cc87830-251b-4f5e-a0ec-25958ed89d25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395242/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/395242"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#birthDate}",
  "omsNumber": "${#TestCase#omsNumber}"
}</con:request><con:originalUri>http://application-emiasinfo1.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3eb4a34c-1edf-4f09-a869-056469e4c23e" name="Valid HTTP Status Code = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="962fa089-f87c-4607-b00d-ca1fcd8eadd1" name="activeAppointment.count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bdcfe067-82a3-4aee-8647-3cf39e5570da" name="Not Contains activeTmk"><con:configuration><token>activeTmk</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>
  <con:entry key="EI-Token" value="${#TestCase#sudirToken}"/>
</con:parameters><con:parameterOrder><con:entry>X-Access-JWT</con:entry><con:entry>EI-Token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>omsNumber</con:name><con:value>3693599735000025</con:value></con:property><con:property><con:name>birthDate</con:name><con:value>2004-06-14</con:value></con:property><con:property><con:name>startTime</con:name><con:value>2024-05-26T10:10:57</con:value></con:property><con:property><con:name>appointmentId</con:name><con:value>391930183040</con:value></con:property><con:property><con:name>spacialityName</con:name><con:value>Врач общей практики (семейный врач)</con:value></con:property><con:property><con:name>pathAppointmentReceptionByPatient</con:name><con:value>/mock/395242/getAppointmentReceptionsByPatient</con:value></con:property><con:property><con:name>receptionTypeId</con:name><con:value>1629</con:value></con:property></con:properties></con:testCase><con:testCase id="b4bccb5f-ffeb-49b2-9063-c5129d1ad645" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417900_АС1. Ошибка &quot;SA_APPOINTMENT_ERROR&quot; для пациента = 18 лет" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="f67fe013-e066-4aba-93e4-d964204b9850"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395316_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395316"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="code = SA_APPOINTMENT_ERROR"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>SA_APPOINTMENT_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="description = Не удалось найти записи пациента"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Не удалось получить записи пациента</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>bd</con:name><con:value>2006-01-01</con:value></con:property></con:properties></con:testCase><con:testCase id="388ed985-6f8e-4158-86fc-1cfb1ec99cff" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417901_АС1. Ошибка &quot;SA_APPOINTMENT_ERROR&quot; для пациента &lt; 18 лет" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="a09d519a-e03e-45e5-8147-d59955488c0f"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395316_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395316"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="code = SA_APPOINTMENT_ERROR"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>SA_APPOINTMENT_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="description = Не удалось найти записи пациента"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Не удалось получить записи пациента</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>bd</con:name><con:value>2007-01-01</con:value></con:property></con:properties></con:testCase><con:testCase id="ad0c9409-c4bb-4e1b-a246-9764c12aa953" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417902_АС3. Ошибка &quot;SA_REFERRAL_ERROR&quot; для пациента &lt; 18 лет" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="cad53a3f-c28f-4639-a677-ed12f8b0b4fa"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(1).toDate()
Date dateMinus =  LocalDateTime.now().plusDays(-1).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def dateTomorrow = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
def dateYesterday = new SimpleDateFormat("yyyy-MM-dd").format(dateMinus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("dateTomorrow", dateTomorrow)
testRunner.testCase.setPropertyValue("dateYesterday", dateYesterday)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getAssignmentsInfo" id="1344196e-bdc9-4a74-8a51-b8a826bdaf7e"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

dateToday = testRunner.testCase.getPropertyValue("dateToday")
dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
log.info dateYesterday.getClass()
pathGetAssignmentsInfo = testRunner.testCase.getPropertyValue("pathGetAssignemtnsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getAssignmentsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns2:getAssignmentsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/v5/">
         <assignment>
            <moId>10000290</moId>
            <toBM>
               <id>3</id>
               <name>Забор самовзятых биоматериалов</name>
               <self>true</self>
            </toBM>
            <period>
               <dateFrom>"""+dateYesterday+"""</dateFrom>
               <dateTo>"""+dateToday+"""</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <registryEntry>
               <entryId>152035252</entryId>
               <laboratoryId>2726</laboratoryId>
               <laboratoryName>Обнаружение гельминтов в кале</laboratoryName>
               <biomaterialId>4</biomaterialId>
               <biomaterialName>Кал</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A04.5</code>
                  <name>Энтерит, вызванный Campylobacter</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>13024536040</jobExecutionId>
                  <fio>Мармеладова Софья Семёновна</fio>
                  <snils>44806166895</snils>
                  <specialityId>788</specialityId>
                  <specialityName>Медицинская сестра (медбрат) врача общей практики (семейного врача)</specialityName>
               </issuedDoctor>
            </registryEntry>
            <registryEntry>
               <entryId>152035251</entryId>
               <laboratoryId>2911</laboratoryId>
               <laboratoryName>Общий клинический анализ мочи</laboratoryName>
               <biomaterialId>3</biomaterialId>
               <biomaterialName>Моча</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A04.5</code>
                  <name>Энтерит, вызванный Campylobacter</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>13024536040</jobExecutionId>
                  <fio>Мармеладова Софья Семёновна</fio>
                  <snils>44806166895</snils>
                  <specialityId>788</specialityId>
                  <specialityName>Медицинская сестра (медбрат) врача общей практики (семейного врача)</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
         <assignment>
            <moId>204</moId>
            <toBM>
               <id>2</id>
               <name>Взятие капиллярной крови</name>
               <self>false</self>
            </toBM>
            <period>
               <dateFrom>2024-07-07</dateFrom>
               <dateTo>2024-08-06</dateTo>
            </period>
            <active>false</active>
            <appointmentAvailable>false</appointmentAvailable>
            <appointmentOpenDate>2024-07-07</appointmentOpenDate>
            <registryEntry>
               <entryId>152040226</entryId>
               <laboratoryId>2909</laboratoryId>
               <laboratoryName>Общий клинический анализ крови (общий анализ + СОЭ); микроскопическое исследование мазка крови при выявлении патологии + подсчет ретикулоцитов</laboratoryName>
               <biomaterialId>2</biomaterialId>
               <biomaterialName>Кровь цельная</biomaterialName>
               <hasMemo>true</hasMemo>
               <diagnosis>
                  <code>A00.0</code>
                  <name>Холера, вызванная холерным вибрионом 01, биовар cholerae</name>
               </diagnosis>
               <issuedDoctor>
                  <jobExecutionId>11312193</jobExecutionId>
                  <fio>Бабенкова Лариса Борисовна</fio>
                  <snils>01558018738</snils>
                  <specialityId>602</specialityId>
                  <specialityName>Врач-терапевт участковый</specialityName>
               </issuedDoctor>
            </registryEntry>
         </assignment>
      </ns2:getAssignmentsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetAssignmentsInfo="update template_response set response='"+getAssignmentsInfoResponse+"' where \"path\"= '"+pathGetAssignmentsInfo+"'"
sql.execute(queryGetAssignmentsInfo)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="4498d07d-8541-46ed-bf33-3ef042d8fff1"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395319"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 1"><con:configuration><path>$.payload.activeReferrals.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="code = SA_REFERRAL_ERROR"><con:configuration><path>$.payload.activeReferrals.error.code</path><content>SA_REFERRAL_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="description = Не удалось получить часть данных"><con:configuration><path>$.payload.activeReferrals.error.description</path><content>Не удалось получить часть данных</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="type = BUSINESS"><con:configuration><path>$.payload.activeReferrals.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>bd</con:name><con:value>2007-01-01</con:value></con:property><con:property><con:name>pathGetAssignemtnsInfo</con:name><con:value>/mock/395319/getAssignmentsInfo</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-27</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-05-28</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-05-26</con:value></con:property></con:properties></con:testCase><con:testCase id="7a2b8a10-ccce-4ef2-9b12-5cc9d6a64e81" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417903_АС5. Ошибка &quot;SA_ASSIGNMENT_ERROR&quot;" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Установить даты" id="f0c7620d-b4b2-4c96-90f5-32de00623624"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime
import java.util.Date

//получаем вчрешнюю, сегодняшнюю и завтрашние даты
def date = new Date()
Date datePlus = LocalDateTime.now().plusDays(1).toDate()
Date dateMinus =  LocalDateTime.now().plusDays(-1).toDate()

//устанавливаем и записываем даты в нужных форматах
def dateToday = new SimpleDateFormat("yyyy-MM-dd").format(date).toString()
def dateTomorrow = new SimpleDateFormat("yyyy-MM-dd").format(datePlus).toString()
def dateYesterday = new SimpleDateFormat("yyyy-MM-dd").format(dateMinus).toString()
testRunner.testCase.setPropertyValue("dateToday", dateToday)
testRunner.testCase.setPropertyValue("dateTomorrow", dateTomorrow)
testRunner.testCase.setPropertyValue("dateYesterday", dateYesterday)</script></con:config></con:testStep><con:testStep type="groovy" name="Отредактировать мок getReferralsInfo" id="8ab094b2-5f83-4759-9419-55492597703e"><con:settings/><con:config><script><![CDATA[import groovy.xml.XmlSlurper
import groovy.sql.Sql

def dateToday = testRunner.testCase.getPropertyValue("dateToday")
def dateTomorrow = testRunner.testCase.getPropertyValue("dateTomorrow")
def dateYesterday = testRunner.testCase.getPropertyValue("dateYesterday")
pathGetReferralsInfo = testRunner.testCase.getPropertyValue("pathGetReferralsInfo")

//подключиться к бд 
connection =testRunner.testCase.testSuite.project.getPropertyValue("mockDbFullConnection")
sql = Sql.newInstance(connection)

//Формируем ответ для заполнения бд
getReferralsInfoResponse = """<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Body>
      <ns3:getReferralsInfoResponse xmlns:ns2="http://api.service.soap.emias.lanit.ru/core/v5/" xmlns:ns3="http://api.service.soap.emias.lanit.ru/v5/">
         <referral>
            <id>74389757414</id>
            <number>Н20230125-102</number>
            <startTime>"""+dateYesterday+"""</startTime>
            <endTime>"""+dateToday+"""</endTime>
            <type>REF_TO_DOCTOR</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toDoctor>
               <specialityId>8</specialityId>
               <specialityName>Врач-кардиолог</specialityName>
               <receptionTypeId>1879</receptionTypeId>
            </toDoctor>
            <diagnosis>
               <code>A00.9</code>
               <name>Холера неуточненная</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>12972616957</jobExecutionId>
               <fio>Романенкова Евгения Алексеевна</fio>
               <snils>15422824953</snils>
               <specialityId>1</specialityId>
               <specialityName>Врач-терапевт</specialityName>
            </issuedDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
         <referral>
            <id>74431024939</id>
            <number>Н20230926-23</number>
            <startTime>2024-02-25</startTime>
            <endTime>2024-02-25</endTime>
            <type>REF_TO_LDP</type>
            <lpuId>204</lpuId>
            <lpuType>Городская поликлиника</lpuType>
            <lpuName>ГБУЗ ГП 175 ДЗМ</lpuName>
            <toLdp>
               <ldpTypeId>51501</ldpTypeId>
               <ldpTypeName>Удаление каловых камней, инородных тел прямой кишки</ldpTypeName>
               <countAssignmentProcedures>7</countAssignmentProcedures>
            </toLdp>
            <diagnosis>
               <code>M00.8</code>
               <name>Артриты и полиартриты, вызванные другими уточненными бактериальными возбудителями</name>
            </diagnosis>
            <issuedDoctor>
               <jobExecutionId>11312193</jobExecutionId>
               <fio>Бабенкова Лариса Борисовна</fio>
               <snils>01558018738</snils>
               <specialityId>602</specialityId>
               <specialityName>Врач-терапевт участковый</specialityName>
            </issuedDoctor>
            <countActiveAppointment>0</countActiveAppointment>
            <countAppointmentWithReceptionFact>0</countAppointmentWithReceptionFact>
         </referral>
      </ns3:getReferralsInfoResponse>
   </soap:Body>
</soap:Envelope>"""

queryGetReferralsInfo="update template_response set response='"+getReferralsInfoResponse+"' where \"path\"= '"+pathGetReferralsInfo+"'"
sql.execute(queryGetReferralsInfo)]]></script></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="cfb86bee-1a11-4edc-b183-077ef61758a0"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value=""/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395321"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 1"><con:configuration><path>$.payload.activeReferrals.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="code = SA_ASSIGNMENT_ERROR"><con:configuration><path>$.payload.activeReferrals.error.code</path><content>SA_ASSIGNMENT_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="description = Не удалось получить часть данных"><con:configuration><path>$.payload.activeReferrals.error.description</path><content>Не удалось получить часть данных</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="type = BUSINESS"><con:configuration><path>$.payload.activeReferrals.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7792189787001617</con:value></con:property><con:property><con:name>bd</con:name><con:value>2006-01-01</con:value></con:property><con:property><con:name>pathGetReferralsInfo</con:name><con:value>/mock/395321/getReferralsInfo</con:value></con:property><con:property><con:name>dateToday</con:name><con:value>2024-05-27</con:value></con:property><con:property><con:name>dateTomorrow</con:name><con:value>2024-05-28</con:value></con:property><con:property><con:name>dateYesterday</con:name><con:value>2024-05-26</con:value></con:property></con:properties></con:testCase><con:testCase id="2063070d-6650-4a9c-abd0-e4cd899bd342" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417904_АС6. Ошибка &quot;PIN_GET_APPOINTMENT_ERROR&quot;. В ответе getAppointmentReceptionsByPatient вернулись данные. 395374" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="77634485-e997-4813-b280-5aac5419f2c8"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395374_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395374"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="code = PIN_GET_APPOINTMENT_ERROR"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>PIN_GET_APPOINTMENT_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="description = Не удалось получить список записей на освидетельствование"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Не удалось получить список записей на освидетельствование</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7700007178231039</con:value></con:property><con:property><con:name>bd</con:name><con:value>1939-10-23</con:value></con:property></con:properties></con:testCase><con:testCase id="81d6dd6c-48bc-4a31-a81b-83c7911ef332" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417905_АС6. Ошибка &quot;PIN_GET_APPOINTMENT_ERROR&quot;. В ответе getAppointmentReceptionsByPatient не вернулись данные. 395375" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="c1169fea-9cba-4cbb-845f-be2feb920814"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#mockUrl}/mock/395375_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value="${#Project#mockUrl}/mock/395375"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="code = PIN_GET_APPOINTMENT_ERROR"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>PIN_GET_APPOINTMENT_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="description = Не удалось получить список записей на освидетельствование"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Не удалось получить список записей на освидетельствование</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="288e76db-7e80-434c-a19e-cd6bfa8f01fc" name="type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7700007178231039</con:value></con:property><con:property><con:name>bd</con:name><con:value>1939-10-23</con:value></con:property></con:properties></con:testCase><con:testCase id="44b44df9-eb41-42de-9b6c-6a5083250bec" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417907_Получение информации о записях в КДО (есть записи в f_hospitalizations_appointment с event_type = created, edited, cancelled)" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать данные для создания записей" id="365caf18-102a-4c20-a63b-5226496d92f3"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

eventType1 = "created" // текущая дата
eventType2 = "created" // текущая дата - 1 день - исключается из подсчет
eventType3 = "edited" // текущая дата + 1 день
eventType4 = "cancelled" // текущая дата - исключается из подсчета

Date now = new Date()
sdf = new SimpleDateFormat("yyyy-MM-dd")
def eventDate1 = sdf.format(now)
def eventDate4 = sdf.format(now)
Date nowMinusOneDay = LocalDateTime.now().plusDays(-1).toDate()
def eventDate2 = sdf.format(nowMinusOneDay)
Date nowPlusOneDay = LocalDateTime.now().plusDays(1).toDate()
def eventDate3 = sdf.format(nowPlusOneDay)

testRunner.testCase.setPropertyValue("eventDate1", eventDate1)
testRunner.testCase.setPropertyValue("eventDate2", eventDate2)
testRunner.testCase.setPropertyValue("eventDate3", eventDate3)
testRunner.testCase.setPropertyValue("eventDate4", eventDate4)

testRunner.testCase.setPropertyValue("eventType1", eventType1)
testRunner.testCase.setPropertyValue("eventType2", eventType2)
testRunner.testCase.setPropertyValue("eventType3", eventType3)
testRunner.testCase.setPropertyValue("eventType4", eventType4)

appointmentId1=UUID.randomUUID().toString()
appointmentId2=UUID.randomUUID().toString()
appointmentId3=UUID.randomUUID().toString()
appointmentId4=UUID.randomUUID().toString()

testRunner.testCase.setPropertyValue("appointmentId1", appointmentId1)
testRunner.testCase.setPropertyValue("appointmentId2", appointmentId2)
testRunner.testCase.setPropertyValue("appointmentId3", appointmentId3)
testRunner.testCase.setPropertyValue("appointmentId4", appointmentId4)

</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать записи в f_hospitalizations_appointment" id="0b68e53a-f5b2-405e-a5a6-53e41cb0497d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId1}', ${#TestCase#patientId}, '${#TestCase#eventType1}', '${#TestCase#eventDate1}', '10:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId2}', ${#TestCase#patientId}, '${#TestCase#eventType2}', '${#TestCase#eventDate2}', '10:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId3}', ${#TestCase#patientId}, '${#TestCase#eventType3}', '${#TestCase#eventDate3}', '11:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId4}', ${#TestCase#patientId}, '${#TestCase#eventType4}', '${#TestCase#eventDate4}', '09:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');</con:query><con:assertion type="XPath Match" id="aa2444e5-e6df-46d3-abd9-905128c529e3" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="24f3c574-bfa3-4539-85ef-34f8b0ed2069"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/413671/1"/>
  <con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/413671"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e74bef00-0b16-4137-8acd-2e6ce2e83105" name="closeDate = текущей дате"><con:configuration><path>$.payload.activeAppointment.closeDate</path><content>${#TestCase#eventDate1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 2"><con:configuration><path>$.payload.activeAppointment.count</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Удалить записи в f_hospitalizations_appointment" id="f3f4ba32-d2d9-49c3-af27-4633d7d5eeba"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId1}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId2}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId3}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId4}';</con:query><con:assertion type="XPath Match" id="aa2444e5-e6df-46d3-abd9-905128c529e3" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7700008042061093</con:value></con:property><con:property><con:name>bd</con:name><con:value>1993-10-06</con:value></con:property><con:property><con:name>eventDate1</con:name><con:value>2024-05-27</con:value></con:property><con:property><con:name>eventDate2</con:name><con:value>2024-05-26</con:value></con:property><con:property><con:name>eventDate3</con:name><con:value>2024-05-28</con:value></con:property><con:property><con:name>eventDate4</con:name><con:value>2024-05-27</con:value></con:property><con:property><con:name>eventType1</con:name><con:value>created</con:value></con:property><con:property><con:name>eventType2</con:name><con:value>created</con:value></con:property><con:property><con:name>eventType3</con:name><con:value>edited</con:value></con:property><con:property><con:name>eventType4</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>10122909</con:value></con:property><con:property><con:name>appointmentId1</con:name><con:value>babd02e1-921b-436a-84b9-689bb483b790</con:value></con:property><con:property><con:name>appointmentId2</con:name><con:value>332453d6-8597-41c2-b2e7-6b113c0efdfc</con:value></con:property><con:property><con:name>appointmentId3</con:name><con:value>60691205-e25a-426c-9664-8789c7d2171a</con:value></con:property><con:property><con:name>appointmentId4</con:name><con:value>1054262a-977e-477e-b996-df0c86131970</con:value></con:property></con:properties></con:testCase><con:testCase id="dca4cc21-2ac8-4931-acc4-89876118b553" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417908_АС2. Пустые ответы от Оркестратора и ГИБДД, нет записей в f_hospitalizations_appointment с event_type = created, edited с event_date >= текущей дате" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать данные для создания записей" id="63e13bae-6194-4e61-ba06-06601fbb3c8e"><con:settings/><con:config><script>import java.text.SimpleDateFormat
import java.time.LocalDateTime

eventType1 = "edited" // текущая дата - 1 день - исключается из подсчет
eventType2 = "created" // текущая дата - 1 день - исключается из подсчет
eventType3 = "cancelled" // текущая дата - исключается из подсчета

Date now = new Date()
sdf = new SimpleDateFormat("yyyy-MM-dd")
def eventDate3 = sdf.format(now)
Date nowMinusOneDay = LocalDateTime.now().plusDays(-1).toDate()
def eventDate2 = sdf.format(nowMinusOneDay)
def eventDate1 = sdf.format(nowMinusOneDay)

testRunner.testCase.setPropertyValue("eventDate1", eventDate1)
testRunner.testCase.setPropertyValue("eventDate2", eventDate2)
testRunner.testCase.setPropertyValue("eventDate3", eventDate3)

testRunner.testCase.setPropertyValue("eventType1", eventType1)
testRunner.testCase.setPropertyValue("eventType2", eventType2)
testRunner.testCase.setPropertyValue("eventType3", eventType3)

appointmentId1=UUID.randomUUID().toString()
appointmentId2=UUID.randomUUID().toString()
appointmentId3=UUID.randomUUID().toString()

testRunner.testCase.setPropertyValue("appointmentId1", appointmentId1)
testRunner.testCase.setPropertyValue("appointmentId2", appointmentId2)
testRunner.testCase.setPropertyValue("appointmentId3", appointmentId3)

</script></con:config></con:testStep><con:testStep type="jdbc" name="Создать записи в f_hospitalizations_appointment" id="a91c612f-60a2-4c93-937e-8c56dcad42e8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId1}', ${#TestCase#patientId}, '${#TestCase#eventType1}', '${#TestCase#eventDate1}', '10:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId2}', ${#TestCase#patientId}, '${#TestCase#eventType2}', '${#TestCase#eventDate2}', '10:01',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId3}', ${#TestCase#patientId}, '${#TestCase#eventType3}', '${#TestCase#eventDate3}', '11:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');

INSERT INTO f_hospitalizations_appointment (id, appointment_id, patient_id, event_type, event_date, event_time, resource_speciality,
resource_name, resource_procedure, resource_office, resource_address, resource_mo)
VALUES ((SELECT max(id) FROM f_hospitalizations_appointment)+1, '${#TestCase#appointmentId4}', ${#TestCase#patientId}, '${#TestCase#eventType4}', '${#TestCase#eventDate4}', '09:00',
'Уролог', 'Васильев Иван Иванович', 'КТ', 'Кабинет №6', 'ул.Загородная, д.1', 'ДЗМ 68');</con:query><con:assertion type="XPath Match" id="aa2444e5-e6df-46d3-abd9-905128c529e3" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount" id="564f86df-6105-482d-9ba8-6854d912cee7"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/413755/1"/>
  <con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/413755"/>
  <con:entry key="EI-Token" value="${#Project#sudirToken}"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="4cec6367-f26d-44fa-86d0-b9632472d642" name="Not Contains closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Удалить записи в f_hospitalizations_appointment" id="2f4a017f-0ac6-4135-a019-e7c640d40575"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>${#Project#emiasInfoDBDriver}</con:driver><con:connectionString>${#Project#emiasInfoFullDbConnection}</con:connectionString><con:query>DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId1}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId2}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId3}';
DELETE FROM f_hospitalizations_appointment WHERE appointment_id = '${#TestCase#appointmentId4}';</con:query><con:assertion type="XPath Match" id="aa2444e5-e6df-46d3-abd9-905128c529e3" name="UpdateCount = 1"><con:configuration><path>//*:Results/UpdateCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7773250836000654</con:value></con:property><con:property><con:name>bd</con:name><con:value>1947-06-07</con:value></con:property><con:property><con:name>eventDate1</con:name><con:value>2024-05-26</con:value></con:property><con:property><con:name>eventDate2</con:name><con:value>2024-05-26</con:value></con:property><con:property><con:name>eventDate3</con:name><con:value>2024-05-27</con:value></con:property><con:property><con:name>eventDate4</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventType1</con:name><con:value>edited</con:value></con:property><con:property><con:name>eventType2</con:name><con:value>created</con:value></con:property><con:property><con:name>eventType3</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>eventType4</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>25177266</con:value></con:property><con:property><con:name>appointmentId1</con:name><con:value>f2a42a5a-dbf2-40ad-a383-1f4df649620f</con:value></con:property><con:property><con:name>appointmentId2</con:name><con:value>b2f981bb-5814-4052-9552-59fb7d118dc7</con:value></con:property><con:property><con:name>appointmentId3</con:name><con:value>2f4cf73d-dd3c-44b6-9b45-b7d6a06132c5</con:value></con:property><con:property><con:name>appointmentId4</con:name><con:value>6cc34415-92d6-4cb5-a2ef-2023a1f33ae2</con:value></con:property></con:properties></con:testCase><con:testCase id="89e47649-6ebe-408e-87f6-d0e1e5a10467" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417909_АС7. SUDIR_TOKEN_EXPIRED, в ответах от Оркестратора и ГИБДД непустые ответы" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="244b3597-f53b-40a5-8f66-f53f1717e1e8"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/413779/1"/>
  <con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/413779"/>
  <con:entry key="EI-Token" value="123132"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 2"><con:configuration><path>$.payload.activeAppointment.count</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="4cec6367-f26d-44fa-86d0-b9632472d642" name="Not Contains closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.code = SUDIR_TOKEN_EXPIRED"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>SUDIR_TOKEN_EXPIRED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.description = Время действия токена в СУДИР истекло"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Время действия токена в СУДИР истекло</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7700003080181099</con:value></con:property><con:property><con:name>bd</con:name><con:value>1999-10-18</con:value></con:property><con:property><con:name>eventDate1</con:name><con:value>2024-05-13</con:value></con:property><con:property><con:name>eventDate2</con:name><con:value>2024-05-13</con:value></con:property><con:property><con:name>eventDate3</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventDate4</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventType1</con:name><con:value>edited</con:value></con:property><con:property><con:name>eventType2</con:name><con:value>created</con:value></con:property><con:property><con:name>eventType3</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>eventType4</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>17252250</con:value></con:property><con:property><con:name>appointmentId1</con:name><con:value>7859d862-6238-4174-9133-b423be252989</con:value></con:property><con:property><con:name>appointmentId2</con:name><con:value>4d0bbb21-a97f-49ed-b463-1e41a29ea644</con:value></con:property><con:property><con:name>appointmentId3</con:name><con:value>d2e42ebe-5f2a-4d9c-970e-a6cf16e7a1d8</con:value></con:property><con:property><con:name>appointmentId4</con:name><con:value>6cc34415-92d6-4cb5-a2ef-2023a1f33ae2</con:value></con:property></con:properties></con:testCase><con:testCase id="04dc36f4-8d56-4a73-852e-a207b3215004" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417910_АС7. SUDIR_TOKEN_EXPIRED, пустой ответ от Оркестратора и ГИБДД" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="493698c0-c70f-45a4-8b6e-9fcfd88363f3"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/413811/1"/>
  <con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/413811"/>
  <con:entry key="EI-Token" value="123132"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="4cec6367-f26d-44fa-86d0-b9632472d642" name="Not Contains closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.code = SUDIR_TOKEN_EXPIRED"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>SUDIR_TOKEN_EXPIRED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.description = Время действия токена в СУДИР истекло"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Время действия токена в СУДИР истекло</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7751300873000442</con:value></con:property><con:property><con:name>bd</con:name><con:value>1996-08-26</con:value></con:property><con:property><con:name>eventDate1</con:name><con:value>2024-05-13</con:value></con:property><con:property><con:name>eventDate2</con:name><con:value>2024-05-13</con:value></con:property><con:property><con:name>eventDate3</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventDate4</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventType1</con:name><con:value>edited</con:value></con:property><con:property><con:name>eventType2</con:name><con:value>created</con:value></con:property><con:property><con:name>eventType3</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>eventType4</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>17632502</con:value></con:property><con:property><con:name>appointmentId1</con:name><con:value>7859d862-6238-4174-9133-b423be252989</con:value></con:property><con:property><con:name>appointmentId2</con:name><con:value>4d0bbb21-a97f-49ed-b463-1e41a29ea644</con:value></con:property><con:property><con:name>appointmentId3</con:name><con:value>d2e42ebe-5f2a-4d9c-970e-a6cf16e7a1d8</con:value></con:property><con:property><con:name>appointmentId4</con:name><con:value>6cc34415-92d6-4cb5-a2ef-2023a1f33ae2</con:value></con:property></con:properties></con:testCase><con:testCase id="c1383913-4125-4ed1-980d-a6212ba9146a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417911_АС7. SUDIR_TOKEN_EXPIRED, ошибка от Оркестратора и ГИБДД" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="683d4c1f-7436-49e8-8e91-e80f86169130"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-Access-JWT" value="${#Project#X-Access-JWT}"/>
  <con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/413815/1"/>
  <con:entry key="Mock-saOrchestrator" value="${#Project#Mock-url}/413815"/>
  <con:entry key="EI-Token" value="123132"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="4cec6367-f26d-44fa-86d0-b9632472d642" name="Not Contains closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.code = SUDIR_TOKEN_EXPIRED"><con:configuration><path>$.payload.activeAppointment.error.code</path><content>SUDIR_TOKEN_EXPIRED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.type = BUSINESS"><con:configuration><path>$.payload.activeAppointment.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bd7a533-3fd2-47ed-8d88-3c38483d677f" name="error.description = Время действия токена в СУДИР истекло"><con:configuration><path>$.payload.activeAppointment.error.description</path><content>Время действия токена в СУДИР истекло</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7748540872003006</con:value></con:property><con:property><con:name>bd</con:name><con:value>1954-11-27</con:value></con:property><con:property><con:name>eventDate1</con:name><con:value>2024-05-13</con:value></con:property><con:property><con:name>eventDate2</con:name><con:value>2024-05-13</con:value></con:property><con:property><con:name>eventDate3</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventDate4</con:name><con:value>2024-05-14</con:value></con:property><con:property><con:name>eventType1</con:name><con:value>edited</con:value></con:property><con:property><con:name>eventType2</con:name><con:value>created</con:value></con:property><con:property><con:name>eventType3</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>eventType4</con:name><con:value>cancelled</con:value></con:property><con:property><con:name>patientId</con:name><con:value>2240137876</con:value></con:property><con:property><con:name>appointmentId1</con:name><con:value>7859d862-6238-4174-9133-b423be252989</con:value></con:property><con:property><con:name>appointmentId2</con:name><con:value>4d0bbb21-a97f-49ed-b463-1e41a29ea644</con:value></con:property><con:property><con:name>appointmentId3</con:name><con:value>d2e42ebe-5f2a-4d9c-970e-a6cf16e7a1d8</con:value></con:property><con:property><con:name>appointmentId4</con:name><con:value>6cc34415-92d6-4cb5-a2ef-2023a1f33ae2</con:value></con:property></con:properties></con:testCase><con:testCase id="187b3eef-1ca9-49de-9786-24743808bb51" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417835_Проверить отсутствие записи в кэш для пациента &lt; 18 лет" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="abfd42b7-bf0b-494d-897a-b016e38f7f6c"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395316_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="c686343b-da17-44bb-b78b-853175e8ae77" name="Отсутствует closeDate"><con:configuration><token>closeDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить отсутствие записи в кэш" id="c4885a32-aa98-4a09-82e4-7fdc79bad5cd"><con:description>Проверить отсутствие записи в кэш с key = oms</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Запись отсутствует</con:expectedResult></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7789789727001182</con:value></con:property><con:property><con:name>bd</con:name><con:value>2012-10-22</con:value></con:property></con:properties></con:testCase><con:testCase id="ef3eaff6-12ec-4ad8-9e1b-48eaec720856" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417837_Проверить запись в кэш для пациента > 18 лет" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="31e71461-a833-435c-9250-21d0c1f19219"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395316_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить наличие записи в кэш" id="3092d3af-8957-464b-a13e-545bb40ff4a1"><con:description>Проверить наличие записи в кэш с key = oms</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Есть запись</con:expectedResult></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount - повторно с другим моком pinAppointment" id="33f4785e-8ea0-4a1f-8a3d-87145dc9ebf4"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount - повторно с другим моком pinAppointment" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/413671/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 1"><con:configuration><path>$.payload.activeAppointment.count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить в логах cached = true" id="12376116-3ce9-40a1-9c6e-ec16f1f158d8"><con:description>В логах кибана для сообщения с destination_system = 	
ЕМИАС.СправкиГИБДД и oms = oms из проперти ТК</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>cached = true</con:expectedResult></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>7751230894000354</con:value></con:property><con:property><con:name>bd</con:name><con:value>1967-08-05</con:value></con:property></con:properties></con:testCase><con:testCase id="d11a3a38-a1cb-473c-8aac-2c4f8ae139ae" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417839_Проверить запись в кэш при АС2 (отсутствуют записи)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="b82b43b3-0a3a-436f-8e8c-8e6f19cf7022"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/413671/1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить наличие записи в кэш" id="cb57e5ea-de81-41a3-a182-2e5ceb0aeeff"><con:description>Проверить наличие записи в кэш с key = oms</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Есть запись</con:expectedResult></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount - повторно с другим моком pinAppointment" id="90c727d2-faf8-4646-8e9d-9ee525bb4172"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount - повторно с другим моком pinAppointment" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395316_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="JsonPath Match" id="e40d1e2e-42ac-41fb-b728-fb885bd93954" name="count = 0"><con:configuration><path>$.payload.activeAppointment.count</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить в логах cached = true" id="d45b3fd8-208e-454a-a19a-667e5c4b29c7"><con:description>В логах кибана для сообщения с destination_system = 	
ЕМИАС.СправкиГИБДД и oms = oms из проперти ТК</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>cached = true</con:expectedResult></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>3351991082668905</con:value></con:property><con:property><con:name>bd</con:name><con:value>1999-10-18</con:value></con:property></con:properties></con:testCase><con:testCase id="67750028-c873-4992-9655-045523a31c8a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="417840_Проверить отсутствие записи в кэш при АС6" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST saCount" id="e6fc5a1b-6d82-40d5-84b5-410733a160b3"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395374_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Simple Contains" id="fe9fe56d-b782-47a2-b129-897166131708" name="Contains PIN_GET_APPOINTMENT_ERROR"><con:configuration><token>PIN_GET_APPOINTMENT_ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить отсутстие записи в кэш" id="f37b9b3b-daf5-426a-b997-32ee33190641"><con:description>Проверить отсутствие записи в кэш с key = oms</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Запись отсутствует</con:expectedResult></con:config></con:testStep><con:testStep type="restrequest" name="POST saCount - повторно с другим моком pinAppointment" id="a7c94aab-c519-4a8a-8b24-7428bfaaa20b"><con:settings/><con:config service="http://application-emiasinfo4.emias.solit-clouds.ru" resourcePath="/api/v2/mainPage/saCount" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST saCount - повторно с другим моком pinAppointment" id="5f6db6e9-e155-4cf3-b305-9894cafd6559" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Mock-pinAppointment" value="${#Project#Mock-url}/395316_1"/>&#13;
  &lt;con:entry key="Mock-saOrchestrator" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "birthDate": "${#TestCase#bd}",
  "omsNumber": "${#TestCase#oms}"
}</con:request><con:originalUri>http://application-emiasinfo4.emias.solit-clouds.ru/api/v1/mainPage/saCount</con:originalUri><con:assertion type="Simple NotContains" id="f5806114-96e2-405e-9f9d-1edc72355b6b" name="Not Contains PIN_GET_APPOINTMENT_ERROR"><con:configuration><token>PIN_GET_APPOINTMENT_ERROR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="manualTestStep" name="Проверить в логах cached = false" id="7bf9f2ff-60cb-461a-b33f-f20939d9ccbf"><con:description>В логах кибана для сообщения с destination_system = 	
ЕМИАС.СправкиГИБДД и oms = oms из проперти ТК</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>cached = false</con:expectedResult></con:config></con:testStep><con:properties><con:property><con:name>oms</con:name><con:value>0556130838000530</con:value></con:property><con:property><con:name>bd</con:name><con:value>1968-03-11</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>emiasInfoEndpoint</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">http://application-emiasinfo1.emias.solit-clouds.ru/</con:value></con:property><con:property><con:name>LkEndpoint</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://lkservice.test.emias.ru</con:value></con:property><con:property><con:name>LLOEndpoint</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">http://esbcamelvv.test.emias.mos.ru/proxy/LLO/PrescriptionInfo/v4S/ProxyService</con:value></con:property><con:property><con:name>token</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjQ3NTkwMjY4NDIsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiJiYjVlYjg1OC1lZjc2LTQyOTUtOTg1OS1jOWQ2YTI1MWIzNTAiLCJzaWQiOiJmMzI3NTUyNy1jZTkyLTQ4MGMtODljYy1kMjQ4M2RmMWM4MjEiLCJwaG9uZSI6Ijc5MTU5Njc5MjMwIiwic3NvX2lkIjoiSFlrbGU2WFc3aWZybFQ3d0N1dUswaVo5Um9lUFhtMk5HOTJiVGFMb3dmTUE4UC95dzg1TWkvV3JWSG84OVdEaFdGZ1J0NjZFVTNNQnRRM1NFaGhrcndPT0xqTkZpamNSZVZGMnhlZ1I0RSt3eGdCUzJKUnQzQ1NQNG1RZnc0WUVFSkNQcHJVVUMyS1BCVytja2tIeXQ5d09hUnE0VFFqWjIvd1R0ZEhERXlSczJzWUlNMVdVWlBnYzM5dlJScGZLR012NGtlYWMvZWlycTlQbFRmUFFhdVFkeG5HSjlaRHpRYkFzVU1VTFZiRlcwbTc4S0tSNUp6QUZwbDdZRkV4MW85ZVVUNzBYZEJaRGhmZFZsbGpBK1QreVJJT3BXMlNPWk9FcFZoWUFaOHFUVk90S2NKazA2MGJEbmRZZFVkMWdRMHg2Y2tUMStDZ094UUViZWZpL1l3PT0iLCJlbWFpbCI6Inlhci5wcm9tby56YXBvdi5hQGdtYWlsLmNvbSIsImZpcnN0X25hbWUiOiJcdTA0MjFcdTA0MzVcdTA0NDBcdTA0MzNcdTA0MzVcdTA0MzkiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxMi4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxMlx1MDQ0Zlx1MDQ0N1x1MDQzNVx1MDQ0MVx1MDQzYlx1MDQzMFx1MDQzMlx1MDQzZVx1MDQzMlx1MDQzOFx1MDQ0NyIsImJpcnRoX2RhdGUiOiIxOTc4LTAzLTIxIn0.dErz7ETQCxAJUOECLgysHVZZPZDQDJvvTQOi8_glDkqiWNaU1QTPKao0eueTw5_ydAE1KuGcGmI1yqeUhYDfp9ZMj97xKv4SYyE3lhdpgaiSALyoiuYcdxUEYj7cJiwZ0Bzjce8GOF__wI76cYKn-mVbZkuxPzRtn1SIvStR-zkiok3kW_Qg6HJFTP7mF1T_Z4p7OILvPYtErbJJHWJ-pVOLMjQYfk2RCjWJesIEuWs2sLr953xhQeodp-bBIYZCjCvxUSEgsHXNMkCvoRkujm9kpJFVHMgKYuwqmiHbZ6B7_3DuOiRsRRWrPJwn2dXZUwhlhzsutwCfIBE13SbfJqO9w14ud_GWrPsofO8T4j7UiGwTvzxXVycJZMMU6XElz35aQRGRVNV53NUQWCc2DqBlmsWHjW8Lg__A5NEjkgDPiRYKWp_Gdz9_I4YQY3x0ZFPIToUNFx2Lt8ei5zcLGL5hzvSdelUzmz0QirECbejcDJdXS8HxEe-XsCDLSh51hwweEpJILfdG4AlWhHFh9_NuKI-zoFx_48wB4d0-miMaxtiscQR1_0IwQFO0kujoMyIn432fPU2waJOjj41_SgX3AQsMPn3FQk4gV8MrHU9vfAoROXrBSbMS7ty5rwWczYdaijFYrNpsUprBRtL7EFSWgRnvFOU7ekNoy_AzpfA</con:value></con:property><con:property><con:name>saOrchestratorEndpoint</con:name><con:value>http://esbcamelvv.test.emias.mos.ru/proxy/Composite/saOrchestrator/v1S/ProxyService</con:value></con:property><con:property><con:name>emiasInfoDbConnection</con:name><con:value>172.17.5.11:29102/emiasinfoapp</con:value></con:property><con:property><con:name>emiasInfoDbLogin</con:name><con:value>emiasinfoapp</con:value></con:property><con:property><con:name>emiasInfoDbPassword</con:name><con:value>emiasinfoapp</con:value></con:property><con:property><con:name>emiasInfoFullDbConnection</con:name><con:value>jdbc:postgresql://172.17.5.11:29102/emiasinfoapp?user=emiasinfoapp&amp;password=emiasinfoapp</con:value></con:property><con:property><con:name>emiasInfoDBDriver</con:name><con:value>org.postgresql.Driver</con:value></con:property><con:property><con:name>saOrchestratorDbConnection</con:name><con:value/></con:property><con:property><con:name>saOrchestratorDbLogin</con:name><con:value/></con:property><con:property><con:name>saOrchestratorDbPassword</con:name><con:value/></con:property><con:property><con:name>saOrchestratorFullDbConnection</con:name><con:value/></con:property><con:property><con:name>lloDbConnection</con:name><con:value>@//10.2.172.241:1521/emiasdb</con:value></con:property><con:property><con:name>lloDbLogin</con:name><con:value>EMIAS_LLO</con:value></con:property><con:property><con:name>lloDbPassword</con:name><con:value>EMIAS_LLO</con:value></con:property><con:property><con:name>lloFullDbConnection</con:name><con:value> jdbc:oracle:thin:EMIAS_LLO/EMIAS_LLO@//10.2.172.241:1521/emiasdb</con:value></con:property><con:property><con:name>lloDBDriver</con:name><con:value>oracle.jdbc.driver.OracleDriver</con:value></con:property><con:property><con:name>lkDbConnection</con:name><con:value/></con:property><con:property><con:name>lkDbLogin</con:name><con:value/></con:property><con:property><con:name>lkDbPassword</con:name><con:value/></con:property><con:property><con:name>lkFullDbConnection</con:name><con:value/></con:property><con:property><con:name>lkDBDriver</con:name><con:value/></con:property><con:property><con:name>Mock-hosp</con:name><con:value>https://31b10551-aae5-4e2f-a8a4-7396d95e0268.mock.pstmn.io/1</con:value></con:property><con:property><con:name>Mock-llo</con:name><con:value>https://ee9a0037-6927-44b0-be7c-a242e58cc9cf.mock.pstmn.io</con:value></con:property><con:property><con:name>planServiceEndpoint</con:name><con:value>http://esbcamel.test.emias.mos.ru/proxy/dnpdn/dnpdnService/v2S/ProxyService</con:value></con:property><con:property><con:name>Mock-pdn</con:name><con:value>https://2bc30b6e-738f-4173-95ab-0c3b27128927.mock.pstmn.io</con:value></con:property><con:property><con:name>Mock-saOrchestrator</con:name><con:value>https://1e984a1b-d2b3-488a-889f-552f47eabcb7.mock.pstmn.io/385256</con:value></con:property><con:property><con:name>sudirToken</con:name><con:value>reGL88GvPLK8B9ohBz679P77wGPsISy-WPiU6NGXQXI</con:value></con:property><con:property><con:name>X-Access-JWT</con:name><con:value>eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjE3MTE2MjU4OTgsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiI3NTgzNWNiNy05ZTI3LTRhY2ItYTk1ZC1hOWRiMzRlOTY0MWUiLCJzaWQiOiJjMjVlODg2Zi00MzM4LTQ3NjQtYmM5Ny01NGViMzc5YmJmNjciLCJwaG9uZSI6Ijc5MTUwMDQ5NzY2Iiwic3NvX2lkIjoicjR3cHFUQmtVUWF0R2o1MmROWnprRjNwSGd1WmY4ak95Z0JCZlk2dXJReTBkRm1VaExxWFBjcERHRENySTFyYjZVd0g0alUrR1ZjT3VnN2ZHM0hPRkovWHRTekNaWHh6OEwwMnRiNGp1UTJWOGV1VFhPai9nWUlTay8raTJ5Y0Nqd1Y4RVR1M0xyU0tRYW5uek45SGs4TGNTT1ljT1BLaUJvOGFWMnVTM2RsMEhoV1NmT1FaYW43cmYrZ3FwbXJ4RmZHNHlnVEdvZEV5RkhJOE16Z2RpV0FYc2kxTVR2U05vbVdGZlF6enFHZEs2a2ZKMTBhRTlsSTMxSFFVbzZxNE40YXZZUW10Yldod1ZqWW5ndGdsUWcva0NGSXd4WTVNOTdteDhXQWswbnJCckF2TjJKNW5sZFJweGwvdTlBeHhrdnl1cWRTRjQvNVUwdXd3RWVzQ0NnPT0iLCJlbWFpbCI6IiIsImZpcnN0X25hbWUiOiJcdTA0MjVcdTA0MzBcdTA0M2RcdTA0NDNcdTA0M2MiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxMC4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxN1x1MDQzOFx1MDQ0MFx1MDQzMFx1MDQzY1x1MDQ0M1x1MDQ0Mlx1MDQzNFx1MDQzOFx1MDQzZFx1MDQzZVx1MDQzMlx1MDQzZFx1MDQzMCIsImJpcnRoX2RhdGUiOiIyMDAxLTA2LTA2IiwiYW1yIjpbXX0.sRzm-XIELN89w2wy8xG_mhl2QNBEVOUojNVhUxmtMDDtiMw-XpppG1OUjcOnOdFNzpeQopASzxdSGo_NToPVZFhruRzlYbyB325RnVo3Fx8HvaDuey2Fl_EdpPgjW6mSWmV4Yp6HO0FvDNBAI0Y8Mk4Kh-_aXMXDrY0vBZQZkwCxpcKuYShB6CT4xVZja8pE3TMEOy1KerBBz-8j6K925BmV2e1bG6ho4RyBWcwfkqdW5eUGe1PRB5VoaWZ9RwKgXT6YuVbwF5_1lMRBh1mRsMBqVhIEZy7aewBddW4UDPFjIYPj5z1ysMuF5LXDPa8Jk2XZa08gvg0q18MHZm3caNqmWdaPGVA0AuGiTPD1e8tXzJm6GcB0feIEvGYWqb_YAq2uIugMyTGDWjYXTB6_evNOvaLdFN-53od7KM2UALsG1Qa5S0sljI6jfhh8Wg88ZHfKk2p5FAHwtzWOtIRPJw9sjR4HAE9FQXi2s9wz41gRHHU8z62sixweSeRORJhOoT074gwM_nzknckQrSpQKWwtnWfYIN1g8WjLHGGKLYCwDRhd4y0_1DXVc6XaFwk81r4YLq8yxG4jIw8PItZHZm24e3IHDQjsJquMcnU0i6osH4Mk8XrxPOc_qZgfYVg9LrC9Y4AKG3oZbDtSKbIxlruaNpfB2w_Wzs91wnTCp14</con:value></con:property><con:property><con:name>Mock-url</con:name><con:value>http://application-mock.emias.solit-clouds.ru/mock</con:value></con:property><con:property><con:name>mockDbFullConnection</con:name><con:value>jdbc:postgresql://172.17.5.19:29107/emias_info_mock?user=emias_info&amp;password=emias_info</con:value></con:property><con:property><con:name>emiasGibddEndpoint</con:name><con:value>http://esbcamelvv.test.emias.mos.ru/proxy/Gibdd/Appointment/v2S/ProxyService</con:value></con:property><con:property><con:name>mockUrl</con:name><con:value>http://application-mock.emias.solit-clouds.ru</con:value></con:property><con:property><con:name>lloenefitsEndpoint</con:name><con:value>http://esbcamelvv.test.emias.mos.ru/proxy/LLO/BenefitsRegistry/v3S/ProxyService</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>