<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="0035a8d1-4080-4a49-bc2a-d83668fec571" activeEnvironment="Default" name="ЕМИАС.ИНФО севрис Анкеты Самоконтроля" resourceRoot="" soapui-version="5.6.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="ecd28b07-a22c-4697-a831-2611b70e5ca1" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://lkservice.test.emias.mos.ru." type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://lkservice.test.emias.mos.ru.</con:endpoint></con:endpoints><con:resource name="emc-permissions" path="/api/internal/3/emc-permissions" id="b9f703f1-23c7-4faf-b8e6-d1cf8b9848e1"><con:settings/><con:parameters><con:parameter><con:name>ssoId</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="2d014af6-bbe7-40c3-b075-08d679d29760" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:emc="https://lkservice.test.emias.mos.ru./api/internal/3/emc-permissions">emc:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:emc="https://lkservice.test.emias.mos.ru./api/internal/3/emc-permissions">emc:Response</con:element></con:representation><con:request name="Request 1" id="7afb73ec-356a-499b-a3dd-566e7c239c30" mediaType="application/json"><con:settings/><con:endpoint>https://lkservice.test.emias.mos.ru.</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ssoId" value="${#TestCase#guid}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ssoId</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="auth" path="/api/auth/1" id="9aaa364b-ec5b-40f6-9323-5d7b7d69dc25"><con:settings/><con:parameters/><con:resource name="login" path="login" id="402a3e87-894c-4392-9e5d-50cb817d578d"><con:settings/><con:parameters/><con:method name="Method 1" id="12dff9f5-1f45-4332-a143-213216bb20a8" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:log="http://lkservice-apigateway.test.emias.mos.ru/api/user/auth/1/login">log:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" id="b4bd769e-27a2-4c16-96ce-9d7a61955a25" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://lkservice.test.emias.mos.ru.</con:endpoint><con:request>{
  "code": "string"
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="confirm" path="confirm" id="973e6d1a-2d90-439f-8f25-e4355f58e761"><con:settings/><con:parameters/><con:method name="Method 1" id="fadd44db-ef35-4df8-8b14-1cc7ef0a5882" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:con1="https://lkservice.test.emias.mos.ru/api/auth/1/confirm">con1:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:con1="https://lkservice.test.emias.mos.ru/api/auth/1/confirm">con1:Fault</con:element></con:representation><con:request name="Request 1" id="8d685b7f-e34f-4908-98f4-52e27a5acdab" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://lkservice.test.emias.mos.ru.</con:endpoint><con:request>{
  "otp_code": "string",
  "refresh_token_ttl_seconds": 0,
  "access_token_ttl_seconds": 0,
  "attempt_token": "string"
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="logout" path="logout" id="01b65836-18e0-42e4-bd8f-2eee5c803a99"><con:settings/><con:parameters/><con:method name="Method 1" id="616a77d0-bb4d-40f1-9884-9fcb5077f0b6" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="d52e4970-e6f1-42a3-9213-4733f70b2f78" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://lkservice.test.emias.mos.ru.</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:resource><con:resource name="history" path="/api/2/forms/history" id="61086994-fbb5-4f5c-837d-31d45f2e11e9"><con:settings/><con:parameters><con:parameter><con:name>ehrId</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>formType</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="6814969d-c790-4c6a-869a-122cf298dbdb" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element xmlns:his="https://lkservice.test.emias.mos.ru./api/2/forms/history">his:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:his="https://lkservice.test.emias.mos.ru./api/2/forms/history">his:Response</con:element></con:representation><con:request name="Request 1" id="ae77ea24-0472-4e8d-8583-c61df76cb109" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://lkservice.test.emias.mos.ru.</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>formType</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="fa7aedf6-e461-454a-8195-ade7556657e0" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://login-tech.mos.ru" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache/><con:endpoints><con:endpoint>https://login-tech.mos.ru</con:endpoint></con:endpoints><con:resource name="register" path="/sps/oauth/register" id="e85c3fc9-1d6f-4674-b5f0-7932c0c1d430"><con:settings/><con:parameters/><con:method name="Method 1" id="bad103e2-9b07-4c54-9baf-0057a1b9b125" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:reg="https://login-tech.mos.ru/sps/oauth/register">reg:Response</con:element></con:representation><con:request name="Request 1" id="1162e89c-c023-4360-b3e0-00fe6e004a7a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://login-tech.mos.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="te" path="/sps/oauth/te" id="a4593ebe-1665-411a-a027-51bc8b4c8fd6"><con:settings/><con:parameters><con:parameter><con:name>code</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>redirect_uri</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>grant_type</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="305bc016-286f-48ee-8871-3342586ae9fa" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:te="https://login-tech.mos.ru/sps/oauth/te">te:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/x-www-form-urlencoded</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:te="https://login-tech.mos.ru/sps/oauth/te">te:Response</con:element></con:representation><con:request name="Request 1" id="c47a698d-29d0-42d1-9fa7-fa3bf0cb0782" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://login-tech.mos.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>code</con:entry><con:entry>redirect_uri</con:entry><con:entry>grant_type</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="me" path="/sps/oauth/me" id="13e27417-6e31-4ad8-a414-4fcd900da676"><con:settings/><con:parameters/><con:method name="Method 1" id="7f19da64-5f33-466d-a3d7-d60086fdd053" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:me="https://login-tech.mos.ru/sps/oauth/me">me:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="7cee0c54-01a9-4d76-971f-a0f61e701c30" mediaType="application/json"><con:settings/><con:endpoint>https://login-tech.mos.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="c385e0ef-173d-4338-a722-42c425455c09" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://emiasinfo1.emias.solit-clouds.ru" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint></con:endpoints><con:resource name="SelfControl" path="/api/v2/selfControl/selfControl" id="3ddb998d-cc1c-4343-aa8b-fcf2ff9f375b"><con:settings/><con:parameters><con:parameter><con:name>ehrId</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="SelfControl 1" id="30b5aff3-b2b0-425a-a706-1efc95fc3cfe" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:sel="http://emiasinfo1.emias.solit-clouds.ru/api/v2/selfControl">sel:Fault</con:element></con:representation><con:request name="Request 1" id="d1451b9a-18f3-4843-b4c4-94797116e11b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="X-Access-JWT" value=""/>&#13;
  &lt;con:entry key="EI-Token" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="" path="/api/v2/selfControl/selfControl/{documentId}" id="1b082636-184e-400a-a481-ffd9b2e45701"><con:settings/><con:parameters><con:parameter><con:name>ehrId</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>documentId</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="7b08f239-752e-4dcd-b132-823584036275" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html;charset=UTF-8</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400 403 404 500</con:status><con:params/><con:element xmlns:sel="http://emiasinfo1.emias.solit-clouds.ru/api/v2/selfControl/">sel:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:sel="http://emiasinfo1.emias.solit-clouds.ru/api/v2/selfControl/">sel:Response</con:element></con:representation><con:request name="Request 1" id="204227fb-86da-416c-9e8e-caa3972601df" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="X-Access-JWT" value=""/>&#13;
  &lt;con:entry key="EI-Token" value=""/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/selfControl/selfControl/7ce48801-c1d3-46ed-b967-2d4a29dc8602</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="documentId" value="7ce48801-c1d3-46ed-b967-2d4a29dc8602"/>
  <con:entry key="ehrId" value="8d075820-b3cb-4fbe-9666-3106776652d2"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>documentId</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="0f22821b-8bc9-44e0-8977-0f44d72b4051" name="GET selfControl/{documentId}"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="ad7f950d-a4c9-4eb0-afdb-fafdd9b9aacd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение СУДИР токена" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Получение client_Id client_secret (шаг 1)" id="5b0237b9-9804-4bec-8a58-fb152c64a56f"><con:settings/><con:config service="https://login-tech.mos.ru" resourcePath="/sps/oauth/register" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Получение client_Id client_secret (шаг 1)" id="1acba04c-b558-4b14-94b3-193346516e38" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer jIeAUJjALkvjRcU_wAcASnNNc9ovLxhApSnJfqt2JLcRw_jCyugGxXfMdPVBayeiPj0pmufDqQxmE9ofd8Rnww" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#loginEndpoint}</con:endpoint><con:request>{
"software_id": "CSI",
 "device_type": "android_phone",
 "software_statement": "eyJ0eXAiOiJKV1QiLCJibGl0ejpraW5kIjoiU09GVF9TVE0iLCJhbGciOiJSUzI1NiJ9.eyJncmFudF90eXBlcyI6WyJhdXRob3JpemF0aW9uX2NvZGUiLCJjbGllbnRfY3JlZGVudGlhbHMiLCJyZWZyZXNoX3Rva2VuIl0sInNjb3BlIjoib3BlbmlkIGNvbnRhY3RzIHByb2ZpbGUiLCJqdGkiOiJmYjg2NDcwMS1mZGNkLTRjZjctODg1Mi01ZTVmNDY3N2ZjZTYiLCJzb2Z0d2FyZV9pZCI6ImVtaWFzLmluZm8iLCJzb2Z0d2FyZV92ZXJzaW9uIjoiMSIsInJlc3BvbnNlX3R5cGVzIjpbImNvZGUiXSwiaWF0IjoxNjM1MTczODIyLCJpc3MiOiJodHRwczovL2xvZ2luLXRlY2gubW9zLnJ1IiwicmVkaXJlY3RfdXJpcyI6WyJodHRwczovL2VtaWFzLmluZm8vc3VkaXItbW9iaWxlIl0sImF1ZCI6WyJlbWlhcy5pbmZvIl19.glfjJb7PXa7l3O3CMIOrbw_N0Cd5y-kyn5lklyVGLXDAFv8MqC85MfgqEE86buaTAsOwEAqqoTwLpOXodN9ds_q7zcDyLQoDcILHhgg9G3-DoLu9XxpPbaRNFBjzpgZrjKZCGJCSqdjnQJzNv2-oySD_xTKHfXFjy62SITRnUjJCyxhmbrtckjJX6RckCqv3Y3WFgr8nmMcjh-OFgquklokVlo3cfRl4R1JwEe5kiya7ZfqsNhwhx_iaG4SHYICtzYboToAfiLYbJsJ-H89I7FspusOhidkrt23BteNUnjzT3Jx3_OuWauK4aLkaBXQzFVksaoDiuRHmHn6uOzFihQ"
}</con:request><con:originalUri>https://login-tech.mos.ru/sps/oauth/register</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c2013d0e-b347-454d-bc12-f33e5b820ccc" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Запись client_id client_secret" id="8eca40fa-c3ec-437b-a8ad-73ccdea518be"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>client_id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Получение client_Id client_secret (шаг 1)</con:sourceStep><con:sourcePath>$.client_id</con:sourcePath><con:targetType>client_id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>client_secret</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Получение client_Id client_secret (шаг 1)</con:sourceStep><con:sourcePath>$.client_secret</con:sourcePath><con:targetType>client_secret</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Кодирование в base64 + составление запроса" id="9bd7c527-63a8-4931-98fa-3c270fb60597"><con:settings/><con:config><script>import java.util.Base64

def Encoder = Base64.getEncoder()

client_id = testRunner.testCase.getPropertyValue("client_id")
client_secret = testRunner.testCase.getPropertyValue("client_secret")

auth = Encoder.encodeToString((client_id + ":" + client_secret).getBytes())
testRunner.testCase.setPropertyValue("base64",auth)

////////////Составление запроса. Ссылка для авторизации///////////

link = "https://login-tech.mos.ru/sps/oauth/ae?client_id=$client_id&amp;response_type=code&amp;redirect_uri=https://emias.info/sudir-mobile&amp;access_type=offline&amp;scope=openid+profile"
testRunner.testCase.setPropertyValue("link",link)
</script></con:config></con:testStep><con:testStep type="manualTestStep" name="Действия со ссылкой" id="1efbf294-df06-45e5-b90f-4b4a8223b9c5"><con:description>1. Скопировать ссылку из проперти кейса (link)
2. Открыть консоль разработчика в браузере (F12)
3. Вставить скопированную ссылку
4. Ввести логин/пароль и капчу (логин: yar.promo.zapov.a@gmail.com пароль:Hibmavy3Pitnico9 )
5. Нажать войти
</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="delay" name="Delay" id="2613de10-eeca-45fc-81c3-74d3badea3c4"><con:settings/><con:config><delay>50000</delay></con:config></con:testStep><con:testStep type="manualTestStep" name="Подтверждение и копирование кода" id="8b036b00-dc99-4666-8d10-3408fc871201"><con:description>1. Нажать кнопку "Подтвердить"
После получения данного кода есть минута, чтобы отправить следующий запрос
2.Скопировать код из консоли разработчика
3. Вставить код в проперти кейса (code)</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name="Получение токена СУДИР" id="c35248d8-6401-44cf-b58c-7a1b3a4d7c27"><con:settings/><con:config service="https://login-tech.mos.ru" resourcePath="/sps/oauth/te" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Получение токена СУДИР" id="26f90063-1811-4565-b889-d93e4d165864" mediaType="application/x-www-form-urlencoded" postQueryString="true"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Basic ${#TestCase#base64}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#loginEndpoint}</con:endpoint><con:request/><con:originalUri>https://login-tech.mos.ru/sps/oauth/te</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="fd19a4af-366b-4fed-8e55-939a693dbce6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="code" value="${#TestCase#code}"/>
  <con:entry key="grant_type" value="authorization_code"/>
  <con:entry key="redirect_uri" value="https://emias.info/sudir-mobile"/>
</con:parameters><con:parameterOrder><con:entry>code</con:entry><con:entry>redirect_uri</con:entry><con:entry>grant_type</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Запись токена СУДИР" id="40f5920c-9f44-45bd-8d75-7274bf6633ce"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>access_token</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Получение токена СУДИР</con:sourceStep><con:sourcePath>$.access_token</con:sourcePath><con:targetType>access_token_Sudir</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Получение данных о пользователе" id="7c4168bb-5812-499f-b091-c64c8c951693"><con:settings/><con:config service="https://login-tech.mos.ru" resourcePath="/sps/oauth/me" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Получение данных о пользователе" id="e34c85f0-463c-454a-bb0f-a0f8070e9b0a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#access_token_Sudir}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#loginEndpoint}</con:endpoint><con:request/><con:originalUri>https://login-tech.mos.ru/sps/oauth/me</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2a895841-cf20-40c7-a34a-86a7e5719b50" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Запись guid" id="9bc0806b-9e21-4614-95c5-5a73175b3368"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>guid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Получение данных о пользователе</con:sourceStep><con:sourcePath>$.guid</con:sourcePath><con:targetType>guid</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Users с доступом к ЭМК" id="e9578836-7550-42c5-b2b4-507a9824a639"><con:settings/><con:config service="https://lkservice.test.emias.mos.ru." resourcePath="/api/internal/3/emc-permissions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Users с доступом к ЭМК" id="7afb73ec-356a-499b-a3dd-566e7c239c30" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjQ3NTkwMjY4NDIsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiJiYjVlYjg1OC1lZjc2LTQyOTUtOTg1OS1jOWQ2YTI1MWIzNTAiLCJzaWQiOiJmMzI3NTUyNy1jZTkyLTQ4MGMtODljYy1kMjQ4M2RmMWM4MjEiLCJwaG9uZSI6Ijc5MTU5Njc5MjMwIiwic3NvX2lkIjoiSFlrbGU2WFc3aWZybFQ3d0N1dUswaVo5Um9lUFhtMk5HOTJiVGFMb3dmTUE4UC95dzg1TWkvV3JWSG84OVdEaFdGZ1J0NjZFVTNNQnRRM1NFaGhrcndPT0xqTkZpamNSZVZGMnhlZ1I0RSt3eGdCUzJKUnQzQ1NQNG1RZnc0WUVFSkNQcHJVVUMyS1BCVytja2tIeXQ5d09hUnE0VFFqWjIvd1R0ZEhERXlSczJzWUlNMVdVWlBnYzM5dlJScGZLR012NGtlYWMvZWlycTlQbFRmUFFhdVFkeG5HSjlaRHpRYkFzVU1VTFZiRlcwbTc4S0tSNUp6QUZwbDdZRkV4MW85ZVVUNzBYZEJaRGhmZFZsbGpBK1QreVJJT3BXMlNPWk9FcFZoWUFaOHFUVk90S2NKazA2MGJEbmRZZFVkMWdRMHg2Y2tUMStDZ094UUViZWZpL1l3PT0iLCJlbWFpbCI6Inlhci5wcm9tby56YXBvdi5hQGdtYWlsLmNvbSIsImZpcnN0X25hbWUiOiJcdTA0MjFcdTA0MzVcdTA0NDBcdTA0MzNcdTA0MzVcdTA0MzkiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxMi4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxMlx1MDQ0Zlx1MDQ0N1x1MDQzNVx1MDQ0MVx1MDQzYlx1MDQzMFx1MDQzMlx1MDQzZVx1MDQzMlx1MDQzOFx1MDQ0NyIsImJpcnRoX2RhdGUiOiIxOTc4LTAzLTIxIn0.dErz7ETQCxAJUOECLgysHVZZPZDQDJvvTQOi8_glDkqiWNaU1QTPKao0eueTw5_ydAE1KuGcGmI1yqeUhYDfp9ZMj97xKv4SYyE3lhdpgaiSALyoiuYcdxUEYj7cJiwZ0Bzjce8GOF__wI76cYKn-mVbZkuxPzRtn1SIvStR-zkiok3kW_Qg6HJFTP7mF1T_Z4p7OILvPYtErbJJHWJ-pVOLMjQYfk2RCjWJesIEuWs2sLr953xhQeodp-bBIYZCjCvxUSEgsHXNMkCvoRkujm9kpJFVHMgKYuwqmiHbZ6B7_3DuOiRsRRWrPJwn2dXZUwhlhzsutwCfIBE13SbfJqO9w14ud_GWrPsofO8T4j7UiGwTvzxXVycJZMMU6XElz35aQRGRVNV53NUQWCc2DqBlmsWHjW8Lg__A5NEjkgDPiRYKWp_Gdz9_I4YQY3x0ZFPIToUNFx2Lt8ei5zcLGL5hzvSdelUzmz0QirECbejcDJdXS8HxEe-XsCDLSh51hwweEpJILfdG4AlWhHFh9_NuKI-zoFx_48wB4d0-miMaxtiscQR1_0IwQFO0kujoMyIn432fPU2waJOjj41_SgX3AQsMPn3FQk4gV8MrHU9vfAoROXrBSbMS7ty5rwWczYdaijFYrNpsUprBRtL7EFSWgRnvFOU7ekNoy_AzpfA" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#lkEndpoint}</con:endpoint><con:request/><con:originalUri>https://lkservice.test.emias.mos.ru./api/internal/3/emc-permissions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="ef35c434-94e6-4c3e-b7f2-acf1722fa3ad" name="Valid HTTP Status Codes"><con:configuration><codes>200
</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ssoId" value="${#TestCase#guid}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ssoId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>client_id</con:name><con:value>dyn~emias.info~691166c4-4604-4a08-86a4-cb5d7d63c401</con:value></con:property><con:property><con:name>client_secret</con:name><con:value>1jvAFOeaeExnoX2</con:value></con:property><con:property><con:name>base64</con:name><con:value>ZHlufmVtaWFzLmluZm9+NjkxMTY2YzQtNDYwNC00YTA4LTg2YTQtY2I1ZDdkNjNjNDAxOjFqdkFGT2VhZUV4bm9YMg==</con:value></con:property><con:property><con:name>link</con:name><con:value>https://login-tech.mos.ru/sps/oauth/ae?client_id=dyn~emias.info~691166c4-4604-4a08-86a4-cb5d7d63c401&amp;response_type=code&amp;redirect_uri=https://emias.info/sudir-mobile&amp;access_type=offline&amp;scope=openid+profile</con:value></con:property><con:property><con:name>code</con:name><con:value>awdGWj0b5KRk_-PzWFRRqxegkXomSUnom3-DyPitdpkoJA51UREjEfWnq-dWsVdsBn2JqkQ_CEpAmRwJgHW8RcwlTF4ivk7SHXr0wI0A5jM</con:value></con:property><con:property><con:name>access_token</con:name><con:value>Q-F5iygkgbwX82WAwlrw9VZtIRJo23IeTI8M_38uh19jZWJhYThlZC0yNThhLTQ2ZWYtYTZiZC1lZjEzZDdiZWM1MjI</con:value></con:property><con:property><con:name>guid</con:name><con:value>83294bda-5f39-44c3-a5e6-bb0d348a794b</con:value></con:property></con:properties></con:testCase><con:testCase id="208b3fba-98d4-4a3f-84ec-702ef20792fc" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение токена X-Access-JWT" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="LK login" id="561288b5-7ca8-4769-8f5f-2fcb7a3e78f8"><con:settings/><con:config service="https://lkservice.test.emias.mos.ru." resourcePath="/api/auth/1/login" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="LK login" id="cb9ad2ba-4d09-47c2-873b-6eef37766e6d" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#lkEndpoint}</con:endpoint><con:request>{
  "code": "${#TestCase#user_login}"
}</con:request><con:originalUri>http://lkservice-apigateway.test.emias.mos.ru/api/user/auth/1/login</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7dea13c2-f571-4463-990b-3ecd9aa02719" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="X-Environment" value="stage" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>X-Environment</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Получение attemp-access" id="55f6ee39-53ac-4db3-aac2-c043bd7b3c1e"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def httpResponseHeaders = context.testCase.testSteps["LK login"].testRequest.response.responseHeaders
testRunner.testCase.setPropertyValue("x-otp", httpResponseHeaders.'x-otp'[0])

ResponseJson = context.expand('${LK login#Response}')
attempt_token = new JsonSlurper().parseText(ResponseJson)

testRunner.testCase.setPropertyValue("attempt_token", attempt_token.attempt_token)</script></con:config></con:testStep><con:testStep type="restrequest" name="LK confirm login" id="c6346323-a26b-4e3b-868f-11e30ef32cdb"><con:settings/><con:config service="https://lkservice.test.emias.mos.ru." resourcePath="/api/auth/1/confirm" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="LK confirm login" id="3827440b-59d7-4e3f-82f2-7e31523ea53c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#lkEndpoint}</con:endpoint><con:request>{
  "otp_code": "${#TestCase#x-otp}",
  "refresh_token_ttl_seconds": 0,
  "access_token_ttl_seconds": 0,
  "attempt_token": "${#TestCase#attempt_token}"
}</con:request><con:originalUri>https://lkservice.test.emias.mos.ru/api/auth/1/confirm</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Получение X-Access-JWT" id="2cc62eaa-b264-4a29-8bf7-fa090828ee71"><con:settings/><con:config><script>import groovy.json.JsonSlurper

ResponseJson = context.expand('${LK confirm login#Response}')
access_token = new JsonSlurper().parseText(ResponseJson)

testRunner.testCase.testSuite.setPropertyValue("X-Acces-JWT", access_token.access_token)</script></con:config></con:testStep><con:properties><con:property><con:name>X-Acces-JWT</con:name><con:value>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjE2NzUzMzkwODIsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiJiYjVlYjg1OC1lZjc2LTQyOTUtOTg1OS1jOWQ2YTI1MWIzNTAiLCJzaWQiOiI3NDEyZTE4YS1mNWEyLTQwNWUtOWYxZi1lYjQ3NGYwOGM5ZTIiLCJwaG9uZSI6Ijc5MTU5Njc5MjMwIiwic3NvX2lkIjoib2ltR2VpUTR2UzBXRVN4WTNCU1BaSnhORkZNMytDTnlQM3MyUlZaZWN0WnM5Y0VDRHBiYUU5cHFzWFp6VytOQ2hPV05QRmQ1Z250RGZuSUEvUENwQmFRZWprWTBuYlhSRytkdTlCUlBPNHFVeHlCTndseTFIcFl0MnhBVjhjc0NtY3pkcERYWittc25sdUIvQVBuMnNjYVVVY0RwUldZWnc4T0hpdCtkV0I2Wm9NY0EzUlVmN2Q2aW5RdlRZUlNYV01NZWdDby9ES2MwZkVhcGZjanN3aENtR3lZeWFGbi9neHNHUlVGR2NIT0l4ZmVMZDg1MjFralQxcVdCQ0tONFhsbXFXVXJvei9TcmFMdXNETElXaUMzekRXclQ0YjZVTjdJdHBib2JxdlpzcWlDMUR0ZE1qek91VDdoU2ZqSVV0NmtycmgwMXBUTmlmdmFySWludzVBPT0iLCJlbWFpbCI6Inlhci5wcm9tby56YXBvdi5hQGdtYWlsLmNvbSIsImZpcnN0X25hbWUiOiJcdTA0MjFcdTA0MzVcdTA0NDBcdTA0MzNcdTA0MzVcdTA0MzkiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxMi4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxMlx1MDQ0Zlx1MDQ0N1x1MDQzNVx1MDQ0MVx1MDQzYlx1MDQzMFx1MDQzMlx1MDQzZVx1MDQzMlx1MDQzOFx1MDQ0NyIsImJpcnRoX2RhdGUiOiIxOTc4LTAzLTIyIn0.tErsDZnHLK_fRt4HdkfkwINs36B8xWvA83eass0DajZ4SD7TwyhcvUkMivKjeJMFb4dovHm0YPrRjmFiU9EpLLgpRlzLcObREcALzc1SrFPa3lnsHKlG765QBch5up6SIeroX8mgH_CbW56Bt0Ux7acgWzV9hyu8N1Z8QNNSC-P593nrR5RPEIYl0VYl1BVT6ZciiVKn0mz7oSR-c_PZwtja_yik-ejOUf7VqPPgZs1gJGxnU34LZxYzMggbvvVxM7nqrFsWnaeXe2bCwEfTT5HLtAisUGheaoJQvXNRor46Zc1zQrL62OlVkXrkrqTqIxNP4SAOJbNconIg7dlqItAr8Qpv_YprjH2XizNXodcYr9C_TYwcv37Va_-JZLejQwVDlNpwjm-B5ZhDkIat3vcszZaQgerwJe4AFA-xlfHb2eh0usHoMXCsdMozSodvzxEqDggCHGJVXCAEuTi9lRAIqOmiogQcFvjztD-cXsFhCvpzkNk0IrKuq_LzZoGPxo3p86bKHjtFsSXcOujIimULEFh_e0rSe2_eLDzhYbq6NrL7HOku5Q2PV8WJ7_TxQB4CmJVJIBgV2g1fPXGVz0BKHrTzKq3WaAwI0Ri2Jo7taW5M_fpmbwxwBSAeBf5kblNkpn6Dg6TLWVDWFigO5Mgl4yeYN7N4JB6HdgrB8ZI</con:value></con:property><con:property><con:name>user_login</con:name><con:value>yar.promo.zapov.a@gmail.com</con:value></con:property><con:property><con:name>attempt_token</con:name><con:value>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpZCI6ImJjY2MwYmM5LWEyMTctNDA3YS1iNTYzLWNkNjljYTJiNjVlZSIsImlzcyI6InVzZXJfYXV0aCIsImV4cCI6MTY3NTMyNTIwNSwic3ViIjoiYmI1ZWI4NTgtZWY3Ni00Mjk1LTk4NTktYzlkNmEyNTFiMzUwIiwiaGNuIjo1LCJhdWQiOiJQQVRJRU5UIiwic3NvX2lkIjoieXVYYmdjOFpDSXNGWURiUG5qamQvaFZVRkZLcTlSeWNjdTZ2R2JyTWhvZFc3aVZNdXY5TmgrU2dSbEMyenNKZWVTaG5TbGZtVGpNSEY3VVZ5eHJ3eW95cVN6MWd0ZXVxNjh2eDU4YTV6YlVsMENIaHZqdDM0WU5EZ3ZhRXlkVUczNlpMSFUya0hWMDhUQ3BWVVBrZzhzRllUTWt4dEpCOXYzeEE5eVo4MDlFYk8wd3dBZDVUVGtMUElFTTh3VFFwNWdNcFhIWktSakxaQjZtWUVoajhQUzdXckJ5RVpjWkUzNVVjTkZteXFZUjFjMWxYYWJvOTE3bnlaa1k3RFBBMENNMnQydzBRNGx3RDlaNm5MaWdSZVJFNnl0ajEwSGdRL3o4ZUpZWHdvT0JhMkJWZXFFODl4bDlWeHdxN3ZWTWk4T3lXUnBGSVl3ZVowQXhRclZQR1lRPT0ifQ.hO5-p9JRYQC7-GRs3hdgI9c9TFLP5kCDbhgEG_QSIaeFg9knOThNCP5-_J2m28RaUU4LIzOi_JXIZXTzSZOIRqCzXqIqYiVsjBRtolgYOoOma_gr4mDBqwiQ9rKbuXPG2jyInUX_sV-Zn2XE2p-3xzXHj1dTxJTOJF-yU_4GFVj8__Vf6W2ovJX2bsjToZix_g18Lm5K0GkN39WcvZHofb3A-p_8X_6woHRHa9cKZP9-AWffLiEvxnDSoip5bUCK88-G3USOOnMVvQxgLq5PphMXFE7WQ8vUiwAebHZ4XDdVrFZmFjbNN7kwGVvpkOupC9RmtNqYZbV4BCViF2qVSh6MThDsz6O4NkfMkGhLRyytysAqVK5z4xSZ4vLeTXZWGNlAya1nRTU8OvmTwXsuIApxcp3qJ5yWRulq5YkbBo9n2cvYeFwy2MxOEeN0AsltvlVq4iKdSwUZXDk1PtAmTZi8Go84SNWMpYeZcYbAIk95VtkdA5fQWJfOTkaK42IoEkcUTn8PCOTHeELEVyJdRwcRtQg5wHcfmrVmdNs_mY9YisKgb7CseV3e4EdziPtR4SKGDFIV2tXaIBIivu5AC0NI6bTt1RMb0kTEK1_4B2BrWwgKV4cfOsF5apO7kTZfFreI3i_7_ohz8rxgV2yDA-blBIFuus3t2_fMO2cd9ZA</con:value></con:property><con:property><con:name>x-otp</con:name><con:value>19674</con:value></con:property></con:properties></con:testCase><con:testCase id="2ccf1c33-1f2d-40a4-a35d-92efa3e693b8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Получение анкеты самоконтроля" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="POST selfControl" id="6077394c-dcb6-424e-b684-13a1f29449e3"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/selfControl/selfControl" methodName="SelfControl 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST selfControl" id="6295fd71-859f-4a8b-95ee-843476147093" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestSuite#X-Acces-JWT}"/>&#13;
  &lt;con:entry key="EI-Token" value="${#TestSuite#access_token_Sudir}"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request>{
  "answers": [
    {
      "answerCode": [
        "Yes"
      ],
      "questionCode": "hadChangedChestPain"
    },
    {
      "answerCode": [
        "Yes"
      ],
      "questionCode": "hadWeightLoss"
    },
    {
      "answerCode": [
        "Yes"
      ],
      "questionCode": "hadBlackMushyDefecation"
    },
    {
      "answerCode": [
        "No"
      ],
      "questionCode": "hadWeightGainLastMonth"
    },
    {
      "answerCode": [
        "No"
      ],
      "questionCode": "hasIncreasedBloodPressure"
    },
    {
      "answerCode": [
        "No"
      ],
      "questionCode": "hasIntenseThirst"
    },
    {
      "answerCode": [
        "No"
      ],
      "questionCode": "hadBleeding"
    },
    {
      "answerCode": [
        "No"
      ],
      "questionCode": "hasChestPain"
    },
    {
      "answerCode": [
        "Yes"
      ],
      "questionCode": "newComplaintsOrAmplification"
    },
    {
      "answerCode": [
        "EDEMA"
      ],
      "questionCode": "complaints"
    }
  ]
}</con:request><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/selfControl</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="253bd7c2-7cd2-470e-a68c-c76b33d6bc3b" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="GetFormsHistory" id="4f6570af-ee34-4589-93c7-4db5fbb234d7"><con:settings/><con:config service="https://lkservice.test.emias.mos.ru." resourcePath="/api/2/forms/history" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetFormsHistory" id="ae77ea24-0472-4e8d-8583-c61df76cb109" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#TestSuite#X-Acces-JWT}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#lkEndpoint}</con:endpoint><con:request/><con:originalUri>https://lkservice.test.emias.mos.ru./api/2/forms/history</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="0fc00ab5-6d7d-406a-b481-e79d7d9b8b87" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="formType" value="self_control"/>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>formType</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Получение documentId" id="7b78d013-7c65-40f7-80a1-909897b07aac"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper

def Response = context.expand('${GetFormsHistory#Response}') //парсинг ответа от ИНФО
def slurperJson = new JsonSlurper()
def LK = slurperJson.parseText(Response)

def size = LK.documentVersions.size()

def documentId = LK.documentVersions[size-1].documentId

testRunner.testCase.setPropertyValue("documentId",documentId)
</script></con:config></con:testStep><con:testStep type="restrequest" name="GETselfControl" id="746796f3-a9bd-4565-a4fd-11302a950f99"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/selfControl/selfControl/{documentId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GETselfControl" id="204227fb-86da-416c-9e8e-caa3972601df" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestSuite#X-Acces-JWT}"/>&#13;
  &lt;con:entry key="EI-Token" value="${#TestSuite#access_token_Sudir}"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/selfControl/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2b71c2fc-72b7-451f-a752-23906f120f49" name="Status Codes = 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="14b1f390-d650-40b3-9ca7-a0208775839f" name="Содержит answersOnQuestions"><con:configuration><token>answersOnQuestions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="ehrId" value="${#TestCase#ehrId}"/>
  <con:entry key="documentId" value="${#TestCase#documentId}"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>documentId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Маппинг параметров ответа" id="a5e695e2-c801-42a5-8184-ea3b8f78475a"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.xml.XmlSlurper

def Response = context.expand('${GETselfControl#Response}') //парсинг ответа от ИНФО
def slurperJson = new JsonSlurper()
def selfControl = slurperJson.parseText(Response)

assert selfControl.payload.answersOnQuestions[0].question == "Боли или неприятные ощущения в грудной клетке (за грудиной, в левой стороне грудной клетки спереди или левой руке) при подъеме по лестнице, при ходьбе или в покое";
assert selfControl.payload.answersOnQuestions[1].question == "Повышение артериального давления выше 140/90 мм рт. ст. при условии регулярного приема терапии назначенной врачом";
assert selfControl.payload.answersOnQuestions[2].question == "Кровотечения (носовые, из десен, геморроидальные, гематурия, кровохарканье, гематомы и др.)";
assert selfControl.payload.answersOnQuestions[3].question == "Увеличение частоты и/или изменение характера боли в грудной клетке (за грудиной, в левой стороне грудной клетки спереди или левой руке) при подъеме по лестнице, при ходьбе или в покое в течение последнего месяца";
assert selfControl.payload.answersOnQuestions[4].question == "Увеличение веса за последний месяц при нормальном аппетите";
assert selfControl.payload.answersOnQuestions[5].question == "Сильная жажда";
assert selfControl.payload.answersOnQuestions[6].question == "Уменьшение веса при нормальном аппетите";
assert selfControl.payload.answersOnQuestions[7].question == "Кашицеобразный черный «дёгтеобразный» стул";
assert selfControl.payload.answersOnQuestions[8].question == "Новые жалобы или усиление существующих";

assert selfControl.payload.answersOnQuestions[0].answer == ["Да"];
assert selfControl.payload.answersOnQuestions[1].answer == ["Да"];
assert selfControl.payload.answersOnQuestions[2].answer == ["Да"];
assert selfControl.payload.answersOnQuestions[3].answer == ["Да"];
assert selfControl.payload.answersOnQuestions[4].answer == ["Да"];
assert selfControl.payload.answersOnQuestions[5].answer == ["Да"];
assert selfControl.payload.answersOnQuestions[6].answer == ["Да"];
assert selfControl.payload.answersOnQuestions[7].answer == ["Да"];
assert selfControl.payload.answersOnQuestions[8].answer == ["Отёки"];</script></con:config></con:testStep><con:properties><con:property><con:name>documentId</con:name><con:value>7ce48801-c1d3-46ed-b967-2d4a29dc8602</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>8d075820-b3cb-4fbe-9666-3106776652d2</con:value></con:property></con:properties></con:testCase><con:testCase id="8cb67578-b120-4272-ab72-3104c5303492" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС1. Проверка пользователя не пройдена (ACCESS_DENIED)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="GETselfControl" id="8da940d4-7b47-4458-bfdd-77854c78843d"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/selfControl/selfControl/{documentId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GETselfControl" id="204227fb-86da-416c-9e8e-caa3972601df" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestSuite#X-Acces-JWT}"/>&#13;
  &lt;con:entry key="EI-Token" value="${#TestSuite#access_token_Sudir}"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/selfControl/selfControl/7ce48801-c1d3-46ed-b967-2d4a29dc8602</con:originalUri><con:assertion type="JsonPath Match" id="43e40166-293b-4b0f-b4c1-6128489288cc" name="code = ACCESS_DENIED"><con:configuration><path>$error.code</path><content>ACCESS_DENIED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="2e63f3c4-2d10-4276-b6da-99400c19dca2" name="description = Доступ к запрошенной медкарте отсутствует"><con:configuration><path>$error.description</path><content>Доступ к запрошенной медкарте отсутствует</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4e3c81cb-e858-4a51-a3f3-4cb5eee98709" name="type = BUSINESS"><con:configuration><path>$error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="documentId" value="7ce48801-c1d3-46ed-b967-2d4a29dc8602"/>
  <con:entry key="ehrId" value="8d075820-b3cb-4fbe-9666-3106776652d"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>documentId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="b8bbe715-fcdc-4fc5-988e-414aac942014" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС1. Не прошла авторизация в СУДИР (SUDIR_AUTHENTICATION_ERROR)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="GETselfControl" id="84eaf7fa-f846-4182-afd1-8f0ef011c681"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/selfControl/selfControl/{documentId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GETselfControl" id="204227fb-86da-416c-9e8e-caa3972601df" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestSuite#X-Acces-JWT}"/>&#13;
  &lt;con:entry key="EI-Token" value="1"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/selfControl/selfControl/7ce48801-c1d3-46ed-b967-2d4a29dc8602</con:originalUri><con:assertion type="JsonPath Match" id="e66c474e-17a4-4286-ba2d-6cfe202574c8" name="code = SUDIR_AUTHENTICATION_ERROR"><con:configuration><path>$error.code</path><content>SUDIR_AUTHENTICATION_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="69059c30-d776-4a50-a2ab-ffe55d300489" name="description = При попытке авторизоваться в СУДИР по следующему токену 1 была получена ошибка"><con:configuration><path>$error.description</path><content>При попытке авторизоваться в СУДИР по следующему токену 1 была получена ошибка</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ebcb34fa-909d-4423-8101-b5331fcfff14" name="type = BUSINESS"><con:configuration><path>$error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="documentId" value="7ce48801-c1d3-46ed-b967-2d4a29dc8602"/>
  <con:entry key="ehrId" value="8d075820-b3cb-4fbe-9666-3106776652d2"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>documentId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="42d6eac4-92ab-465a-bd13-2b994709f870" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС3. Документ с указанным идентификатором не найден (DOCUMENT_NOT_FOUND)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="GETselfControl" id="2f0f93f7-f4b2-4de1-81f1-c8746e496a2e"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/selfControl/selfControl/{documentId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GETselfControl" id="204227fb-86da-416c-9e8e-caa3972601df" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestSuite#X-Acces-JWT}"/>&#13;
  &lt;con:entry key="EI-Token" value="${#TestSuite#access_token_Sudir}"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/selfControl/selfControl/7ce48801-c1d3-46ed-b967-2d4a29dc8602</con:originalUri><con:assertion type="JsonPath Match" id="43e40166-293b-4b0f-b4c1-6128489288cc" name="code = DOCUMENT_NOT_FOUND"><con:configuration><path>$error.code</path><content>DOCUMENT_NOT_FOUND</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="2e63f3c4-2d10-4276-b6da-99400c19dca2" name="description = Документ с id 7ce48801-c1d3-46ed-b967-2d4a29dc860 не найден"><con:configuration><path>$error.description</path><content>Документ с id 7ce48801-c1d3-46ed-b967-2d4a29dc860 не найден</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4e3c81cb-e858-4a51-a3f3-4cb5eee98709" name="type = BUSINESS"><con:configuration><path>$error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="documentId" value="7ce48801-c1d3-46ed-b967-2d4a29dc860"/>
  <con:entry key="ehrId" value="8d075820-b3cb-4fbe-9666-3106776652d2"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>documentId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="96bf1645-fe6f-4794-85b6-a6027ef7153a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="АС6. Пациент с невалидным permissionType (LK_SERVER_ERROR)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="GETselfControl" id="d35b9d42-ffd7-43f5-876b-85ddf3867da6"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/selfControl/selfControl/{documentId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GETselfControl" id="204227fb-86da-416c-9e8e-caa3972601df" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestSuite#X-Acces-JWT}"/>&#13;
  &lt;con:entry key="EI-Token" value="${#TestSuite#access_token_Sudir}"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/selfControl/selfControl/7ce48801-c1d3-46ed-b967-2d4a29dc8602</con:originalUri><con:assertion type="JsonPath Match" id="43e40166-293b-4b0f-b4c1-6128489288cc" name="code = LK_SERVER_ERROR"><con:configuration><path>$error.code</path><content>LK_SERVER_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="2e63f3c4-2d10-4276-b6da-99400c19dca2" name="description = Ошибка вызова сервиса ЛК"><con:configuration><path>$error.description</path><content>Ошибка вызова сервиса ЛК</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4e3c81cb-e858-4a51-a3f3-4cb5eee98709" name="type = TECHNICAL"><con:configuration><path>$error.type</path><content>TECHNICAL</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="documentId" value="7ce48801-c1d3-46ed-b967-2d4a29dc8602"/>
  <con:entry key="ehrId" value="bd7b0124-98bf-46bc-80a3-1c5ab8ac18f7"/>
</con:parameters><con:parameterOrder><con:entry>ehrId</con:entry><con:entry>documentId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>X-Acces-JWT</con:name><con:value>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjE2NzU0MDgwMDYsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiJiYjVlYjg1OC1lZjc2LTQyOTUtOTg1OS1jOWQ2YTI1MWIzNTAiLCJzaWQiOiIwNDA4YzJmZi1jNzI5LTRhNWItYTczZC1hMDcwM2NmYTMxYzEiLCJwaG9uZSI6Ijc5MTU5Njc5MjMwIiwic3NvX2lkIjoieGk4bWNRNWRacGtjOXJhWHMvVVp6SzdNTzZ4M0k4bWFHaW0rb25zOXA1UUR0TFlYa1hNLzFybVVQdTBoQXhncjlGbll0MXkwbFVNU3lRK1BGRWd4MXd1SDRrN2hSN3JvcGdmYUNsdGZVVjVGSWczeGdnOWtNc25pUlBWZ05XSXA4eEQ4aU94NEFVQytCTndTOHVPTTBTWWlGYzk1UHh2cXZXdVk1eHFmSzhOdDg2RDVScFAyZEI2VmErd0NpVEF4UVVGcUlacThROFNraVY5d3ZXc0lRYTVnNFNLbEcxTjdVbjkxOVJETGRmZ2gva0RveXlndFB1dWdSRFB6Qm8weXQyWFBnNlNkOW5xZWpTNTFGL2VwOXRFME5pSUtyMGloMmlaK2NaQWh3T0RXOGNYTkgvYjlqYm9ieFRMKzVwUFA4djhIZVZwdldnaHRMNkRQTy9leU1nPT0iLCJlbWFpbCI6Inlhci5wcm9tby56YXBvdi5hQGdtYWlsLmNvbSIsImZpcnN0X25hbWUiOiJcdTA0MjFcdTA0MzVcdTA0NDBcdTA0MzNcdTA0MzVcdTA0MzkiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxMi4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxMlx1MDQ0Zlx1MDQ0N1x1MDQzNVx1MDQ0MVx1MDQzYlx1MDQzMFx1MDQzMlx1MDQzZVx1MDQzMlx1MDQzOFx1MDQ0NyIsImJpcnRoX2RhdGUiOiIxOTc4LTAzLTIyIn0.H5W7i8wTpdPRikY9DyTSNRzoGOXotRx2r7dY3WefyoCS1aeDPdHwV1GzCXzbG59vzAU0X0tsSt08QSiiN6idrbFgGTlZP7E0UJXCUCQpSSAo_leuKoxLCNVlch1mtfK-LU92Nl68Sa9RQ2nuXFsrXFLjxnELTUxp-HFXNhtgIKczqAWP7XmGY40zsoPfxQH4q7yCRqXzGW8I_pwgQzNlY60paquIxt03Efj9yiGznsKhon89w-gSjm3LX-q4q0RfUqXraKVa3CIhHupq9LEyny5xID0QN6Cstt83mF6j2ASOKKIO3sXvthX4uRr0V6oIhtko5Fce5AIDLNtxNuCmnKmwHsZLHoYRBiucTlhf7f6iRlunShM8c910E5adolnMvO3lJ-b-NN8lG3DXq3eDvyeNxhtawnQNfrkYxmEYHH5pw3lOCa34Y0wrt-VRhiz_bQ-fhLSrBLRbMszZZPrh3Ik6y76ggZQN7rSpOdoTmF2SUiPhTcRCZWx7LNnRpE3YNnHD4ETt-4l1s_jw8OAm3ii9LjRs18tGrX5JsTIEyno4NetFGfdwEYRo4qW3CUcQyltjlfEhRlIxlsBLxPYCqrObLgDHDnUv2iIQXGGwQNKoxv33XSrX6dZEGLhvsuu7ZmeDUSq0pb1_fG-BDVu1JyKMVsIbvAkVhuXrr8hAGDA</con:value></con:property><con:property><con:name>access_token_Sudir</con:name><con:value>YS8ksb6WTt2kAZ6u05zvXvbEf8fFzf-Ljvyr-K2uGMg0ZWU1OWMzMi02NmYxLTRlYTUtODA3My1iNThkZmU5MDM4ZDY</con:value></con:property></con:properties></con:testSuite><con:properties><con:property><con:name>emiasInfoEndpoint</con:name><con:value>http://emiasinfo1.emias.solit-clouds.ru</con:value></con:property><con:property><con:name>emiasInfoDbConnection</con:name><con:value>172.17.5.11:29100/emiasinfo</con:value></con:property><con:property><con:name>emiasInfoDbLogin</con:name><con:value>emiasinfo</con:value></con:property><con:property><con:name>emiasInfoDbPassword</con:name><con:value>emiasInfo</con:value></con:property><con:property><con:name>emiasInfoFullDbConnection</con:name><con:value>jdbc:postgresql://172.17.5.11:29100/emiasinfo?user=emiasinfo&amp;password=emiasinfo</con:value></con:property><con:property><con:name>emiasInfoDBDriver</con:name><con:value>org.postgresql.Driver</con:value></con:property><con:property><con:name>lkEndpoint</con:name><con:value>https://lkservice.test.emias.mos.ru</con:value></con:property><con:property><con:name>loginEndpoint</con:name><con:value>https://login-tech.mos.ru</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>