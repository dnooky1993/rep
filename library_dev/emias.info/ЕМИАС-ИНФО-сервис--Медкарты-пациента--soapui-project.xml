<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="83ad1046-a411-4d17-a5b0-6f802f89d43d" activeEnvironment="Default" name="ЕМИАС.ИНФО сервис &quot;Медкарты пациента&quot;" resourceRoot="" soapui-version="5.6.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="da4fdb55-0c1d-44f5-8011-1601788ce947" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://login-tech.mos.ru" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://login-tech.mos.ru</con:endpoint></con:endpoints><con:resource name="Me" path="/sps/oauth/me" id="dd4f5f79-feda-4134-89f0-89951d325d91"><con:settings/><con:parameters/><con:method name="Me 1" id="16a13e19-e477-496b-bb03-3af67ec4b985" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:me="https://login-tech.mos.ru/sps/oauth/me">me:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="5cd708ac-523b-4a28-93c9-83f0e20fab4a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Authorization" value="Bearer ${#TestCase#EI-token}"/>&#13;
  &lt;con:entry key="Cache-Control" value="no-cache"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>https://login-tech.mos.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="c7a9f4c3-a249-40b4-a0db-aa9f46cbf404" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://emiasinfo1.emias.solit-clouds.ru" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint></con:endpoints><con:resource name="AdditionalSections" path="/api/v2/medicalCard/additionalSections" id="05bf4a5e-44d7-40fa-af10-9a7c9b1695c4"><con:settings/><con:parameters><con:parameter><con:name>ehrId</con:name><con:value>2b55f6be-6ecb-43ec-8237-3224a0a628d3</con:value><con:style>QUERY</con:style><con:default>2b55f6be-6ecb-43ec-8237-3224a0a628d3</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="AdditionalSections 1" id="1d867ff2-5f30-4b23-893c-03baf9952680" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400 403 401</con:status><con:params/><con:element xmlns:add="http://emiasinfo1.emias.solit-clouds.ru/api/v2/medicalCard/additionalSections">add:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:add="http://emiasinfo1.emias.solit-clouds.ru/api/v2/medicalCard/additionalSections">add:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="900b94b1-c192-4326-a9ec-e081775d05a3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="EI-token" value="${#TestCase#EI-token}"/>&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://emiasinfo1.emias.solit-clouds.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="0d93e0d3-e091-40c2-8ff9-c22b7090b068" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://lkservice.test.emias.mos.ru" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://lkservice.test.emias.mos.ru</con:endpoint></con:endpoints><con:resource name="Recruiting-committee" path="/api/1/documents/recruiting-committee" id="b36282df-43b4-401e-8055-cdee5c3611a8"><con:settings/><con:parameters><con:parameter><con:name>ehrId</con:name><con:value>${</con:value><con:style>QUERY</con:style><con:default>${</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Recruiting-committee 1" id="1e00929a-97c6-4441-b903-9d44b671081f" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:rec="https://lkservice.test.emias.mos.ru/api/1/documents/recruiting-committee">rec:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:rec="https://lkservice.test.emias.mos.ru/api/1/documents/recruiting-committee">rec:Fault</con:element></con:representation><con:request name="Request 1" id="add58ced-19d2-4ed7-a5c5-402449368f74" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://lkservice.test.emias.mos.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="emc-permissions" path="/api/internal/3/emc-permissions" id="fab297cc-98c1-4d7e-9afc-ec0c5b49d582"><con:settings/><con:parameters><con:parameter><con:name>ssoId</con:name><con:value>83294bda-5f39-44c3-a5e6-bb0d348a794b</con:value><con:style>QUERY</con:style><con:default>83294bda-5f39-44c3-a5e6-bb0d348a794b</con:default></con:parameter></con:parameters><con:method name="Method 1" id="56c3c128-002f-4493-9ce1-4d9d0a809383" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="161d225e-aad6-4339-b144-a7a1cd0d909a" mediaType="application/json"><con:settings/><con:endpoint>https://lkservice.test.emias.mos.ru</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ssoId" value="${#TestCase#ssoId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource></con:interface><con:testSuite id="cce0d395-d181-4cd4-aa9d-e44bc04f0bbb" name="getAdditionalSections"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="29ec6f39-d1d5-49f9-824c-722d4c049c63" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Проверка маппинга при наличие разделов" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Получить токены" id="409b4c75-7939-44e2-8fc0-8e90bc7f7443"><con:description>Получить EI-token для пациента yar.promo.zapov.a@gmail.com и вставить его в проперти EI-token тестсьюта</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name="getRecruitingCommittee" id="b557d990-821c-49cd-9e99-ba3d9264504d"><con:settings/><con:config service="https://lkservice.test.emias.mos.ru" resourcePath="/api/1/documents/recruiting-committee" methodName="Recruiting-committee 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getRecruitingCommittee" id="add58ced-19d2-4ed7-a5c5-402449368f74" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#lkEndpoint}</con:endpoint><con:request/><con:originalUri>https://lkservice.test.emias.mos.ru/api/1/documents/recruiting-committee</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4749c99e-d1f8-4d78-97f7-e9d60bdcefa5" name="HTTP Status Code 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="a6e5bb07-2257-4450-8d62-9eb07d2a55c2" name="В ответе есть массив documents"><con:configuration><path>$.documents</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="47d174a1-3839-4483-af55-79b5b56df0b4" name="В ответе нет ошибок"><con:configuration><path>$.error</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getAdditionalSections" id="6be2e49e-af09-4571-ba6b-08d904d61727"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/medicalCard/additionalSections" methodName="AdditionalSections 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAdditionalSections" id="900b94b1-c192-4326-a9ec-e081775d05a3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="EI-token" value="${#TestSuite#EI-token}"/>&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/medicalCard/additionalSections</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dfc717be-18a5-4712-b724-d4b313c468d4" name="HTTP Status Code 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="a49cc99a-daf1-4b8c-af8a-8e84c258411c" name="В ответе есть result"><con:configuration><path>$.payload.result</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="e64e97e6-e82f-417f-9bb2-ca623897b653" name="В ответе нет ошибок"><con:configuration><path>$.error</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить маппинг ответов" id="7c2b71a8-3ec6-4a06-a5d9-2441c1a02410"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def restResponse = context.expand( '${getRecruitingCommittee#Response}' ).toString()
def recruitingCommittee =  new JsonSlurper().parseText(restResponse)
restResponse = context.expand( '${getAdditionalSections#Response}' ).toString()
def additionalSections =  new JsonSlurper().parseText(restResponse).payload.result


assert recruitingCommittee.documents.size() > 0

for (result in additionalSections) //судя по постановке, метод в будущем может возвращать несколько разных разделов
{
	assert result.code == "conscriptionCommission"
	assert result.title == "Документы призывной комиссии"
}
</script></con:config></con:testStep><con:properties><con:property><con:name>X-Access-JWT</con:name><con:value>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjQ3NTkwMjY4NDIsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiJiYjVlYjg1OC1lZjc2LTQyOTUtOTg1OS1jOWQ2YTI1MWIzNTAiLCJzaWQiOiJmMzI3NTUyNy1jZTkyLTQ4MGMtODljYy1kMjQ4M2RmMWM4MjEiLCJwaG9uZSI6Ijc5MTU5Njc5MjMwIiwic3NvX2lkIjoiSFlrbGU2WFc3aWZybFQ3d0N1dUswaVo5Um9lUFhtMk5HOTJiVGFMb3dmTUE4UC95dzg1TWkvV3JWSG84OVdEaFdGZ1J0NjZFVTNNQnRRM1NFaGhrcndPT0xqTkZpamNSZVZGMnhlZ1I0RSt3eGdCUzJKUnQzQ1NQNG1RZnc0WUVFSkNQcHJVVUMyS1BCVytja2tIeXQ5d09hUnE0VFFqWjIvd1R0ZEhERXlSczJzWUlNMVdVWlBnYzM5dlJScGZLR012NGtlYWMvZWlycTlQbFRmUFFhdVFkeG5HSjlaRHpRYkFzVU1VTFZiRlcwbTc4S0tSNUp6QUZwbDdZRkV4MW85ZVVUNzBYZEJaRGhmZFZsbGpBK1QreVJJT3BXMlNPWk9FcFZoWUFaOHFUVk90S2NKazA2MGJEbmRZZFVkMWdRMHg2Y2tUMStDZ094UUViZWZpL1l3PT0iLCJlbWFpbCI6Inlhci5wcm9tby56YXBvdi5hQGdtYWlsLmNvbSIsImZpcnN0X25hbWUiOiJcdTA0MjFcdTA0MzVcdTA0NDBcdTA0MzNcdTA0MzVcdTA0MzkiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxMi4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxMlx1MDQ0Zlx1MDQ0N1x1MDQzNVx1MDQ0MVx1MDQzYlx1MDQzMFx1MDQzMlx1MDQzZVx1MDQzMlx1MDQzOFx1MDQ0NyIsImJpcnRoX2RhdGUiOiIxOTc4LTAzLTIxIn0.dErz7ETQCxAJUOECLgysHVZZPZDQDJvvTQOi8_glDkqiWNaU1QTPKao0eueTw5_ydAE1KuGcGmI1yqeUhYDfp9ZMj97xKv4SYyE3lhdpgaiSALyoiuYcdxUEYj7cJiwZ0Bzjce8GOF__wI76cYKn-mVbZkuxPzRtn1SIvStR-zkiok3kW_Qg6HJFTP7mF1T_Z4p7OILvPYtErbJJHWJ-pVOLMjQYfk2RCjWJesIEuWs2sLr953xhQeodp-bBIYZCjCvxUSEgsHXNMkCvoRkujm9kpJFVHMgKYuwqmiHbZ6B7_3DuOiRsRRWrPJwn2dXZUwhlhzsutwCfIBE13SbfJqO9w14ud_GWrPsofO8T4j7UiGwTvzxXVycJZMMU6XElz35aQRGRVNV53NUQWCc2DqBlmsWHjW8Lg__A5NEjkgDPiRYKWp_Gdz9_I4YQY3x0ZFPIToUNFx2Lt8ei5zcLGL5hzvSdelUzmz0QirECbejcDJdXS8HxEe-XsCDLSh51hwweEpJILfdG4AlWhHFh9_NuKI-zoFx_48wB4d0-miMaxtiscQR1_0IwQFO0kujoMyIn432fPU2waJOjj41_SgX3AQsMPn3FQk4gV8MrHU9vfAoROXrBSbMS7ty5rwWczYdaijFYrNpsUprBRtL7EFSWgRnvFOU7ekNoy_AzpfA</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>4d1561a3-7345-4de6-ba68-6c73f043ddec</con:value></con:property></con:properties></con:testCase><con:testCase id="898db2be-c214-420e-8280-91d5b0e401b4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Проверка маппинга при отсутствии разделов" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Получить токены" id="937a4c87-71f6-42ae-8252-9c2e9f00e75d"><con:description>Получить EI-token для пациента yar.promo.zapov.a@gmail.com и вставить его в проперти EI-token тестсьюта</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name="getRecruitingCommittee" id="bd06a80e-c153-466c-904f-1b909e2cde85"><con:settings/><con:config service="https://lkservice.test.emias.mos.ru" resourcePath="/api/1/documents/recruiting-committee" methodName="Recruiting-committee 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getRecruitingCommittee" id="add58ced-19d2-4ed7-a5c5-402449368f74" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#lkEndpoint}</con:endpoint><con:request/><con:originalUri>https://lkservice.test.emias.mos.ru/api/1/documents/recruiting-committee</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4749c99e-d1f8-4d78-97f7-e9d60bdcefa5" name="HTTP Status Code 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="a6e5bb07-2257-4450-8d62-9eb07d2a55c2" name="В ответе есть массив documents"><con:configuration><path>$.documents</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="47d174a1-3839-4483-af55-79b5b56df0b4" name="В ответе нет ошибок"><con:configuration><path>$.error</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getAdditionalSections" id="fc899053-33cf-4870-b097-f74bfd20f786"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/medicalCard/additionalSections" methodName="AdditionalSections 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAdditionalSections" id="900b94b1-c192-4326-a9ec-e081775d05a3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="EI-token" value="${#TestSuite#EI-token}"/>&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/medicalCard/additionalSections</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dfc717be-18a5-4712-b724-d4b313c468d4" name="HTTP Status Code 204"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Проверить отсутствие документов в запросе к ЛК" id="1ed5afc1-8733-4fc4-bde1-fb0bb013ec69"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def restResponse = context.expand( '${getRecruitingCommittee#Response}' ).toString()
def recruitingCommittee =  new JsonSlurper().parseText(restResponse)


assert recruitingCommittee.documents.size() == 0
</script></con:config></con:testStep><con:properties><con:property><con:name>X-Access-JWT</con:name><con:value>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjQ3NTkwMjY4NDIsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiJiYjVlYjg1OC1lZjc2LTQyOTUtOTg1OS1jOWQ2YTI1MWIzNTAiLCJzaWQiOiJmMzI3NTUyNy1jZTkyLTQ4MGMtODljYy1kMjQ4M2RmMWM4MjEiLCJwaG9uZSI6Ijc5MTU5Njc5MjMwIiwic3NvX2lkIjoiSFlrbGU2WFc3aWZybFQ3d0N1dUswaVo5Um9lUFhtMk5HOTJiVGFMb3dmTUE4UC95dzg1TWkvV3JWSG84OVdEaFdGZ1J0NjZFVTNNQnRRM1NFaGhrcndPT0xqTkZpamNSZVZGMnhlZ1I0RSt3eGdCUzJKUnQzQ1NQNG1RZnc0WUVFSkNQcHJVVUMyS1BCVytja2tIeXQ5d09hUnE0VFFqWjIvd1R0ZEhERXlSczJzWUlNMVdVWlBnYzM5dlJScGZLR012NGtlYWMvZWlycTlQbFRmUFFhdVFkeG5HSjlaRHpRYkFzVU1VTFZiRlcwbTc4S0tSNUp6QUZwbDdZRkV4MW85ZVVUNzBYZEJaRGhmZFZsbGpBK1QreVJJT3BXMlNPWk9FcFZoWUFaOHFUVk90S2NKazA2MGJEbmRZZFVkMWdRMHg2Y2tUMStDZ094UUViZWZpL1l3PT0iLCJlbWFpbCI6Inlhci5wcm9tby56YXBvdi5hQGdtYWlsLmNvbSIsImZpcnN0X25hbWUiOiJcdTA0MjFcdTA0MzVcdTA0NDBcdTA0MzNcdTA0MzVcdTA0MzkiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxMi4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxMlx1MDQ0Zlx1MDQ0N1x1MDQzNVx1MDQ0MVx1MDQzYlx1MDQzMFx1MDQzMlx1MDQzZVx1MDQzMlx1MDQzOFx1MDQ0NyIsImJpcnRoX2RhdGUiOiIxOTc4LTAzLTIxIn0.dErz7ETQCxAJUOECLgysHVZZPZDQDJvvTQOi8_glDkqiWNaU1QTPKao0eueTw5_ydAE1KuGcGmI1yqeUhYDfp9ZMj97xKv4SYyE3lhdpgaiSALyoiuYcdxUEYj7cJiwZ0Bzjce8GOF__wI76cYKn-mVbZkuxPzRtn1SIvStR-zkiok3kW_Qg6HJFTP7mF1T_Z4p7OILvPYtErbJJHWJ-pVOLMjQYfk2RCjWJesIEuWs2sLr953xhQeodp-bBIYZCjCvxUSEgsHXNMkCvoRkujm9kpJFVHMgKYuwqmiHbZ6B7_3DuOiRsRRWrPJwn2dXZUwhlhzsutwCfIBE13SbfJqO9w14ud_GWrPsofO8T4j7UiGwTvzxXVycJZMMU6XElz35aQRGRVNV53NUQWCc2DqBlmsWHjW8Lg__A5NEjkgDPiRYKWp_Gdz9_I4YQY3x0ZFPIToUNFx2Lt8ei5zcLGL5hzvSdelUzmz0QirECbejcDJdXS8HxEe-XsCDLSh51hwweEpJILfdG4AlWhHFh9_NuKI-zoFx_48wB4d0-miMaxtiscQR1_0IwQFO0kujoMyIn432fPU2waJOjj41_SgX3AQsMPn3FQk4gV8MrHU9vfAoROXrBSbMS7ty5rwWczYdaijFYrNpsUprBRtL7EFSWgRnvFOU7ekNoy_AzpfA</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>013cb48a-73e1-408c-8c78-6f4370e7576f</con:value></con:property></con:properties></con:testCase><con:testCase id="be0b0072-70a6-4a13-9d57-063a28a6584d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ошибка доступа в СУДИР АС1 (SUDIR_AUTHENTICATION_ERROR)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getMe" id="7ca509ad-2936-4d21-b732-a3f4065686d9"><con:settings/><con:config service="https://login-tech.mos.ru" resourcePath="/sps/oauth/me" methodName="Me 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getMe" id="5cd708ac-523b-4a28-93c9-83f0e20fab4a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Authorization" value="Bearer broken_${#TestSuite#EI-token}"/>&#13;
  &lt;con:entry key="Cache-Control" value="no-cache"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#sudirEndpoint}</con:endpoint><con:request/><con:originalUri>https://login-tech.mos.ru/sps/oauth/me</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5ec596ac-f933-49f5-9e8c-3ab4787948a6" name="HTTP Status Code 401"><con:configuration><codes>401</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getAdditionalSections" id="097916ac-2fda-487d-96a1-5357f733a839"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/medicalCard/additionalSections" methodName="AdditionalSections 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAdditionalSections" id="900b94b1-c192-4326-a9ec-e081775d05a3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="EI-token" value="broken_${#TestCase#EI-token}"/>&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/medicalCard/additionalSections</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dfc717be-18a5-4712-b724-d4b313c468d4" name="HTTP Status Code 400"><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="99d0a6da-42c0-4ee6-9967-a3963f868964" name="Code ошибки SUDIR_AUTHENTICATION_ERROR"><con:configuration><path>$.error.code</path><content>SUDIR_AUTHENTICATION_ERROR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="99d0a6da-42c0-4ee6-9967-a3963f868964" name="Description ошибки При попытке авторизироваться в СУДИР"><con:configuration><path>$.error.description</path><content>При попытке авторизоваться в СУДИР</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="99d0a6da-42c0-4ee6-9967-a3963f868964" name="Type ошибки BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>X-Access-JWT</con:name><con:value>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjQ3NTkwMjY4NDIsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiJiYjVlYjg1OC1lZjc2LTQyOTUtOTg1OS1jOWQ2YTI1MWIzNTAiLCJzaWQiOiJmMzI3NTUyNy1jZTkyLTQ4MGMtODljYy1kMjQ4M2RmMWM4MjEiLCJwaG9uZSI6Ijc5MTU5Njc5MjMwIiwic3NvX2lkIjoiSFlrbGU2WFc3aWZybFQ3d0N1dUswaVo5Um9lUFhtMk5HOTJiVGFMb3dmTUE4UC95dzg1TWkvV3JWSG84OVdEaFdGZ1J0NjZFVTNNQnRRM1NFaGhrcndPT0xqTkZpamNSZVZGMnhlZ1I0RSt3eGdCUzJKUnQzQ1NQNG1RZnc0WUVFSkNQcHJVVUMyS1BCVytja2tIeXQ5d09hUnE0VFFqWjIvd1R0ZEhERXlSczJzWUlNMVdVWlBnYzM5dlJScGZLR012NGtlYWMvZWlycTlQbFRmUFFhdVFkeG5HSjlaRHpRYkFzVU1VTFZiRlcwbTc4S0tSNUp6QUZwbDdZRkV4MW85ZVVUNzBYZEJaRGhmZFZsbGpBK1QreVJJT3BXMlNPWk9FcFZoWUFaOHFUVk90S2NKazA2MGJEbmRZZFVkMWdRMHg2Y2tUMStDZ094UUViZWZpL1l3PT0iLCJlbWFpbCI6Inlhci5wcm9tby56YXBvdi5hQGdtYWlsLmNvbSIsImZpcnN0X25hbWUiOiJcdTA0MjFcdTA0MzVcdTA0NDBcdTA0MzNcdTA0MzVcdTA0MzkiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxMi4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxMlx1MDQ0Zlx1MDQ0N1x1MDQzNVx1MDQ0MVx1MDQzYlx1MDQzMFx1MDQzMlx1MDQzZVx1MDQzMlx1MDQzOFx1MDQ0NyIsImJpcnRoX2RhdGUiOiIxOTc4LTAzLTIxIn0.dErz7ETQCxAJUOECLgysHVZZPZDQDJvvTQOi8_glDkqiWNaU1QTPKao0eueTw5_ydAE1KuGcGmI1yqeUhYDfp9ZMj97xKv4SYyE3lhdpgaiSALyoiuYcdxUEYj7cJiwZ0Bzjce8GOF__wI76cYKn-mVbZkuxPzRtn1SIvStR-zkiok3kW_Qg6HJFTP7mF1T_Z4p7OILvPYtErbJJHWJ-pVOLMjQYfk2RCjWJesIEuWs2sLr953xhQeodp-bBIYZCjCvxUSEgsHXNMkCvoRkujm9kpJFVHMgKYuwqmiHbZ6B7_3DuOiRsRRWrPJwn2dXZUwhlhzsutwCfIBE13SbfJqO9w14ud_GWrPsofO8T4j7UiGwTvzxXVycJZMMU6XElz35aQRGRVNV53NUQWCc2DqBlmsWHjW8Lg__A5NEjkgDPiRYKWp_Gdz9_I4YQY3x0ZFPIToUNFx2Lt8ei5zcLGL5hzvSdelUzmz0QirECbejcDJdXS8HxEe-XsCDLSh51hwweEpJILfdG4AlWhHFh9_NuKI-zoFx_48wB4d0-miMaxtiscQR1_0IwQFO0kujoMyIn432fPU2waJOjj41_SgX3AQsMPn3FQk4gV8MrHU9vfAoROXrBSbMS7ty5rwWczYdaijFYrNpsUprBRtL7EFSWgRnvFOU7ekNoy_AzpfA</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>4d1561a3-7345-4de6-ba68-6c73f043ddec</con:value></con:property><con:property><con:name>El-token</con:name><con:value>broken_pdbxt3LrY1JpsqUOYsKfPNIZKhUeiPHUIwGRkkXZkPxlMTA5ZjA0YS02MWYzLTRlY2YtOTViYy01ZDYyOGQ4YzcyOTI</con:value></con:property></con:properties></con:testCase><con:testCase id="fd1654dc-4016-4aa8-9f23-1b0e708dc695" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ошибка получения документов призывной комиссии АС3" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Получить токены" id="ab25b6f9-81c7-4dd0-aca2-6423f2980a8f"><con:description>Получить EI-token для пациента yar.promo.zapov.a@gmail.com и вставить его в проперти EI-token тестсьюта</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name="getRecruitingCommittee" id="4ebc3531-1f25-48c4-99ad-be8f17afd8e9"><con:settings/><con:config service="https://lkservice.test.emias.mos.ru" resourcePath="/api/1/documents/recruiting-committee" methodName="Recruiting-committee 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getRecruitingCommittee" id="add58ced-19d2-4ed7-a5c5-402449368f74" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#lkEndpoint}</con:endpoint><con:request/><con:originalUri>https://lkservice.test.emias.mos.ru/api/1/documents/recruiting-committee</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4749c99e-d1f8-4d78-97f7-e9d60bdcefa5" name="HTTP Status Code 401"><con:configuration><codes>401</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="7424dd97-77b7-411d-a0d6-0dc2bd36b356" name="Message = Ошибка авторизации"><con:configuration><path>$.message</path><content>Ошибка авторизации</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="7424dd97-77b7-411d-a0d6-0dc2bd36b356" name="Code = Unauthorised"><con:configuration><path>$.code</path><content>Unauthorized</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getAdditionalSections" id="f549a1c4-741b-46ba-85ab-658f4bc7a356"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/medicalCard/additionalSections" methodName="AdditionalSections 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAdditionalSections" id="900b94b1-c192-4326-a9ec-e081775d05a3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="EI-token" value="${#TestSuite#EI-token}"/>&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/medicalCard/additionalSections</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dfc717be-18a5-4712-b724-d4b313c468d4" name="HTTP Status Code 204"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>X-Access-JWT</con:name><con:value>broken_eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjQ3NTkwMjY4NDIsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiJiYjVlYjg1OC1lZjc2LTQyOTUtOTg1OS1jOWQ2YTI1MWIzNTAiLCJzaWQiOiJmMzI3NTUyNy1jZTkyLTQ4MGMtODljYy1kMjQ4M2RmMWM4MjEiLCJwaG9uZSI6Ijc5MTU5Njc5MjMwIiwic3NvX2lkIjoiSFlrbGU2WFc3aWZybFQ3d0N1dUswaVo5Um9lUFhtMk5HOTJiVGFMb3dmTUE4UC95dzg1TWkvV3JWSG84OVdEaFdGZ1J0NjZFVTNNQnRRM1NFaGhrcndPT0xqTkZpamNSZVZGMnhlZ1I0RSt3eGdCUzJKUnQzQ1NQNG1RZnc0WUVFSkNQcHJVVUMyS1BCVytja2tIeXQ5d09hUnE0VFFqWjIvd1R0ZEhERXlSczJzWUlNMVdVWlBnYzM5dlJScGZLR012NGtlYWMvZWlycTlQbFRmUFFhdVFkeG5HSjlaRHpRYkFzVU1VTFZiRlcwbTc4S0tSNUp6QUZwbDdZRkV4MW85ZVVUNzBYZEJaRGhmZFZsbGpBK1QreVJJT3BXMlNPWk9FcFZoWUFaOHFUVk90S2NKazA2MGJEbmRZZFVkMWdRMHg2Y2tUMStDZ094UUViZWZpL1l3PT0iLCJlbWFpbCI6Inlhci5wcm9tby56YXBvdi5hQGdtYWlsLmNvbSIsImZpcnN0X25hbWUiOiJcdTA0MjFcdTA0MzVcdTA0NDBcdTA0MzNcdTA0MzVcdTA0MzkiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxMi4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxMlx1MDQ0Zlx1MDQ0N1x1MDQzNVx1MDQ0MVx1MDQzYlx1MDQzMFx1MDQzMlx1MDQzZVx1MDQzMlx1MDQzOFx1MDQ0NyIsImJpcnRoX2RhdGUiOiIxOTc4LTAzLTIxIn0.dErz7ETQCxAJUOECLgysHVZZPZDQDJvvTQOi8_glDkqiWNaU1QTPKao0eueTw5_ydAE1KuGcGmI1yqeUhYDfp9ZMj97xKv4SYyE3lhdpgaiSALyoiuYcdxUEYj7cJiwZ0Bzjce8GOF__wI76cYKn-mVbZkuxPzRtn1SIvStR-zkiok3kW_Qg6HJFTP7mF1T_Z4p7OILvPYtErbJJHWJ-pVOLMjQYfk2RCjWJesIEuWs2sLr953xhQeodp-bBIYZCjCvxUSEgsHXNMkCvoRkujm9kpJFVHMgKYuwqmiHbZ6B7_3DuOiRsRRWrPJwn2dXZUwhlhzsutwCfIBE13SbfJqO9w14ud_GWrPsofO8T4j7UiGwTvzxXVycJZMMU6XElz35aQRGRVNV53NUQWCc2DqBlmsWHjW8Lg__A5NEjkgDPiRYKWp_Gdz9_I4YQY3x0ZFPIToUNFx2Lt8ei5zcLGL5hzvSdelUzmz0QirECbejcDJdXS8HxEe-XsCDLSh51hwweEpJILfdG4AlWhHFh9_NuKI-zoFx_48wB4d0-miMaxtiscQR1_0IwQFO0kujoMyIn432fPU2waJOjj41_SgX3AQsMPn3FQk4gV8MrHU9vfAoROXrBSbMS7ty5rwWczYdaijFYrNpsUprBRtL7EFSWgRnvFOU7ekNoy_AzpfA</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>4d1561a3-7345-4de6-ba68-6c73f043ddec</con:value></con:property></con:properties></con:testCase><con:testCase id="3dfdca6f-4187-4ffe-8db4-18c708896ed9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Токен протух АС4 (LK_AUTH_TOKEN_EXPIRED)" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Получить токены" id="dd3a9faa-130e-49e5-a5b2-7793fe8c6991"><con:description>Получить EI-token для пациента yar.promo.zapov.a@gmail.com и вставить его в проперти EI-token тестсьюта</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name="getRecruitingCommittee" id="fc362723-bcf9-40cf-8265-8bcd72194929"><con:settings/><con:config service="https://lkservice.test.emias.mos.ru" resourcePath="/api/1/documents/recruiting-committee" methodName="Recruiting-committee 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getRecruitingCommittee" id="add58ced-19d2-4ed7-a5c5-402449368f74" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#lkEndpoint}</con:endpoint><con:request/><con:originalUri>https://lkservice.test.emias.mos.ru/api/1/documents/recruiting-committee</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4749c99e-d1f8-4d78-97f7-e9d60bdcefa5" name="HTTP Status Code 401"><con:configuration><codes>401</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="7424dd97-77b7-411d-a0d6-0dc2bd36b356" name="Message = Токен устарел"><con:configuration><path>$.message</path><content>Токен устарел</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="7424dd97-77b7-411d-a0d6-0dc2bd36b356" name="Code = AuthTokenExpired"><con:configuration><path>$.code</path><content>AuthTokenExpired</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getAdditionalSections" id="65495a72-77bf-44d0-a89e-fa870e59964a"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/medicalCard/additionalSections" methodName="AdditionalSections 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAdditionalSections" id="900b94b1-c192-4326-a9ec-e081775d05a3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="EI-token" value="${#TestSuite#EI-token}"/>&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/medicalCard/additionalSections</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dfc717be-18a5-4712-b724-d4b313c468d4" name="HTTP Status Code 401"><con:configuration><codes>401</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4e6e0475-dade-4e09-87f1-3be71a561c61" name="Code ошибки - LK_AUTH_TOKEN_EXPIRED"><con:configuration><path>$.error.code</path><content>LK_AUTH_TOKEN_EXPIRED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4e6e0475-dade-4e09-87f1-3be71a561c61" name="Type ошибки - BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>X-Access-JWT</con:name><con:value>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjE2NjkyMDY4MDAsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiJlOGQyM2Q4NS02Y2QyLTQ0ZDQtYmRkZS04MGQwNDI1ZTI1NDciLCJzaWQiOiI0MGE2NTdmOS03NzBjLTQ4NzAtOTgwNi1kM2I3ZWU2NmU3MTgiLCJwaG9uZSI6Ijc5MTA4MjY0NDA3Iiwic3NvX2lkIjoiSVEyRGdwMXJqYllJSXhWWUNucXFIbUZoNllUVnpRbGNpVU9Cc21BWE9oSWV0Z1ZvY3JKY3NGWHhndDhRaytybENNcVlCTCs2a1g4cm03d0Qzb3N1M0VKbWJ3am1aSGgvbFByNVZrQ2UzZTFSU2xHeWVlT245bGVKUDlOeUpTRlhEMUpYRHg5WEhybDZueDE2MGFnUWg3TnoyQ1BSSmRWeDJ0TDNZNWhXZDlsWEdwazRDdGd3MWdQVkRtZmFMZVZENkllQTZyR1BsUEFYU0JFTXorYmVCWWdPMVhyR3pKVmlPZ0FpNERXTHYxVVFtaCtER09yR1A3WWRnaW9pNFJQbXd6OHVFZUwvbk8xMjgwTkpwOVRiZkQ5K0h0R3pWdDd1T1l4cWcwelBoRUJpRVZodkVyTnhSenpQeXl6b05iakVEMktVQVJ6WWRaQ2oxbUN5Zzh1Rkt3PT0iLCJlbWFpbCI6IiIsImZpcnN0X25hbWUiOiJcdTA0MTRcdTA0MzBcdTA0M2RcdTA0MzhcdTA0MzhcdTA0M2IiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxNC4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxNFx1MDQzY1x1MDQzOFx1MDQ0Mlx1MDQ0MFx1MDQzOFx1MDQzNVx1MDQzMlx1MDQzOFx1MDQ0NyIsImJpcnRoX2RhdGUiOiIyMDA1LTA5LTA4In0.j2Qov5jl-oQTczz9xHpr1II0JuJAcEKxmJGW2igQDJp4aCVZqaZWE63AANCEm0DuNFtkcs8dRE9ROaZkojLBjg6g_e_YkVZFxvUi4anoUXStF3Q0BhoBQZqSHmwrDNLYpK5tKz8VI7yf0OJWQN3wu6c31eLF51HA8TnLpEc6Egm3szH4jpPIjZkh8qe0rWBjJKa30hmsNCPGB_OhOr0mwReGPEfM77gatAZof8CO62f1p05ZNy_1RCecxcCgVZeF2GztiZlb9ka1Ht4imZXeU4lOakEkVMQ71nqah3l52opWPvy3RRF5BySW7gX08LuL_tGMgnkjmYJ5zONIoOZ1DpjQ0q-BJf0Av4u-DTuXgBFCwPChZyZD6F8FgBD6MxNjgfYz9W-DlKSsdLNfHPqIBzv-K2wR_o-vhwEJxRy12Gt709z0U2RErDyWqLXoSVRET5WcSm-RcQXAfqocvzk8kLU0gfxBRZx1OG2Bm5U5wkv3kDeNK7G6c4s3fEx6fV48ZazFZOrq5juHEI8hw2QfMgZMtiT8v8hWKW7J67qHMyfFFwbJHLthweY8PsDBRCwCejaLqiWlpWPDtayFOw3dQ7HaX71sMeNStWqAguKPNVz4K0a5FzQ97rmYEljmKvZX3x2WU9f38UKtJfeB-WD43A2BRvlI0Jyejk_SJeRJhpw</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>4d1561a3-7345-4de6-ba68-6c73f043ddec</con:value></con:property></con:properties></con:testCase><con:testCase id="c024ce76-c120-46a9-b0d5-8f1b0accb4d1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Проверка пользователя не пройдена АС5 (ACCESS_DENIED)" searchProperties="true"><con:settings/><con:testStep type="manualTestStep" name="Получить токен" id="b4a18d20-de7e-42f5-afdd-b04abb71c43a"><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:expectedResult>Получить EI-token для пациента test_000-099-782@pflbmail.hopto.org и вставить его в проперти EI-token тестскейса</con:expectedResult></con:config></con:testStep><con:testStep type="restrequest" name="getMe" id="5c7842f9-b4fa-4be7-934b-8e18acbc679d"><con:settings/><con:config service="https://login-tech.mos.ru" resourcePath="/sps/oauth/me" methodName="Me 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getMe" id="5cd708ac-523b-4a28-93c9-83f0e20fab4a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="Authorization" value="Bearer ${#TestCase#EI-token}"/>&#13;
  &lt;con:entry key="Cache-Control" value="no-cache"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#sudirEndpoint}</con:endpoint><con:request/><con:originalUri>https://login-tech.mos.ru/sps/oauth/me</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5ec596ac-f933-49f5-9e8c-3ab4787948a6" name="HTTP Status Code 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getAdditionalSections" id="512fdf14-0cea-4419-80d5-a69e3934b57b"><con:settings/><con:config service="http://emiasinfo1.emias.solit-clouds.ru" resourcePath="/api/v2/medicalCard/additionalSections" methodName="AdditionalSections 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAdditionalSections" id="900b94b1-c192-4326-a9ec-e081775d05a3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">&#13;
  &lt;con:entry key="EI-token" value="${#TestCase#EI-token}"/>&#13;
  &lt;con:entry key="X-Access-JWT" value="${#TestCase#X-Access-JWT}"/>&#13;
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#emiasInfoEndpoint}</con:endpoint><con:request/><con:originalUri>http://emiasinfo1.emias.solit-clouds.ru/api/v2/medicalCard/additionalSections</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dfc717be-18a5-4712-b724-d4b313c468d4" name="HTTP Status Code 403"><con:configuration><codes>403</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="99d0a6da-42c0-4ee6-9967-a3963f868964" name="Code ошибки ACCESS_DENIED"><con:configuration><path>$.error.code</path><content>ACCESS_DENIED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="99d0a6da-42c0-4ee6-9967-a3963f868964" name="Description ошибки Доступ к запрошенной медкарте отсутствует"><con:configuration><path>$.error.description</path><content>Доступ к запрошенной медкарте отсутствует</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="99d0a6da-42c0-4ee6-9967-a3963f868964" name="Type ошибки BUSINESS"><con:configuration><path>$.error.type</path><content>BUSINESS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ehrId" value="${#TestCase#ehrId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ehrId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>X-Access-JWT</con:name><con:value>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJ1c2VyX2F1dGgiLCJleHAiOjQ3NTkwMjY4NDIsImF1ZCI6IlBBVElFTlQiLCJzdWIiOiJiYjVlYjg1OC1lZjc2LTQyOTUtOTg1OS1jOWQ2YTI1MWIzNTAiLCJzaWQiOiJmMzI3NTUyNy1jZTkyLTQ4MGMtODljYy1kMjQ4M2RmMWM4MjEiLCJwaG9uZSI6Ijc5MTU5Njc5MjMwIiwic3NvX2lkIjoiSFlrbGU2WFc3aWZybFQ3d0N1dUswaVo5Um9lUFhtMk5HOTJiVGFMb3dmTUE4UC95dzg1TWkvV3JWSG84OVdEaFdGZ1J0NjZFVTNNQnRRM1NFaGhrcndPT0xqTkZpamNSZVZGMnhlZ1I0RSt3eGdCUzJKUnQzQ1NQNG1RZnc0WUVFSkNQcHJVVUMyS1BCVytja2tIeXQ5d09hUnE0VFFqWjIvd1R0ZEhERXlSczJzWUlNMVdVWlBnYzM5dlJScGZLR012NGtlYWMvZWlycTlQbFRmUFFhdVFkeG5HSjlaRHpRYkFzVU1VTFZiRlcwbTc4S0tSNUp6QUZwbDdZRkV4MW85ZVVUNzBYZEJaRGhmZFZsbGpBK1QreVJJT3BXMlNPWk9FcFZoWUFaOHFUVk90S2NKazA2MGJEbmRZZFVkMWdRMHg2Y2tUMStDZ094UUViZWZpL1l3PT0iLCJlbWFpbCI6Inlhci5wcm9tby56YXBvdi5hQGdtYWlsLmNvbSIsImZpcnN0X25hbWUiOiJcdTA0MjFcdTA0MzVcdTA0NDBcdTA0MzNcdTA0MzVcdTA0MzkiLCJzZWNvbmRfbmFtZSI6Ilx1MDQxMi4iLCJtaWRkbGVfbmFtZSI6Ilx1MDQxMlx1MDQ0Zlx1MDQ0N1x1MDQzNVx1MDQ0MVx1MDQzYlx1MDQzMFx1MDQzMlx1MDQzZVx1MDQzMlx1MDQzOFx1MDQ0NyIsImJpcnRoX2RhdGUiOiIxOTc4LTAzLTIxIn0.dErz7ETQCxAJUOECLgysHVZZPZDQDJvvTQOi8_glDkqiWNaU1QTPKao0eueTw5_ydAE1KuGcGmI1yqeUhYDfp9ZMj97xKv4SYyE3lhdpgaiSALyoiuYcdxUEYj7cJiwZ0Bzjce8GOF__wI76cYKn-mVbZkuxPzRtn1SIvStR-zkiok3kW_Qg6HJFTP7mF1T_Z4p7OILvPYtErbJJHWJ-pVOLMjQYfk2RCjWJesIEuWs2sLr953xhQeodp-bBIYZCjCvxUSEgsHXNMkCvoRkujm9kpJFVHMgKYuwqmiHbZ6B7_3DuOiRsRRWrPJwn2dXZUwhlhzsutwCfIBE13SbfJqO9w14ud_GWrPsofO8T4j7UiGwTvzxXVycJZMMU6XElz35aQRGRVNV53NUQWCc2DqBlmsWHjW8Lg__A5NEjkgDPiRYKWp_Gdz9_I4YQY3x0ZFPIToUNFx2Lt8ei5zcLGL5hzvSdelUzmz0QirECbejcDJdXS8HxEe-XsCDLSh51hwweEpJILfdG4AlWhHFh9_NuKI-zoFx_48wB4d0-miMaxtiscQR1_0IwQFO0kujoMyIn432fPU2waJOjj41_SgX3AQsMPn3FQk4gV8MrHU9vfAoROXrBSbMS7ty5rwWczYdaijFYrNpsUprBRtL7EFSWgRnvFOU7ekNoy_AzpfA</con:value></con:property><con:property><con:name>ehrId</con:name><con:value>4d1561a3-7345-4de6-ba68-6c73f043ddec</con:value></con:property><con:property><con:name>EI-token</con:name><con:value>pdbxt3LrY1JpsqUOYsKfPNIZKhUeiPHUIwGRkkXZkPxlMTA5ZjA0YS02MWYzLTRlY2YtOTViYy01ZDYyOGQ4YzcyOTI</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>EI-token</con:name><con:value>Rs-iITUGy8U6uxy4E8Hx0BGN4VXLmp_kaZMbIMZVOJo1NThjNWExOC0yYWY2LTRmMTYtYmM0OS0yOTg2YTUzYTYzNGU</con:value></con:property></con:properties></con:testSuite><con:properties><con:property><con:name>sudirEndpoint</con:name><con:value>https://login-tech.mos.ru</con:value></con:property><con:property><con:name>emiasInfoEndpoint</con:name><con:value>http://emiasinfo1.emias.solit-clouds.ru</con:value></con:property><con:property><con:name>lkEndpoint</con:name><con:value>https://lkservice.test.emias.mos.ru</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>