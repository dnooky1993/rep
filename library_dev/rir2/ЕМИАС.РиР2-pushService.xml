<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="c6807a49-5f0b-464a-a5a1-58895ca4b006" activeEnvironment="Default" name="ЕМИАС.РиР2 pushService" resourceRoot="" soapui-version="5.7.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" id="5eec8f7e-9d29-41c1-aa84-51f6a5dc3718" wsaVersion="NONE" name="getSoap" type="wsdl" bindingName="{http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/}getSoap" soapVersion="1_2" anonymous="optional" definition="http://arschedule.rir2.test.emias.mos.ru/api/push?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://arschedule.rir2.test.emias.mos.ru/api/push?wsdl"><con:part><con:url>http://arschedule.rir2.test.emias.mos.ru/api/push?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="pushaccepterService" targetNamespace="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:ns1="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/">
  <wsdl:types>
    <xs:schema>
      <xs:import namespace="http://emias.mos.ru/system/v1/userContext/" schemaLocation="http://arschedule.rir2.test.emias.mos.ru/api/push?xsd=emias.system.v1.userContext.xsd"/>
      <xs:import namespace="http://emias.mos.ru/system/v1/faults/" schemaLocation="http://arschedule.rir2.test.emias.mos.ru/api/push?xsd=emias.system.v1.faults.xsd"/>
      <xs:import namespace="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/" schemaLocation="http://arschedule.rir2.test.emias.mos.ru/api/push?xsd=pushaccepterProduct.pushaccepterService.v1.types.xsd"/>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="getChangeElement">
    <wsdl:part element="ns1:ChangeElement" name="getChangeElement"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getResponseElement">
    <wsdl:part element="ns1:ResponseElement" name="getResponseElement"></wsdl:part>
  </wsdl:message>
  <wsdl:portType name="pushaccepterServicePortType">
    <wsdl:operation name="get">
      <wsdl:input message="tns:getChangeElement" name="getChangeElement"></wsdl:input>
      <wsdl:output message="tns:getResponseElement" name="getResponseElement"></wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="getSoap" type="tns:pushaccepterServicePortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="get">
      <soap:operation soapAction=""/>
      <wsdl:input name="getChangeElement">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getResponseElement">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="getService">
    <wsdl:port binding="tns:getSoap" name="getSoap">
      <soap:address location="http://arschedule.rir2.test.emias.mos.ru/api/push"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://arschedule.rir2.test.emias.mos.ru/api/push?xsd=emias.system.v1.userContext.xsd</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/system/v1/userContext/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://emias.mos.ru/system/v1/userContext/">
  <xs:include schemaLocation="http://arschedule.rir2.test.emias.mos.ru/api/push?xsd=emias.system.v1.xsd"/>
  <xs:element name="userContext" type="UserContext">
    <xs:annotation>
      <xs:documentation>Контекст пользователя</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="UserContext">
    <xs:annotation>
      <xs:documentation>Контекст пользователя</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="systemName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Шифр системы-потребителя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Имя пользователя (логин)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userRoleId" type="ID">
        <xs:annotation>
          <xs:documentation>Идентификатор Роли пользователя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="isUserRoleSystemWide" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак "Общесистемная Роль пользователя"</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userRights">
        <xs:annotation>
          <xs:documentation>Коллекция Полномочий пользователя</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="userRightId" type="ID">
              <xs:annotation>
                <xs:documentation>ИД Полномочия пользователя</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="jobExecutionId" type="ID"/>
      <xs:element minOccurs="0" name="hostIp" type="xs:string">
        <xs:annotation>
          <xs:documentation>IP адрес хоста</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="hostName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Имя хоста</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://arschedule.rir2.test.emias.mos.ru/api/push?xsd=emias.system.v1.xsd</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <!--error message description-->
  <xs:complexType name="ErrorMessageCollection">
    <xs:annotation>
      <xs:documentation>Коллекция сообщений об ошибках</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="message" type="ErrorMessage">
        <xs:annotation>
          <xs:documentation>Сообщение об ошибке</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ErrorMessage">
    <xs:annotation>
      <xs:documentation>Сообщение об ошибке</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Message">
        <xs:sequence>
          <xs:element minOccurs="0" name="parameters">
            <xs:annotation>
              <xs:documentation>Коллекция параметров сообщения</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="unbounded" name="parameter" type="KeyValuePair">
                  <xs:annotation>
                    <xs:documentation>Параметр сообщения</xs:documentation>
                  </xs:annotation>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
          <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Сопутствующие сообщения об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="type" type="ErrorMessageTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип сообщения</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:simpleType name="ErrorMessageTypes">
    <xs:annotation>
      <xs:documentation>Тип сообщения об ошибке</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="ERROR">
        <xs:annotation>
          <xs:documentation>Ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="WARNING">
        <xs:annotation>
          <xs:documentation>Предупреждение (не блокирующая ошибка)</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="INFO">
        <xs:annotation>
          <xs:documentation>Информационное сообщение</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:long"/>
  </xs:simpleType>
  <xs:complexType name="KeyValuePair">
    <xs:annotation>
      <xs:documentation>Представляет тип "ключ/значение"</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="key" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Ключ</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="Message">
    <xs:annotation>
      <xs:documentation>Сообщение</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="code" type="xs:string">
        <xs:annotation>
          <xs:documentation>Код сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="message" type="xs:string">
        <xs:annotation>
          <xs:documentation>Текст сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://arschedule.rir2.test.emias.mos.ru/api/push?xsd=emias.system.v1.faults.xsd</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/system/v1/faults/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:uctx="http://emias.mos.ru/system/v1/userContext/" xmlns="http://emias.mos.ru/system/v1/faults/">
  <xs:include schemaLocation="http://arschedule.rir2.test.emias.mos.ru/api/push?xsd=emias.system.v1.xsd"/>
  <xs:import namespace="http://emias.mos.ru/system/v1/userContext/" schemaLocation="http://arschedule.rir2.test.emias.mos.ru/api/push?xsd=emias.system.v1.userContext.xsd"/>
  <!--faults-->
  <xs:element name="fault" type="BaseFault">
    <xs:annotation>
      <xs:documentation>Базовый тип ошибки</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="SecurityFault">
    <xs:annotation>
      <xs:documentation>Ошибка безопасности</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element ref="uctx:userContext"/>
          <xs:choice>
            <xs:element name="unauthorizedRequestSecurityException" type="UnauthorizedRequestSecurityException">
              <xs:annotation>
                <xs:documentation>Исключение безопасности типа UNAUTHORIZED_REQUEST_EXCEPTION</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="otherSecurityException" type="OtherSecurityException">
              <xs:annotation>
                <xs:documentation>Исключение безопасности типа OTHER_SECURITY_EXCEPTION</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:sequence>
        <xs:attribute fixed="SECURITY" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="BusinessFault">
    <xs:annotation>
      <xs:documentation>Бизнес ошибка</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Коллекция Сообщений об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="hasErrors" type="xs:boolean">
            <xs:annotation>
              <xs:documentation>Признак наличия ошибок в списке сообщений</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute fixed="BUSINESS" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="UnexpectedFault">
    <xs:annotation>
      <xs:documentation>Непредвиденная ошибка</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element name="version" type="xs:string">
            <xs:annotation>
              <xs:documentation>Версия продукта-сервиса</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="stackTrace">
            <xs:annotation>
              <xs:documentation>Стек вызова (последние 10  записей)</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="10" name="stackTraceRecord">
                  <xs:annotation>
                    <xs:documentation>Запись StackTrace</xs:documentation>
                  </xs:annotation>
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element name="declaringClass" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование класса, содержащего метод</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="methodName" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование метода</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="fileName" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование файла</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="lineNumber" type="xs:int">
                        <xs:annotation>
                          <xs:documentation>Номер строки кода</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
        <xs:attribute fixed="UNEXPECTED" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="BaseFault">
    <xs:annotation>
      <xs:documentation>Описание базового типа описания ошибки</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
  </xs:complexType>
  <!--security exceptions-->
  <xs:complexType name="UnauthorizedRequestSecurityException">
    <xs:annotation>
      <xs:documentation>Исключение безопасности типа UNAUTHORIZED_REQUEST_EXCEPTION</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="requiredRights">
        <xs:annotation>
          <xs:documentation>Перечень идентификаторов недостающих Полномочий пользователя</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" name="userRightId" type="ID">
              <xs:annotation>
                <xs:documentation>Идентификатор Полномочия пользователя</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute fixed="UNAUTHORIZED_REQUEST_EXCEPTION" name="type" type="SecurityExceptionTypes" use="required">
      <xs:annotation>
        <xs:documentation>Тип исключения безопасности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="OtherSecurityException">
    <xs:annotation>
      <xs:documentation>Исключение безопасности типа OTHER_SECURITY_EXCEPTION</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="message" type="Message">
        <xs:annotation>
          <xs:documentation>Сообщение</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute fixed="OTHER_SECURITY_EXCEPTION" name="type" type="SecurityExceptionTypes" use="required">
      <xs:annotation>
        <xs:documentation>Тип исключения безопасности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:simpleType name="SecurityExceptionTypes">
    <xs:annotation>
      <xs:documentation>Типы исключений безопасности</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="UNAUTHORIZED_REQUEST_EXCEPTION"/>
      <xs:enumeration value="OTHER_SECURITY_EXCEPTION"/>
    </xs:restriction>
  </xs:simpleType>
  <!--components-->
  <xs:simpleType name="FaultTypes">
    <xs:annotation>
      <xs:documentation>Тип ошибки</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="SECURITY">
        <xs:annotation>
          <xs:documentation>Непредвиденная ошибка приложения</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="BUSINESS">
        <xs:annotation>
          <xs:documentation>Бизнес ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="UNEXPECTED">
        <xs:annotation>
          <xs:documentation>Ошибка безопасности</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://arschedule.rir2.test.emias.mos.ru/api/push?xsd=pushaccepterProduct.pushaccepterService.v1.types.xsd</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="ChangeElement">
    <xs:annotation>
      <xs:documentation>Входные параметры метода ChangeElement</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="in" type="xs:string"/>
        <xs:element minOccurs="0" name="intype" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="ResponseElement">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода ResponseElement</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="out" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://arschedule.rir2.test.emias.mos.ru/api/push</con:endpoint><con:endpoint>http://rir2-rir2-system.emias.solit-clouds.ru/api/push</con:endpoint></con:endpoints><con:operation id="dd7e50e0-1869-4832-8e3b-a8532d926700" isOneWay="false" action="" name="get" bindingOperationName="get" type="Request-Response" outputName="getResponseElement" inputName="getChangeElement" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="64e7c91c-6945-4120-ac2a-0d9c378a2030" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://arschedule.rir2.test.emias.mos.ru/api/push</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">1191</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>23242342344</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>128627842</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/pushaccepterServicePortType/getChangeElement"/><con:wsrmConfig version="1.2"/></con:call><con:call id="e4756195-41f0-442a-812d-585d0039a9e8" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://arschedule.rir2.test.emias.mos.ru/api/push</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in>?</typ:in>\r
         <!--Optional:-->\r
         <typ:intype>?</typ:intype>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/pushaccepterServicePortType/getChangeElement"/><con:wsrmConfig version="1.2"/></con:call><con:call id="bb79474a-0b3b-4b80-9549-1dcbe87255c1" name="Request 3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://arschedule.rir2.test.emias.mos.ru/api/push</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4334</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>2</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>код</value>
								</values>
							</attribute>
							<attribute name="NAME" field_id="" type="">
								<values>
									<value>имя</value>
								</values>
							</attribute>
							<attribute name="SHORT_NAME" field_id="" type="">
								<values>
									<value>имя</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/pushaccepterServicePortType/getChangeElement"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" id="dd3f76c7-8f2e-4b3a-add4-389d6f250dbd" wsaVersion="NONE" name="publicationServiceBinding" type="wsdl" bindingName="{http://emias.mos.ru/nsiProductPublication/publicationService/v1/}publicationServiceBinding" soapVersion="1_2" anonymous="optional" definition="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?wsdl"><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="publicationService" targetNamespace="http://emias.mos.ru/nsiProductPublication/publicationService/v1/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:ns1="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/" xmlns:nsf="http://emias.mos.ru/system/v1/faults/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702" xmlns:tns="http://emias.mos.ru/nsiProductPublication/publicationService/v1/" xmlns:uctx="http://emias.mos.ru/system/v1/userContext/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
    <xs:schema>
      <xs:import namespace="http://emias.mos.ru/system/v1/userContext/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepdWiJ5KblM90N_eqy0_wi_09hg9xP4ibUCW_cc0Myu"/>
      <xs:import namespace="http://emias.mos.ru/system/v1/faults/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepOSDJnHqUM.1VjUrLsAUv4VYLPcSaOP9nDgQ--"/>
      <xs:import namespace="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELu.TBeuk85Yvi3WmjZyj1adJXS5kBPhS9kRrZ.Gt.AX_CmQohEVarqkQXhkcHKUGmB_z3.v8fAHTiHnPIt6rT_qAyP0cpg--"/>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="fault">
    <wsdl:part element="nsf:fault" name="body"/>
  </wsdl:message>
  <wsdl:message name="userContext">
    <wsdl:part element="uctx:userContext" name="userContext"/>
  </wsdl:message>
  <wsdl:message name="getCatalogItemsInput">
    <wsdl:part element="ns1:getCatalogItemsRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getCatalogItemsOutput">
    <wsdl:part element="ns1:getCatalogItemsResponse" name="body"/>
  </wsdl:message>
  <!--<wsdl:message name="getCatalogItemsFeaturesInput">          <wsdl:part name="body" element="ns1:getCatalogItemsFeaturesRequest"/>      </wsdl:message>      <wsdl:message name="getCatalogItemsFeaturesOutput">          <wsdl:part name="body" element="ns1:getCatalogItemsFeaturesResponse"/>      </wsdl:message>-->
  <wsdl:message name="getCatalogChangesInput">
    <wsdl:part element="ns1:getCatalogChangesRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getCatalogChangesOutput">
    <wsdl:part element="ns1:getCatalogChangesResponse" name="body"/>
  </wsdl:message>
  <wsdl:message name="getObjectChangesInput">
    <wsdl:part element="ns1:getObjectChangesRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getObjectChangesOutput">
    <wsdl:part element="ns1:getObjectChangesResponse" name="body"/>
  </wsdl:message>
  <wsdl:message name="getCatalogListInput">
    <wsdl:part element="ns1:getCatalogListRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getCatalogListOutput">
    <wsdl:part element="ns1:getCatalogListResponse" name="body"/>
  </wsdl:message>
  <wsdl:message name="getCatalogCountInput">
    <wsdl:part element="ns1:getCatalogCountRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getCatalogCountOutput">
    <wsdl:part element="ns1:getCatalogCountResponse" name="body"/>
  </wsdl:message>
  <!--<wsdl:message name="catalogExportInput">          <wsdl:part name="body" element="ns1:catalogExportRequest"/>      </wsdl:message>      <wsdl:message name="catalogExportOutput">          <wsdl:part name="body" element="ns1:catalogExportResponse"/>      </wsdl:message>-->
  <wsdl:message name="getDictionaryItemInput">
    <wsdl:part element="ns1:getDictionaryItemRequest" name="body"/>
  </wsdl:message>
  <wsdl:message name="getDictionaryItemOutput">
    <wsdl:part element="ns1:getDictionaryItemResponse" name="body"/>
  </wsdl:message>
  <wsdl:portType name="publicationServicePortType">
    <wsdl:operation name="getCatalogItems">
      <wsdl:input message="tns:getCatalogItemsInput"/>
      <wsdl:output message="tns:getCatalogItemsOutput"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <!--<wsdl:operation name="getCatalogItemsFeatures">              <wsdl:input message="tns:getCatalogItemsFeaturesInput"/>              <wsdl:output message="tns:getCatalogItemsFeaturesOutput"/>              <wsdl:fault name="fault" message="tns:fault"/>          </wsdl:operation>-->
    <wsdl:operation name="getCatalogChanges">
      <wsdl:input message="tns:getCatalogChangesInput"/>
      <wsdl:output message="tns:getCatalogChangesOutput"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="getObjectChanges">
      <wsdl:input message="tns:getObjectChangesInput"/>
      <wsdl:output message="tns:getObjectChangesOutput"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="getCatalogList">
      <wsdl:input message="tns:getCatalogListInput"/>
      <wsdl:output message="tns:getCatalogListOutput"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <wsdl:operation name="getCatalogCount">
      <wsdl:input message="tns:getCatalogCountInput"/>
      <wsdl:output message="tns:getCatalogCountOutput"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
    <!--<wsdl:operation name="catalogExport">              <wsdl:input message="tns:catalogExportInput"/>              <wsdl:output message="tns:catalogExportOutput"/>              <wsdl:fault name="fault" message="tns:fault"/>          </wsdl:operation>-->
    <wsdl:operation name="getDictionaryItem">
      <wsdl:input message="tns:getDictionaryItemInput"/>
      <wsdl:output message="tns:getDictionaryItemOutput"/>
      <wsdl:fault message="tns:fault" name="fault"/>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="publicationServiceBinding" type="tns:publicationServicePortType">
    <wsp:PolicyReference URI="#authPolicy"/>
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getCatalogItems">
      <soap:operation soapAction="getCatalogItems"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"/>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <!--<wsdl:operation name="getCatalogItemsFeatures">              <soap:operation soapAction="getCatalogItemsFeatures"/>              <wsdl:input>                  <soap:header message="tns:userContext" part="userContext" use="literal"/>                  <soap:body use="literal"/>              </wsdl:input>              <wsdl:output>                  <soap:body use="literal"/>              </wsdl:output>              <wsdl:fault name="fault">                  <soap:fault name="fault" use="literal"/>              </wsdl:fault>          </wsdl:operation>-->
    <wsdl:operation name="getCatalogChanges">
      <soap:operation soapAction="getCatalogChanges"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"/>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getObjectChanges">
      <soap:operation soapAction="getObjectChanges"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"/>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getCatalogList">
      <soap:operation soapAction="getCatalogList"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"/>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getCatalogCount">
      <soap:operation soapAction="getCatalogCount"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"/>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <!--<wsdl:operation name="catalogExport">              <soap:operation soapAction="catalogExport"/>              <wsdl:input>                  <soap:header message="tns:userContext" part="userContext" use="literal"/>                  <soap:body use="literal"/>              </wsdl:input>              <wsdl:output>                  <soap:body use="literal"/>              </wsdl:output>              <wsdl:fault name="fault">                  <soap:fault name="fault" use="literal"/>              </wsdl:fault>          </wsdl:operation>-->
    <wsdl:operation name="getDictionaryItem">
      <soap:operation soapAction="getDictionaryItem"/>
      <wsdl:input>
        <soap:header message="tns:userContext" part="userContext" use="literal"/>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="fault">
        <soap:fault name="fault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="publicationService">
    <wsdl:port binding="tns:publicationServiceBinding" name="publicationServicePort">
      <soap:address location="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService"/>
    </wsdl:port>
  </wsdl:service>
  <wsp:Policy wsu:Id="authPolicy">
    <sp:SupportingTokens>
      <wsp:Policy>
        <sp:UsernameToken sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
          <wsp:Policy>
            <sp:NoPassword/>
          </wsp:Policy>
        </sp:UsernameToken>
      </wsp:Policy>
    </sp:SupportingTokens>
  </wsp:Policy>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepdWiJ5KblM90N_eqy0_wi_09hg9xP4ibUCW_cc0Myu</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/system/v1/userContext/" xmlns="http://emias.mos.ru/system/v1/userContext/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepQWiOkC4oY7_nDmW6CAnGsJnTy"/>
  <xs:element name="userContext" type="UserContext">
    <xs:annotation>
      <xs:documentation>Контекст пользователя</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="UserContext">
    <xs:annotation>
      <xs:documentation>Контекст пользователя</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="systemName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Шифр системы-потребителя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Имя пользователя (логин)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userRoleId" type="ID">
        <xs:annotation>
          <xs:documentation>Идентификатор Роли пользователя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="isUserRoleSystemWide" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак "Общесистемная Роль пользователя"</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="userRights">
        <xs:annotation>
          <xs:documentation>Коллекция Полномочий пользователя</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="userRightId" type="ID">
              <xs:annotation>
                <xs:documentation>ИД Полномочия пользователя</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="jobExecutionId" type="ID"/>
      <xs:element minOccurs="0" name="hostIp" type="xs:string">
        <xs:annotation>
          <xs:documentation>IP адрес хоста</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="hostName" type="xs:string">
        <xs:annotation>
          <xs:documentation>Имя хоста</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepQWiOkC4oY7_nDmW6CAnGsJnTy</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <!--error message description-->
  <xs:complexType name="ErrorMessageCollection">
    <xs:annotation>
      <xs:documentation>Коллекция сообщений об ошибках</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="message" type="ErrorMessage">
        <xs:annotation>
          <xs:documentation>Сообщение об ошибке</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ErrorMessage">
    <xs:annotation>
      <xs:documentation>Сообщение об ошибке</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="Message">
        <xs:sequence>
          <xs:element minOccurs="0" name="parameters">
            <xs:annotation>
              <xs:documentation>Коллекция параметров сообщения</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="unbounded" name="parameter" type="KeyValuePair">
                  <xs:annotation>
                    <xs:documentation>Параметр сообщения</xs:documentation>
                  </xs:annotation>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
          <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Сопутствующие сообщения об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="type" type="ErrorMessageTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип сообщения</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:simpleType name="ErrorMessageTypes">
    <xs:annotation>
      <xs:documentation>Тип сообщения об ошибке</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="ERROR">
        <xs:annotation>
          <xs:documentation>Ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="WARNING">
        <xs:annotation>
          <xs:documentation>Предупреждение (не блокирующая ошибка)</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="INFO">
        <xs:annotation>
          <xs:documentation>Информационное сообщение</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:long"/>
  </xs:simpleType>
  <xs:complexType name="KeyValuePair">
    <xs:annotation>
      <xs:documentation>Представляет тип "ключ/значение"</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="key" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Ключ</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="Message">
    <xs:annotation>
      <xs:documentation>Сообщение</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="code" type="xs:string">
        <xs:annotation>
          <xs:documentation>Код сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="message" type="xs:string">
        <xs:annotation>
          <xs:documentation>Текст сообщения</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepOSDJnHqUM.1VjUrLsAUv4VYLPcSaOP9nDgQ--</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/system/v1/faults/" xmlns="http://emias.mos.ru/system/v1/faults/" xmlns:uctx="http://emias.mos.ru/system/v1/userContext/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepQWiOkC4oY7_nDmW6CAnGsJnTy"/>
  <xs:import namespace="http://emias.mos.ru/system/v1/userContext/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepdWiJ5KblM90N_eqy0_wi_09hg9xP4ibUCW_cc0Myu"/>
  <!--faults-->
  <xs:element name="fault" type="BaseFault">
    <xs:annotation>
      <xs:documentation>Базовый тип ошибки</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="SecurityFault">
    <xs:annotation>
      <xs:documentation>Ошибка безопасности</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element ref="uctx:userContext"/>
          <xs:choice>
            <xs:element name="unauthorizedRequestSecurityException" type="UnauthorizedRequestSecurityException">
              <xs:annotation>
                <xs:documentation>Исключение безопасности типа UNAUTHORIZED_REQUEST_EXCEPTION</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="otherSecurityException" type="OtherSecurityException">
              <xs:annotation>
                <xs:documentation>Исключение безопасности типа OTHER_SECURITY_EXCEPTION</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:sequence>
        <xs:attribute fixed="SECURITY" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="BusinessFault">
    <xs:annotation>
      <xs:documentation>Бизнес ошибка</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element name="messages" type="ErrorMessageCollection">
            <xs:annotation>
              <xs:documentation>Коллекция Сообщений об ошибках</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="hasErrors" type="xs:boolean">
            <xs:annotation>
              <xs:documentation>Признак наличия ошибок в списке сообщений</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute fixed="BUSINESS" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="UnexpectedFault">
    <xs:annotation>
      <xs:documentation>Непредвиденная ошибка</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="BaseFault">
        <xs:sequence>
          <xs:element name="version" type="xs:string">
            <xs:annotation>
              <xs:documentation>Версия продукта-сервиса</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="stackTrace">
            <xs:annotation>
              <xs:documentation>Стек вызова (последние 10  записей)</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:sequence>
                <xs:element maxOccurs="10" name="stackTraceRecord">
                  <xs:annotation>
                    <xs:documentation>Запись StackTrace</xs:documentation>
                  </xs:annotation>
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element name="declaringClass" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование класса, содержащего метод</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="methodName" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование метода</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="fileName" type="xs:string">
                        <xs:annotation>
                          <xs:documentation>Наименование файла</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                      <xs:element minOccurs="0" name="lineNumber" type="xs:int">
                        <xs:annotation>
                          <xs:documentation>Номер строки кода</xs:documentation>
                        </xs:annotation>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
        <xs:attribute fixed="UNEXPECTED" name="type" type="FaultTypes" use="required">
          <xs:annotation>
            <xs:documentation>Тип ошибки</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="BaseFault">
    <xs:annotation>
      <xs:documentation>Описание базового типа описания ошибки</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
  </xs:complexType>
  <!--security exceptions-->
  <xs:complexType name="UnauthorizedRequestSecurityException">
    <xs:annotation>
      <xs:documentation>Исключение безопасности типа UNAUTHORIZED_REQUEST_EXCEPTION</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="requiredRights">
        <xs:annotation>
          <xs:documentation>Перечень идентификаторов недостающих Полномочий пользователя</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" name="userRightId" type="ID">
              <xs:annotation>
                <xs:documentation>Идентификатор Полномочия пользователя</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute fixed="UNAUTHORIZED_REQUEST_EXCEPTION" name="type" type="SecurityExceptionTypes" use="required">
      <xs:annotation>
        <xs:documentation>Тип исключения безопасности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="OtherSecurityException">
    <xs:annotation>
      <xs:documentation>Исключение безопасности типа OTHER_SECURITY_EXCEPTION</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="message" type="Message">
        <xs:annotation>
          <xs:documentation>Сообщение</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute fixed="OTHER_SECURITY_EXCEPTION" name="type" type="SecurityExceptionTypes" use="required">
      <xs:annotation>
        <xs:documentation>Тип исключения безопасности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:simpleType name="SecurityExceptionTypes">
    <xs:annotation>
      <xs:documentation>Типы исключений безопасности</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="UNAUTHORIZED_REQUEST_EXCEPTION"/>
      <xs:enumeration value="OTHER_SECURITY_EXCEPTION"/>
    </xs:restriction>
  </xs:simpleType>
  <!--components-->
  <xs:simpleType name="FaultTypes">
    <xs:annotation>
      <xs:documentation>Тип ошибки</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="SECURITY">
        <xs:annotation>
          <xs:documentation>Непредвиденная ошибка приложения</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="BUSINESS">
        <xs:annotation>
          <xs:documentation>Бизнес ошибка</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="UNEXPECTED">
        <xs:annotation>
          <xs:documentation>Ошибка безопасности</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELu.TBeuk85Yvi3WmjZyj1adJXS5kBPhS9kRrZ.Gt.AX_CmQohEVarqkQXhkcHKUGmB_z3.v8fAHTiHnPIt6rT_qAyP0cpg--</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/" xmlns:core="http://emias.mos.ru/nsiProductPublication/core/v1/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import namespace="http://emias.mos.ru/nsiProductPublication/core/v1/" schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELu.TBeuk85Yvi3WmjZyj1adJXS5kBPhB7FRiIPT9ohTjAHwvUeGTg46m1fiXxYEBrnA-"/>
  <xs:element name="getCatalogItemsRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getCatalogItems</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1" name="limit" nillable="true" type="xs:int"/>
        <xs:element name="id" nillable="false" type="xs:int"/>
        <xs:element name="criteria" type="xs:string"/>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="projection" type="xs:string"/>
        <xs:element name="sorting" type="core:map"/>
        <xs:element name="useAntiProjection" type="xs:boolean"/>
        <xs:element name="includeDeleted" type="xs:boolean"/>
        <xs:element name="fetchGeodata" type="xs:boolean"/>
        <xs:element name="fetchGeodataCenter" type="xs:boolean"/>
        <xs:element name="paging" type="xs:boolean"/>
        <xs:element name="epoch" nillable="true" type="xs:string"/>
        <xs:element name="timestamp" nillable="true" type="xs:int"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogItemsResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getCatalogItems</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ehdCatalogItems" type="core:ehdCatalogItems"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogItemsFeaturesRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getCatalogItemsFeatures</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1" name="limit" nillable="true" type="xs:int"/>
        <xs:element name="id" nillable="false" type="xs:int"/>
        <xs:element name="criteria" type="xs:string"/>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="projection" type="xs:string"/>
        <xs:element name="sorting" type="core:map"/>
        <xs:element name="useAntiProjection" type="xs:boolean"/>
        <xs:element name="includeDeleted" type="xs:boolean"/>
        <xs:element name="paging" type="xs:boolean"/>
        <xs:element name="epoch" nillable="true" type="xs:string"/>
        <xs:element name="timestamp" nillable="true" type="xs:int"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogItemsFeaturesResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getCatalogItemsFeatures</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ehdCatalogItemsFeatures" type="core:ehdCatalogItemsFeatures"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogChangesRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getCatalogChanges</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1" name="limit" nillable="true" type="xs:int"/>
        <xs:element name="id" nillable="false" type="xs:int"/>
        <xs:element name="criteria" type="xs:string"/>
        <xs:element name="sorting" type="core:map"/>
        <xs:element name="from" nillable="false" type="xs:string"/>
        <xs:element name="until" nillable="false" type="xs:string"/>
        <xs:element name="state" nillable="false" type="xs:string"/>
        <xs:element name="fetchGeodata" type="xs:boolean"/>
        <xs:element name="paging" type="xs:boolean"/>
        <xs:element name="fetchGeodataCenter" type="xs:boolean"/>
        <xs:element name="includeDeleted" type="xs:boolean"/>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="projection" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogChangesResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getCatalogChanges</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ehdCatalogItems" type="core:ehdCatalogItems"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getObjectChangesRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getObjectChanges</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1" name="limit" nillable="true" type="xs:int"/>
        <xs:element name="id" nillable="false" type="xs:int"/>
        <xs:element name="catalog" nillable="false" type="xs:int"/>
        <xs:element name="criteria" type="xs:string"/>
        <xs:element name="from" nillable="false" type="xs:string"/>
        <xs:element name="until" nillable="false" type="xs:string"/>
        <xs:element name="state" nillable="false" type="xs:string"/>
        <xs:element name="fetchGeodata" type="xs:boolean"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getObjectChangesResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getObjectChanges</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ehdCatalogItems" type="core:ehdCatalogItems"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogListRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getCatalogList</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1" name="limit" nillable="true" type="xs:int"/>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="id" type="xs:int"/>
        <xs:element name="epoch" nillable="true" type="xs:string"/>
        <xs:element name="timestamp" nillable="true" type="xs:int"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogListResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getCatalogList</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ehdCatalogs" type="core:ehdCatalogs"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogCountRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getCatalogCount</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="id" type="xs:int"/>
        <xs:element name="criteria" type="xs:string"/>
        <xs:element name="includeDeleted" type="xs:boolean"/>
        <xs:element name="epoch" type="xs:string"/>
        <xs:element name="timestamp" type="xs:int"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getCatalogCountResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getCatalogCount</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ehdCatalogStats" type="core:ehdCatalogStats"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="catalogExportRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода catalogExport</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1000" name="limit" nillable="true" type="xs:int"/>
        <xs:element name="id" nillable="false" type="xs:int"/>
        <xs:element name="criteria" type="xs:string"/>
        <xs:element name="epoch" type="xs:string"/>
        <xs:element name="format" type="xs:string"/>
        <xs:element name="translate" type="xs:boolean"/>
        <xs:element name="file_id" nillable="true" type="core:intList"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="catalogExportResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода catalogExport</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="catalogExports" type="core:catalogExport"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getDictionaryItemRequest">
    <xs:annotation>
      <xs:documentation>Входные параметры метода getDictionaryItem</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element default="0" name="offset" nillable="true" type="xs:int"/>
        <xs:element default="1000" name="limit" nillable="true" type="xs:int"/>
        <xs:element name="id" nillable="false" type="xs:int"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="getDictionaryItemResponse">
    <xs:annotation>
      <xs:documentation>Выходные параметры метода getDictionaryItem</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="dictionaryItems" type="core:ehdDictionaryItems"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELu.TBeuk85Yvi3WmjZyj1adJXS5kBPhB7FRiIPT9ohTjAHwvUeGTg46m1fiXxYEBrnA-</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://emias.mos.ru/nsiProductPublication/core/v1/" xmlns="http://emias.mos.ru/nsiProductPublication/core/v1/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlspE1mmTYjs_hxLdMW4ACdenh4SWCUHxsODNXDg--"/>
  <xs:complexType name="ehdCatalogs">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="list" type="ehdCatalog"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdCatalog">
    <xs:sequence>
      <xs:element name="id" nillable="true" type="xs:long"/>
      <xs:element name="name" type="xs:string"/>
      <xs:element name="fullName" type="xs:string"/>
      <xs:element name="technicalName" type="xs:string"/>
      <xs:element name="shortName" type="xs:string"/>
      <xs:element name="accountingObject" type="xs:string"/>
      <xs:element name="hasEnVersion" type="xs:boolean"/>
      <xs:element name="keywords" type="xs:string"/>
      <xs:element name="vid" type="xs:string"/>
      <xs:element name="type" type="xs:string"/>
      <xs:element name="kind" type="xs:string"/>
      <xs:element name="period" type="xs:string"/>
      <xs:element name="hasGeo" nillable="true" type="xs:boolean"/>
      <xs:element name="layerId" type="xs:string"/>
      <xs:element name="categories" type="xs:string"/>
      <xs:element name="OIV" type="xs:string"/>
      <xs:element name="oivList" type="xs:string"/>
      <xs:element name="description" type="xs:string"/>
      <xs:element name="CNT" type="xs:long"/>
      <xs:element name="permittedSystems" type="intList"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="fields" type="ehdCommonAttribute"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="systemFields" type="systemField"/>
      <xs:element name="fieldsEa" type="fieldEa"/>
      <xs:element name="responsiblePerson" type="responsiblPerson"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="nameVariants" type="nameVariant"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdCatalogStats">
    <xs:sequence>
      <xs:element name="response" nillable="true" type="xs:int"/>
      <xs:element name="lastUpdated" nillable="true" type="xs:string"/>
      <xs:element name="validDate" nillable="true" type="xs:string"/>
      <xs:element name="message" type="xs:string"/>
      <xs:element name="status" nillable="true" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdCommonAttribute">
    <xs:sequence>
      <xs:element name="id" type="xs:string"/>
      <xs:element name="columnId" type="xs:string"/>
      <xs:element name="name" type="xs:string"/>
      <xs:element name="enName" type="xs:string"/>
      <xs:element name="techName" type="xs:string"/>
      <xs:element name="groupName" type="xs:string"/>
      <xs:element name="typeName" type="xs:string"/>
      <xs:element name="type" type="xs:string"/>
      <xs:element name="isPk" nillable="true" type="xs:boolean"/>
      <xs:element name="isArray" nillable="true" type="xs:boolean"/>
      <xs:element name="system" nillable="true" type="xs:boolean"/>
      <xs:element name="hasTranslation" nillable="true" type="xs:boolean"/>
      <xs:element name="dictionaryId" nillable="true" type="xs:int"/>
      <xs:element name="catalogId" nillable="true" type="xs:int"/>
      <xs:element name="maxLength" type="xs:int"/>
      <xs:element name="systemField" type="xs:string"/>
      <xs:element name="permittedSystems" type="intList"/>
      <xs:element name="specification" type="ehdCatalog"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdException">
    <xs:sequence>
      <xs:element name="errorCode" type="xs:string"/>
      <xs:element name="errorText" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdCatalogItemsFeatures">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="featureList" type="ehdCatalogItemsFeature"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdCatalogItemsFeature">
    <xs:sequence>
      <xs:element name="geometry" type="xs:string"/>
      <xs:element maxOccurs="unbounded" ref="items"/>
      <xs:element name="type" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdCatalogItems">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" ref="items"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="items">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="itemAttribute"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="itemAttribute">
    <xs:complexType mixed="true">
      <xs:sequence>
        <xs:element maxOccurs="unbounded" minOccurs="0" ref="items"/>
        <xs:element maxOccurs="unbounded" minOccurs="0" ref="dicts"/>
      </xs:sequence>
      <xs:attribute name="name" type="xs:NCName" use="required"/>
    </xs:complexType>
  </xs:element>
  <xs:element name="dicts">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="dict"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="dict">
    <xs:complexType mixed="true">
      <xs:sequence></xs:sequence>
      <xs:attribute name="key" type="xs:NCName" use="required"/>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="systemField">
    <xs:sequence>
      <xs:element name="id" nillable="true" type="xs:int"/>
      <xs:element name="system" type="xs:string"/>
      <xs:element name="systemField" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="fieldEa">
    <xs:sequence>
      <xs:element name="id" nillable="true" type="xs:int"/>
      <xs:element name="RUBRICID" type="xs:string"/>
      <xs:element name="isLayerOpen" type="xs:int"/>
      <xs:element name="linkData" type="xs:string"/>
      <xs:element name="icoName" type="xs:string"/>
      <xs:element name="signDate" type="xs:string"/>
      <xs:element name="isUpdateWfs" type="xs:int"/>
      <xs:element name="isUpdateDb" type="xs:int"/>
      <xs:element name="guLink" type="xs:string"/>
      <xs:element name="typeObject" type="xs:string"/>
      <xs:element name="signFio" type="xs:string"/>
      <xs:element name="isUpdate" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="nameVariant">
    <xs:sequence>
      <xs:element name="technicalName" type="xs:string"/>
      <xs:element name="fullName" type="xs:string"/>
      <xs:element name="shortName" type="xs:string"/>
      <xs:element name="systemLogin" type="xs:string"/>
      <xs:element name="systemId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="responsiblPerson">
    <xs:sequence>
      <xs:element name="phone" type="xs:string"/>
      <xs:element name="email" type="xs:string"/>
      <xs:element name="fio" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:simpleType name="intList">
    <xs:list itemType="xs:string"/>
  </xs:simpleType>
  <xs:element name="exportInfo">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="id" type="xs:string"/>
        <xs:element name="status" type="xs:string"/>
        <xs:element name="lastFileGeneration" type="xs:string"/>
        <xs:element name="size" type="xs:string"/>
      </xs:sequence>
      <xs:attribute name="format" type="xs:NCName" use="required"/>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="catalogExport">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" ref="exportInfo"/>
      <xs:element name="errors" nillable="true" type="xs:string"/>
      <xs:element name="structureVersion" nillable="true" type="xs:string"/>
      <xs:element name="createDate" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdDictionaryItems">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="list" type="ehdDictionaryItem"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ehdDictionaryItem">
    <xs:sequence>
      <xs:element name="key" type="xs:string"/>
      <xs:element name="prnt_key" type="xs:string"/>
      <xs:element name="value" type="xs:string"/>
      <xs:element name="value_en" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="map">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="item" type="mapType"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="mapType">
    <xs:sequence>
      <xs:element name="key" type="xs:string"/>
      <xs:element name="value" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlspE1mmTYjs_hxLdMW4ACdenh4SWCUHxsODNXDg--</con:url><con:content><![CDATA[<!--edited with XMLSpy v2017 rel. 3 sp1 (x64) (http://www.altova.com) by Vladimir Makarov (Private)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService?xsd=AAAADHAjUCM4P2cuZURELuSNBdqlsoEjm3WTldC5jepQWiOkC4oY7_nDmW6CAnGsJnTy"/>
  <!--references-->
  <xs:element name="medicalOrganizationId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор Медицинской организации</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:element name="medicalFacilityId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор Медицинского учреждения</xs:documentation>
    </xs:annotation>
  </xs:element>
  <!--async operation status-->
  <xs:element name="operationId" type="ID">
    <xs:annotation>
      <xs:documentation>Идентификатор операции</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="OperationExecutionStatus">
    <xs:annotation>
      <xs:documentation>Статус выполнения операции</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="isCompleted" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак окончания выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="completenessProgress" type="OperationCompletenessBase">
        <xs:annotation>
          <xs:documentation>Сведения о текущем статусе выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="hasSucceded" type="xs:boolean">
        <xs:annotation>
          <xs:documentation>Признак успешности выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="messages" type="ErrorMessageCollection">
        <xs:annotation>
          <xs:documentation>Коллекция сообщений, порожденных в ходе выполнения операции</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="id" type="ID" use="required">
      <xs:annotation>
        <xs:documentation>Идентификатор операции</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType abstract="true" name="OperationCompletenessPercentage">
    <xs:annotation>
      <xs:documentation>Описание текущего статуса выполнения операции в процентах (0%-100%)</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="OperationCompletenessBase">
        <xs:sequence>
          <xs:element name="completenessStatus">
            <xs:annotation>
              <xs:documentation>Статус (0%-100%)</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:unsignedByte">
                <xs:minInclusive value="0"/>
                <xs:maxInclusive value="100"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType abstract="true" name="OperationCompletenessBase">
    <xs:annotation>
      <xs:documentation>Базовый абстрактный тип для описания текущего статуса выполнения операции</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
  </xs:complexType>
  <!--calling methods' options-->
  <xs:element name="options" type="Options">
    <xs:annotation>
      <xs:documentation>Параметры вызова метода</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="Options">
    <xs:annotation>
      <xs:documentation>Набор именованных значений</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="entry" type="KeyValuePair">
        <xs:annotation>
          <xs:documentation>Именованное значение</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--pagination-->
  <xs:element name="pagingOptions" type="PagingOptions">
    <xs:annotation>
      <xs:documentation>Параметры пагинации</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType abstract="true" name="PagingResults">
    <xs:annotation>
      <xs:documentation>Список с пагинацией</xs:documentation>
    </xs:annotation>
    <xs:attribute name="pageNumber" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Номер страницы (zero-based)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageTotal" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Общее количество страниц</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageSize" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Размер страницы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="morePagesAvailable" type="xs:boolean" use="required">
      <xs:annotation>
        <xs:documentation>Флаг доступности других страниц с результатами для "постраничного листания" (true - если доступны еще страницы; false - иначе)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PagingOptions">
    <xs:annotation>
      <xs:documentation>Параметры пагинации</xs:documentation>
    </xs:annotation>
    <xs:sequence/>
    <xs:attribute name="pageNumber" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Номер страницы (zero-based)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="pageSize" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Размер страницы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <!--base types-->
  <xs:complexType name="TimeInterval">
    <xs:annotation>
      <xs:documentation>Временной период (время)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="start" type="xs:time">
        <xs:annotation>
          <xs:documentation>Время начала интервала</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="end" type="xs:time">
        <xs:annotation>
          <xs:documentation>Время окончания интервала</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DatePeriod">
    <xs:annotation>
      <xs:documentation>Временной период (дата)</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element minOccurs="0" name="start" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата начала периода</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element minOccurs="0" name="end" type="xs:date">
        <xs:annotation>
          <xs:documentation>Дата окончания периода</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint></con:endpoints><con:operation id="5cb2ec36-cde5-46fc-a5ec-382784c4d0ef" isOneWay="false" action="getCatalogChanges" name="getCatalogChanges" bindingOperationName="getCatalogChanges" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="4d80a313-521f-4f70-a58b-00e5a284fdd2" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/" xmlns:v1="http://emias.mos.ru/nsiProductPublication/core/v1/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getCatalogChangesRequest>\r
         <typ:offset>0</typ:offset>\r
         <typ:limit>1</typ:limit>\r
         <typ:id>?</typ:id>\r
         <typ:criteria>?</typ:criteria>\r
         <typ:sorting>\r
            <!--Zero or more repetitions:-->\r
            <v1:item>\r
               <v1:key>?</v1:key>\r
               <v1:value>?</v1:value>\r
            </v1:item>\r
         </typ:sorting>\r
         <typ:from>?</typ:from>\r
         <typ:until>?</typ:until>\r
         <typ:state>?</typ:state>\r
         <typ:fetchGeodata>?</typ:fetchGeodata>\r
         <typ:paging>?</typ:paging>\r
         <typ:fetchGeodataCenter>?</typ:fetchGeodataCenter>\r
         <typ:includeDeleted>?</typ:includeDeleted>\r
         <!--Zero or more repetitions:-->\r
         <typ:projection>?</typ:projection>\r
      </typ:getCatalogChangesRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getCatalogChangesRequest"/></con:call></con:operation><con:operation id="544b05d0-718e-4379-a310-44512c437f36" isOneWay="false" action="getCatalogCount" name="getCatalogCount" bindingOperationName="getCatalogCount" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="82d54d55-51a7-4832-b02a-9dc8013a7b14" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getCatalogCountRequest>\r
         <typ:id>?</typ:id>\r
         <typ:criteria>?</typ:criteria>\r
         <typ:includeDeleted>?</typ:includeDeleted>\r
         <typ:epoch>?</typ:epoch>\r
         <typ:timestamp>?</typ:timestamp>\r
      </typ:getCatalogCountRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getCatalogCountRequest"/></con:call></con:operation><con:operation id="c01bffa7-aa69-426c-bc1f-24fb75c6e878" isOneWay="false" action="getCatalogItems" name="getCatalogItems" bindingOperationName="getCatalogItems" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="c94625c8-0d72-4540-8ad1-79d2e95c6112" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/" xmlns:v1="http://emias.mos.ru/nsiProductPublication/core/v1/">
<soap:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-66f4c663-6fd2-42df-b38c-f4078ed846a2">
        <wsse:Username>KPI_DOCTOR_X/AnVeshkina</wsse:Username>
      </wsse:UsernameToken>
    </wsse:Security>
    <UserContext xmlns="http://emias.mos.ru/system/v1/userContext/">
      <systemName>KPI_DOCTOR_X</systemName>
      <userName>AnVeshkina</userName>
      <userRoleId>4</userRoleId>
      <isUserRoleSystemWide>false</isUserRoleSystemWide>
      <jobExecutionId>6445591253</jobExecutionId>
    </UserContext>
  </soap:Header>
   <soap:Body>
      <typ:getCatalogItemsRequest>
         <typ:offset>0</typ:offset>
         <typ:limit>1000</typ:limit>
         <typ:id>1231</typ:id>
      </typ:getCatalogItemsRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getCatalogItemsRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="31b1d09b-8382-468f-b860-f2d69fda396e" isOneWay="false" action="getCatalogList" name="getCatalogList" bindingOperationName="getCatalogList" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="687d3163-3a21-478e-989f-375dd36c9c1f" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getCatalogListRequest>\r
         <typ:offset>0</typ:offset>\r
         <typ:limit>1</typ:limit>\r
         <!--Zero or more repetitions:-->\r
         <typ:id>?</typ:id>\r
         <typ:epoch>?</typ:epoch>\r
         <typ:timestamp>?</typ:timestamp>\r
      </typ:getCatalogListRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getCatalogListRequest"/></con:call></con:operation><con:operation id="31dc8ac9-1dd5-4785-a5f8-3aabb35c4ea1" isOneWay="false" action="getDictionaryItem" name="getDictionaryItem" bindingOperationName="getDictionaryItem" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="705870a2-2d6f-4e40-8fb7-67080eebe0f8" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getDictionaryItemRequest>\r
         <typ:offset>0</typ:offset>\r
         <typ:limit>1000</typ:limit>\r
         <typ:id>?</typ:id>\r
      </typ:getDictionaryItemRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getDictionaryItemRequest"/></con:call></con:operation><con:operation id="209166a1-9cf3-4fbf-89f0-495727bb6418" isOneWay="false" action="getObjectChanges" name="getObjectChanges" bindingOperationName="getObjectChanges" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="136ccaba-436e-47e3-b75f-6cbd81249f85" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://esbcamel.test.emias.mos.ru/proxy/Composite/nsi2PublicationAuth/v1S/ProxyService</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:user="http://emias.mos.ru/system/v1/userContext/" xmlns:typ="http://emias.mos.ru/nsiProductPublication/publicationService/v1/types/">\r
   <soap:Header>\r
      <user:userContext>\r
         <user:systemName>?</user:systemName>\r
         <user:userName>?</user:userName>\r
         <user:userRoleId>?</user:userRoleId>\r
         <!--Optional:-->\r
         <user:isUserRoleSystemWide>?</user:isUserRoleSystemWide>\r
         <user:userRights>\r
            <!--Zero or more repetitions:-->\r
            <user:userRightId>?</user:userRightId>\r
         </user:userRights>\r
         <user:jobExecutionId>?</user:jobExecutionId>\r
         <!--Optional:-->\r
         <user:hostIp>?</user:hostIp>\r
         <!--Optional:-->\r
         <user:hostName>?</user:hostName>\r
      </user:userContext>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:getObjectChangesRequest>\r
         <typ:offset>0</typ:offset>\r
         <typ:limit>1</typ:limit>\r
         <typ:id>?</typ:id>\r
         <typ:catalog>?</typ:catalog>\r
         <typ:criteria>?</typ:criteria>\r
         <typ:from>?</typ:from>\r
         <typ:until>?</typ:until>\r
         <typ:state>?</typ:state>\r
         <typ:fetchGeodata>?</typ:fetchGeodata>\r
      </typ:getObjectChangesRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://emias.mos.ru/nsiProductPublication/publicationService/v1/publicationServicePortType/getObjectChangesRequest"/></con:call></con:operation></con:interface><con:testSuite id="95d2425d-c0ed-4b0d-96f0-1dbf3cb8c67b" name="AGE_GROUP"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="8ef843af-eeb3-4565-b649-990a5af470f5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="24a6f6c0-ffb5-4cd6-bca9-e288ae3fcb04"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.getAgeGroupIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="8ad78bba-a9d3-4d22-8ada-3ccb341d2075"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#ageGroupId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#code}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="4303" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="FROM" field_id="" type="">
								<values>
									<value>${#TestSuite#from}</value>
								</values>
							</attribute>
							<attribute name="TO" field_id="" type="">
								<values>
									<value>${#TestSuite#to}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="c8be612e-03d3-4cf4-9168-70d8432eadb3"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ag = new AgeGroups(context, testRunner, log)

code=testRunner.testCase.testSuite.getPropertyValue("code")
title = testRunner.testCase.testSuite.getPropertyValue("title")
from=testRunner.testCase.testSuite.getPropertyValue("from").toInteger()
to = testRunner.testCase.testSuite.getPropertyValue("to").toInteger()
id = testRunner.testCase.getPropertyValue("ageGroupId1").toInteger()

def mapReq=[
					id : id,
					code: code ,
					title: title,
					archived: false,
					from: from,
					to: to
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ag.getAgeGroupsMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="ef7889f9-e6df-434d-bda2-23c53f74229c"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.clearAgeGroups()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>ageGroupId1</con:name><con:value>127631423</con:value></con:property><con:property><con:name>ageGroupIdCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="f54b91e6-97bb-41f5-ab4b-bd3567b68b37" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="47474bef-2139-4681-a55b-f8103f339a79"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.getAgeGroupIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="f3a376b3-46f5-4386-a4e9-b991f6b5d6d3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#ageGroupId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#code}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="4303" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="FROM" field_id="" type="">
								<values>
									<value>${#TestSuite#from}</value>
								</values>
							</attribute>
							<attribute name="TO" field_id="" type="">
								<values>
									<value>${#TestSuite#to}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="a46346f9-9611-4252-9510-cb3e87e747a7"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ag = new AgeGroups(context, testRunner, log)

code=testRunner.testCase.testSuite.getPropertyValue("code")
title = testRunner.testCase.testSuite.getPropertyValue("title")
from=testRunner.testCase.testSuite.getPropertyValue("from").toInteger()
to = testRunner.testCase.testSuite.getPropertyValue("to").toInteger()
id = testRunner.testCase.getPropertyValue("ageGroupId1").toInteger()

def mapReq=[
					id : id,
					code: code ,
					title: title,
					archived: true,
					from: from,
					to: to
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ag.getAgeGroupsMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="a6b08ce0-66fc-4e73-8134-55e4f6772af3"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.clearAgeGroups()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="88aebb8b-807c-4ae1-bd1c-61832aad9edc" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED без атрибута to" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="4a044e94-cd9f-4184-bd52-7518d7d1be1c"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.getAgeGroupIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="f0d0a67f-e717-422c-8def-b9f9f44d3d34"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#ageGroupId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#code}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="4303" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="FROM" field_id="" type="">
								<values>
									<value>${#TestSuite#from}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="791512fe-cdd9-4ba5-97bb-3fb4e0271be1"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ag = new AgeGroups(context, testRunner, log)

code=testRunner.testCase.testSuite.getPropertyValue("code")
title = testRunner.testCase.testSuite.getPropertyValue("title")
from=testRunner.testCase.testSuite.getPropertyValue("from").toInteger()
to = testRunner.testCase.testSuite.getPropertyValue("to").toInteger()
id = testRunner.testCase.getPropertyValue("ageGroupId1").toInteger()

def mapReq=[
					id : id,
					code: code ,
					title: title,
					archived: false,
					from: from,
					to: null
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ag.getAgeGroupsMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="ad5220d8-39bf-49ca-a74e-954b494a349e"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.clearAgeGroups()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="56800cc0-1d12-4ee9-8c7f-8009dc6de574" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="50d35c33-eb26-4291-b68e-4cf2eca9b4c5"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.getAgeGroupIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="f398839d-7bc3-4532-b120-f223a66670e5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#ageGroupId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#code}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="4303" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="FROM" field_id="" type="">
								<values>
									<value>${#TestSuite#from}</value>
								</values>
							</attribute>
							<attribute name="TO" field_id="" type="">
								<values>
									<value>${#TestSuite#to}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="0ba7cecb-6675-4cb7-991d-f11aefa1f70f"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ag = new AgeGroups(context, testRunner, log)

code=testRunner.testCase.testSuite.getPropertyValue("code")
title = testRunner.testCase.testSuite.getPropertyValue("title")
from=testRunner.testCase.testSuite.getPropertyValue("from").toInteger()
to = testRunner.testCase.testSuite.getPropertyValue("to").toInteger()
id = testRunner.testCase.getPropertyValue("ageGroupId1").toInteger()

def mapReq=[
					id : id,
					code: code ,
					title: title,
					archived: false,
					from: from,
					to: to
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ag.getAgeGroupsMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="199cc628-efe0-4d96-a808-2a69305ba60d"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.clearAgeGroups()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="6782670e-457c-47f4-a1d3-59e0f2af14ad" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Создать запись" id="60b07564-e418-438e-88bc-50b6cfe8884b"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.createAgeGroupsForPush(0,1)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="4921d2fb-3d9f-4a84-8483-0720427cba6f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#archivedAgeGroupId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="4303" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="FROM" field_id="" type="">
								<values>
									<value>${#TestSuite#from2}</value>
								</values>
							</attribute>
							<attribute name="TO" field_id="" type="">
								<values>
									<value>${#TestSuite#to2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="5d37d921-8662-4e8e-b737-9c1a8e28567c"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ag = new AgeGroups(context, testRunner, log)

code=testRunner.testCase.testSuite.getPropertyValue("code2")
title = testRunner.testCase.testSuite.getPropertyValue("title2")
from=testRunner.testCase.testSuite.getPropertyValue("from2").toInteger()
to = testRunner.testCase.testSuite.getPropertyValue("to2").toInteger()
id = testRunner.testCase.getPropertyValue("archivedAgeGroupId1").toInteger()

def mapReq=[
					id : id,
					code: code ,
					title: title,
					archived: false,
					from: from,
					to: to
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ag.getAgeGroupsMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="083f7e98-714a-4537-a9e0-f61e95acf869"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.clearAgeGroups(0,1)</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="544f4435-981d-4903-a85c-add12c1f5f9d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и архивирование записи с action=MODIFIED и очистка to" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Создать запись" id="b2626035-5534-4bac-9049-cf1a70c159e4"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.createAgeGroupsForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="7c7bf40f-834c-4bff-99ba-d6a6d2aa135b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#ageGroupId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="4303" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="FROM" field_id="" type="">
								<values>
									<value>${#TestSuite#from2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить отсутствие изменений записи" id="0c8d221b-10a5-4dc3-88f3-2070239a5dad"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ag = new AgeGroups(context, testRunner, log)

code=testRunner.testCase.testSuite.getPropertyValue("code2")
title = testRunner.testCase.testSuite.getPropertyValue("title2")
from=testRunner.testCase.testSuite.getPropertyValue("from2").toInteger()
to = testRunner.testCase.testSuite.getPropertyValue("to2").toInteger()
id = testRunner.testCase.getPropertyValue("ageGroupId1").toInteger()

def mapReq=[
					id : id,
					code: code ,
					title: title,
					archived: true,
					from: from,
					to: null
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ag.getAgeGroupsMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="45427e3c-aa8b-4520-b526-677e226e9e32"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.clearAgeGroups()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="59a6d977-053a-47cc-9cdc-5976a04b975f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и вывод из архива записи с action=MODIFIED и добавление to" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Создать запись" id="945a7d76-e365-4942-b71b-84c614bf337e"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.createAgeGroupsForPush(0,1)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="9a2f0a96-52fb-4540-887d-2b24fedca8ba"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#archivedAgeGroupId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="4303" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="FROM" field_id="" type="">
								<values>
									<value>${#TestSuite#from2}</value>
								</values>
							</attribute>
							<attribute name="TO" field_id="" type="">
								<values>
									<value>${#TestSuite#to2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="2e8de291-62a4-41bd-bc0e-265bf58733dc"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ag = new AgeGroups(context, testRunner, log)

code=testRunner.testCase.testSuite.getPropertyValue("code2")
title = testRunner.testCase.testSuite.getPropertyValue("title2")
from=testRunner.testCase.testSuite.getPropertyValue("from2").toInteger()
to = testRunner.testCase.testSuite.getPropertyValue("to2").toInteger()
id = testRunner.testCase.getPropertyValue("archivedAgeGroupId1").toInteger()

def mapReq=[
					id : id,
					code: code ,
					title: title,
					archived: false,
					from: from,
					to: to
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ag.getAgeGroupsMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="620250b1-1d2a-44eb-ae3a-61de738f9789"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.clearAgeGroups(0,1)</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="8e6b26be-9c1a-4d0c-80bd-c028a6dfcddb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных параметров" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="2b37f5ae-1b74-4c8d-a323-46e36d61cf67"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.getAgeGroupIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без global_id" id="7e6d65da-9141-4d7c-91b9-d615f60a69fc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без global_id" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="CODE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#code}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="4303" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="FROM" field_id="" type="">
								<values>
									<value>${#TestSuite#from}</value>
								</values>
							</attribute>
							<attribute name="TO" field_id="" type="">
								<values>
									<value>${#TestSuite#to}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без CODE" id="d035b49d-8a07-4bbb-b373-cca794be77fd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без CODE" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#ageGroupId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="4303" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="FROM" field_id="" type="">
								<values>
									<value>${#TestSuite#from}</value>
								</values>
							</attribute>
							<attribute name="TO" field_id="" type="">
								<values>
									<value>${#TestSuite#to}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#ageGroupId1} не переданы атрибуты: CODE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без TITLE" id="fcff6019-aaaa-449f-9162-c097247c78b9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без TITLE" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#ageGroupId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#code}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="4303" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="FROM" field_id="" type="">
								<values>
									<value>${#TestSuite#from}</value>
								</values>
							</attribute>
							<attribute name="TO" field_id="" type="">
								<values>
									<value>${#TestSuite#to}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#ageGroupId1} не переданы атрибуты: TITLE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без ARCHIVED" id="232a35c0-ea2d-4ba8-b7e0-66ba1e65ea37"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без ARCHIVED" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#ageGroupId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#code}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="FROM" field_id="" type="">
								<values>
									<value>${#TestSuite#from}</value>
								</values>
							</attribute>
							<attribute name="TO" field_id="" type="">
								<values>
									<value>${#TestSuite#to}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#ageGroupId1} не переданы атрибуты: ARCHIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без FROM" id="46516900-8a78-4450-a1ed-9c3cea9d3d59"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без FROM" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#ageGroupId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#code}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="4303" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="TO" field_id="" type="">
								<values>
									<value>${#TestSuite#to}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#ageGroupId1} не переданы атрибуты: FROM</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="17387967-4d93-4ea3-b9e7-b2a7816cd40f"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.clearAgeGroups()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="66ec9d8d-9c24-43d1-93b8-965213de9490" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Архивирование записи с action=DELETED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Создать запись" id="1c4aea81-9884-4694-8c92-32562b61cb08"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.createAgeGroupsForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="3aec4cc1-fc6a-42d9-9f55-5bd8a83e94a2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="DELETED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#ageGroupId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="4303" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="4303" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="FROM" field_id="" type="">
								<values>
									<value>${#TestSuite#from2}</value>
								</values>
							</attribute>
							<attribute name="TO" field_id="" type="">
								<values>
									<value>${#TestSuite#to2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="e528ff24-8a81-4de7-aff5-aab7a3285c1e"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ag = new AgeGroups(context, testRunner, log)

code=testRunner.testCase.testSuite.getPropertyValue("code2")
title = testRunner.testCase.testSuite.getPropertyValue("title2")
from=testRunner.testCase.testSuite.getPropertyValue("from2").toInteger()
to = testRunner.testCase.testSuite.getPropertyValue("to2").toInteger()
id = testRunner.testCase.getPropertyValue("ageGroupId1").toInteger()

def mapReq=[
					id : id,
					code:  'code_autotest' ,
					title:  'Возрастная группа автотест',
					archived: true,
					from: 300,
					to: null
                ]

                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ag.getAgeGroupsMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="8fff9970-23bb-48bf-887f-8352dedd2f7d"><con:settings/><con:config><script>def ag = new AgeGroups(context, testRunner, log)
ag.clearAgeGroups()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>code</con:name><con:value>AGE_GROUP_CODE</con:value></con:property><con:property><con:name>title</con:name><con:value>Тестовая Возрастная группа</con:value></con:property><con:property><con:name>from</con:name><con:value>0</con:value></con:property><con:property><con:name>to</con:name><con:value>216</con:value></con:property><con:property><con:name>code2</con:name><con:value>AGE_GROUP_CODE1</con:value></con:property><con:property><con:name>title2</con:name><con:value>Тестовая Возрастная группа1</con:value></con:property><con:property><con:name>from2</con:name><con:value>1</con:value></con:property><con:property><con:name>to2</con:name><con:value>217</con:value></con:property><con:property><con:name>categoryId</con:name><con:value>1163</con:value></con:property><con:property><con:name>n</con:name><con:value>189</con:value></con:property></con:properties></con:testSuite><con:testSuite id="1ce54012-afb1-4a1d-8327-82d0336f4eda" name="PRODUCTION_CALENDAR"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="c74c595d-c4ba-4812-b8f3-4f87fd9877ac" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи HOLIDAY  с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="be6bf2c9-313d-4e45-ab45-f6f1cb8e9ba8"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.getProdCalIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="08ce0caf-5fa3-4d9a-bdfe-26870c5f04b5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="c8e8ab05-f2df-430a-bfec-144e5a368950"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date1")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: false ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="c11426d4-f50e-4dda-a304-86eb0d60d146"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>particularity</con:name><con:value>HOLIDAY</con:value></con:property></con:properties></con:testCase><con:testCase id="2dfc91f3-c504-419d-96c8-5337143e450c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи на существующую архивную дату с action=ADDED" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="53829c25-2512-49a8-8c9b-d55796d495f0"><con:settings/><con:config><script>def scripts = new ScriptLibrary(context, testRunner, log)

oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")

title = testRunner.testCase.testSuite.getPropertyValue("title1")
date=testRunner.testCase.testSuite.getPropertyValue("date1")
formatedDate=scripts.formatStringDate(date,oldDateFormat, "yyyy-MM-dd")

columns="id, \"date\", particularity, archived" 
values=" '"+formatedDate+"','HOLIDAY', true"
scripts.createEntitiesInDBwithIndex("tablePCalendar",  columns,  values ,  "oldDayId",1)


table=testRunner.testCase.testSuite.project.getPropertyValue("tablePCalendar")
        
scripts.getDoesntExistedForPush(table,"id" )</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="9f1ce0b5-0a6c-4a61-aeca-e996c561df5a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#id1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>HOLIDAY</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="feecd2bb-2b8c-4902-b68f-5ec1dca5c54e"><con:settings/><con:config><script>def scripts = new ScriptLibrary(context, testRunner, log)
sql=scripts.createDBConnection()

table = testRunner.testCase.testSuite.project.getPropertyValue("tablePCalendar")
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
id = testRunner.testCase.getPropertyValue("id1")
getLastItem = "SELECT * FROM "+table+"  WHERE ID="+id
lastItem= sql.rows(getLastItem)
if ( lastItem.size()== 0){
		testRunner.fail("Запись в таблице "+table+" с id ="+id+"  не найдена")
}
else {
	log.info("Запись в таблице  "+table+" с id ="+id+"  найдена")
	//log.info(lastItem)
	date=testRunner.testCase.testSuite.getPropertyValue("date1")
	def req_date=scripts.formatStringDate(date,oldDateFormat)
	def db_particularity = lastItem[0].particularity.toString()
	def db_date =lastItem[0].date.toString()
	def db_archived = lastItem[0].ARCHIVED
	assert db_archived == true
	assert db_particularity =='HOLIDAY'
	assert db_date ==req_date
	log.info("Запись в таблице создана корректно.")
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="3fb0a5f4-fe60-41a2-8bc9-d0cf015a0357"><con:settings/><con:config><script>def scripts = new ScriptLibrary(context, testRunner, log)
        
scripts.deleteCreatedByTestInTestCaseWithCounter("tablePCalendar","id" )
scripts.deleteCreatedByTestInTestCaseWithCounter("tablePCalendar","oldDayId" )
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="d098f9cf-c837-4894-b852-d89410bc5183" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи на существующую не архивную дату с action=ADDED" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="fa568fc3-7805-47af-8ee3-3fea4a271131"><con:settings/><con:config><script>def scripts = new ScriptLibrary(context, testRunner, log)

oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")

title = testRunner.testCase.testSuite.getPropertyValue("title1")
date=testRunner.testCase.testSuite.getPropertyValue("date1")
formatedDate=scripts.formatStringDate(date,oldDateFormat, "yyyy-MM-dd")

columns="id, \"date\", particularity, archived" 
values=" '"+formatedDate+"','HOLIDAY', false"
scripts.createEntitiesInDBwithIndex("tablePCalendar",  columns,  values ,  "oldDayId",1)


table=testRunner.testCase.testSuite.project.getPropertyValue("tablePCalendar")
        
scripts.getDoesntExistedForPush(table,"id" )</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="b4aac303-90fd-44c1-b949-4b6fe202058d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#id1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>HOLIDAY</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: PRODUCTION_CALENDAR item with date 1990-02-01 and archived false exists</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить отсутствие записи" id="706632cb-95fa-4dc1-9141-a0dd8d90283f"><con:settings/><con:config><script>def scripts = new ScriptLibrary(context, testRunner, log)
sql=scripts.createDBConnection()

table = testRunner.testCase.testSuite.project.getPropertyValue("tablePCalendar")
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
id = testRunner.testCase.getPropertyValue("id1")
getLastItem = "SELECT * FROM "+table+"  WHERE ID="+id
lastItem= sql.rows(getLastItem)
if ( lastItem.size()== 0){
		log.info("Запись в таблице "+table+" с id ="+id+"  не найдена")
}
else {
	testRunner.fail("Запись в таблице  "+table+" с id ="+id+"  найдена")
	
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="1d3cfc42-4e44-40ff-8f49-46430bd330ee"><con:settings/><con:config><script>def scripts = new ScriptLibrary(context, testRunner, log)
        
scripts.deleteCreatedByTestInTestCaseWithCounter("tablePCalendar","id" )
scripts.deleteCreatedByTestInTestCaseWithCounter("tablePCalendar","oldDayId" )
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="21ff9cf5-aea1-4676-aed8-d7905d5fd96d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="764b1286-eb64-4133-a40c-da57ad109d3c"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
def mainScripts = new ScriptLibrary(context, testRunner, log)
mainScripts.sql().getDoesntExistedForPush("tableProdCal","prodCalId2")
pc.createProdCalForPush(true)

</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="7cc993b0-b629-4a12-8417-8e02b6c4ed2f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date2}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="55f9e8c7-7b15-481d-9b8e-bd6e899ed2ca"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date2")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: false ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="16bfaaaf-22d2-441e-8da6-1716e0c6bc5c"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()

</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>prodCalId21</con:name><con:value>1639</con:value></con:property><con:property><con:name>prodCalId2CreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>particularity</con:name><con:value>STATE_AS_SUNDAY</con:value></con:property><con:property><con:name>prodCalId1</con:name><con:value>1642</con:value></con:property><con:property><con:name>prodCalIdCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="b1dae5b7-c443-49e5-904d-15cc4f332038" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи на существующую архивную дату с action=MODIFIED" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="805fab12-9e59-47c9-b049-1088634103ce"><con:settings/><con:config><script>def scripts = new ScriptLibrary(context, testRunner, log)

oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")

title = testRunner.testCase.testSuite.getPropertyValue("title1")
date=testRunner.testCase.testSuite.getPropertyValue("date1")
formatedDate=scripts.formatStringDate(date,oldDateFormat, "yyyy-MM-dd")
date2=testRunner.testCase.testSuite.getPropertyValue("date2")
formatedDate2=scripts.formatStringDate(date2,oldDateFormat, "yyyy-MM-dd")
columns="id, \"date\", particularity, archived" 
values=" '"+formatedDate+"','HOLIDAY', true"
values2=" '"+formatedDate2+"','HOLIDAY', true"
scripts.createEntitiesInDBwithIndex("tablePCalendar",  columns,  values ,  "oldDayId",1)
scripts.createEntitiesInDBwithIndex("tablePCalendar",  columns,  values2 ,  "newDayId",1)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="b2adada8-40a7-4952-923c-0a4e898d9714"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#newDayId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>STATE_AS_WEDNESDAY</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="f09586c4-e342-4542-9741-a927bc2fe19a"><con:settings/><con:config><script>def scripts = new ScriptLibrary(context, testRunner, log)
sql=scripts.createDBConnection()

table = testRunner.testCase.testSuite.project.getPropertyValue("tablePCalendar")
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
id = testRunner.testCase.getPropertyValue("newDayId1")
getLastItem = "SELECT * FROM "+table+"  WHERE ID="+id
lastItem= sql.rows(getLastItem)
if ( lastItem.size()== 0){
		testRunner.fail("Запись в таблице "+table+" с id ="+id+"  не найдена")
}
else {
	log.info("Запись в таблице  "+table+" с id ="+id+"  найдена")
	//log.info(lastItem)
	date=testRunner.testCase.testSuite.getPropertyValue("date1")
	def req_date=scripts.formatStringDate(date,oldDateFormat)
	def db_particularity = lastItem[0].particularity.toString()
	def db_date =lastItem[0].date.toString()
	def db_archived = lastItem[0].ARCHIVED
	assert db_archived == false
	assert db_particularity =='STATE_AS_WEDNESDAY'
	assert db_date ==req_date
	log.info("Запись в таблице изменена корректно.")
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="8537bb02-e79a-448f-8fca-125589ecae68"><con:settings/><con:config><script>def scripts = new ScriptLibrary(context, testRunner, log)
        
scripts.deleteCreatedByTestInTestCaseWithCounter("tablePCalendar","newDayId" )
scripts.deleteCreatedByTestInTestCaseWithCounter("tablePCalendar","oldDayId" )
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="4fce4794-38c1-4489-925a-ce8d4e785f06" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи на существующую не архивную дату с action=MODIFIED" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="dcf9f0b2-8055-490d-8ba4-bbe31c989eaa"><con:settings/><con:config><script>def scripts = new ScriptLibrary(context, testRunner, log)

oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")

title = testRunner.testCase.testSuite.getPropertyValue("title1")
date=testRunner.testCase.testSuite.getPropertyValue("date1")
formatedDate=scripts.formatStringDate(date,oldDateFormat, "yyyy-MM-dd")
date2=testRunner.testCase.testSuite.getPropertyValue("date2")
formatedDate2=scripts.formatStringDate(date2,oldDateFormat, "yyyy-MM-dd")
columns="id, \"date\", particularity, archived" 
values=" '"+formatedDate+"','HOLIDAY', false"
values2=" '"+formatedDate2+"','HOLIDAY', false"
scripts.createEntitiesInDBwithIndex("tablePCalendar",  columns,  values ,  "oldDayId",1)
scripts.createEntitiesInDBwithIndex("tablePCalendar",  columns,  values2 ,  "newDayId",1)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="4b0c6acf-09e1-4a04-849b-8d5fc5654cb3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#newDayId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>STATE_AS_WEDNESDAY</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: PRODUCTION_CALENDAR other item with same date 1990-02-01 and archived false exists</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить отсутствие изменений записи" id="c6c22174-14b7-4f77-8438-d0818ecc3ad0"><con:settings/><con:config><script>def scripts = new ScriptLibrary(context, testRunner, log)
sql=scripts.createDBConnection()

table = testRunner.testCase.testSuite.project.getPropertyValue("tablePCalendar")
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
id = testRunner.testCase.getPropertyValue("newDayId1")
getLastItem = "SELECT * FROM "+table+"  WHERE ID="+id
lastItem= sql.rows(getLastItem)
if ( lastItem.size()== 0){
		testRunner.fail("Запись в таблице "+table+" с id ="+id+"  не найдена")
}
else {
	log.info("Запись в таблице  "+table+" с id ="+id+"  найдена")
	//log.info(lastItem)
	date=testRunner.testCase.testSuite.getPropertyValue("date2")
	def req_date=scripts.formatStringDate(date,oldDateFormat)
	def db_particularity = lastItem[0].particularity.toString()
	def db_date =lastItem[0].date.toString()
	def db_archived = lastItem[0].ARCHIVED
	assert db_archived == false
	assert db_particularity =='HOLIDAY'
	assert db_date ==req_date
	log.info("Запись в таблице изменена корректно.")
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="01412eee-4586-4115-beb9-f85ff6df13cc"><con:settings/><con:config><script>def scripts = new ScriptLibrary(context, testRunner, log)
        
scripts.deleteCreatedByTestInTestCaseWithCounter("tablePCalendar","newDayId" )
scripts.deleteCreatedByTestInTestCaseWithCounter("tablePCalendar","oldDayId" )
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="05b186a9-3bf9-414c-acaf-970289155cf3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных параметров" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="2d254010-b26d-4e0a-b053-b7359878b56e"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.getProdCalIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без global_id" id="c6b7e64f-b4ef-4cc7-8cd5-10c2dcb747b1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без global_id" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>HOLIDAY</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без archived" id="6c7271cb-d473-4f8a-90e1-69761d9ae668"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без archived" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>HOLIDAY</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#prodCalId1} не переданы атрибуты: archived</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без date" id="0132ae4b-a794-4fa2-a767-46685c3caef2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без date" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>HOLIDAY</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#prodCalId1} не переданы атрибуты: date</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без particularity" id="c85e8081-2d52-4c3d-b4a0-b2e475086545"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без particularity" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#prodCalId1} не переданы атрибуты: particularity</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="542e53fa-ae79-4d75-b21d-512aba07d586"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="61037c9c-fcc5-4bc5-8587-5f17f4ffe474" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи STATE_AS_MONDAY с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="98c3ef15-61d3-4187-a121-69ced68da3ce"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.getProdCalIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="5a6913d8-011d-47dd-8451-bb8068dffb46"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="c9a9ffe7-8544-4ab0-9d1b-7d51a8772a47"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date1")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: false ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="9dfdb2fe-85d7-40ac-b206-2785e36e13c9"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>particularity</con:name><con:value>STATE_AS_MONDAY</con:value></con:property></con:properties></con:testCase><con:testCase id="233a77b7-6d68-4cca-8046-8427aa31861e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи STATE_AS_TUESDAY с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="9c3a7c8a-0173-4c64-8ca8-8ddc6993ab0b"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.getProdCalIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="88f40591-b141-4c85-acc0-6d174f77e56f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="164e9d67-c886-448a-84f9-99608f082984"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date1")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: false ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="bbbe474d-ea85-4763-80dd-28538ef60a44"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>particularity</con:name><con:value>STATE_AS_TUESDAY</con:value></con:property></con:properties></con:testCase><con:testCase id="2898a2b8-af04-41aa-a3ef-9a8565ad332c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи STATE_AS_WEDNESDAY с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="81bf8833-90e6-4eb3-9a0d-8ddba59c7f11"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.getProdCalIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="a000a246-f010-4ff7-b573-c3355508dddd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="069e37af-9184-43ad-beb1-f916c7f67ab5"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date1")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: false ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="2259219e-de6f-4e7b-bc2e-36c0e3bc2dfc"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>particularity</con:name><con:value>STATE_AS_WEDNESDAY</con:value></con:property></con:properties></con:testCase><con:testCase id="c4e0ff33-47b2-47a6-9a32-0be537808c72" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи STATE_AS_THURSDAY с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="ce189755-cd77-4fd5-802f-1c0685146d79"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.getProdCalIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="15e1c1f1-5dca-4150-a685-89c50c38fff4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="bf7c7b9a-a4c3-4b98-a4da-7ac7c1349853"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date1")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: false ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="e34910c7-0d8c-4046-a6d0-93ad415236f1"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>particularity</con:name><con:value>STATE_AS_THURSDAY</con:value></con:property></con:properties></con:testCase><con:testCase id="f9addfb3-4a0c-4002-96df-66955ee9f465" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи STATE_AS_FRIDAY с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="1821a37f-7a03-46e5-9a28-856b175445a5"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.getProdCalIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="7ede3519-77c2-4245-9286-1562bb25f302"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="245b2bea-f6fc-4deb-883c-417f30ceaac8"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date1")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: false ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="9964fd43-5c9c-4040-b807-d5268c47cc96"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>particularity</con:name><con:value>STATE_AS_FRIDAY</con:value></con:property></con:properties></con:testCase><con:testCase id="695befed-492c-408f-a931-9835b35efe32" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи STATE_AS_SATURDAY с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="cb056fb4-a484-45db-b539-e9387f6d0a5d"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.getProdCalIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="97d69254-2483-4cc6-970b-689ab8667d6d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="b6c77ef6-4f26-474d-8b16-f92672ebca8e"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date1")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: false ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="d611422b-8a7a-434d-b65a-38480a5be64c"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>particularity</con:name><con:value>STATE_AS_SATURDAY</con:value></con:property></con:properties></con:testCase><con:testCase id="b7d034cd-7e6c-474e-a1dd-330f77be01a0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи STATE_AS_SUNDAY с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="4f325953-8fc2-4c62-87d8-c01a923b0399"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.getProdCalIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="22d7a3c5-c34f-46d0-8373-e7db71e2792b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="02f3451b-0cf9-4b2d-97f2-f7bfca030986"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date1")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: false ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="8f8e08b0-8690-4db5-bb01-934c7a96bef8"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>particularity</con:name><con:value>STATE_AS_SUNDAY</con:value></con:property></con:properties></con:testCase><con:testCase id="bb618455-7f4a-4115-9d3e-4db8c5786621" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="de9d2256-ff93-4b52-ab14-8439c4b7a84f"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.getProdCalIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="a6e5a973-d010-431d-aea7-e18d8f3765ed"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="bc75d6b9-0384-4c2a-af81-40b40c0dd2a3"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date1")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: true ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="d04b1f80-4c66-48ec-b591-f688f81e9806"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>particularity</con:name><con:value>STATE_AS_MONDAY</con:value></con:property></con:properties></con:testCase><con:testCase id="4ecdb8eb-d542-4d16-a445-f37aea0d5ba0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи на существующую но архивную дату с action=ADDED" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="ad119448-5ad9-48c6-a223-6f3054d883ca"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
def mainScripts = new ScriptLibrary(context, testRunner, log)
mainScripts.sql().getDoesntExistedForPush("tableProdCal","prodCalId2")
pc.createProdCalForPush(true)
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="662f438c-c4d3-43ad-8cbc-5662253e8d76"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId21}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date1}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="b1748b13-0143-4925-8eff-3d06e4559e6d"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date1")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: true ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="60842a39-7118-4b3e-a9ec-9f4445463652"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>particularity</con:name><con:value>STATE_AS_MONDAY</con:value></con:property><con:property><con:name>prodCalId21</con:name><con:value>142</con:value></con:property><con:property><con:name>prodCalId2CreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>prodCalId1</con:name><con:value>145</con:value></con:property><con:property><con:name>prodCalIdCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="2747de67-9b8f-423e-bf06-b99095c3ae45" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи на существующую не архивную дату с action=ADDED" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="c5b7e0ba-2d4a-45d8-a869-86acfbc4f9ed"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
def mainScripts = new ScriptLibrary(context, testRunner, log)
mainScripts.sql().getDoesntExistedForPush("tableProdCal","prodCalId2")
pc.createProdCalForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="d2a37822-517a-4bdc-80bc-54f61f35988b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId21}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date4}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>HOLIDAY</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="3396a44d-0fae-4f9c-a7a8-810949e38e62"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)

id = testRunner.testCase.getPropertyValue("prodCalId21").toInteger()
check= mainScripts.sql().checkExistenceInDb("tableProdCal",id )
if (check) testRunner.fail("Запись создана")</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="bf2cb690-e7f1-44d7-b89b-18c97f856760"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>prodCalId21</con:name><con:value>220</con:value></con:property><con:property><con:name>prodCalId2CreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>prodCalId1</con:name><con:value>223</con:value></con:property><con:property><con:name>prodCalIdCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="4b2a8f2f-8ba5-41b8-8234-541a5e194ff3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="81078c73-a1cc-4ab1-a9dd-2c3ca403863d"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.getProdCalIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="3d2e023d-3f61-4225-a113-5001d42c2a78"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date3}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="bc14e4ec-48c5-4722-818f-d5790b98953c"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date3")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: false ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="9bd77444-07c3-41d8-84e4-7e843af3f17a"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>particularity</con:name><con:value>STATE_AS_SUNDAY</con:value></con:property></con:properties></con:testCase><con:testCase id="d0a41e64-15b1-43f4-922f-521dd7f535e1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="8d2d34b6-7179-45e1-88a1-50b0d98f448a"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
def mainScripts = new ScriptLibrary(context, testRunner, log)
mainScripts.sql().getDoesntExistedForPush("tableProdCal","prodCalId2")
pc.createProdCalForPush(true)

</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="28ad20b0-3916-4b30-8b1d-ea8325f86562"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date2}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="80735d41-17c7-4c35-8571-67ade50c78ec"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date=testRunner.testCase.testSuite.getPropertyValue("date2")
particularity=testRunner.testCase.getPropertyValue("particularity")
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: false ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="a78000d2-1958-4462-8bcd-54ffe88233d2"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()

</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>prodCalId21</con:name><con:value>2008</con:value></con:property><con:property><con:name>prodCalId2CreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>particularity</con:name><con:value>STATE_AS_SUNDAY</con:value></con:property><con:property><con:name>prodCalId1</con:name><con:value>2011</con:value></con:property><con:property><con:name>prodCalIdCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="352ad987-d3ff-4c2e-ac66-460ffffd56d4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Архивирование записи с action=DELETED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="322220de-0d2a-4646-a2d9-a0391c127bd8"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
def mainScripts = new ScriptLibrary(context, testRunner, log)
mainScripts.sql().getDoesntExistedForPush("tableProdCal","prodCalId2")
pc.createProdCalForPush()

</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="b6d94bac-bccc-40f5-98cb-481c84328d03"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="DELETED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#prodCalId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="date" field_id="" type="">
								<values>
									<value>${#TestSuite#date2}</value>
								</values>
							</attribute>
							<attribute name="particularity" field_id="" type="">
								<values>
									<value>${#TestCase#particularity}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="a49b0d73-04d6-4388-9a22-1d9d319a49ea"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pc = new ProductionCalendar(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("prodCalId1").toInteger()
date="02.01.2018"
particularity="HOLIDAY"
formattedDate=mainScripts.dates().convertStringToDate(date,"dd.MM.yyyy","yyyy-MM-dd")
def mapReq=[
                        id : id,
                    archived: true ,
                    date: formattedDate,
                    particularity: particularity
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pc.getProdCalMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="056d2df5-9c53-437d-ab92-c384c284ea10"><con:settings/><con:config><script>def pc = new ProductionCalendar(context, testRunner, log)
pc.clearAllByPropertyName()

</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>prodCalId21</con:name><con:value>2383</con:value></con:property><con:property><con:name>prodCalId2CreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>particularity</con:name><con:value>STATE_AS_SUNDAY</con:value></con:property><con:property><con:name>prodCalId1</con:name><con:value>2386</con:value></con:property><con:property><con:name>prodCalIdCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>categoryId</con:name><con:value>1230</con:value></con:property><con:property><con:name>n</con:name><con:value>376</con:value></con:property><con:property><con:name>date1</con:name><con:value>05.01.2017</con:value></con:property><con:property><con:name>date2</con:name><con:value>02.02.1990</con:value></con:property><con:property><con:name>date3</con:name><con:value>03.02.1990</con:value></con:property><con:property><con:name>date4</con:name><con:value>04.02.1990</con:value></con:property><con:property><con:name>date5</con:name><con:value>05.02.1990</con:value></con:property><con:property><con:name>date6</con:name><con:value>06.02.1990</con:value></con:property><con:property><con:name>date7</con:name><con:value>08.02.1990</con:value></con:property><con:property><con:name>dateTimeFormat</con:name><con:value>yyyy-MM-dd</con:value></con:property><con:property><con:name>oldDateFormat</con:name><con:value>dd.MM.yyyy</con:value></con:property></con:properties></con:testSuite><con:testSuite id="cc9e11f0-929b-4e79-b1b7-ac5a51925f8f" name="SPECIALIZATION"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="5836fdbb-9cb1-46bb-98b8-f75135c8e9d4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="1238b90a-4187-4957-92fd-f1c85f36adfd"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)
spec.getSpecializationIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="6be4f93e-c83e-468f-9a1d-a9b6e17568eb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="title" field_id="" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="8bf1e199-da89-4548-a191-3033d023be5d"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def spec = new Specializations(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("specId1").toInteger()

def specMapReq=[
                        id : id,
                        archived: false ,
                        title: title
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=spec.getSpecializationMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(specMapReq,dbMap )

</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="10aefa2e-8caa-4bd7-9b9a-d5fa6c8912e8"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)

spec.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="a6e547f3-bab4-4143-b078-93772287650a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="079fff26-c1bc-4458-a984-a72591031fe9"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)
spec.getSpecializationIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="66599fd6-f346-4085-8007-184b2d082008"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="title" field_id="" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="040ed54e-d2f8-4fd1-b7c1-075a73edf8ef"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def spec = new Specializations(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("specId1").toInteger()

def specMapReq=[
                        id : id,
                        archived: true ,
                        title: title
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=spec.getSpecializationMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(specMapReq,dbMap )

</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="2d424b88-c453-49b6-bc15-e3617d0f8431"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)
spec.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="9fc3a4e7-b8eb-4982-8943-203f9b69a849" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="e2359d7d-af8c-4784-b779-2059c12e78b5"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)
spec.getSpecializationIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="a26cc092-4e04-4dd2-b72b-13ef3c49b3fe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="title" field_id="" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="82dff5e5-d2cb-4638-a66b-0d3b6c285d8d"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def spec = new Specializations(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title")
id = testRunner.testCase.getPropertyValue("specId1").toInteger()

def specMapReq=[
                        id : id,
                        archived: false ,
                        title: title
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=spec.getSpecializationMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(specMapReq,dbMap )

</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="4aab0a86-c679-4d28-bdd6-95013b595d28"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)

spec.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="f0e482cf-04c7-4e53-9811-7d60b2fe9278" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="120331be-07db-420b-829d-e37dd25d987c"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)
spec.createSpecializationsForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="39baf4c5-d1e8-45ca-9b18-05dda7f80dba"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="title" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="87205554-dfa0-4d44-974d-36e1dee62356"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def spec = new Specializations(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title2")
id = testRunner.testCase.getPropertyValue("specId1").toInteger()

def specMapReq=[
                        id : id,
                        archived: true ,
                        title: title
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=spec.getSpecializationMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(specMapReq,dbMap )

</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="c45530d3-4279-4713-ad15-af946fb4b618"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)
spec.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="3b5780f2-c2fd-4c2a-b1bc-6eeb560083a2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и архивирование записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="f4c2a595-0ea7-434f-818d-525e7273af94"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)
spec.createSpecializationsForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="12974b7f-d588-4134-8e35-acff6726d63f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="title" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="95c3aee7-63cf-48f1-b05b-26a16ac286fb"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def spec = new Specializations(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title2")
id = testRunner.testCase.getPropertyValue("specId1").toInteger()

def specMapReq=[
                        id : id,
                        archived: true ,
                        title: title
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=spec.getSpecializationMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(specMapReq,dbMap )

</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="ab4e0d24-13e6-42f1-8907-b2bfd1ef559e"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)
spec.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="f44c8aba-8fbb-43de-a424-ace1c7a8a101" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и вывод из архива записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="5b548058-de24-4f46-a965-048b9026eb64"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)
spec.createSpecializationsForPush(0,1)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="9a2e1a45-22d1-4d8f-9bdb-414416d6d582"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#archivedSpecId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="title" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="3a24eb25-d663-46b7-b059-ab956e6f894c"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def spec = new Specializations(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title2")
id = testRunner.testCase.getPropertyValue("archivedSpecId1").toInteger()

def specMapReq=[
                        id : id,
                        archived: false ,
                        title: title
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=spec.getSpecializationMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(specMapReq,dbMap )

</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="04e116b9-e333-4337-aa7b-1c995d9731e8"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)
spec.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="0b4bf359-89c8-44c5-8814-a1b61a82ec5c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Архивирование записи с action=DELETED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="e2ff6f0a-1a78-4a7f-b0d8-99eb1c3c51db"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)
spec.createSpecializationsForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="e31bf604-a846-4ce9-a1de-7f8e103fe3f9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="DELETED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="title" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить архивирование записи в БД" id="ed82b9ce-9456-4b21-a086-13fbc4df8dae"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def spec = new Specializations(context, testRunner, log)

def title ="Специализация автотест РиР.2"
id = testRunner.testCase.getPropertyValue("specId1").toInteger()

def specMapReq=[
                        id : id,
                        archived: true ,
                        title: title
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=spec.getSpecializationMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(specMapReq,dbMap )

</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="306921fa-edcf-4786-980b-c0f126899c74"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)
spec.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="7ad4dd53-357a-4941-b35e-449c3139d044" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных параметров" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="a261dc6d-8130-4431-9fe5-27336ab8754a"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)

spec.getSpecializationIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без global_id" id="834e7da7-8644-49c7-92d3-30812880a9b5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без global_id" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="title" field_id="" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без archived" id="408c1812-3473-4d96-a480-45e2f7d49c75"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без archived" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="title" field_id="" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#specId1} не переданы атрибуты: archived</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без title" id="9bd50112-fb9a-423d-ac09-43fb38131130"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без title" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="archived" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#specId1} не переданы атрибуты: title</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="30b7e8b3-3271-4eb9-872c-a55557562cca"><con:settings/><con:config><script>def spec = new Specializations(context, testRunner, log)

spec.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>title</con:name><con:value>Тестовая Специализация</con:value></con:property><con:property><con:name>title2</con:name><con:value>Тестовая Специализация1</con:value></con:property><con:property><con:name>categoryId</con:name><con:value>1115</con:value></con:property><con:property><con:name>n</con:name><con:value>286</con:value></con:property></con:properties></con:testSuite><con:testSuite id="9a395707-8c13-4aa2-a591-d47681c75dce" name="MKB-10"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="536c468b-834a-4209-b7f4-2db681faaf62" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="634157de-f9d9-4307-8ef4-ebae8a3c2af8"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)

d.getDiagnosisIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="b57d8c25-10ac-4829-ab1d-98389e0dd7bf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#diagnosisId1}</value>
								</values>
							</attribute>
							<attribute name="ACTUAL_OFFICIAL" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="NAME_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="REC_CODE_OFFICIAL" field_id="" type="">
								<values>
									<value>ф</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="c5d67ace-5368-4eb9-9002-fc89876a7432"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def d = new Diagnosis(context, testRunner, log)

 title = testRunner.testCase.testSuite.getPropertyValue("title1")
 code=testRunner.testCase.testSuite.getPropertyValue("code1")
id = testRunner.testCase.getPropertyValue("diagnosisId1").toInteger()

def diagMapReq=[
                        id : id,
                        archived: false ,
                        title: title,
                        code:code
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=d.getDiagnosisMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(diagMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="d3361121-c717-43d3-a69b-2393b77b94ae"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)
d.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="50b79605-2e2c-4846-a6a1-a35dd74abd9c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи без кода с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="85d164d6-ca85-46df-bc09-3e3e264ef2d4"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)

d.getDiagnosisIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="50638887-e063-4d59-ba80-bad66c4c1764"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#diagnosisId1}</value>
								</values>
							</attribute>
							<attribute name="ACTUAL_OFFICIAL" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="NAME_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="d3ddf296-e7c1-4526-9901-bbdbcef5761b"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def d = new Diagnosis(context, testRunner, log)

 title = testRunner.testCase.testSuite.getPropertyValue("title1")
 code=testRunner.testCase.testSuite.getPropertyValue("code1")
id = testRunner.testCase.getPropertyValue("diagnosisId1").toInteger()

def diagMapReq=[
                        id : id,
                        archived: false ,
                        title: title,
                        code:null
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=d.getDiagnosisMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(diagMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="ce68c09c-840f-4d1f-8ecd-81c1d0c660b5"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)
d.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>diagnosisId1</con:name><con:value>158374466</con:value></con:property><con:property><con:name>diagnosisIdCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="ee5269bf-7bae-48f9-91c0-2182d82dc226" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="17306118-cdb2-4f67-aaf9-486d3e79bb2f"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)

d.getDiagnosisIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="e321b73f-238e-47c6-8407-87fc53339d03"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#diagnosisId1}</value>
								</values>
							</attribute>
							<attribute name="ACTUAL_OFFICIAL" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="NAME_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="ab30450d-3916-417d-8997-9b6305ee9c95"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def d = new Diagnosis(context, testRunner, log)

 title = testRunner.testCase.testSuite.getPropertyValue("title1")
 code=testRunner.testCase.testSuite.getPropertyValue("code1")
id = testRunner.testCase.getPropertyValue("diagnosisId1").toInteger()

def diagMapReq=[
                        id : id,
                        archived: false ,
                        title: title,
                        code:code
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=d.getDiagnosisMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(diagMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="fece0814-41af-4c5b-aa63-bec65cb9ca35"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)
d.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="399233be-5590-4c39-918f-aeae76d8b7db" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Создать запись в БД" id="e3e1f9c1-7569-42d9-9949-05a12310f1fb"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)
d.createDiagnosisForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="75394805-ade1-46f9-bb5c-ce40c6863c0f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#diagnosisId1}</value>
								</values>
							</attribute>
							<attribute name="ACTUAL_OFFICIAL" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="NAME_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="e0c50bd4-a754-43b7-908e-02b508893acb"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def d = new Diagnosis(context, testRunner, log)

 title = testRunner.testCase.testSuite.getPropertyValue("title2")
 code=testRunner.testCase.testSuite.getPropertyValue("code2")
id = testRunner.testCase.getPropertyValue("diagnosisId1").toInteger()

def diagMapReq=[
                        id : id,
                        archived: true ,
                        title: title,
                        code:code
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=d.getDiagnosisMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(diagMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="6361b9bf-5c41-4a85-a470-9e9f4c7064fa"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)
d.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="5cabe41b-8ff5-4ca9-980a-40b34da16bd0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и архивирование записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Создать запись в БД" id="f273083b-8a92-4d9f-a632-523d4c4e1b4c"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)
d.createDiagnosisForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="8d732217-98da-47ab-9545-4637ee8651f2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#diagnosisId1}</value>
								</values>
							</attribute>
							<attribute name="ACTUAL_OFFICIAL" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="NAME_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="bd9392ee-ccdf-4cc2-8c64-f51c356cf316"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def d = new Diagnosis(context, testRunner, log)

 title = testRunner.testCase.testSuite.getPropertyValue("title2")
 code=testRunner.testCase.testSuite.getPropertyValue("code2")
id = testRunner.testCase.getPropertyValue("diagnosisId1").toInteger()

def diagMapReq=[
                        id : id,
                        archived: true ,
                        title: title,
                        code:code
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=d.getDiagnosisMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(diagMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="ac4c05a0-f67f-4ade-a82b-7bff223e1df3"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)
d.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="ca3afea7-3993-40d2-8423-5210c654661c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и вывод из архива записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Создать запись в БД" id="520c9542-da54-4952-9d6c-4dc703c56d8b"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)
d.createDiagnosisForPush(0,1)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="14ac881c-ae0b-4bb7-a4d8-c91e102f1ccf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#archivedDiagnosisId1}</value>
								</values>
							</attribute>
							<attribute name="ACTUAL_OFFICIAL" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="NAME_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="616942e6-ab43-48a1-9a1c-8b02c068cf5c"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def d = new Diagnosis(context, testRunner, log)

 title = testRunner.testCase.testSuite.getPropertyValue("title2")
 code=testRunner.testCase.testSuite.getPropertyValue("code2")
id = testRunner.testCase.getPropertyValue("archivedDiagnosisId1").toInteger()

def diagMapReq=[
                        id : id,
                        archived: false ,
                        title: title,
                        code:code
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=d.getDiagnosisMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(diagMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="7e72a0c6-3721-4d1a-86e7-3fedd491b081"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)
d.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="e30f7f4b-65fd-4684-a4d5-66fdafb339d5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Архивирование записи с action=DELETED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Создать запись в БД" id="666e42c9-ddeb-4683-8f05-d5c1e47b3c45"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)
d.createDiagnosisForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="25e65045-c5e4-4adf-a326-a3dd80efcde7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="DELETED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#diagnosisId1}</value>
								</values>
							</attribute>
							<attribute name="ACTUAL_OFFICIAL" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="NAME_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить архивирование записи в БД" id="7426dd8b-dc8c-42c1-931b-b545224714f0"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def d = new Diagnosis(context, testRunner, log)

id = testRunner.testCase.getPropertyValue("diagnosisId1").toInteger()

def diagMapReq=[
                        id : id,
                        archived: true ,
                        title: "Диагноз автотест",
                        code:"code autotest"
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=d.getDiagnosisMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(diagMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="295845a7-75d8-4133-9f7f-0f1d04128166"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)
d.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="20ac006e-d0c1-4c5f-89ad-bd23a1878af8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных атрибутов" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="098e143c-29ac-460d-a92f-8df82615607b"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)

d.getDiagnosisIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без ACTUAL" id="055bd395-6b58-4f23-ae45-9818995b32fd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без ACTUAL" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#diagnosisId1}</value>
								</values>
							</attribute>
							<attribute name="CODE_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="NAME_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#diagnosisId1} не переданы атрибуты: ACTUAL_OFFICIAL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без CODE" id="64ce1030-8f59-47f7-895c-2675624c6ab9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без CODE" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#diagnosisId1}</value>
								</values>
							</attribute>
							<attribute name="ACTUAL_OFFICIAL" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="NAME_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#diagnosisId1} не переданы атрибуты: CODE_OFFICIAL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без NAME" id="3e4c5bf7-2d2c-4916-b63b-1cd08d636c0b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без NAME" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#diagnosisId1}</value>
								</values>
							</attribute>
							<attribute name="ACTUAL_OFFICIAL" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#diagnosisId1} не переданы атрибуты: NAME_OFFICIAL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без GLOBAL_ID" id="3aaa54f0-0a76-4b88-8438-f09be1ce5f8e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без GLOBAL_ID" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="ACTUAL_OFFICIAL" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="NAME_OFFICIAL" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id:  не переданы атрибуты: GLOBAL_ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="0509083b-e190-44b9-a15b-31c8238a44d2"><con:settings/><con:config><script>def d = new Diagnosis(context, testRunner, log)
d.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>code2</con:name><con:value>code_autotest2</con:value></con:property><con:property><con:name>title2</con:name><con:value>title_autotest2</con:value></con:property><con:property><con:name>categoryId</con:name><con:value>2503</con:value></con:property><con:property><con:name>n</con:name><con:value>175</con:value></con:property></con:properties></con:testSuite><con:testSuite id="f9e1bb0f-7e22-47a6-adf9-07da42aa030d" name="RESOURCE_TYPE"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="8184b878-a07b-4a50-a7b5-1a77a1919976" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи с типом SPECIAL_AVAILABLE_RESOURCE с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="095017b4-0227-4bfe-8778-9db8a74c236f"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.getResourceTypeIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="9c2ad9b3-39fc-4d9e-89f1-400be59e3888"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>SPECIAL_AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="400c5706-44d8-4717-8e6d-aa8e929fc41e"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def rt = new ResourceTypes(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title1")
id = testRunner.testCase.getPropertyValue("resTypeId1").toInteger()

def rtMapReq=[
                        id : id,
                        archived: false ,
                        title: title,
                        resKind: "SPECIAL_AVAILABLE_RESOURCE"
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=rt.getResourceTypeMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(rtMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="39244bb5-3338-492e-88a0-a33d83c86f7b"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="e3c4c542-fd9f-4558-9e2c-284a9fc66956" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи по archived с типом AVAILABLE_RESOURCE с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="fc0cbec8-6156-4154-b4aa-d937f1eaf8cc"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.getResourceTypeIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="80413cbe-25e0-4780-a98e-5c1d4c0b24f7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="55e9b7bf-84ab-4363-ac65-5f4174ef25fb"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def rt = new ResourceTypes(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title1")
id = testRunner.testCase.getPropertyValue("resTypeId1").toInteger()

def rtMapReq=[
                        id : id,
                        archived: true ,
                        title: title,
                        resKind: "AVAILABLE_RESOURCE"
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=rt.getResourceTypeMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(rtMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="b215167c-c5a7-401d-aba1-2d9da8fc6e55"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="e7ddebbb-861b-4fe4-88a1-f1a6a4768f5b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи по is_deleted с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="a21e02a0-788c-4ce8-b387-3f4c9e85da27"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.getResourceTypeIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="941de5bb-e56a-41a7-a230-5894be8251ac"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="6cad0b9e-3556-4e2c-9b0b-93df16aafdbd"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def rt = new ResourceTypes(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title1")
id = testRunner.testCase.getPropertyValue("resTypeId1").toInteger()

def rtMapReq=[
                        id : id,
                        archived: true ,
                        title: title,
                        resKind: "AVAILABLE_RESOURCE"
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=rt.getResourceTypeMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(rtMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="9d5f2008-a7ff-49ba-9cbb-314a1854c736"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="73b13ed3-6dec-4fe8-8172-2da06b2f34be" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи по is_deleted и archived с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="7ce699b7-da94-4a61-b3f5-33236e15e6d1"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.getResourceTypeIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="7190575e-47c3-468c-bc31-864b6955b80b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="b94e3b1e-bc58-463b-8a73-c00b97c40493"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def rt = new ResourceTypes(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title1")
id = testRunner.testCase.getPropertyValue("resTypeId1").toInteger()

def rtMapReq=[
                        id : id,
                        archived: true ,
                        title: title,
                        resKind: "AVAILABLE_RESOURCE"
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=rt.getResourceTypeMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(rtMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="5b2d8065-8d26-4853-8f6a-b64a19110f17"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="eb63f2af-a4d1-49dc-bac5-24a460d4f692" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи с некорректным типом с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="34f56e53-7e09-4c02-baec-2eb0335a74d6"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.getResourceTypeIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="3c35f837-0dd8-4f72-8839-7d9548d1a1ea"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>NEW_AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных передано необрабатываемое значение атрибута RESOURCE_KIND</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить отсутствие записи в БД" id="c07710b5-e35e-4926-91b1-fd5c400ad296"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)

def table = testRunner.testCase.testSuite.project.getPropertyValue("tableResType")
id = testRunner.testCase.getPropertyValue("resTypeId1").toInteger()

existence=mainScripts.sql().checkExistenceInDb("tableResType",id)
if(!existence) log.info "запись с id="+id+" в таблице "+table+" не создана"
else testRunner.fail("запись с id="+id+" в таблице "+table+" создана")</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="b83f5c86-e1c2-4b9f-928f-03455c7cf501"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="fb56d947-f8cb-4213-b724-2e3dd6eab0ca" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="a1333c76-f2cb-4d19-86c7-800a1f74c7fe"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.createSResourceTypeForPush(1,0, true)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="21532fa6-9a81-4a7f-9700-88ba66e9d72c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="b0304065-5959-483b-bc40-5a27e8637633"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def rt = new ResourceTypes(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title2")
id = testRunner.testCase.getPropertyValue("resTypeId1").toInteger()

def rtMapReq=[
                        id : id,
                        archived: false ,
                        title: title,
                        resKind: "AVAILABLE_RESOURCE"
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=rt.getResourceTypeMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(rtMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="e4483100-1960-4728-bfba-8644bc2d4885"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="20b97ded-df99-4e97-bbc1-d06bd205b552" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и вывод из архива записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="3ada4854-29e4-4bcd-9eab-b349a68d9227"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.createSResourceTypeForPush(1,0, true)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="249c5bf1-2ba0-4571-9d03-a0f72b17dcab"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="ad643c8e-6c2e-4bbd-b676-d7608aeb363b"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def rt = new ResourceTypes(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title2")
id = testRunner.testCase.getPropertyValue("resTypeId1").toInteger()

def rtMapReq=[
                        id : id,
                        archived: false ,
                        title: title,
                        resKind: "AVAILABLE_RESOURCE"
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=rt.getResourceTypeMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(rtMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="957fbe08-0458-43b2-925a-b3f191d51907"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="fa54f472-3c19-4f7a-a411-0181890a695e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и архивирование по archived записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="9b5e6208-04ae-450f-a219-a58778532af8"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.createSResourceTypeForPush(1,0, false)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="0bf6fd13-72b7-419a-9e65-90c4e139d0e9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>SPECIAL_AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="f03fb7a2-7f85-414d-ac25-20f1e543289c"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def rt = new ResourceTypes(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title2")
id = testRunner.testCase.getPropertyValue("resTypeId1").toInteger()

def rtMapReq=[
                        id : id,
                        archived: true ,
                        title: title,
                        resKind: "SPECIAL_AVAILABLE_RESOURCE"
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=rt.getResourceTypeMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(rtMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="b299ff62-89bd-4cda-8aa7-60e0b4c06d7d"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="d2cd1fa9-7a16-4a82-8741-ef05ef2a6d61" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и архивирование по is_deleted записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="cf124d32-9b9b-4be8-b61d-a697655cfe81"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.createSResourceTypeForPush(1,0, true)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="4944bdef-1b22-4855-89b6-448caf785c9d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>SPECIAL_AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="33669525-f80f-4d2f-922a-9a273a064f47"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def rt = new ResourceTypes(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title2")
id = testRunner.testCase.getPropertyValue("resTypeId1").toInteger()

def rtMapReq=[
                        id : id,
                        archived: true ,
                        title: title,
                        resKind: "SPECIAL_AVAILABLE_RESOURCE"
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=rt.getResourceTypeMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(rtMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="2fd5f898-b647-4986-800b-a0ce1223f6f3"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="3021399f-76b1-4bc5-a9c0-99e0788478ab" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и архивирование по is_deleted и archived записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="b3231aaf-5320-487c-8578-2edc11735d60"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.createSResourceTypeForPush(1,0, false)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="f756ff86-8195-4e93-892c-93a867c8e8d6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>SPECIAL_AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="757da635-8b68-4332-85bc-c7dc9f603040"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def rt = new ResourceTypes(context, testRunner, log)

def title = testRunner.testCase.testSuite.getPropertyValue("title2")
id = testRunner.testCase.getPropertyValue("resTypeId1").toInteger()

def rtMapReq=[
                        id : id,
                        archived: true ,
                        title: title,
                        resKind: "SPECIAL_AVAILABLE_RESOURCE"
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=rt.getResourceTypeMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(rtMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="67d5ea47-6db2-4d7a-8fe3-1cf284ce2a5d"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="4310753a-ee30-4da5-a259-574d537d74bc" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение типа записи на некорректный с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="cbb60ef2-2cef-4d06-8120-a3ee68e8fa5e"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.createSResourceTypeForPush(1,0, false)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="2ddee313-1580-4ada-bc49-2910a4b28d2a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>NEW_AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных передано необрабатываемое значение атрибута RESOURCE_KIND</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить отсутствие изменений записи в БД" id="754b6597-7135-43b7-be96-460a13869ee5"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def rt = new ResourceTypes(context, testRunner, log)

def title = "Тип ресурса автотест"
id = testRunner.testCase.getPropertyValue("resTypeId1").toInteger()

def rtMapReq=[
                        id : id,
                        archived: false ,
                        title: title,
                        resKind: "AVAILABLE_RESOURCE"
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=rt.getResourceTypeMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(rtMapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="5a402f1e-512f-4b08-8fe1-e48a4d775688"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="ff9b82d6-1fe7-4e34-b7b8-97fb7cc5a07d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Архивирование записи с action=DELETED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="acee2c73-2dc7-4627-9f10-f5312d481855"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.createSResourceTypeForPush(1,0, false)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="58ea618d-a956-4dea-8c42-4ae60a3298b2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="DELETED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>SPECIAL_AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="8704b7f9-5e03-46e2-89fc-7d538cb5cbb4"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def rt = new ResourceTypes(context, testRunner, log)

def title ="Тип ресурса автотест"
id = testRunner.testCase.getPropertyValue("resTypeId1").toInteger()

def rtMapReq=[
                        id : id,
                        archived: true ,
                        title: title,
                        resKind: "AVAILABLE_RESOURCE"
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=rt.getResourceTypeMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(rtMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="ebc99b1d-d5e3-479d-b648-ebdc2f983ac7"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>id1</con:name><con:value>156645369</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="63f37725-e74b-405e-bd18-e649a9bf1e87" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных параметров" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="4d70e271-367a-4a10-81fc-e3f3fd69e826"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.getResourceTypeIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без global_id" id="04613a97-b00e-437d-b314-6d6aa954193a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без global_id" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id1" field_id="" type="">
								<values>
									<value>${#TestCase#id1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>SPECIAL_AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без ARCHIVED" id="c3eeec88-a677-4dbb-9ca8-e60ca9b1500f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без ARCHIVED" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>SPECIAL_AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#resTypeId1} не переданы атрибуты: ARCHIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без IS_DELETED" id="c6d3bbd3-e7df-4373-acf1-46b0ae645535"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без IS_DELETED" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>SPECIAL_AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#resTypeId1} не переданы атрибуты: IS_DELETED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без RESOURCE_KIND" id="dddb58cd-76cc-4b23-9dd4-d9988c801354"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без RESOURCE_KIND" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#resTypeId1} не переданы атрибуты: RESOURCE_KIND</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без TITLE" id="b6a981e6-3f47-4178-99fa-83c1d2e24ce5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без TITLE" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#resTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="IS_DELETED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_KIND" field_id="" type="">
								<values>
									<value>SPECIAL_AVAILABLE_RESOURCE</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#resTypeId1} не переданы атрибуты: TITLE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="769247eb-b5a4-4ce9-8a14-db5da12760d8"><con:settings/><con:config><script>def rt = new ResourceTypes(context, testRunner, log)
rt.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>id1</con:name><con:value>158297711</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>categoryId</con:name><con:value>2504</con:value></con:property><con:property><con:name>n</con:name><con:value>242</con:value></con:property><con:property><con:name>title1</con:name><con:value>Тестовый тип ресурса</con:value></con:property><con:property><con:name>title2</con:name><con:value>Тестовый тип ресурса2</con:value></con:property></con:properties></con:testSuite><con:testSuite id="d1077628-9454-4ef1-bf62-a0e2245a03c5" name="TREATMENT_CATEGORY"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="f01f7b0e-647b-4c3b-b815-061ee05afe34" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="0b69b1aa-2ddf-4836-b7db-3efb816a38db"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// найти несуществующий идентификатор
t.getTCIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="2823d1f7-6c6b-4c4a-91b3-bda028333589"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="b3aafa25-9a93-4749-ba3a-cc929c077a28"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def t = new Treatments(context, testRunner, log)
// получить все данные используемые в запросе
title = testRunner.testCase.testSuite.getPropertyValue("title1")
code=testRunner.testCase.testSuite.getPropertyValue("code1")
id = testRunner.testCase.getPropertyValue("tcId1").toInteger()
// собрать мапу из данных из запроса
def mapReq=[
                     	id : id,
                    	archived: false ,
                   	 	title: title,
                    	code: code
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=t.getTCMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="eaf0580a-4390-4c33-8f10-32a7a1114212"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// удалить созданную запись
t.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="529fb850-c180-4c94-93cb-7a7809f9021a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="e0c0add2-b58d-46f2-902f-af62c1026fc6"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// найти несуществующий идентификатор
t.getTCIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="73152ad8-8576-433e-9d18-0e107895ac84"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="7472fb91-2b0c-4713-a7ff-b42efe7471bb"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def t = new Treatments(context, testRunner, log)
// получить все данные используемые в запросе
title = testRunner.testCase.testSuite.getPropertyValue("title1")
code=testRunner.testCase.testSuite.getPropertyValue("code1")
id = testRunner.testCase.getPropertyValue("tcId1").toInteger()
// собрать мапу из данных из запроса
def mapReq=[
                     	id : id,
                    	archived: false ,
                   	 	title: title,
                    	code: code
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=t.getTCMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="0bba4716-75cd-4fb8-b443-2eeb6dd6d7fc"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// удалить созданную запись
t.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="89de0586-b7b7-4072-a476-af3595eb5de0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="63ac9b36-b207-4fa6-9319-40660a3d2f81"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// найти несуществующий идентификатор
t.createTCForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="0a26d086-4255-4e15-a28f-f2a9e0220542"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="7488128c-8926-4371-9731-4a944faa5e83"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def t = new Treatments(context, testRunner, log)
// получить все данные используемые в запросе
title = testRunner.testCase.testSuite.getPropertyValue("title1")
code=testRunner.testCase.testSuite.getPropertyValue("code1")
id = testRunner.testCase.getPropertyValue("tcId1").toInteger()
// собрать мапу из данных из запроса
def mapReq=[
                     	id : id,
                    	archived: false ,
                   	 	title: title,
                    	code: code
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=t.getTCMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="688ac2c0-b924-4537-9d9c-552c4e42faef"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// удалить созданную запись
t.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="e1102500-6651-4faf-8c48-090109dd1ecb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="9fa5d6ca-5bf9-41ea-9f3b-812b7954b4be"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// найти несуществующий идентификатор
t.createTCForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="76d3b043-492a-4fdf-8d02-bfca93704985"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="bec10258-6407-47ec-803e-cb27a05d2d91"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def t = new Treatments(context, testRunner, log)
// получить все данные используемые в запросе
title = testRunner.testCase.testSuite.getPropertyValue("title1")
code=testRunner.testCase.testSuite.getPropertyValue("code1")
id = testRunner.testCase.getPropertyValue("tcId1").toInteger()
// собрать мапу из данных из запроса
def mapReq=[
                     	id : id,
                    	archived: false ,
                   	 	title: title,
                    	code: code
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=t.getTCMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="aa388f00-99ec-41e3-8de4-82b49307e038"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// удалить созданную запись
t.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="70f70893-be35-4e70-b1e8-43cc2a866c16" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Архивирование записи с action=DELETED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="7e23a334-4ee8-4578-9a55-b6785fdcf971"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// найти несуществующий идентификатор
t.createTCForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="e66814fe-7e15-4a1f-b00a-ae4fb4a447ef"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="DELETED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="cc24711a-ec43-421e-8842-d6edb9c51506"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def t = new Treatments(context, testRunner, log)
// получить все данные используемые в запросе
title = 'Категория ММ для пушей автотест'
code='code_autotest_push'
id = testRunner.testCase.getPropertyValue("tcId1").toInteger()
// собрать мапу из данных из запроса
def mapReq=[
                     	id : id,
                    	archived: true ,
                   	 	title: title,
                    	code: code
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=t.getTCMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="ce30225c-10a5-4a4c-b651-25fc60351f1b"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// удалить созданную запись
t.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="a6e4ff51-cbd2-4087-92e5-3f9ad21fb43f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных параметров" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="67b8192a-e5a7-4b60-8005-0591bc4e9718"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// найти несуществующий идентификатор
t.getTCIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без global_id" id="bc1d22ae-1699-4fd8-8ee7-f4ac4bb01509"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без global_id" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без CODE" id="109da2a3-e196-4466-8283-313846c3bba5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без CODE" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#tcId1} не переданы атрибуты: CODE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без TITLE" id="216ca9a4-a36b-4486-a3c8-1f7959d9b4bb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без TITLE" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#tcId1} не переданы атрибуты: TITLE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="85ae02d6-b2fb-4c94-a9b1-f73313417f9a"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// удалить созданную запись
t.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>categoryId</con:name><con:value>1222</con:value></con:property><con:property><con:name>n</con:name><con:value>117</con:value></con:property><con:property><con:name>title1</con:name><con:value>Тестовая категория ММ</con:value></con:property><con:property><con:name>title2</con:name><con:value>Тестовая категория ММ2</con:value></con:property><con:property><con:name>code1</con:name><con:value>test_code</con:value></con:property><con:property><con:name>code2</con:name><con:value>test_code2</con:value></con:property></con:properties></con:testSuite><con:testSuite id="1ae1a219-1d54-418e-9c82-bb7ab52dfe2b" name="TREATMENT"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="4431617a-35fc-4736-8cb1-202e3527b4fb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи с action=ADDED_ID341371" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="21337c2b-067b-4794-8ce7-385ad85cd187"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// найти несуществующий идентификатор
t.getTreatmentIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="66b354fa-f0d5-4c18-b579-c40362c54bf6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration1}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="d9320855-c4f9-40ab-b758-0bbf3fa3a822"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def t = new Treatments(context, testRunner, log)
// получить все данные используемые в запросе
title = testRunner.testCase.testSuite.getPropertyValue("title1")
code=testRunner.testCase.testSuite.getPropertyValue("code1")
defaultDuration = testRunner.testCase.testSuite.getPropertyValue("defaultDuration1").toInteger()
cfId = testRunner.testCase.testSuite.getPropertyValue("communicationFormId1").toInteger()
tcId = testRunner.testCase.getPropertyValue("tcId1").toInteger()
id = testRunner.testCase.getPropertyValue("treatmentId1").toInteger()
// собрать мапу из данных из запроса
def mapReq=[
                     	id : id,
                    	archived: false ,
                   	 	title: title,
                    	code: code,
                   		 tcId: tcId ,
            		     defDuration: defaultDuration ,
             		     commFormId: cfId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=t.getTreatmentMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="ff1792a1-67ce-4d53-9ca7-2301f49a313c"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
t.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="20ea91e4-39a5-4acf-a744-f5041af88adf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи с action=ADDED_ID341372" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="253a749f-6fc6-4f63-81f3-49117402663c"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// найти несуществующий идентификатор
t.getTreatmentIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="41a126ab-a0cd-47c9-a0ac-4efbf181b1e2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration1}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="d3761f46-ec3d-49ff-9421-d1e245da9905"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def t = new Treatments(context, testRunner, log)
// получить все данные используемые в запросе
title = testRunner.testCase.testSuite.getPropertyValue("title1")
code=testRunner.testCase.testSuite.getPropertyValue("code1")
defaultDuration = testRunner.testCase.testSuite.getPropertyValue("defaultDuration1").toInteger()
cfId = testRunner.testCase.testSuite.getPropertyValue("communicationFormId1").toInteger()
tcId = testRunner.testCase.getPropertyValue("tcId1").toInteger()
id = testRunner.testCase.getPropertyValue("treatmentId1").toInteger()
// собрать мапу из данных из запроса
def mapReq=[
                     	id : id,
                    	archived: true ,
                   	 	title: title,
                    	code: code,
                   		 tcId: tcId ,
            		     defDuration: defaultDuration ,
             		     commFormId: cfId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=t.getTreatmentMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="db94f990-67b9-48ce-a809-efad65ac0515"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
t.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="42134d7d-0c51-44e1-a598-12fd4ca8ceb3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED_ID341373" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="59b02561-fcf4-4278-bbf1-03df67005d2f"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// найти несуществующий идентификатор
t.getTreatmentIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="e14ef532-c465-4870-9a6b-aa26fd9f23f3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration1}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="ed69c869-7137-4594-b941-429623a6c051"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def t = new Treatments(context, testRunner, log)
// получить все данные используемые в запросе
title = testRunner.testCase.testSuite.getPropertyValue("title1")
code=testRunner.testCase.testSuite.getPropertyValue("code1")
defaultDuration = testRunner.testCase.testSuite.getPropertyValue("defaultDuration1").toInteger()
cfId = testRunner.testCase.testSuite.getPropertyValue("communicationFormId1").toInteger()
tcId = testRunner.testCase.getPropertyValue("tcId1").toInteger()
id = testRunner.testCase.getPropertyValue("treatmentId1").toInteger()
// собрать мапу из данных из запроса
def mapReq=[
                     	id : id,
                    	archived: false ,
                   	 	title: title,
                    	code: code,
                   		 tcId: tcId ,
            		     defDuration: defaultDuration ,
             		     commFormId: cfId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=t.getTreatmentMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="c5ef0b7e-d4c1-45c2-9f36-a87670149f4a"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
t.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="5cdad2d0-51a2-47ad-8b00-ef21a650865e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED_ID341374" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="5b1f68e7-2980-4711-bef2-4598ba557d3f"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
//создать запись
t.createTreatmentCategories(2)
t.createTreatmentForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="178b7953-0929-4457-9dab-b68ac0218dff"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId2}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration2}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="a0c2778f-dfb2-46ad-a0cf-b36efc996fbb"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def t = new Treatments(context, testRunner, log)
// получить все данные используемые в запросе
title = testRunner.testCase.testSuite.getPropertyValue("title2")
code=testRunner.testCase.testSuite.getPropertyValue("code2")
defaultDuration = testRunner.testCase.testSuite.getPropertyValue("defaultDuration2").toInteger()
cfId = testRunner.testCase.testSuite.getPropertyValue("communicationFormId2").toInteger()
tcId = testRunner.testCase.getPropertyValue("tcId2").toInteger()
id = testRunner.testCase.getPropertyValue("treatmentId1").toInteger()
// собрать мапу из данных из запроса
def mapReq=[
                     	id : id,
                    	archived: true ,
                   	 	title: title,
                    	code: code,
                   		 tcId: tcId ,
            		     defDuration: defaultDuration ,
             		     commFormId: cfId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=t.getTreatmentMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="0cc18e6b-9b14-49c5-9dde-14186aac1c49"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
t.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>tId1</con:name><con:value>176</con:value></con:property><con:property><con:name>tIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="923b85f7-1eaf-4d53-9d7e-8a4b7de77d38" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и архивирование записи с action=MODIFIED_ID341375" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="869adac2-c891-4b5e-a280-99ed0b59a284"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
//создать запись
t.createTreatmentCategories(2)
t.createTreatmentForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="50536efa-ae4d-4778-9dd2-a5790587b0bb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId2}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration2}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="bcf77eda-039e-4286-b52d-6ecbd3c9f254"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def t = new Treatments(context, testRunner, log)
// получить все данные используемые в запросе
title = testRunner.testCase.testSuite.getPropertyValue("title2")
code=testRunner.testCase.testSuite.getPropertyValue("code2")
defaultDuration = testRunner.testCase.testSuite.getPropertyValue("defaultDuration2").toInteger()
cfId = testRunner.testCase.testSuite.getPropertyValue("communicationFormId2").toInteger()
tcId = testRunner.testCase.getPropertyValue("tcId2").toInteger()
id = testRunner.testCase.getPropertyValue("treatmentId1").toInteger()
// собрать мапу из данных из запроса
def mapReq=[
                     	id : id,
                    	archived: true ,
                   	 	title: title,
                    	code: code,
                   		 tcId: tcId ,
            		     defDuration: defaultDuration ,
             		     commFormId: cfId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=t.getTreatmentMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="83d91993-e4ec-449f-b05d-e171b2d7b61c"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
t.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>tId1</con:name><con:value>176</con:value></con:property><con:property><con:name>tIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="cf75a302-8b13-49cf-a4cc-e64026fea459" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и вывод из архива записи с action=MODIFIED_ID341376" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="cfafd4a2-1134-46dd-9ba9-2f1ece8c71a2"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
//создать запись
t.createTreatmentCategories(2)
t.createTreatmentForPush(true)
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="9c74fca4-bf1f-440e-9bb7-ef19c46efd51"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId2}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration2}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="f118b993-a7b3-436f-949b-77c7678ef89e"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def t = new Treatments(context, testRunner, log)
// получить все данные используемые в запросе
title = testRunner.testCase.testSuite.getPropertyValue("title2")
code=testRunner.testCase.testSuite.getPropertyValue("code2")
defaultDuration = testRunner.testCase.testSuite.getPropertyValue("defaultDuration2").toInteger()
cfId = testRunner.testCase.testSuite.getPropertyValue("communicationFormId2").toInteger()
tcId = testRunner.testCase.getPropertyValue("tcId2").toInteger()
id = testRunner.testCase.getPropertyValue("treatmentId1").toInteger()
// собрать мапу из данных из запроса
def mapReq=[
                     	id : id,
                    	archived: false ,
                   	 	title: title,
                    	code: code,
                   		 tcId: tcId ,
            		     defDuration: defaultDuration ,
             		     commFormId: cfId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=t.getTreatmentMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )

</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="f62971c2-ce4d-47c2-b8a4-42dd17e8b23f"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
t.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>tId1</con:name><con:value>176</con:value></con:property><con:property><con:name>tIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="00c282e0-c800-4810-a87f-120c04776464" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Архивирование записи с action=DELETED_ID341377" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="4e704cac-e4aa-49fe-b8f6-92ba4a429f6f"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
//создать запись
t.createTreatmentCategories(2)
t.createTreatmentForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="1f51880d-b560-4943-96b5-0d7c9fdef234"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="DELETED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId2}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration2}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="3388050f-fffb-4779-88d5-d556fe83699b"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def t = new Treatments(context, testRunner, log)
// получить все данные используемые в запросе
title ="Медицинская манипуляция для пушей автотест"
code="code_autotest_push"
defaultDuration = 590
cfId =12345
tcId = testRunner.testCase.getPropertyValue("tcId1").toInteger()
id = testRunner.testCase.getPropertyValue("treatmentId1").toInteger()
// собрать мапу из данных из запроса
def mapReq=[
                     	id : id,
                    	archived: true ,
                   	 	title: title,
                    	code: code,
                   		 tcId: tcId ,
            		     defDuration: defaultDuration ,
             		     commFormId: cfId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=t.getTreatmentMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="46da1388-93e0-4ddd-b57c-9b9c9646296b"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
t.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>tId1</con:name><con:value>176</con:value></con:property><con:property><con:name>tIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="64cb26e6-a733-490b-b7a4-3834f79986f5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных параметров_ID341378" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="0733ef9d-8520-420e-a61c-d3089ecec55b"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
// найти несуществующий идентификатор
t.getTreatmentIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без global_id" id="bfcbd408-e1dc-4e15-a244-f6fc7ffa4b2b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без global_id" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration1}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без ARCHIVED" id="279561f5-e3fe-4f1b-aa19-3132c0217acc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без ARCHIVED" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration1}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#treatmentId1} не переданы атрибуты: ARCHIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без CODE" id="0cc29abe-6fe6-44aa-af31-46f9d32b9dea"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без CODE" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration1}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#treatmentId1} не переданы атрибуты: CODE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без TITLE" id="29260ad2-63f5-436c-9f00-9b4872fce12c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без TITLE" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration1}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#treatmentId1} не переданы атрибуты: TITLE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без TREATMENT_CATEGORY_ID" id="f997da26-915b-4c29-9e25-427ef84f9770"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без TREATMENT_CATEGORY_ID" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration1}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#treatmentId1} не переданы атрибуты: TREATMENT_CATEGORY_ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без DEFAULT_DURATION" id="df6b3cc8-a939-448e-8aaf-61ae6b87efe0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без DEFAULT_DURATION" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="COMMUNICATION_FORM_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#communicationFormId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#treatmentId1} не переданы атрибуты: DEFAULT_DURATION</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без COMMUNICATION_FORM_ID" id="6e55872c-3cb6-4363-b960-bb48060b8adf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без COMMUNICATION_FORM_ID" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_CATEGORY_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tcId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="DEFAULT_DURATION" field_id="" type="">
								<values>
									<value>${#TestSuite#defaultDuration1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#treatmentId1} не переданы атрибуты: COMMUNICATION_FORM_ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="68c0d8e6-d172-4d1d-bcf0-1b2ffa4846ef"><con:settings/><con:config><script>def t = new Treatments(context, testRunner, log)
t.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>categoryId</con:name><con:value>1191</con:value></con:property><con:property><con:name>n</con:name><con:value>337</con:value></con:property><con:property><con:name>title1</con:name><con:value>Тестовая ММ</con:value></con:property><con:property><con:name>title2</con:name><con:value>Тестовая ММ2</con:value></con:property><con:property><con:name>code1</con:name><con:value>test_code</con:value></con:property><con:property><con:name>code2</con:name><con:value>test_code2</con:value></con:property><con:property><con:name>defaultDuration1</con:name><con:value>12</con:value></con:property><con:property><con:name>defaultDuration2</con:name><con:value>13</con:value></con:property><con:property><con:name>communicationFormId1</con:name><con:value>1204888723</con:value></con:property><con:property><con:name>communicationFormId2</con:name><con:value>1204888724</con:value></con:property></con:properties></con:testSuite><con:testSuite id="9c0261ed-c0bd-4907-a3d6-fefe89971a56" name="DEPARTMENT_NOM"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="02bd16ba-9719-4a8d-8b32-9c6d2dfd0c33" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="32647ecc-8aea-4531-90c5-9f5bb179562d"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.getDepNomIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="2824c5f5-f95b-421e-b268-93e06a69a381"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#depNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start1}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="c2c7bbc2-feda-4985-ba2d-5c044fd5a55e"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def dn = new DepNom(context, testRunner, log)
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
dateTimeFormat= testRunner.testCase.testSuite.getPropertyValue("dateTimeFormat")
title = testRunner.testCase.testSuite.getPropertyValue("title1")
id = testRunner.testCase.getPropertyValue("depNomId1").toInteger()
start=testRunner.testCase.testSuite.getPropertyValue("start1")
end=testRunner.testCase.testSuite.getPropertyValue("end1")
formattedStart=mainScripts.dates().convertStringToDate(start,oldDateFormat,dateTimeFormat)
formattedEnd=mainScripts.dates().convertStringToDate(end,oldDateFormat,dateTimeFormat)
def mapReq=[
                       	 id : id,
                    	start: formattedStart ,
                   		 title: title,
                   		 end: formattedEnd
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=dn.getDepNomMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="4d59f009-98dc-43e5-88da-d3f2ec71e0c7"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="63ba8383-68e8-447a-b20b-9025db90c3bc" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без end с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="1257f3ff-88e9-44e8-b52d-377b77b237da"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.getDepNomIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="3b7e09d6-fd61-4bc1-8826-534e8e4e1c73"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#depNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="ac52e2d8-206b-4859-aeca-e743035c2e30"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def dn = new DepNom(context, testRunner, log)
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
dateTimeFormat= testRunner.testCase.testSuite.getPropertyValue("dateTimeFormat")
title = testRunner.testCase.testSuite.getPropertyValue("title1")
id = testRunner.testCase.getPropertyValue("depNomId1").toInteger()
start=testRunner.testCase.testSuite.getPropertyValue("start1")
end=testRunner.testCase.testSuite.getPropertyValue("end1")
formattedStart=mainScripts.dates().convertStringToDate(start,oldDateFormat,dateTimeFormat)
formattedEnd=mainScripts.dates().convertStringToDate(end,oldDateFormat,dateTimeFormat)
def mapReq=[
                       	 id : id,
                    	start: formattedStart ,
                   		 title: title,
                   		 end: null
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=dn.getDepNomMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="13a3da41-b41f-4add-b567-a56fd0153d0a"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="3d86eeec-e742-4985-bce2-5bef9e79ae05" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="f3900d93-bfc3-4a51-9048-b21550dd410e"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.getDepNomIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="392617f4-5c86-4142-8d67-6a41e2cf719e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#depNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start1}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="5af4bfb2-2fa5-4470-a84b-547585bb647e"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def dn = new DepNom(context, testRunner, log)
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
dateTimeFormat= testRunner.testCase.testSuite.getPropertyValue("dateTimeFormat")
title = testRunner.testCase.testSuite.getPropertyValue("title1")
id = testRunner.testCase.getPropertyValue("depNomId1").toInteger()
start=testRunner.testCase.testSuite.getPropertyValue("start1")
end=testRunner.testCase.testSuite.getPropertyValue("end1")
formattedStart=mainScripts.dates().convertStringToDate(start,oldDateFormat,dateTimeFormat)
formattedEnd=mainScripts.dates().convertStringToDate(end,oldDateFormat,dateTimeFormat)
def mapReq=[
                       	 id : id,
                    	start: formattedStart ,
                   		 title: title,
                   		 end: formattedEnd
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=dn.getDepNomMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="0d2e9aa9-fa34-4ba5-88ce-ed6950e4ab26"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="0ec081d4-59b1-4035-aa16-b18346ea48c7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="a297cb66-d2bf-4fb5-ba72-3241a047e954"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.createDepNomForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="66e8c584-6c08-4f53-9ce8-bd985f3939f3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#depNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start2}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="a0b9f15a-a85a-45ee-b56c-ea1eeac047f4"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def dn = new DepNom(context, testRunner, log)
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
dateTimeFormat= testRunner.testCase.testSuite.getPropertyValue("dateTimeFormat")
title = testRunner.testCase.testSuite.getPropertyValue("title2")
id = testRunner.testCase.getPropertyValue("depNomId1").toInteger()
start=testRunner.testCase.testSuite.getPropertyValue("start2")
end=testRunner.testCase.testSuite.getPropertyValue("end2")
formattedStart=mainScripts.dates().convertStringToDate(start,oldDateFormat,dateTimeFormat)
formattedEnd=mainScripts.dates().convertStringToDate(end,oldDateFormat,dateTimeFormat)
def mapReq=[
                       	 id : id,
                    	start: formattedStart ,
                   		 title: title,
                   		 end: formattedEnd
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=dn.getDepNomMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="4433b7c1-368b-4c99-a2a7-17c2b235f047"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="fd9733d2-465e-40e6-8fcd-c6a54fb1e924" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="a0ce2b1d-ba76-4f3c-a320-a3e040ed80a7"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.createDepNomForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="20c33fd5-49ca-4540-a928-62adc6edee2f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#depNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start2}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="ddce29d5-265c-4e3c-a7c1-51b5dfab8c93"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def dn = new DepNom(context, testRunner, log)
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
dateTimeFormat= testRunner.testCase.testSuite.getPropertyValue("dateTimeFormat")
title = testRunner.testCase.testSuite.getPropertyValue("title2")
id = testRunner.testCase.getPropertyValue("depNomId1").toInteger()
start=testRunner.testCase.testSuite.getPropertyValue("start2")
end=testRunner.testCase.testSuite.getPropertyValue("end2")
formattedStart=mainScripts.dates().convertStringToDate(start,oldDateFormat,dateTimeFormat)
formattedEnd=mainScripts.dates().convertStringToDate(end,oldDateFormat,dateTimeFormat)
def mapReq=[
                       	 id : id,
                    	start: formattedStart ,
                   		 title: title,
                   		 end: formattedEnd
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=dn.getDepNomMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="372fdd7e-e023-42ca-abbd-41a12ee9e3d4"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="ae26194e-e359-4826-9b2c-3a4b588ab13d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи без end с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="c14e4d19-0932-44b6-a14a-a46e89eae772"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.createDepNomForPush(0,1)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="0cab53e9-121d-492c-87e6-793430320ba2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#archivedDepNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="fa504018-0450-445e-b6e0-a76fb7b72179"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def dn = new DepNom(context, testRunner, log)
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
dateTimeFormat= testRunner.testCase.testSuite.getPropertyValue("dateTimeFormat")
title = testRunner.testCase.testSuite.getPropertyValue("title2")
id = testRunner.testCase.getPropertyValue("archivedDepNomId1").toInteger()
start=testRunner.testCase.testSuite.getPropertyValue("start2")
end=testRunner.testCase.testSuite.getPropertyValue("end2")
formattedStart=mainScripts.dates().convertStringToDate(start,oldDateFormat,dateTimeFormat)
formattedEnd=mainScripts.dates().convertStringToDate(end,oldDateFormat,dateTimeFormat)
def mapReq=[
                       	 id : id,
                    	start: formattedStart ,
                   		 title: title,
                   		 end: null
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=dn.getDepNomMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="cc24a331-76fb-4f64-8408-dd9c80165740"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="26d841ac-e4a3-4d52-8e41-128261303b68" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных параметров" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="b023f0d4-4918-4317-ad5e-83f24bff2a76"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.getDepNomIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без global_id" id="1cdc1eae-f1b9-4133-ab7e-32fc505833d7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без global_id" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start1}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без TITLE" id="1a0d9d9c-7290-4f69-91e9-db03c2b50889"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без TITLE" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#depNomId1}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start1}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#depNomId1} не переданы атрибуты: TITLE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без START" id="ebd2a810-78c7-4968-b03a-9a81e7ee3949"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без START" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#depNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#depNomId1} не переданы атрибуты: START</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="0cca8d06-19d4-4c93-82a8-68464f232d9c"><con:settings/><con:config><script>def dn = new DepNom(context, testRunner, log)
dn.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId1</con:name><con:value>158297691</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>arResTypeId2</con:name><con:value>158297693</con:value></con:property><con:property><con:name>arResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedSarResTypeId1</con:name><con:value>158297694</con:value></con:property><con:property><con:name>archivedSarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>archivedArResTypeId1</con:name><con:value>158297692</con:value></con:property><con:property><con:name>archivedArResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>categoryId</con:name><con:value>1132</con:value></con:property><con:property><con:name>n</con:name><con:value>121</con:value></con:property><con:property><con:name>title1</con:name><con:value>Тестовая номенклатура подразделений </con:value></con:property><con:property><con:name>title2</con:name><con:value>Тестовая номенклатура подразделений 2</con:value></con:property><con:property><con:name>dateTimeFormat</con:name><con:value>yyyy-MM-dd</con:value></con:property><con:property><con:name>oldDateFormat</con:name><con:value>dd.MM.yyyy</con:value></con:property><con:property><con:name>start1</con:name><con:value>01.01.1999</con:value></con:property><con:property><con:name>start2</con:name><con:value>01.02.1999</con:value></con:property><con:property><con:name>end1</con:name><con:value>02.01.1999</con:value></con:property><con:property><con:name>end2</con:name><con:value>02.02.1999</con:value></con:property></con:properties></con:testSuite><con:testSuite id="2fb1ce58-9fd4-475c-b7e9-c96d3624066a" name="POSITION_NOM"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="7d901177-090e-4ffc-a7c0-a8690f095367" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="4db7502a-e9f2-485e-837e-13d67f6d4d49"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.getPosNomIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="04079ff0-874d-497d-b452-462789aa9fac"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#posNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#arResTypeId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="c54c5913-2a7b-4381-9ed8-441fd359b606"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pn = new PosNom(context, testRunner, log)
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
dbFormat= testRunner.testCase.testSuite.getPropertyValue("dbFormat")
resTypeId=testRunner.testCase.getPropertyValue("arResTypeId1").toInteger()
title = testRunner.testCase.testSuite.getPropertyValue("title")
start=testRunner.testCase.testSuite.getPropertyValue("start")
formattedStart=mainScripts.dates().convertStringToDate(start,oldDateFormat,dbFormat)
end=testRunner.testCase.testSuite.getPropertyValue("end")
formattedEnd=mainScripts.dates().convertStringToDate(end,oldDateFormat,dbFormat)
id = testRunner.testCase.getPropertyValue("posNomId1").toInteger()
def mapReq=[
                    id :  id,
                    title:  title,
                    start:  formattedStart,
                    end:  formattedEnd,
                    resTypeId:  resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pn.getPosNomMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="c9775a10-ae2b-4dcf-adb6-dc0d39828377"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="43933ce5-f3e6-4181-a153-3a581cb386b1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без end с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="bddd7066-2ea8-4501-8003-3905f1cc7881"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.getPosNomIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="f08f7921-c49f-4662-8815-744017175823"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#posNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#arResTypeId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="e7593347-3df6-46e7-a029-803cd31aa1ee"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pn = new PosNom(context, testRunner, log)
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
dbFormat= testRunner.testCase.testSuite.getPropertyValue("dbFormat")
resTypeId=testRunner.testCase.getPropertyValue("arResTypeId1").toInteger()
title = testRunner.testCase.testSuite.getPropertyValue("title")
start=testRunner.testCase.testSuite.getPropertyValue("start")
formattedStart=mainScripts.dates().convertStringToDate(start,oldDateFormat,dbFormat)
end=testRunner.testCase.testSuite.getPropertyValue("end")
formattedEnd=mainScripts.dates().convertStringToDate(end,oldDateFormat,dbFormat)
id = testRunner.testCase.getPropertyValue("posNomId1").toInteger()
def mapReq=[
                    id :  id,
                    title:  title,
                    start:  formattedStart,
                    end:  null,
                    resTypeId:  resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pn.getPosNomMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="e8e8247f-3ecf-4595-b1af-a9e126dc4db0"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="c1e4a445-590f-4d2a-b8b2-d2f783d845cf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="547ac60a-941e-4549-801e-275990567e21"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.getPosNomIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="4d95f487-c90e-42dc-9a1f-e711ff922890"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#posNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#arResTypeId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="87f2b317-1d82-4472-b47a-fa36c4b027a7"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pn = new PosNom(context, testRunner, log)
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
dbFormat= testRunner.testCase.testSuite.getPropertyValue("dbFormat")
resTypeId=testRunner.testCase.getPropertyValue("arResTypeId1").toInteger()
title = testRunner.testCase.testSuite.getPropertyValue("title")
start=testRunner.testCase.testSuite.getPropertyValue("start")
formattedStart=mainScripts.dates().convertStringToDate(start,oldDateFormat,dbFormat)
end=testRunner.testCase.testSuite.getPropertyValue("end")
formattedEnd=mainScripts.dates().convertStringToDate(end,oldDateFormat,dbFormat)
id = testRunner.testCase.getPropertyValue("posNomId1").toInteger()
def mapReq=[
                    id :  id,
                    title:  title,
                    start:  formattedStart,
                    end:  formattedEnd,
                    resTypeId:  resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pn.getPosNomMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="27ee3fa6-21a4-4bd7-8c1d-cefc6aa0dda8"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="e1538d62-e228-4503-b1f7-1f80bcb0de82" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="b16fac0f-7ec4-41c6-aff4-50adee1cb536"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.createPosNomForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="5a273a49-45ff-4698-b8bb-7bd0fd09713f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#posNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start2}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end2}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#arResTypeId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="d67eae73-9394-453f-8544-1e0c14266b90"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pn = new PosNom(context, testRunner, log)
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
dbFormat= testRunner.testCase.testSuite.getPropertyValue("dbFormat")
resTypeId=testRunner.testCase.getPropertyValue("arResTypeId2").toInteger()
title = testRunner.testCase.testSuite.getPropertyValue("title2")
start=testRunner.testCase.testSuite.getPropertyValue("start2")
formattedStart=mainScripts.dates().convertStringToDate(start,oldDateFormat,dbFormat)
end=testRunner.testCase.testSuite.getPropertyValue("end2")
formattedEnd=mainScripts.dates().convertStringToDate(end,oldDateFormat,dbFormat)
id = testRunner.testCase.getPropertyValue("posNomId1").toInteger()
def mapReq=[
                    id :  id,
                    title:  title,
                    start:  formattedStart,
                    end:  formattedEnd,
                    resTypeId:  resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pn.getPosNomMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="7fa93602-c560-4107-ab4a-2f4b83a7e8c1"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="4a0f099d-a41b-4cf9-8100-156a277d81d0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи без end с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="b792a85f-14bd-4008-9ef7-a1cdac3d0654"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.createPosNomForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="2fa9eca9-96cb-496a-b1c3-636887c1b9d8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#posNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start2}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#arResTypeId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="90063d9b-949c-43ef-8524-63ae77a286f2"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pn = new PosNom(context, testRunner, log)
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
dbFormat= testRunner.testCase.testSuite.getPropertyValue("dbFormat")
resTypeId=testRunner.testCase.getPropertyValue("arResTypeId2").toInteger()
title = testRunner.testCase.testSuite.getPropertyValue("title2")
start=testRunner.testCase.testSuite.getPropertyValue("start2")
formattedStart=mainScripts.dates().convertStringToDate(start,oldDateFormat,dbFormat)
end=testRunner.testCase.testSuite.getPropertyValue("end2")
formattedEnd=mainScripts.dates().convertStringToDate(end,oldDateFormat,dbFormat)
id = testRunner.testCase.getPropertyValue("posNomId1").toInteger()
def mapReq=[
                    id :  id,
                    title:  title,
                    start:  formattedStart,
                    end:  null,
                    resTypeId:  resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pn.getPosNomMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="b5f09735-8f25-46b9-b541-b007c363e169"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>id1</con:name><con:value>-9</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="5d19529a-43a1-43a6-a0ea-de63cd78eb10" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="316832ba-7f10-481d-aca1-1a868fe8653c"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.createPosNomForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="3797c356-9fd0-4c75-a32c-79fc438b98ac"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#posNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start2}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end2}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#arResTypeId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="ef3fd0d4-49ad-488d-954d-35274f9ae111"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pn = new PosNom(context, testRunner, log)
oldDateFormat= testRunner.testCase.testSuite.getPropertyValue("oldDateFormat")
dbFormat= testRunner.testCase.testSuite.getPropertyValue("dbFormat")
resTypeId=testRunner.testCase.getPropertyValue("arResTypeId2").toInteger()
title = testRunner.testCase.testSuite.getPropertyValue("title2")
start=testRunner.testCase.testSuite.getPropertyValue("start2")
formattedStart=mainScripts.dates().convertStringToDate(start,oldDateFormat,dbFormat)
end=testRunner.testCase.testSuite.getPropertyValue("end2")
formattedEnd=mainScripts.dates().convertStringToDate(end,oldDateFormat,dbFormat)
id = testRunner.testCase.getPropertyValue("posNomId1").toInteger()
def mapReq=[
                    id :  id,
                    title:  title,
                    start:  formattedStart,
                    end:  formattedEnd,
                    resTypeId:  resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=pn.getPosNomMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="5f60311d-33a1-4969-9ea9-50df2420b68c"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>id1</con:name><con:value>-8</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="9a0ebc66-1708-46b1-b386-be6552b2566a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных параметров" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="8b2db136-0f96-46d4-91b0-734b89236910"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.getPosNomIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без global_id" id="c76da962-0ec5-4223-b9e8-56044fc293a2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без global_id" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#arResTypeId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без TITLE" id="00f920e5-eae4-4d57-a70a-3f69780ac0f9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без TITLE" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#posNomId1}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#arResTypeId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#posNomId1} не переданы атрибуты: TITLE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без START" id="b8d777f6-e50a-4760-a9a7-5efa1b5a3015"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без START" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#posNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#arResTypeId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#posNomId1} не переданы атрибуты: START</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без RESOURCE_TYPE_ID" id="4f81fd25-71b1-407c-ad6a-effe70487539"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без RESOURCE_TYPE_ID" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#posNomId1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>${#TestSuite#start}${#TestSuite#time}</value>
								</values>
							</attribute>
							<attribute name="END" field_id="" type="">
								<values>
									<value>${#TestSuite#end}${#TestSuite#time}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#posNomId1} не переданы атрибуты: RESOURCE_TYPE_ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="c1e8d2c0-d1ff-4ad4-9a99-c1f735ce6adc"><con:settings/><con:config><script>def pn = new PosNom(context, testRunner, log)
pn.clearAllByPropertyName()</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>title</con:name><con:value>Тестовая номенклатура должностей</con:value></con:property><con:property><con:name>start</con:name><con:value>01.02.1999</con:value></con:property><con:property><con:name>end</con:name><con:value>01.10.2000</con:value></con:property><con:property><con:name>title2</con:name><con:value>Тестовая номенклатура должностей2</con:value></con:property><con:property><con:name>start2</con:name><con:value>01.01.2020</con:value></con:property><con:property><con:name>end2</con:name><con:value>01.02.2020</con:value></con:property><con:property><con:name>time</con:name><con:value/></con:property><con:property><con:name>categoryId</con:name><con:value>1129</con:value></con:property><con:property><con:name>n</con:name><con:value>174</con:value></con:property><con:property><con:name>dateTimeFormat</con:name><con:value>yyyy-MM-dd</con:value></con:property><con:property><con:name>oldDateFormat</con:name><con:value>dd.MM.yyyy</con:value></con:property><con:property><con:name>dbFormat</con:name><con:value>yyyy-MM-dd HH:mm:ss.S</con:value></con:property></con:properties></con:testSuite><con:testSuite id="6a22410a-7bd7-4dd3-b611-71e364137491" name="POSITION_PROFILE"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="73cea6f2-ab9b-4bcc-9e47-dd2aaea9c471" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи с action=ADDED с gender_id_ID332154" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="5817f6b0-c99a-44b4-bc2e-7b238d9d91d0"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.getPosProIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="af8830be-ccdb-4bec-9dd1-edd1c44476ab"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="GENDER_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#genderId1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="0f472f9b-8208-4632-bced-bd9fbfd1b6c2"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
id = testRunner.testCase.getPropertyValue("posProfId1").toInteger()
code=testRunner.testCase.testSuite.getPropertyValue("code1")
title = testRunner.testCase.testSuite.getPropertyValue("title1")
specId = testRunner.testCase.getPropertyValue("specId1").toInteger()
genderId = testRunner.testCase.testSuite.getPropertyValue("genderId1").toInteger()
// собрать мапу по данным из запроса
def posProfMapReq=[
                    id : id,
                    archived: false ,
                    title: title ,
                    code: code ,
                    specId:specId ,
                    popp: false,
                    genderId : genderId
            ]

//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="639eba49-7651-4b01-98c1-d03d07f29b8c"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>genderId</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="45dc2faa-6a0a-4794-bcbe-0658bd2ce742" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи с action=ADDED без gender_id_ID332155" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="b8b0fe97-8d47-42f3-9a0e-28b35d0fa5ae"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.getPosProIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="dab75990-a408-443f-9913-88523ad43718"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="d8e89d8a-dcc2-44c2-bca3-892de0eaea3d"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
id = testRunner.testCase.getPropertyValue("posProfId1").toInteger()
code=testRunner.testCase.testSuite.getPropertyValue("code1")
title = testRunner.testCase.testSuite.getPropertyValue("title1")
specId = testRunner.testCase.getPropertyValue("specId1").toInteger()
genderId = testRunner.testCase.testSuite.getPropertyValue("genderId1").toInteger()
// собрать мапу по данным из запроса
def posProfMapReq=[
                    id : id,
                    archived: true ,
                    title: title ,
                    code: code ,
                    specId:specId ,
                    popp: true,
                    genderId : null
            ]

//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="3ca21052-c20d-417b-8de7-8cdb3e2c44cc"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>id1</con:name><con:value>30111</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="a13724bd-0e87-40f3-b93b-f997b09d683c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED_ID332156" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="24a0f0d4-4029-4b5d-82ea-a1821478037c"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.getPosProIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="bfbf7e6b-ab98-49aa-9272-be63ad065ccf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="GENDER_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#genderId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="2792a718-0918-4f7b-94f2-bc2307092f8f"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
id = testRunner.testCase.getPropertyValue("posProfId1").toInteger()
code=testRunner.testCase.testSuite.getPropertyValue("code1")
title = testRunner.testCase.testSuite.getPropertyValue("title1")
specId = testRunner.testCase.getPropertyValue("specId1").toInteger()
genderId = testRunner.testCase.testSuite.getPropertyValue("genderId1").toInteger()
// собрать мапу по данным из запроса
def posProfMapReq=[
                    id : id,
                    archived: false ,
                    title: title ,
                    code: code ,
                    specId:specId ,
                    popp: false,
                    genderId : genderId
            ]

//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="668a6a41-fabf-46bd-bd30-f4c8fe97dbf9"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="76b747e3-4de7-4827-a656-20741d433f43" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED_ID332157" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Создать запись в БД" id="3e628546-8f58-4add-9539-d9701af775aa"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
// подобрать специальность
pp.getSpecForPosProf(2)

params=[specParamName:"specId1",
				archived:false,
				profileOPP:false,
				genderId:1
				]
pp.createPosProForPush(params)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="f5bb5a2c-b6e8-4415-af61-be8b525338db"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID" field_id="" type="">
								<values>
									<value>${#TestCase#specId2}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="GENDER_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#genderId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="2ba8b324-dba2-4f2c-b6c5-8a32cc3e642a"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
id = testRunner.testCase.getPropertyValue("posProfId1").toInteger()
code=testRunner.testCase.testSuite.getPropertyValue("code2")
title = testRunner.testCase.testSuite.getPropertyValue("title2")
specId = testRunner.testCase.getPropertyValue("specId2").toInteger()
genderId = testRunner.testCase.testSuite.getPropertyValue("genderId2").toInteger()
// собрать мапу по данным из запроса
def posProfMapReq=[
                    id : id,
                    archived: true ,
                    title: title ,
                    code: code ,
                    specId:specId ,
                    popp: true,
                    genderId : genderId
            ]

//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="5340ccbe-11ed-4956-bac6-da5cf7177e4b"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="ec6b3be2-c97b-44e1-a818-c15e38749d18" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и архивирование записи с action=MODIFIED_ID332158" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Создать запись в БД" id="f34a5a38-1a7c-4f28-acae-1bdbdc412d30"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
// подобрать специальность
pp.getSpecForPosProf(2)

params=[specParamName:"specId1",
				archived:false,
				profileOPP:false,
				genderId:1
				]
pp.createPosProForPush(params)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="9093c144-eddc-40c2-8fdc-84df7058c01f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID" field_id="" type="">
								<values>
									<value>${#TestCase#specId2}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="GENDER_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#genderId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="316b73b7-5aa8-44ce-8c17-557d86d0f016"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
id = testRunner.testCase.getPropertyValue("posProfId1").toInteger()
code=testRunner.testCase.testSuite.getPropertyValue("code2")
title = testRunner.testCase.testSuite.getPropertyValue("title2")
specId = testRunner.testCase.getPropertyValue("specId2").toInteger()
genderId = testRunner.testCase.testSuite.getPropertyValue("genderId2").toInteger()
// собрать мапу по данным из запроса
def posProfMapReq=[
                    id : id,
                    archived: true ,
                    title: title ,
                    code: code ,
                    specId:specId ,
                    popp: true,
                    genderId : genderId
            ]

//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="de44cb0e-f802-40a1-bc0a-02764527da68"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="8c5e03f5-1097-423f-a291-05cb71b2c62d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и вывод из архива записи с action=MODIFIED_ID332159" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Создать запись в БД" id="2271e796-2c0d-4849-85f4-16ef072e2860"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
// подобрать специальность
pp.getSpecForPosProf(2)

params=[specParamName:"specId1",
				archived:true,
				profileOPP:true,
				genderId:1
				]
pp.createPosProForPush(params)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="a23a569a-e268-4732-9347-6fcfaccb87e4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#archivedPosProfId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID" field_id="" type="">
								<values>
									<value>${#TestCase#specId2}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="GENDER_ID" field_id="" type="">
								<values>
									<value>${#TestSuite#genderId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="656003f6-fe7f-47bc-9b1f-08b85df0b719"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
id = testRunner.testCase.getPropertyValue("archivedPosProfId1").toInteger()
code=testRunner.testCase.testSuite.getPropertyValue("code2")
title = testRunner.testCase.testSuite.getPropertyValue("title2")
specId = testRunner.testCase.getPropertyValue("specId2").toInteger()
genderId = testRunner.testCase.testSuite.getPropertyValue("genderId2").toInteger()
// собрать мапу по данным из запроса
def posProfMapReq=[
                    id : id,
                    archived: false ,
                    title: title ,
                    code: code ,
                    specId:specId ,
                    popp: false,
                    genderId : genderId
            ]

//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="de2092ac-f5e1-4453-824e-028d024c3a40"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="9e7ca8cd-d3d9-4935-86a1-29532f976500" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Архивирование записи с action=DELETED_ID332160" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Создать запись в БД" id="22d9db6a-6bd9-4009-b668-e0af5a9c6250"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
// найти несуществующий идентификатор в таблице PosProf
mainScripts.sql().getDoesntExistedForPush("tablePosProf", "posProfId")
def pp = new PosProf(context, testRunner, log)
// подобрать специальность
pp.getSpecForPosProf(2)

params=[specParamName:"specId1",
				archived:false,
				profileOPP:false,
				genderId:1
				]
pp.createPosProForPush(params)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="fc819f14-2593-4b4d-9b35-0a4661784db1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="DELETED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title2}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID" field_id="" type="">
								<values>
									<value>${#TestCase#specId2}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить архивирование записи в БД" id="f784be15-ffd4-4165-823d-f28de5911965"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
id = testRunner.testCase.getPropertyValue("posProfId1").toInteger()
code="posProfCode 1"
title = "Профиль должности автотест 1"
specId = testRunner.testCase.getPropertyValue("specId1").toInteger()
genderId = testRunner.testCase.testSuite.getPropertyValue("genderId1").toInteger()
// собрать мапу по данным из запроса
def posProfMapReq=[
                    id : id,
                    archived: true ,
                    title: title ,
                    code: code ,
                    specId:specId ,
                    popp: false,
                    genderId : genderId
            ]

//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="7fa9d9e1-fb50-4289-878e-ac57414e848c"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:testCase id="e78f90e5-2f5a-4a31-95b3-6bf006f731be" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных атрибутов_ID332161" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="9ace794c-6cfc-4d06-a692-8a58223d6e18"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.getPosProIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без global_id" id="7704d8f0-079b-4cc7-9d8b-290de4441f2d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без global_id" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#id1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="XPath Match" id="1c1f201e-f0a0-4269-b3a0-4fc2b00eee0b" name="Корректный текст ошибки"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#id1} не переданы атрибуты: GLOBAL_ID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без ARCHIVED" id="9d0603bf-d95e-41da-8620-a577274d2fc0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без ARCHIVED" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="XPath Match" id="1c1f201e-f0a0-4269-b3a0-4fc2b00eee0b" name="Корректный текст ошибки"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#posProfId1} не переданы атрибуты: ARCHIVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без CODE" id="25ec11bd-2eb3-47fd-910c-5b6f45b4472d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без CODE" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="XPath Match" id="1c1f201e-f0a0-4269-b3a0-4fc2b00eee0b" name="Корректный текст ошибки"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#posProfId1} не переданы атрибуты: CODE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без TITLE" id="c82f87ac-d28f-441d-809e-9faa9af3f4c4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без TITLE" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE1" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="XPath Match" id="1c1f201e-f0a0-4269-b3a0-4fc2b00eee0b" name="Корректный текст ошибки"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#posProfId1} не переданы атрибуты: TITLE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без SPECIALIZATION_ID" id="d0981354-c386-420b-8c37-d82b48c1f6da"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без SPECIALIZATION_ID" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID1" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="XPath Match" id="1c1f201e-f0a0-4269-b3a0-4fc2b00eee0b" name="Корректный текст ошибки"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#posProfId1} не переданы атрибуты: SPECIALIZATION_ID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без PROFILE_OF_PRIMARY_POSITION" id="917338da-eb42-40ae-82ff-af58601a430b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без PROFILE_OF_PRIMARY_POSITION" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="TITLE" field_id="" type="">
								<values>
									<value>${#TestSuite#title1}</value>
								</values>
							</attribute>
							<attribute name="SPECIALIZATION_ID" field_id="" type="">
								<values>
									<value>${#TestCase#specId1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION1" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="XPath Match" id="1c1f201e-f0a0-4269-b3a0-4fc2b00eee0b" name="Корректный текст ошибки"><con:configuration><path>//*:out</path><content>ERROR: В наборе данных с global_id: ${#TestCase#posProfId1} не переданы атрибуты: PROFILE_OF_PRIMARY_POSITION</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="acf23dee-d588-42fe-bb3f-e2cba239a860"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>code1</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title1</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>code2</con:name><con:value>code_autotest2</con:value></con:property><con:property><con:name>title2</con:name><con:value>title_autotest2</con:value></con:property><con:property><con:name>categoryId</con:name><con:value>4202</con:value></con:property><con:property><con:name>n</con:name><con:value>311</con:value></con:property><con:property><con:name>genderId1</con:name><con:value>1</con:value></con:property><con:property><con:name>genderId2</con:name><con:value>2</con:value></con:property></con:properties></con:testSuite><con:testSuite id="67ebe20a-c998-4fbd-b8be-e4f7be58626d" name="POSITION_PROFILE_TREATMENT"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="683462fc-cb03-4d0e-b93c-b6f30b6697fe" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи без SELF_APPOINTMENT_ALLOWED_TO_AREA_TYPE с action=ADDED_ID341585" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="ab4d1a0a-3c99-42ed-b90c-9bba418ccf62"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)

pp.getPosProTreatIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="f8f65c7b-c0cd-4ee6-b19f-6c5adbe45c67"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4203</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfTreatId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="POSITION_PROFILE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_ID" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="a943a4bb-ee91-4dd7-b67f-b6a83209d160"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)

//получить данные из запроса
id = testRunner.testCase.getPropertyValue("posProfTreatId1").toInteger()
def req_posProfId=testRunner.testCase.getPropertyValue("posProfId1").toInteger()
def req_tId = testRunner.testCase.getPropertyValue("treatmentId1").toInteger()
// собрать мапу по данным из запроса
posProfMapReq=[
						id : id,
						archived: false,
						posProfId: req_posProfId,
						treatmentId : req_tId, 
						saat: null
					]			
//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfTreatMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="78a67a90-99eb-4c64-8f49-066c75a8a204"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>id1</con:name><con:value>459</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>posProfCode1</con:name><con:value>posProfCode 1</con:value></con:property><con:property><con:name>posProfTitle1</con:name><con:value>Профиль должности автотест 1</con:value></con:property></con:properties></con:testCase><con:testCase id="59a79435-02a5-4c0b-8693-4c9e56fccdca" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи с self_appointment_allowed_to_area_type=false и  action=ADDED_ID341586" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="41b13f15-2ebc-44cc-900d-4f20a2fe7d59"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)

pp.getPosProTreatIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="c3b526f3-879e-48c7-b48e-4f341b55f191"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4203</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfTreatId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="POSITION_PROFILE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_ID" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="SELF_APPOINTMENT_ALLOWED_TO_AREA_TYPE" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="4f400281-71a8-45b3-8065-396f68ff7bba"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
def tr = new Treatments(context, testRunner, log)

id = testRunner.testCase.getPropertyValue("posProfTreatId1").toInteger()
def req_posProfId=testRunner.testCase.getPropertyValue("posProfId1").toInteger()
def req_tId = testRunner.testCase.getPropertyValue("treatmentId1").toInteger()

posProfMapReq=[
						id : id,
						archived: false,
						posProfId: req_posProfId,
						treatmentId : req_tId, 
						saat: false
					]			

dbMap=pp.getPosProfTreatMap(id)
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="c50bf7f8-9e58-4b43-b74f-08e42839f49d"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>id1</con:name><con:value>462</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>posProfCode1</con:name><con:value>posProfCode 1</con:value></con:property><con:property><con:name>posProfTitle1</con:name><con:value>Профиль должности автотест 1</con:value></con:property></con:properties></con:testCase><con:testCase id="5c57885b-afef-4258-b4c2-f7a6974631e9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи с self_appointment_allowed_to_area_type=true и action=ADDED_ID341587" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="1348807f-1eb4-4780-a436-98f36cd999aa"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)

pp.getPosProTreatIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="158b480c-6195-4fd6-9d15-c1d03745665c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4203</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfTreatId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="POSITION_PROFILE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_ID" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="SELF_APPOINTMENT_ALLOWED_TO_AREA_TYPE" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="f42ffb75-bcf3-4922-8402-2d2c5a829575"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
def tr = new Treatments(context, testRunner, log)
//получить данные из запроса
id = testRunner.testCase.getPropertyValue("posProfTreatId1").toInteger()
def req_posProfId=testRunner.testCase.getPropertyValue("posProfId1").toInteger()
def req_tId = testRunner.testCase.getPropertyValue("treatmentId1").toInteger()
// собрать мапу по данным из запроса
posProfMapReq=[
						id : id,
						archived: true,
						posProfId: req_posProfId,
						treatmentId : req_tId, 
						saat: true
					]			
//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfTreatMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="1eeb6de4-f8ed-4b2d-9826-0f619e5dc2e4"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>id1</con:name><con:value>465</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>posProfCode1</con:name><con:value>posProfCode 1</con:value></con:property><con:property><con:name>posProfTitle1</con:name><con:value>Профиль должности автотест 1</con:value></con:property></con:properties></con:testCase><con:testCase id="6580c9ed-bfbb-4586-9f56-8281dafbf4a5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED_ID341588" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="770bcb61-5f55-4f99-94b3-2f114669a9ff"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)

pp.getPosProTreatIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="cdc25bbb-7306-4957-b9e2-d45e8c01b870"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4203</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfTreatId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="POSITION_PROFILE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_ID" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId1}</value>
								</values>
							</attribute>
							<attribute name="SELF_APPOINTMENT_ALLOWED_TO_AREA_TYPE" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="e5b93408-8b9b-414c-b1a5-d8319182c9c2"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
def tr = new Treatments(context, testRunner, log)
//получить данные из запроса
id = testRunner.testCase.getPropertyValue("posProfTreatId1").toInteger()
def req_posProfId=testRunner.testCase.getPropertyValue("posProfId1").toInteger()
def req_tId = testRunner.testCase.getPropertyValue("treatmentId1").toInteger()
// собрать мапу по данным из запроса
posProfMapReq=[
						id : id,
						archived: false,
						posProfId: req_posProfId,
						treatmentId : req_tId, 
						saat: false
					]			
//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfTreatMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="6b0e4f81-e075-45e7-8a4f-8e436d0c8e3c"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>id1</con:name><con:value>468</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>tId2</con:name><con:value>128309505</con:value></con:property><con:property><con:name>tIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>posProfCode2</con:name><con:value>posProfCode 2</con:value></con:property><con:property><con:name>posProfTitle2</con:name><con:value>Профиль должности автотест 2</con:value></con:property><con:property><con:name>posProfTreatId</con:name><con:value>299</con:value></con:property><con:property><con:name>posProfCode1</con:name><con:value>posProfCode 1</con:value></con:property><con:property><con:name>posProfTitle1</con:name><con:value>Профиль должности автотест 1</con:value></con:property></con:properties></con:testCase><con:testCase id="b367dcea-375f-4d26-abd8-93e107cd0c3c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и вывод из архива записи с action=MODIFIED_ID341591" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="bb7cf279-632c-41fc-924e-3c589b144410"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.createPosProfTreatForPush(true, false)
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="ffdb6b75-5bfe-4716-b13e-748be3520913"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4203</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfTreatId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="POSITION_PROFILE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_ID" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId2}</value>
								</values>
							</attribute>
							<attribute name="SELF_APPOINTMENT_ALLOWED_TO_AREA_TYPE" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="da005b04-a435-437d-b1b1-1242471f3f94"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
def tr = new Treatments(context, testRunner, log)
//получить данные из запроса
id = testRunner.testCase.getPropertyValue("posProfTreatId1").toInteger()
def req_posProfId=testRunner.testCase.getPropertyValue("posProfId2").toInteger()
def req_tId = testRunner.testCase.getPropertyValue("treatmentId2").toInteger()
// собрать мапу по данным из запроса
posProfMapReq=[
						id : id,
						archived: false,
						posProfId: req_posProfId,
						treatmentId : req_tId, 
						saat: true
					]			
//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfTreatMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="06459880-873a-4f37-b3da-0f14ec59e662"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>id1</con:name><con:value>456</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>posProfTreatId</con:name><con:value>399</con:value></con:property><con:property><con:name>posProfCode1</con:name><con:value>posProfCode 1</con:value></con:property><con:property><con:name>posProfTitle1</con:name><con:value>Профиль должности автотест 1</con:value></con:property><con:property><con:name>posProfCode2</con:name><con:value>posProfCode 2</con:value></con:property><con:property><con:name>posProfTitle2</con:name><con:value>Профиль должности автотест 2</con:value></con:property></con:properties></con:testCase><con:testCase id="38ae3f9a-63f2-45c9-9e67-86b6b46147f6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED_ID341589" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="ddd3bbc7-93cb-494b-8374-5c0319faf6ad"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.createPosProfTreatForPush(false, true)
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="a635825a-0d47-4a25-a8ca-1b3cb0ac5faa"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4203</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfTreatId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="POSITION_PROFILE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_ID" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId2}</value>
								</values>
							</attribute>
							<attribute name="SELF_APPOINTMENT_ALLOWED_TO_AREA_TYPE" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="181e9e93-fd53-47a9-84f0-dbab1f386ef6"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
def tr = new Treatments(context, testRunner, log)
//получить данные из запроса
id = testRunner.testCase.getPropertyValue("posProfTreatId1").toInteger()
def req_posProfId=testRunner.testCase.getPropertyValue("posProfId2").toInteger()
def req_tId = testRunner.testCase.getPropertyValue("treatmentId2").toInteger()
// собрать мапу по данным из запроса
posProfMapReq=[
						id : id,
						archived: true,
						posProfId: req_posProfId,
						treatmentId : req_tId, 
						saat: false
					]			
//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfTreatMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="6213ecf3-dc86-4c9d-86e1-b5091cb2fa7f"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>id1</con:name><con:value>471</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>posProfTreatId</con:name><con:value>399</con:value></con:property><con:property><con:name>posProfCode1</con:name><con:value>posProfCode 1</con:value></con:property><con:property><con:name>posProfTitle1</con:name><con:value>Профиль должности автотест 1</con:value></con:property><con:property><con:name>posProfCode2</con:name><con:value>posProfCode 2</con:value></con:property><con:property><con:name>posProfTitle2</con:name><con:value>Профиль должности автотест 2</con:value></con:property></con:properties></con:testCase><con:testCase id="5f2cfce0-2906-428c-92dc-a8b5e3dff607" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и архивирование записи с action=MODIFIED_ID341590" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="f681c337-2fae-48bf-b5d8-4c5d6be3f11e"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.createPosProfTreatForPush(false, true)
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="fe0f6391-a53d-4904-b174-49f6c31d11cd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4203</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfTreatId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="POSITION_PROFILE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_ID" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи в БД" id="e47ccf32-89e1-4bca-b5c4-c9b6991145ad"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
def tr = new Treatments(context, testRunner, log)
//получить данные из запроса
id = testRunner.testCase.getPropertyValue("posProfTreatId1").toInteger()
def req_posProfId=testRunner.testCase.getPropertyValue("posProfId2").toInteger()
def req_tId = testRunner.testCase.getPropertyValue("treatmentId2").toInteger()
// собрать мапу по данным из запроса
posProfMapReq=[
						id : id,
						archived: true,
						posProfId: req_posProfId,
						treatmentId : req_tId, 
						saat: null
					]			
//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfTreatMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="b2079063-5f36-4fdf-844a-1d617a71595c"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>id1</con:name><con:value>474</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>posProfCode1</con:name><con:value>posProfCode 1</con:value></con:property><con:property><con:name>posProfTitle1</con:name><con:value>Профиль должности автотест 1</con:value></con:property><con:property><con:name>posProfCode2</con:name><con:value>posProfCode 2</con:value></con:property><con:property><con:name>posProfTitle2</con:name><con:value>Профиль должности автотест 2</con:value></con:property></con:properties></con:testCase><con:testCase id="3e7599f6-06b8-4cd7-9b10-931764e8150b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Архивирование записи с action=DELETED_ID341592" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="ce690224-a5a2-4994-a7f8-0eb98b08d46f"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.createPosProfTreatForPush(false, true)
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="bcdf0124-0bc3-443b-bfc0-a8d77bfb2262"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4203</category>
						</categories>
						<data action="DELETED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfTreatId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="POSITION_PROFILE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId2}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_ID" field_id="" type="">
								<values>
									<value>${#TestCase#treatmentId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить архивирование записи в БД" id="b23e716c-c20e-4ca6-a301-16cf6120c2af"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def pp = new PosProf(context, testRunner, log)
def tr = new Treatments(context, testRunner, log)
//получить данные из запроса
id = testRunner.testCase.getPropertyValue("posProfTreatId1").toInteger()
def req_posProfId=testRunner.testCase.getPropertyValue("posProfId1").toInteger()
def req_tId = testRunner.testCase.getPropertyValue("treatmentId1").toInteger()
// собрать мапу по данным из запроса
posProfMapReq=[
						id : id,
						archived: true,
						posProfId: req_posProfId,
						treatmentId : req_tId, 
						saat: true
					]			
//найти созданную в бд запись и собрать ее в мапу
dbMap=pp.getPosProfTreatMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(posProfMapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="cd483af2-10f3-4526-a0f2-c3ee10f3b8d9"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>id1</con:name><con:value>483</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>posProfTreatId</con:name><con:value>399</con:value></con:property><con:property><con:name>posProfCode1</con:name><con:value>posProfCode 1</con:value></con:property><con:property><con:name>posProfTitle1</con:name><con:value>Профиль должности автотест 1</con:value></con:property><con:property><con:name>posProfCode2</con:name><con:value>posProfCode 2</con:value></con:property><con:property><con:name>posProfTitle2</con:name><con:value>Профиль должности автотест 2</con:value></con:property></con:properties></con:testCase><con:testCase id="6e429ae2-6835-468b-ae91-38f372f73b09" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных параметров_ID341593" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="a58f4c75-5503-4273-9daa-268137dcd1ef"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.getPosProTreatIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без GLOBAL_ID" id="f1810598-f26d-41f6-9303-22f7a8bc610c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без GLOBAL_ID" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4203</category>
						</categories>
						<data action="ADDED">
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="POSITION_PROFILE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id:  не переданы атрибуты: GLOBAL_ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без ARCHIVED" id="6c1c4fbc-73c0-43e2-ba73-13b7633eee63"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без ARCHIVED" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4203</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#id1}</value>
								</values>
							</attribute>
							<attribute name="POSITION_PROFILE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#id1} не переданы атрибуты: ARCHIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без POSITION_PROFILE_ID" id="56278ac8-1639-444e-8f9b-b603fe423487"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без POSITION_PROFILE_ID" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4203</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#id1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="TREATMENT_ID" field_id="" type="">
								<values>
									<value>${#TestCase#tId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#id1} не переданы атрибуты: POSITION_PROFILE_ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без TREATMENT_ID" id="1081c602-684a-4c2e-8eab-6a3264b1d75c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без TREATMENT_ID" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">4203</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#id1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="POSITION_PROFILE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#posProfId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#id1} не переданы атрибуты: TREATMENT_ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="b30e0966-c78e-40a0-ac6c-b9f2da8266a3"><con:settings/><con:config><script>def pp = new PosProf(context, testRunner, log)
pp.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>id1</con:name><con:value>580</con:value></con:property><con:property><con:name>idCreatedByTest1</con:name><con:value>1</con:value></con:property><con:property><con:name>posProfCode1</con:name><con:value>posProfCode 1</con:value></con:property><con:property><con:name>posProfTitle1</con:name><con:value>Профиль должности автотест 1</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>n</con:name><con:value>374</con:value></con:property></con:properties></con:testSuite><con:testSuite id="d25bef48-d7e5-4517-b720-78f4717aff33" name="EQUIPMENT_PROFILE"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="d92ff7bd-37a0-4bbd-9fda-888b94ee9f19" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="3f72a812-4da5-48e7-814a-bf68b2b4ea32"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.getEquipmentProfileIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="a3407074-dcd8-4ca9-b318-f47161517004"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#equipmentProfileId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#sarResTypeId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="425d6ce9-d724-4489-8523-4c2d560658f8"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ep = new EquipmentProfile(context, testRunner, log)

resTypeId=testRunner.testCase.getPropertyValue("sarResTypeId1").toInteger()
id = testRunner.testCase.getPropertyValue("equipmentProfileId1").toInteger()

def mapReq=[
					id : id,
					archived: false,
					rtId: resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ep.getEquipmentProfileMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="d9c3fa62-d8ec-497a-b025-94c1dc24a0f0"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="b1d9912b-8961-4ecd-92f0-02c1b1ea2b28" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="3307d678-c43d-4ce5-8f86-9289869d8008"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.getEquipmentProfileIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="6ef1f737-82b8-4235-96c5-43618940d45a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#equipmentProfileId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#sarResTypeId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="f840d5d5-27a2-4f53-a4c1-8c48fb92f0f1"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ep = new EquipmentProfile(context, testRunner, log)

resTypeId=testRunner.testCase.getPropertyValue("sarResTypeId1").toInteger()
id = testRunner.testCase.getPropertyValue("equipmentProfileId1").toInteger()

def mapReq=[
					id : id,
					archived: true ,
					rtId: resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ep.getEquipmentProfileMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="4a6eec85-c39e-4990-90e5-1be9212e2422"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="0b21e957-c71d-4c10-8bad-d1996fee24fd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="5984fa80-cb0b-412b-9e4a-344f0abc0e91"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.getEquipmentProfileIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="d44d3cd6-c5f4-4198-adf2-aa4708ca4e7a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#equipmentProfileId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#sarResTypeId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи" id="2288ba7c-e6f9-4b48-b6b6-e492cf6daa64"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ep = new EquipmentProfile(context, testRunner, log)

resTypeId=testRunner.testCase.getPropertyValue("sarResTypeId1").toInteger()
id = testRunner.testCase.getPropertyValue("equipmentProfileId1").toInteger()

def mapReq=[
					id : id,
					archived: false,
					rtId: resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ep.getEquipmentProfileMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )
</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="4d3463db-3547-4fda-a76f-257912ba3c38"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="a3f1011d-b433-401e-bd7c-923f6aa0954e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение записи с action=ADDED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="f09e7ef0-afc7-48ff-ba91-046137cefa2b"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.createEquipmentProfileForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="af3cb3ce-f7cb-4cf1-a94e-55b4a7a61a0a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#equipmentProfileId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#sarResTypeId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="ecd5ea94-c9f9-4c34-8345-1120789e0bf0"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ep = new EquipmentProfile(context, testRunner, log)

resTypeId=testRunner.testCase.getPropertyValue("sarResTypeId2").toInteger()
id = testRunner.testCase.getPropertyValue("equipmentProfileId1").toInteger()

def mapReq=[
					id : id,
					archived: true,
					rtId: resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ep.getEquipmentProfileMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="234a3373-4b2d-42d7-aa9e-c955a11183bf"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="4a8144f8-1369-45c3-8bd7-f0d143468cb9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и архивирование записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="274b59a5-c8b1-47a2-bb3f-d83836fbd42e"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.createEquipmentProfileForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="4e6f8e02-0e2a-45f9-9d3f-d6719a6dd1d5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#equipmentProfileId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#sarResTypeId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="75ff1431-39ce-469d-93f6-b9cad286f91f"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ep = new EquipmentProfile(context, testRunner, log)

resTypeId=testRunner.testCase.getPropertyValue("sarResTypeId2").toInteger()
id = testRunner.testCase.getPropertyValue("equipmentProfileId1").toInteger()

def mapReq=[
					id : id,
					archived: true,
					rtId: resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ep.getEquipmentProfileMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="2f750895-c2cb-40db-859d-6137d8e7ecf3"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>sarResTypeId1</con:name><con:value>156645371</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest1</con:name><con:value>0</con:value></con:property><con:property><con:name>sarResTypeId2</con:name><con:value>156645372</con:value></con:property><con:property><con:name>sarResTypeIdCreatedByTest2</con:name><con:value>0</con:value></con:property><con:property><con:name>equipmentProfileId1</con:name><con:value>156626420</con:value></con:property><con:property><con:name>equipmentProfileIdCreatedByTest1</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="b559b9a6-dec4-4c34-a955-0a8fb98431e8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и вывод из архива записи с action=MODIFIED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="fae91885-0341-4b4a-b74c-cd9b749beefd"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.createEquipmentProfileForPush(true)</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="1ad45eb3-bbb9-4620-ba22-7b6cb3a98da0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#equipmentProfileId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#sarResTypeId2}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить изменение записи" id="36f58d64-59d9-4b18-b3de-048ca18e4122"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ep = new EquipmentProfile(context, testRunner, log)

resTypeId=testRunner.testCase.getPropertyValue("sarResTypeId2").toInteger()
id = testRunner.testCase.getPropertyValue("equipmentProfileId1").toInteger()

def mapReq=[
					id : id,
					archived: false,
					rtId: resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ep.getEquipmentProfileMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="0fda5e65-5221-4277-ae67-434a88903fae"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="445c9aa0-ae7c-459e-978b-98c375057a86" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Архивирование записи с action=DELETED" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="c5975631-2622-4657-aafa-71166c082c50"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.createEquipmentProfileForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="8a9a0a16-85a2-4766-bf57-1532e4184f00"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="DELETED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#equipmentProfileId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#sarResTypeId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить архивирование записи" id="d180c9ca-55ef-4b44-ab18-29e5be9e08c5"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def ep = new EquipmentProfile(context, testRunner, log)

resTypeId=testRunner.testCase.getPropertyValue("sarResTypeId1").toInteger()
id = testRunner.testCase.getPropertyValue("equipmentProfileId1").toInteger()

def mapReq=[
					id : id,
					archived: true,
					rtId: resTypeId
                ]
                
//найти созданную в бд запись и собрать ее в мапу
dbMap=ep.getEquipmentProfileMap(id)
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="1c8d6b12-7992-4be5-bff9-a3d831ad529c"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="5c2a722b-0f6a-4e26-a4bc-de9287f29e60" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных параметров" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="dfce3ec9-39af-4166-bb5c-ad83f27eb616"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.getEquipmentProfileIdForPush()</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без global_id" id="a597d82a-fd40-4ea2-9baf-fff373325bfb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без global_id" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#sarResTypeId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id:  не переданы атрибуты: global_id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без ARCHIVED" id="59497139-feff-437c-a557-00d35803619d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без ARCHIVED" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#equipmentProfileId1}</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="RESOURCE_TYPE_ID" field_id="" type="">
								<values>
									<value>${#TestCase#sarResTypeId1}</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#equipmentProfileId1} не переданы атрибуты: ARCHIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без RESOURCE_TYPE_ID" id="3fcc3a9e-48b3-43da-ab4a-7d17c29ad852"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без RESOURCE_TYPE_ID" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">
   <soap:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>NSI2</wsse:Username>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <typ:ChangeElement>
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="global_id" field_id="" type="">
								<values>
									<value>${#TestCase#equipmentProfileId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="START" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>
      </typ:ChangeElement>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#equipmentProfileId1} не переданы атрибуты: RESOURCE_TYPE_ID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="5b8bc032-8cbc-4e4f-885e-3769bb4cb404"><con:settings/><con:config><script>def ep = new EquipmentProfile(context, testRunner, log)
ep.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>categoryId</con:name><con:value>2277</con:value></con:property><con:property><con:name>n</con:name><con:value>122</con:value></con:property></con:properties></con:testSuite><con:testSuite id="6f631d32-8926-41ca-ba2b-59431a077127" name="queue_type"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="14b3b7e3-47b6-409c-a3c7-09d056ce2305" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание не архивной записи с action=ADDED_ID357164" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="5e073b43-6c01-4afb-b367-b38cce2387bd"><con:settings/><con:config><script>def qt  = new QueueType(context, testRunner, log)
qt.getQueueTypeIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="fa80bb30-4a84-4ee8-a853-30d5dd4e5e3d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#queueTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#name1}</value>
								</values>
							</attribute>
							<attribute name="SHORT_NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#shortName1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="89be5f66-2dc7-4fbe-b206-ea617d676a3b"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def qt  = new QueueType(context, testRunner, log)
id = testRunner.testCase.getPropertyValue("queueTypeId1").toInteger()
shortName=testRunner.testCase.testSuite.getPropertyValue("shortName1")
title=testRunner.testCase.testSuite.getPropertyValue("name1")
code = testRunner.testCase.testSuite.getPropertyValue("code1")

// собрать мапу по данным из запроса
def mapReq=[
                    id : id,
                    archived: false ,
                    title: title ,
                    code: code ,
                    shortName:shortName
            ]

//найти созданную в бд запись и собрать ее в мапу
dbMap=qt.getQueueTypeMap(id)
log.info dbMap
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="ba3f6e0f-30ec-4bd3-bee8-44b0eb2fea60"><con:settings/><con:config><script>def qt  = new QueueType(context, testRunner, log)
qt.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>genderId</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="f9129e47-ddae-4446-8a2e-4871c2b5b125" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание архивной записи с action=MODIFIED_ID357165" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="6d691bb8-4ce2-414f-86c7-a6cf188d8cd7"><con:settings/><con:config><script>def qt  = new QueueType(context, testRunner, log)
qt.getQueueTypeIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="d3963e9f-acbe-43b5-8ee5-954b16668794"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#queueTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#name1}</value>
								</values>
							</attribute>
							<attribute name="SHORT_NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#shortName1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="96dc5c70-f617-4fb0-838f-1cfa8c021a12"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def qt  = new QueueType(context, testRunner, log)
id = testRunner.testCase.getPropertyValue("queueTypeId1").toInteger()
shortName=testRunner.testCase.testSuite.getPropertyValue("shortName1")
title=testRunner.testCase.testSuite.getPropertyValue("name1")
code = testRunner.testCase.testSuite.getPropertyValue("code1")

// собрать мапу по данным из запроса
def mapReq=[
                    id : id,
                    archived: true ,
                    title: title ,
                    code: code ,
                    shortName:shortName
            ]

//найти созданную в бд запись и собрать ее в мапу
dbMap=qt.getQueueTypeMap(id)
log.info dbMap
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="7a6ef091-4511-4e9e-b29b-3c0d8f362db7"><con:settings/><con:config><script>def qt  = new QueueType(context, testRunner, log)
qt.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>genderId</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="97808cac-a8c5-46e6-9c10-d003f0d51e5d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и архивирование записи с action=ADDED_ID357166" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="cb434f96-24c7-417d-a5f2-4954be2d1da8"><con:settings/><con:config><script>def qt  = new QueueType(context, testRunner, log)
qt.createQueueTypeForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="006c5e4c-4309-4331-b4d2-88012848260a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#queueTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#name2}</value>
								</values>
							</attribute>
							<attribute name="SHORT_NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#shortName2}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="d7a5e8fb-2d4e-4ca6-9c03-4195f3f4f6bb"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def qt  = new QueueType(context, testRunner, log)
id = testRunner.testCase.getPropertyValue("queueTypeId1").toInteger()
shortName=testRunner.testCase.testSuite.getPropertyValue("shortName2")
title=testRunner.testCase.testSuite.getPropertyValue("name2")
code = testRunner.testCase.testSuite.getPropertyValue("code2")

// собрать мапу по данным из запроса
def mapReq=[
                    id : id,
                    archived: true ,
                    title: title ,
                    code: code ,
                    shortName:shortName
            ]

//найти созданную в бд запись и собрать ее в мапу
dbMap=qt.getQueueTypeMap(id)
log.info dbMap
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="fecb4220-282f-47eb-9780-77b5ef9385ae"><con:settings/><con:config><script>def qt  = new QueueType(context, testRunner, log)
qt.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>genderId</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="fd47ed23-712a-4cf1-98bb-983df0472dad" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Изменение и вывод из архива записи с action=MODIFIED_ID357168" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="d5f0236c-4eca-46bc-9102-8258ca3b60b7"><con:settings/><con:config><script>def qt  = new QueueType(context, testRunner, log)
qt.createQueueTypeForPush(true)
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="be9323ac-8c51-485c-aacd-bb7bad7aec43"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="MODIFIED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#queueTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#name2}</value>
								</values>
							</attribute>
							<attribute name="SHORT_NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#shortName2}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="cb5eed26-e13d-4962-b948-3fb35ce2e140"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def qt  = new QueueType(context, testRunner, log)
id = testRunner.testCase.getPropertyValue("queueTypeId1").toInteger()
shortName=testRunner.testCase.testSuite.getPropertyValue("shortName2")
title=testRunner.testCase.testSuite.getPropertyValue("name2")
code = testRunner.testCase.testSuite.getPropertyValue("code2")

// собрать мапу по данным из запроса
def mapReq=[
                    id : id,
                    archived: false ,
                    title: title ,
                    code: code ,
                    shortName:shortName
            ]

//найти созданную в бд запись и собрать ее в мапу
dbMap=qt.getQueueTypeMap(id)
log.info dbMap
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="71d7f25a-9798-4b93-b51a-40206b7f3f9d"><con:settings/><con:config><script>def qt  = new QueueType(context, testRunner, log)
qt.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>genderId</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="189c6e2a-c031-411b-a72e-b6f1aa1d866d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Архивирование записи с action=DELETED_ID357170" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="0ac66b38-c7b0-4d27-81f8-19e74a2178f0"><con:settings/><con:config><script>def qt  = new QueueType(context, testRunner, log)
qt.createQueueTypeForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш" id="07282390-b471-4775-a592-bfd6c8863db5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="DELETED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#queueTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>1</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code2}</value>
								</values>
							</attribute>
							<attribute name="NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#name2}</value>
								</values>
							</attribute>
							<attribute name="SHORT_NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#shortName2}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Проверить создание записи в БД" id="8f32fcef-7e96-419b-8282-621b5388b777"><con:settings/><con:config><script>def mainScripts = new ScriptLibrary(context, testRunner, log)
def qt  = new QueueType(context, testRunner, log)
id = testRunner.testCase.getPropertyValue("queueTypeId1").toInteger()
shortName="кор назв"
title="Тип очереди автотест для пушей"
code = "code_auto"

// собрать мапу по данным из запроса
def mapReq=[
                    id : id,
                    archived: true ,
                    title: title ,
                    code: code ,
                    shortName:shortName
            ]

//найти созданную в бд запись и собрать ее в мапу
dbMap=qt.getQueueTypeMap(id)
log.info dbMap
// сравнить две мапы если запись создана
if(dbMap) mainScripts.utils().compareMaps(mapReq,dbMap )</script></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="bbc8f6a7-6571-4225-afbc-76269058caaf"><con:settings/><con:config><script>def qt  = new QueueType(context, testRunner, log)
qt.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>genderId</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="a03b6d42-1e69-4b90-8831-fc7f420f06a2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Создание записи без обязательных параметров_ID357172" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Подобрать id" id="a9bd7fdd-cf12-4c1e-a316-5ce8617c1c6c"><con:settings/><con:config><script>def qt  = new QueueType(context, testRunner, log)
qt.getQueueTypeIdForPush()
</script></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без global_id" id="095f043c-a711-48c1-995f-646eff7e905e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без global_id" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#queueTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#name1}</value>
								</values>
							</attribute>
							<attribute name="SHORT_NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#shortName1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains OK"><con:configuration><token>OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без ARCHIVED" id="6e969060-6898-4fa1-8d3b-d32d35349337"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без ARCHIVED" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#queueTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value></value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#name1}</value>
								</values>
							</attribute>
							<attribute name="SHORT_NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#shortName1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#queueTypeId1} у обязательного атрибута: archived передано пустое значение</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без code" id="a2eb5226-1bb0-4481-b202-c6a6134e717d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без code" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#queueTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value></value>
								</values>
							</attribute>
							<attribute name="NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#name1}</value>
								</values>
							</attribute>
							<attribute name="SHORT_NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#shortName1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#queueTypeId1} у обязательного атрибута: code передано пустое значение</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без name" id="dec26b31-d473-4e78-9726-db92422663eb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без name" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#queueTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="NAME" field_id="" type="">
								<values>
									<value></value>
								</values>
							</attribute>
							<attribute name="SHORT_NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#shortName1}</value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#queueTypeId1} у обязательного атрибута: title передано пустое значение</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Отправить пуш без shortName" id="c711476e-dd97-4736-b91e-ea095fcd62da"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>getSoap</con:interface><con:operation>get</con:operation><con:request name="Отправить пуш без shortName" id="44dac4b0-a98f-4280-9770-7a96b11e8829"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#PushWSDL}</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://emias.mos.ru/pushaccepterProduct/pushaccepterService/v1/types/">\r
   <soap:Header>\r
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">\r
         <wsse:UsernameToken>\r
            <wsse:Username>NSI2</wsse:Username>\r
         </wsse:UsernameToken>\r
      </wsse:Security>\r
   </soap:Header>\r
   <soap:Body>\r
      <typ:ChangeElement>\r
         <typ:in><![CDATA[<package xmlns:ns2="http://ehd.mos.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" count="1" id="10000437">
					<catalog name="">
						<categories>
							<category idHier="" nameHier="">${#TestSuite#categoryId}</category>
						</categories>
						<data action="ADDED">
							<attribute name="GLOBAL_ID" field_id="" type="">
								<values>
									<value>${#TestCase#queueTypeId1}</value>
								</values>
							</attribute>
							<attribute name="ARCHIVED" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
							<attribute name="CODE" field_id="" type="">
								<values>
									<value>${#TestSuite#code1}</value>
								</values>
							</attribute>
							<attribute name="NAME" field_id="" type="">
								<values>
									<value>${#TestSuite#name1}</value>
								</values>
							</attribute>
							<attribute name="SHORT_NAME" field_id="" type="">
								<values>
									<value></value>
								</values>
							</attribute>
							<attribute name="PROFILE_OF_PRIMARY_POSITION" field_id="" type="">
								<values>
									<value>0</value>
								</values>
							</attribute>
						</data>
					</catalog>
				</package>]]]]>><![CDATA[</typ:in>\r
      </typ:ChangeElement>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="a462e50b-6ca5-433b-84c0-35c0c680f8fd"/><con:assertion type="SOAP Fault Assertion" id="9452048c-9642-4d31-b9ad-b998eaa777fb" name="Not SOAP Fault"/><con:assertion type="Simple Contains" id="24765d63-1ae9-4589-ba5b-483898bcc083" name="Contains ERROR"><con:configuration><token>ERROR: В наборе данных с global_id: ${#TestCase#queueTypeId1} у обязательного атрибута: shortName передано пустое значение</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Удалить созданные данные" id="64b00c2b-7c26-4fb2-b3a4-4d0788833286"><con:settings/><con:config><script>def qt  = new QueueType(context, testRunner, log)
qt.clearAllByPropertyName()
</script></con:config></con:testStep><con:properties><con:property><con:name>code</con:name><con:value>code_autotest</con:value></con:property><con:property><con:name>title</con:name><con:value>title_autotest</con:value></con:property><con:property><con:name>genderId</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>n</con:name><con:value>106</con:value></con:property><con:property><con:name>categoryId</con:name><con:value>4334</con:value></con:property><con:property><con:name>code1</con:name><con:value>code1</con:value></con:property><con:property><con:name>code2</con:name><con:value>code2</con:value></con:property><con:property><con:name>name1</con:name><con:value>name1</con:value></con:property><con:property><con:name>shortName1</con:name><con:value>shortName1</con:value></con:property><con:property><con:name>shortName2</con:name><con:value>shortName2</con:value></con:property><con:property><con:name>name2</con:name><con:value>name2</con:value></con:property></con:properties></con:testSuite><con:properties><con:property><con:name>ArScheduleWSDL</con:name><con:value>http://arschedule.rir2.test.emias.mos.ru/api/ArSchedule?wsdl</con:value></con:property><con:property><con:name>bootstrapServers</con:name><con:value>10.2.172.24:9092</con:value></con:property><con:property><con:name>dbConnect</con:name><con:value>10.2.173.127:5432/rir2</con:value></con:property><con:property><con:name>dbLogin</con:name><con:value>rir2</con:value></con:property><con:property><con:name>dbPassword</con:name><con:value>rir2</con:value></con:property><con:property><con:name>dbType</con:name><con:value>postgre</con:value></con:property><con:property><con:name>db_rir2_con</con:name><con:value>10.2.173.127:5432/rir2</con:value></con:property><con:property><con:name>db_rir2_password</con:name><con:value>rir2</con:value></con:property><con:property><con:name>db_rir2_user</con:name><con:value>rir2</con:value></con:property><con:property><con:name>DNOncologyEpicrisis</con:name><con:value>DNOncologyEpicrisis</con:value></con:property><con:property><con:name>jobExecutionId</con:name><con:value>112740</con:value></con:property><con:property><con:name>journalWSDL</con:name><con:value>http://arschedule.rir2.test.emias.mos.ru/api/Journal?wsdl</con:value></con:property><con:property><con:name>PushWSDL</con:name><con:value>http://arschedule.rir2.test.emias.mos.ru/api/push</con:value></con:property><con:property><con:name>ResourcesWSDL</con:name><con:value>http://arschedule.rir2.test.emias.mos.ru/api/Resources</con:value></con:property><con:property><con:name>routeId</con:name><con:value>routeId</con:value></con:property><con:property><con:name>RouteWSDL</con:name><con:value>http://arschedule.rir2.test.emias.mos.ru/api/Route?wsdl</con:value></con:property><con:property><con:name>SarScheduleWSDL</con:name><con:value>http://arschedule.rir2.test.emias.mos.ru/api/SarSchedule?wsdl</con:value></con:property><con:property><con:name>ScheduleWSDL</con:name><con:value>http://arschedule.rir2.test.emias.mos.ru/api/Schedule?wsdl</con:value></con:property><con:property><con:name>securityUsername</con:name><con:value>KPI_APC_METHODIST/HAdiatullina</con:value></con:property><con:property><con:name>systemName</con:name><con:value>KPI_APC_METHODIST</con:value></con:property><con:property><con:name>SystemWSDL</con:name><con:value>http://arschedule.rir2.test.emias.mos.ru/api/System?wsdl</con:value></con:property><con:property><con:name>tableAG</con:name><con:value>AGE_GROUP</con:value></con:property><con:property><con:name>tableAO</con:name><con:value>ADDRESS_OBJECT</con:value></con:property><con:property><con:name>tableArRuleType</con:name><con:value>AR_SCHRULE_TYPE</con:value></con:property><con:property><con:name>tableDepNom</con:name><con:value>DEPARTMENT_NOM</con:value></con:property><con:property><con:name>tableDiagnosis</con:name><con:value>diagnosis</con:value></con:property><con:property><con:name>tableE</con:name><con:value>EQUIPMENT</con:value></con:property><con:property><con:name>tableEP</con:name><con:value>EQUIPMENT_PROFILE</con:value></con:property><con:property><con:name>tableET</con:name><con:value>EQUIPMENT_TREATMENT</con:value></con:property><con:property><con:name>tableJ</con:name><con:value>JOURNAL</con:value></con:property><con:property><con:name>tableJE</con:name><con:value>JOB_EXECUTION</con:value></con:property><con:property><con:name>tableJEPP</con:name><con:value>job_execution_position_profile</con:value></con:property><con:property><con:name>tableLoc</con:name><con:value>LOCATION</con:value></con:property><con:property><con:name>tableMF</con:name><con:value>MEDICAL_FACILITY</con:value></con:property><con:property><con:name>tableMFWH</con:name><con:value>MEDICAL_FACILITY_WORKHOURS</con:value></con:property><con:property><con:name>tableMO</con:name><con:value>MEDICAL_ORGANIZATION</con:value></con:property><con:property><con:name>tablePCalendar</con:name><con:value>PRODUCTION_CALENDAR</con:value></con:property><con:property><con:name>tablePosNom</con:name><con:value>POSITION_NOM</con:value></con:property><con:property><con:name>tablePosProf</con:name><con:value>position_profile</con:value></con:property><con:property><con:name>tablePosProfTreatment</con:name><con:value>position_profile_treatment</con:value></con:property><con:property><con:name>tableProdCal</con:name><con:value>production_calendar</con:value></con:property><con:property><con:name>tableRes</con:name><con:value>"RESOURCE"</con:value></con:property><con:property><con:name>tableResPar</con:name><con:value>resource_parameter</con:value></con:property><con:property><con:name>tableResSchedule</con:name><con:value>RESOURCE_SCHEDULE</con:value></con:property><con:property><con:name>tableResType</con:name><con:value>RESOURCE_TYPE</con:value></con:property><con:property><con:name>tableRoute</con:name><con:value>ROUTE</con:value></con:property><con:property><con:name>tableRouteDiag</con:name><con:value>ROUTE_DIAGNOSES</con:value></con:property><con:property><con:name>tableRouteDirMF</con:name><con:value>DIRECT_MEDICAL_FACILITIES</con:value></con:property><con:property><con:name>tableRouteDirMO</con:name><con:value>DIRECT_MEDICAL_ORGANIZATIONS</con:value></con:property><con:property><con:name>tableRouteDirPos</con:name><con:value>DIRECT_MEDICAL_POSITIONS</con:value></con:property><con:property><con:name>tableRouteJ</con:name><con:value>ROUTE_JOURNAL</con:value></con:property><con:property><con:name>tableRoutePosProf</con:name><con:value>route_position_profile</con:value></con:property><con:property><con:name>tableRouteRecMF</con:name><con:value>route_receiving_medical_facility</con:value></con:property><con:property><con:name>tableRouteRecMO</con:name><con:value>RECEIVE_MEDICAL_ORGANIZATIONS</con:value></con:property><con:property><con:name>tableRouteRefMO</con:name><con:value>route_referral_medical_organization</con:value></con:property><con:property><con:name>tableRouteT</con:name><con:value>ROUTE_TREATMENTS</con:value></con:property><con:property><con:name>tableRPCM</con:name><con:value>ROUTE_POSITION_CODE_MAPPING</con:value></con:property><con:property><con:name>tableRTLM</con:name><con:value>ROUTE_TREATMENT_LDP_MAPPING</con:value></con:property><con:property><con:name>tableSarRule</con:name><con:value>SAR_SCHRULE</con:value></con:property><con:property><con:name>tableSarRuleType</con:name><con:value>SAR_SCHRULE_TYPE</con:value></con:property><con:property><con:name>tableSchedule</con:name><con:value>SCHEDULE</con:value></con:property><con:property><con:name>tableSpec</con:name><con:value>SPECIALIZATION</con:value></con:property><con:property><con:name>tableSysLock</con:name><con:value>SYSTEM_LOCKS</con:value></con:property><con:property><con:name>tableSYSOP</con:name><con:value>SYSOP</con:value></con:property><con:property><con:name>tableT</con:name><con:value>TREATMENT</con:value></con:property><con:property><con:name>tableTC</con:name><con:value>TREATMENT_CATEGORY</con:value></con:property><con:property><con:name>topic</con:name><con:value>ScheduleChangeProcessingStatusTest</con:value></con:property><con:property><con:name>topicJobExecution</con:name><con:value>SVMRInformerJobExecution</con:value></con:property><con:property><con:name>topicJobExecution.rir2</con:name><con:value>SVMRInformerJobExecution.rir2</con:value></con:property><con:property><con:name>topicLocation</con:name><con:value>SVMRInformerLocation</con:value></con:property><con:property><con:name>topicLocation.APPOINTMENT3</con:name><con:value>SVMRInformerLocation.APPOINTMENT3</con:value></con:property><con:property><con:name>topicLocation.rir2</con:name><con:value>SVMRInformerLocation.rir2</con:value></con:property><con:property><con:name>topicLocationEquipment</con:name><con:value>SVMRInformerLocationEquipment</con:value></con:property><con:property><con:name>topicLocationEquipment.rir2</con:name><con:value>SVMRInformerLocationEquipment.rir2</con:value></con:property><con:property><con:name>topicMF</con:name><con:value>MUMsg</con:value></con:property><con:property><con:name>topicMF.APPOINTMENT3</con:name><con:value>MUMsg.APPOINTMENT3</con:value></con:property><con:property><con:name>topicMF.rir2</con:name><con:value>MUMsg.rir2</con:value></con:property><con:property><con:name>topicMO</con:name><con:value>MOMsg</con:value></con:property><con:property><con:name>topicMO.APPOINTMENT3</con:name><con:value>MOMsg.APPOINTMENT3</con:value></con:property><con:property><con:name>topicMO.rir2</con:name><con:value>MOMsg.rir2</con:value></con:property><con:property><con:name>topicResource</con:name><con:value>ResourceChange</con:value></con:property><con:property><con:name>topicRoute</con:name><con:value>Rir2Routes</con:value></con:property><con:property><con:name>topicScheduleChange</con:name><con:value>ScheduleChange</con:value></con:property><con:property><con:name>topicScheduleChangeProcessingStatus</con:name><con:value>ScheduleChangeProcessingStatus</con:value></con:property><con:property><con:name>topicScheduleProcessing</con:name><con:value>ScheduleChangeProcessingStatus</con:value></con:property><con:property><con:name>topicScheduleProcessingTest</con:name><con:value>ScheduleChangeProcessingStatusTest</con:value></con:property><con:property><con:name>userName</con:name><con:value>HAdiatullina</con:value></con:property><con:property><con:name>userRoleId</con:name><con:value>7014</con:value></con:property><con:property><con:name>tableQT</con:name><con:value>queue_type</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>